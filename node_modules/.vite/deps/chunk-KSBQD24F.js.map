{
  "version": 3,
  "sources": ["../../@arcgis/core/geometry/support/meshUtils/projection.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport r from\"../../../core/Logger.js\";import{b as e,i as t,f as o,t as n}from\"../../../chunks/mat3.js\";import{c as f}from\"../../../chunks/mat3f64.js\";import{c as a}from\"../../../chunks/mat4f64.js\";import{t as s,n as c}from\"../../../chunks/vec3.js\";import{c as i}from\"../../../chunks/vec3f64.js\";import{projectBuffer as m,computeTranslationToOriginAndRotation as p}from\"../../projection.js\";import{getSphericalPCPF as u}from\"../../spatialReferenceEllipsoidUtils.js\";import{isCGCS2000 as y,isMars as P,isMoon as l}from\"../spatialReferenceUtils.js\";import{y2lat as T}from\"../webMercatorUtils.js\";import{BufferViewVec3f as F,BufferViewVec3f64 as C}from\"../buffer/BufferView.js\";import{a as A,n as d}from\"../../../chunks/vec32.js\";const g=r.getLogger(\"esri.geometry.support.meshUtils.normalProjection\");function _(r,e,t,o,n){return k(o)?(V(U.TO_PCPF,F.fromTypedArray(r),C.fromTypedArray(e),C.fromTypedArray(t),o,F.fromTypedArray(n)),n):(g.error(\"Cannot convert spatial reference to PCPF\"),n)}function j(r,e,t,o,n){return k(o)?(V(U.FROM_PCPF,F.fromTypedArray(r),C.fromTypedArray(e),C.fromTypedArray(t),o,F.fromTypedArray(n)),n):(g.error(\"Cannot convert to spatial reference from PCPF\"),n)}function h(r,e,t){return m(r,e,0,t,u(e),0,r.length/3),t}function E(r,e,t){return m(r,u(t),0,e,t,0,r.length/3),e}function M(r,o,n){return e(N,n),A(o,r,N),t(N)||d(o,o),o}function O(r,o,n){if(e(N,n),A(o,r,N,4),t(N)||d(o,o,4),r!==o)for(let e=3;e<r.length;e+=4)o[e]=r[e];return o}function R(r,e,t,o,n){if(!k(o))return g.error(\"Cannot convert spatial reference to PCPF\"),n;V(U.TO_PCPF,F.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),C.fromTypedArray(e),C.fromTypedArray(t),o,F.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function v(r,e,t,o,n){if(!k(o))return g.error(\"Cannot convert to spatial reference from PCPF\"),n;V(U.FROM_PCPF,F.fromTypedArray(r,16),C.fromTypedArray(e),C.fromTypedArray(t),o,F.fromTypedArray(n,16));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function V(r,e,t,f,a,i){if(!e)return;const m=t.count,y=u(a);if(b(a))for(let c=0;c<m;c++)f.getVec(c,B),e.getVec(c,S),p(y,B,w,y),o(N,w),r===U.FROM_PCPF&&n(N,N),s(S,S,N),i.setVec(c,S);else for(let u=0;u<m;u++){f.getVec(u,B),e.getVec(u,S),p(y,B,w,y),o(N,w);const a=T(t.get(u,1));let m=Math.cos(a);r===U.TO_PCPF&&(m=1/m),N[0]*=m,N[1]*=m,N[2]*=m,N[3]*=m,N[4]*=m,N[5]*=m,r===U.FROM_PCPF&&n(N,N),s(S,S,N),c(S,S),i.setVec(u,S)}return i}function k(r){return b(r)||L(r)}function b(r){return r.isWGS84||y(r)||P(r)||l(r)}function L(r){return r.isWebMercator}var U;!function(r){r[r.TO_PCPF=0]=\"TO_PCPF\",r[r.FROM_PCPF=1]=\"FROM_PCPF\"}(U||(U={}));const B=i(),S=i(),w=a(),N=f();export{E as projectFromPCPF,j as projectNormalFromPCPF,_ as projectNormalToPCPF,v as projectTangentFromPCPF,R as projectTangentToPCPF,h as projectToPCPF,M as transformNormal,O as transformTangent};\n"],
  "mappings": "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",
  "names": ["g", "e", "o", "n", "T", "s", "f", "a", "i", "c", "B", "S", "m"]
}
