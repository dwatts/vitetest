{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightConfiguration.js", "../../@arcgis/core/views/3d/analysis/LineOfSightAnalysisResult.js", "../../@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightComputation.js", "../../@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightIntersectionResult.js", "../../@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightRayIntersector.js", "../../@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightController.js", "../../@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightToolConfiguration.js", "../../@arcgis/core/views/3d/interactive/editingTools/manipulatorUtils.js", "../../@arcgis/core/views/3d/analysis/LineOfSight/lineOfSightToolUtils.js", "../../@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightTool.js", "../../@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightVisualElement.js", "../../@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightVisualization.js", "../../@arcgis/core/views/3d/analysis/LineOfSightAnalysisView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Color.js\";import r from\"../../../../core/Accessor.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends r{constructor(o){super(o),this.innerWidth=2,this.outerWidth=8,this.visibleInnerColor=new e([3,252,111,1]),this.visibleOuterColor=new e([3,252,111,.15]),this.occludedInnerColor=new e([252,3,69,1]),this.occludedOuterColor=new e([252,3,69,.1]),this.undefinedInnerColor=new e([255,255,255,1]),this.undefinedOuterColor=new e([127,127,127,.2])}};o([t({type:Number})],s.prototype,\"innerWidth\",void 0),o([t({type:Number})],s.prototype,\"outerWidth\",void 0),o([t({type:e})],s.prototype,\"visibleInnerColor\",void 0),o([t({type:e})],s.prototype,\"visibleOuterColor\",void 0),o([t({type:e})],s.prototype,\"occludedInnerColor\",void 0),o([t({type:e})],s.prototype,\"occludedOuterColor\",void 0),o([t({type:e})],s.prototype,\"undefinedInnerColor\",void 0),o([t({type:e})],s.prototype,\"undefinedOuterColor\",void 0),s=o([i(\"esri.views.3d.analysis.LineOfSight.LineOfSightConfiguration\")],s);export{s as LineOfSightConfiguration};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{constructor(o){super(o),this.target=null,this.intersectedGraphic=null,this.intersectedLocation=null,this.elevationAlignedTargetLocation=null,this.visible=void 0}};o([e()],s.prototype,\"target\",void 0),o([e()],s.prototype,\"intersectedGraphic\",void 0),o([e()],s.prototype,\"intersectedLocation\",void 0),o([e()],s.prototype,\"elevationAlignedTargetLocation\",void 0),o([e({type:Boolean})],s.prototype,\"visible\",void 0),s=o([r(\"esri.views.3d.analysis.LineOfSightAnalysisResult\")],s);export{s as LineOfSightAnalysisResult};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../core/Accessor.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as s}from\"../../../../chunks/vec3f64.js\";let i=class extends o{constructor(t){super(t),this.elevationAlignedTargetLocation=null,this.inputPoints={isValid:!1,observer:s(),observerSurfaceNormal:null,observerFeatureId:null,target:s(),targetSurfaceNormal:null,targetFeatureId:null,observerAdjusted:s(),targetAdjusted:s()},this.computationResult={start:s(),end:s(),intersection:s(),isValid:!1,isTargetVisible:!1},this.result=null}notifyResultChanged(){this.notifyChange(\"computationResult\")}notifyInputPointsChanged(){this.notifyChange(\"inputPoints\")}};t([e()],i.prototype,\"target\",void 0),t([e()],i.prototype,\"elevationAlignedTargetLocation\",void 0),t([e()],i.prototype,\"inputPoints\",void 0),t([e()],i.prototype,\"computationResult\",void 0),t([e()],i.prototype,\"result\",void 0),i=t([r(\"esri.views.3d.analysis.LineOfSight.LineOfSightComputation\")],i);export{i as LineOfSightComputation};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../core/Accessor.js\";import{equals as t}from\"../../../../core/arrayUtils.js\";import{clone as s}from\"../../../../core/lang.js\";import{equalsMaybe as e}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{F as n}from\"../../../../chunks/vec3.js\";import{a as c}from\"../../../../chunks/vec3f64.js\";import{equals as a}from\"../../../../geometry/support/ray.js\";var m;let y=m=class extends o{constructor(r){super(r)}clone(){return new m({type:this.type,id:s(this.id),mapPoint:s(this.mapPoint),renderPoint:c(this.renderPoint),normal:s(this.normal),ray:s(this.ray),graphic:this.graphic})}equals(r){return this.type===r.type&&this.id===r.id&&e(this.mapPoint,r.mapPoint)&&n(this.renderPoint,r.renderPoint)&&t(this.normal,r.normal)&&a(this.ray,r.ray)&&this.graphic===r.graphic}};r([i()],y.prototype,\"type\",void 0),r([i({constructOnly:!0})],y.prototype,\"id\",void 0),r([i({constructOnly:!0})],y.prototype,\"mapPoint\",void 0),r([i({constructOnly:!0})],y.prototype,\"renderPoint\",void 0),r([i({constructOnly:!0})],y.prototype,\"normal\",void 0),r([i({constructOnly:!0})],y.prototype,\"graphic\",void 0),r([i({constructOnly:!0})],y.prototype,\"ray\",void 0),y=m=r([p(\"esri.views.3d.analysis.LineOfSight.LineOfSightIntersectionResult\")],y);export{y as LineOfSightIntersectionResult};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{screenPointObjectToArray as t}from\"../../../../core/screenUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as i,n,g as c,a}from\"../../../../chunks/vec3.js\";import{a as p,c as l}from\"../../../../chunks/vec3f64.js\";import{create as m,copy as u,fromPoints as d}from\"../../../../geometry/support/ray.js\";import{sv2d as h}from\"../../../../geometry/support/vectorStacks.js\";import{getObjectId as f}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{LineOfSightIntersectionResult as y}from\"./LineOfSightIntersectionResult.js\";import{isI3sIntersectorResult as g}from\"../../layers/i3s/Intersector.js\";import{fromScreen as I}from\"../../support/geometryUtils/ray.js\";import{isTerrainIntersectorResult as j}from\"../../terrain/Intersector.js\";import{newIntersector as v}from\"../../webgl-engine/lib/Intersector.js\";import{StoreResults as w,IntersectorType as b}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as P}from\"../../webgl-engine/lib/intersectorUtilsConversions.js\";let R=class extends r{constructor(e){super(e),this._terrainIntersectionOptionsLayerUids=new Set([\"terrain\"])}initialize(){this.intersector=v(this.view.state.viewingMode),this.intersector.options.hud=!1,this.intersector.options.store=w.MIN}getScreenPointIntersection(e){const r=t(e,h.get()),s=I(this.view.state.camera,r,L);return this._getRayIntersection(s)}_getRayIntersection(e,r){if(null==e||null==this.view.sceneIntersectionHelper)return null;this.intersector.options.store=w.MIN,this.view.sceneIntersectionHelper.intersectToolIntersectorRay(e,this.intersector,r);const t=this.intersector.results.min,s=l();if(!t.getIntersectionPoint(s))return null;const o=this.view.renderCoordsHelper.fromRenderCoords(s,this.view.spatialReference),i=p(t.normal);if(g(t))return new y({type:b.OBJECT,id:`${t.target.layerUid}/${t.target.nodeIndex}/${t.target.componentIndex}`,mapPoint:o,renderPoint:s,normal:i,ray:u(e),graphic:null});if(j(t))return new y({type:b.TERRAIN,id:t.target.lij.slice(),mapPoint:o,renderPoint:s,normal:i,ray:u(e),graphic:null});const n=P(t,this.view);if(null!=n){const r=n.layer,t=n.sourceLayer;let c;if(t)if(\"scene\"===t.type)c=f(n,t.objectIdField);else c=n.uid;else c=n.uid;return new y({type:b.OBJECT,id:`${r?.uid}/${c}`,mapPoint:o,renderPoint:s,normal:i,ray:u(e),graphic:n})}return null}updateFromGroundIntersection(e,r,t){const s=S,o=U,l=O,m=C;i(o,e),this.view.renderCoordsHelper.worldUpAtPosition(o,l),n(l,l);const u=this.view.basemapTerrain.visibleElevationBounds,h=u?Math.abs(u.max-u.min):100,f=r>=0?1:-1;c(m,l,f*(h+Math.abs(r))),a(s,o,m),d(s,o,L);const y=this._getRayIntersection(L,{include:this._terrainIntersectionOptionsLayerUids});return null!=y?(c(m,l,f*r),a(t,y.renderPoint,m),p(y.normal)):(i(t,e),null)}};e([s()],R.prototype,\"view\",void 0),e([s()],R.prototype,\"intersector\",void 0),R=e([o(\"esri.views.3d.analysis.LineOfSight.LineOfSightRayIntersector\")],R);const S=l(),U=l(),O=l(),C=l(),L=m();export{R as LineOfSightRayIntersector};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import{getFeatureId as t}from\"../../../../analysis/featureReferenceUtils.js\";import n from\"../../../../core/Accessor.js\";import{createTask as o}from\"../../../../core/asyncUtils.js\";import i from\"../../../../core/Evented.js\";import r from\"../../../../core/Handles.js\";import{handlesGroup as s,makeHandle as a}from\"../../../../core/handleUtils.js\";import l from\"../../../../core/Logger.js\";import{abortMaybe as u}from\"../../../../core/maybe.js\";import{ignoreAbortErrors as c}from\"../../../../core/promiseUtils.js\";import{initial as d}from\"../../../../core/reactiveUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as h}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as g,i as v,b as m,n as f,g as _,a as b,j as y,w as C}from\"../../../../chunks/vec3.js\";import{c as I}from\"../../../../chunks/vec3f64.js\";import{WatchUpdatingTracking as T}from\"../../../../core/support/WatchUpdatingTracking.js\";import{projectOrLoad as P,projectBoundingRect as O}from\"../../../../geometry/projection.js\";import{empty as S,containsPointObject as j,intersectsSegment as w}from\"../../../../geometry/support/aaBoundingRect.js\";import{fromPoints as R,create as A}from\"../../../../geometry/support/ray.js\";import{zValueInAbsoluteHeightMode as E}from\"../../../../support/elevationInfoUtils.js\";import{LineOfSightAnalysisResult as H}from\"../LineOfSightAnalysisResult.js\";import{LineOfSightComputation as F}from\"./LineOfSightComputation.js\";import{LineOfSightRayIntersector as L}from\"./LineOfSightRayIntersector.js\";import{logFailedGeometryProjectionError as V}from\"../support/projectionUtils.js\";import{StoreResults as D}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as x,hasLod as N,getIntersectedFeatureBSRadius as k}from\"../../webgl-engine/lib/intersectorUtilsConversions.js\";import{ImmediateTask as G,TaskPriority as z}from\"../../../support/Scheduler.js\";import U from\"../../../../geometry/Point.js\";const M=\"esri.views.3d.analysis.LineOfSight.LineOfSightController\",Z=l.getLogger(M);let q=class extends(i.EventedMixin(n)){constructor(e){super(e),this.updateOnCameraChange=!0,this._observerGroundOffsetRenderSpace=0,this._effectiveObserverElevationMode=\"absolute-height\",this._observerFeatureId=null,this._updatingHandles=new T,this._frameTask=G,this._handles=new r,this._computationHandles=new r,this._externalObserverUpdate=!0}initialize(){const e=this.view.resourceController?.scheduler;this._frameTask=e?e.registerTask(z.LINE_OF_SIGHT_TOOL):G,this._intersector=new L({view:this.view}),this._handles.add([this._connectObserver(),this._connectComputations(),this._connectTargets()])}destroy(){this._handles.destroy(),this._computationHandles.destroy(),this._computations.removeAll(),this._updatingHandles.destroy()}get updating(){return this._frameTask.updating||this._updatingHandles.updating}get priority(){return this._frameTask.priority}set priority(e){this._frameTask.priority=e}get _computations(){return this.analysisViewData.computations}get _elevationAlignedObserverPositionRenderSpace(){return this.analysisViewData.observerEngineLocation}set _elevationAlignedObserverPositionRenderSpace(e){this.analysisViewData.observerEngineLocation=e}get _screenPixelSize(){return this.view.state.camera.computeScreenPixelSizeAt(this._elevationAlignedObserverPositionRenderSpace)}_computeResult(e){const t=e.computation,{inputPoints:n,computationResult:o}=t,{observerAdjusted:i,targetAdjusted:r}=n,{start:s,end:a}=o;g(s,i),g(a,r);this._canCompute(t)?this._computeIntersection(e):this._interpolateIntersection(e),t.notifyResultChanged(),this.emit(\"result-changed\",{target:e.computation.target,result:t.result})}_updateAdjustedPointsFromFeatures(e){const n=this.view,{sceneIntersectionHelper:o}=n,{inputPoints:i}=e,{observerAdjusted:r,observerFeatureId:s,targetFeatureId:a,targetAdjusted:l}=i;if(null==s&&null==a)return;const u=v(r,l),c=this._intersector.intersector,d=R(i.observer,i.target,J);c.options.store=D.ALL,o.intersectToolIntersectorRay(d,c);let p=null,h=null,g=null,m=null;for(const v of c.results.all){const e=x(v,this.view);if(null==e||null==v.distanceInRenderSpace)continue;const o=t(e);null!=o&&(null!=s&&o===s&&(null==p&&(p=this._getFeatureDistanceThreshold(v,n,u)),v.distanceInRenderSpace<p&&(g=v)),null!=a&&o===a&&(null==h&&(h=this._getFeatureDistanceThreshold(v,n,u)),null==m&&v.distanceInRenderSpace<u&&u-v.distanceInRenderSpace<h&&(m=v)))}null!=g&&g.getIntersectionPoint(r)&&(i.observerSurfaceNormal=g.getTransformedNormal(I())),null!=m&&m.getIntersectionPoint(l)&&(i.targetSurfaceNormal=m.getTransformedNormal(I()))}_getFeatureDistanceThreshold(e,t,n){if(N(e)){const o=k(e,t);if(null!=o)return Math.min(o*Q,n)}return 1e-5*n}_adjustStartEndPositions(e){const t=this._screenPixelSize,n=this.view,{inputPoints:o}=e,{observer:i,observerSurfaceNormal:r,target:s,targetSurfaceNormal:a,observerAdjusted:l,targetAdjusted:u}=o,c=W;g(l,i),g(u,s),this._updateAdjustedPointsFromFeatures(e),null!=r?g(c,r):m(c,u,l);const d=t;f(c,c),_(c,c,Math.min(d,1)),b(l,l,c),null!=a?g(c,a):m(c,l,u);const p=n.state.camera.computeScreenPixelSizeAt(u);f(c,c),_(c,c,Math.min(p,1)),b(u,u,c)}_computeIntersection({computation:e,interpolationInfo:t}){const{view:n}=this,{sceneIntersectionHelper:o,renderCoordsHelper:i}=n;if(null==o)return;const r=this._intersector.intersector,{computationResult:s,inputPoints:a}=e,{observer:l,target:u}=a,{start:c,end:d}=s,p=R(c,d,J);r.options.store=D.MIN,o.intersectToolIntersectorRay(p,r);const h=r.results.min,v=s.intersection,m=W;let f=!0;if(null!=h&&h.getIntersectionPoint(v)){g(t.originalIntersection,v),g(t.originalObserver,c),g(t.originalTarget,d),i.fromRenderCoords(v,m,n.spatialReference);const e=1-y(d,u)/y(c,u);f=y(l,v)>=e*y(l,u)}const _=new U(m,n.spatialReference);{const{result:t,target:o}=e;null!=t?(t.target=o,t.intersectedGraphic=f?null:x(h,n),t.intersectedLocation=f?null:_,t.visible=f):e.result=new H({target:o,elevationAlignedTargetLocation:e.elevationAlignedTargetLocation,intersectedGraphic:f?null:x(h,n),intersectedLocation:f?null:_,visible:f})}s.isValid=a.isValid=!0,s.isTargetVisible=f}_interpolateIntersection({computation:e,interpolationInfo:t}){const{computationResult:n,inputPoints:o}=e,{start:i,end:r,intersection:s}=n,{originalIntersection:a,originalObserver:l,originalTarget:u}=t;if(g(s,a),o.isValid){const e=W,t=y(l,a)/y(l,u);C(e,i,l),_(e,e,1-t),b(s,s,e),C(e,r,u),_(e,e,t),b(s,s,e),n.isValid=!0}else e.result=null,n.isValid=!1,n.isTargetVisible=!1}_canCompute(e){const t=this.analysisViewData.elevationAlignedObserver,n=this.view.frustum;if(null==t||null==e.elevationAlignedTargetLocation||null==n)return!1;const{observerAdjusted:o,targetAdjusted:i}=e.inputPoints,r=n.intersectsPoint(o),s=n.intersectsPoint(i);return r&&s}_onObserverPositionChange(e,n,o,i,r){if(this._externalObserverUpdate=r,null==e)return this.analysisViewData.elevationAlignedObserver=null,void(this._observerFeatureId=null);if(null==n)return V(this.analysis,e.spatialReference,Z),void(this.analysisViewData.elevationAlignedObserver=null);const s=this._getEffectiveElevationInfo(n,o),{absoluteZ:a,elevation:l}=E(n.x,n.y,n.z,this.view.spatialReference,this.view,s),u=n.clone();u.z=a,this._effectiveObserverElevationMode=s.mode,this.analysisViewData.elevationAlignedObserver=u;const c=I();this.view.renderCoordsHelper.toRenderCoords(u,c),this._elevationAlignedObserverPositionRenderSpace=c,this._observerGroundOffsetRenderSpace=a-l,this._observerFeatureId=t(i),this.priority=z.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onObserverRenderSpacePositionChangeForComputation(e,t,n,o,i){const{inputPoints:r}=e;switch(g(r.observer,t),r.observerFeatureId=i,r.observerSurfaceNormal=null,o){case\"on-the-ground\":case\"relative-to-ground\":{const e=this._intersector.updateFromGroundIntersection(r.observer,n,r.observer);null==r.observerFeatureId&&(r.observerSurfaceNormal=e)}}this._adjustStartEndPositions(e),e.notifyInputPointsChanged(),this.priority=z.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onTargetPositionChange(e,n,o,i,r,s=!0){const a=e.inputPoints;if(s&&(a.isValid=!1),null==o)return null!=n&&V(this.analysis,n.spatialReference,Z),e.elevationAlignedTargetLocation=null,void e.notifyInputPointsChanged();const l=this._getEffectiveElevationInfo(o,i),{absoluteZ:u,elevation:c}=E(o.x,o.y,o.z,this.view.spatialReference,this.view,l),d=o.clone();switch(d.z=u,e.elevationAlignedTargetLocation=d,this.view.renderCoordsHelper.toRenderCoords(e.elevationAlignedTargetLocation,a.target),a.targetFeatureId=t(r),a.targetSurfaceNormal=null,l.mode){case\"on-the-ground\":case\"relative-to-ground\":{const e=this._intersector.updateFromGroundIntersection(a.target,u-c,a.target);null==a.targetFeatureId&&(a.targetSurfaceNormal=e)}}this._adjustStartEndPositions(e),e.notifyInputPointsChanged(),this.priority=z.LINE_OF_SIGHT_TOOL_INTERACTIVE}_connectComputationToTarget(e){return s([this._updatingHandles.add((()=>({computation:e,targetPosition:e.target.position,targetElevationInfo:e.target.elevationInfo,targetFeatureInfo:e.target.feature,projectedTargetPosition:P(e.target.position,this.view.spatialReference)})),(({computation:e,targetPosition:t,targetElevationInfo:n,targetFeatureInfo:o,projectedTargetPosition:i})=>{null==i.pending?this._onTargetPositionChange(e,t,i.geometry,n,o):this._updatingHandles.addPromise(i.pending)}),d)])}_connectComputationToObserver(e){return this._updatingHandles.add((()=>({computation:e,observer:this.analysisViewData.elevationAlignedObserver})),(({computation:e})=>{this._externalObserverUpdate&&(e.inputPoints.isValid=!1,e.notifyInputPointsChanged())}),d)}_connectComputationToRenderSpaceObserver(e){return this._updatingHandles.add((()=>({computation:e,observer:this._elevationAlignedObserverPositionRenderSpace,observerGroundOffset:this._observerGroundOffsetRenderSpace,observerElevationMode:this._effectiveObserverElevationMode,observerFeatureId:this._observerFeatureId})),(({computation:e,observer:t,observerGroundOffset:n,observerElevationMode:o,observerFeatureId:i})=>{this._onObserverRenderSpacePositionChangeForComputation(e,t,n,o,i)}),d)}_connectComputationToCamera(e){return this._updatingHandles.add((()=>({camera:this.view.state.camera,isDirty:this._isCameraDirty})),(({isDirty:t})=>{!this.updateOnCameraChange||e.inputPoints.isValid&&!t||e.notifyInputPointsChanged()}))}_connectComputationToSlicePlane(e){return this._updatingHandles.add((()=>this.view.slicePlane),(()=>{e.inputPoints.isValid=!1,e.notifyInputPointsChanged()}))}_connectComputationToElevation(e){const t=(n,o)=>{const i=this.analysis.observer,r=e.target;let s=null,a=null,l=null,u=null,c=null,d=null;if(null!=i&&null!=i.position){const e=P(i.position,this.view.spatialReference);if(null!=e.pending)return this._updatingHandles.addPromise(e.pending),void e.pending.finally((()=>t(n,o)));s=e.geometry,a=i.elevationInfo,l=i.feature}if(null!=r.position){const e=P(r.position,this.view.spatialReference);if(null!=e.pending)return this._updatingHandles.addPromise(e.pending),void e.pending.finally((()=>t(n,o)));u=e.geometry,c=r.elevationInfo,d=r.feature}null==s&&null==u||(O(n,o,K,this.view.spatialReference),null!=s&&j(K,s)&&this._onObserverPositionChange(null!=i?i.position:null,s,a,l,!1),null!=u&&j(K,u)&&this._onTargetPositionChange(e,r.position,u,c,d,!1),null!=s&&null!=u&&w(K,s,u)&&e.notifyInputPointsChanged())};return this.view.elevationProvider.on(\"elevation-change\",(e=>t(e.extent,e.spatialReference)))}_connectComputationToTask(e){let t=null;const n={computation:e,interpolationInfo:{originalIntersection:I(),originalObserver:I(),originalTarget:I()}};return s([this._updatingHandles.add((()=>e.inputPoints),(()=>{t=u(t),t=o((async e=>{await c(this._frameTask.schedule((()=>this._computeResult(n)),e))}))}),{initial:!0,equals:()=>!1}),a((()=>t=u(t)))])}_connectComputation(e){const t=this._computationHandles;t.has(e)||t.add([this._connectComputationToTarget(e),this._connectComputationToObserver(e),this._connectComputationToRenderSpaceObserver(e),this._connectComputationToCamera(e),this._connectComputationToSlicePlane(e),this._connectComputationToElevation(e),this._connectComputationToTask(e)],e)}_disconnectComputation(e){this._computationHandles.remove(e)}_onComputationCollectionChange({added:e,removed:t}){for(const n of t)this._disconnectComputation(n);for(const n of e)this._connectComputation(n)}_onTargetCollectionChange({added:e,removed:t}){for(const n of t)this._removeTarget(n);for(const n of e)this._addTarget(n)}_onCursorTargetChange(e,t){null!=t&&this._removeTarget(t),null!=e&&this._addTarget(e)}_addTarget(e){this._computations.some((t=>t.target===e))||this._computations.add(new F({target:e}))}_removeTarget(e){const t=this._computations.findIndex((t=>t.target===e));this._computations.removeAt(t)}_connectObserver(){return s([this._updatingHandles.add((()=>({observerPosition:null!=this.analysis.observer?this.analysis.observer.position:null,projectedObserverPosition:P(null!=this.analysis.observer?this.analysis.observer.position:null,this.view.spatialReference),observerElevationInfo:null!=this.analysis.observer?this.analysis.observer.elevationInfo:null,observerFeatureInfo:null!=this.analysis.observer?this.analysis.observer.feature:null})),(({observerPosition:e,projectedObserverPosition:t,observerElevationInfo:n,observerFeatureInfo:o})=>{null==t.pending?this._onObserverPositionChange(e,t.geometry,n,o,!0):this._updatingHandles.addPromise(t.pending)}),d)])}_connectComputations(){return this._updatingHandles.addOnCollectionChange((()=>this._computations),(e=>this._onComputationCollectionChange(e)),{initial:!0,final:!0})}_connectTargets(){return s([this._updatingHandles.addOnCollectionChange((()=>this.analysis.targets),(e=>this._onTargetCollectionChange(e)),{initial:!0,final:!0}),this._updatingHandles.add((()=>this.analysisViewData.cursorTarget),((e,t)=>{this._onCursorTargetChange(e,t)}))])}get _isCameraDirty(){const e=this.analysisViewData.elevationAlignedObserver,{view:t}=this,{renderCoordsHelper:n}=t;if(null==e||null==n)return!1;const o=W;n.toRenderCoords(e,o);const i=t.state.camera.computeScreenPixelSizeAt(o);return Math.abs((i-this._screenPixelSize)/this._screenPixelSize)>B}_getEffectiveElevationInfo(e,t){return e.hasZ?t??{mode:\"absolute-height\",offset:0}:{mode:\"on-the-ground\",offset:0}}};e([p({constructOnly:!0})],q.prototype,\"analysis\",void 0),e([p({constructOnly:!0})],q.prototype,\"analysisViewData\",void 0),e([p({constructOnly:!0})],q.prototype,\"view\",void 0),e([p()],q.prototype,\"updating\",null),e([p()],q.prototype,\"priority\",null),e([p()],q.prototype,\"updateOnCameraChange\",void 0),e([p()],q.prototype,\"_computations\",null),e([p()],q.prototype,\"_elevationAlignedObserverPositionRenderSpace\",null),e([p()],q.prototype,\"_observerGroundOffsetRenderSpace\",void 0),e([p()],q.prototype,\"_effectiveObserverElevationMode\",void 0),e([p()],q.prototype,\"_observerFeatureId\",void 0),e([p()],q.prototype,\"_screenPixelSize\",null),e([p({readOnly:!0})],q.prototype,\"_updatingHandles\",void 0),e([p()],q.prototype,\"_frameTask\",void 0),e([p()],q.prototype,\"_isCameraDirty\",null),q=e([h(M)],q);const B=.1,W=I(),J=A(),K=S(),Q=.05;export{q as LineOfSightController};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Color.js\";import t from\"../../../../core/Accessor.js\";import{getAccentColor as r,getContrastColor as i,getOpacity as s}from\"../../../../core/analysisThemeUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";let l=class extends t{constructor(o){super(o),this.enabled=!0,this.glowColor=r(),this.glowWidth=8,this.innerColor=i(),this.innerWidth=.75,this.globalAlpha=s(.75)}};o([p({type:Boolean})],l.prototype,\"enabled\",void 0),o([p({type:e})],l.prototype,\"glowColor\",void 0),o([p({type:Number})],l.prototype,\"glowWidth\",void 0),o([p({type:e})],l.prototype,\"innerColor\",void 0),o([p({type:Number})],l.prototype,\"innerWidth\",void 0),o([p({type:Number})],l.prototype,\"globalAlpha\",void 0),l=o([n(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightLaserLineConfiguration\")],l);let d=class extends t{constructor(o){super(o),this.size=.5,this.color=r(.75)}};o([p({type:Number})],d.prototype,\"size\",void 0),o([p({type:e})],d.prototype,\"color\",void 0),d=o([n(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightObserverConfiguration\")],d);let y=class extends t{constructor(o){super(o),this.size=.5,this.visibleColor=new e([3,252,111,.75]),this.occludedColor=new e([252,3,69,.75]),this.undefinedColor=new e([127,127,127,.75])}};o([p({type:Number})],y.prototype,\"size\",void 0),o([p({type:e})],y.prototype,\"visibleColor\",void 0),o([p({type:e})],y.prototype,\"occludedColor\",void 0),o([p({type:e})],y.prototype,\"undefinedColor\",void 0),y=o([n(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightTargetConfiguration\")],y);class c extends t{constructor(o){super(o),this.innerWidth=2,this.outerWidth=8,this.visibleInnerColor=new e([3,252,111,1]),this.visibleOuterColor=new e([3,252,111,.15]),this.occludedInnerColor=new e([252,3,69,1]),this.occludedOuterColor=new e([252,3,69,.1]),this.undefinedInnerColor=new e([255,255,255,1]),this.undefinedOuterColor=new e([127,127,127,.2])}}o([p({type:Number})],c.prototype,\"innerWidth\",void 0),o([p({type:Number})],c.prototype,\"outerWidth\",void 0),o([p({type:e})],c.prototype,\"visibleInnerColor\",void 0),o([p({type:e})],c.prototype,\"visibleOuterColor\",void 0),o([p({type:e})],c.prototype,\"occludedInnerColor\",void 0),o([p({type:e})],c.prototype,\"occludedOuterColor\",void 0),o([p({type:e})],c.prototype,\"undefinedInnerColor\",void 0),o([p({type:e})],c.prototype,\"undefinedOuterColor\",void 0);let h=class extends t{constructor(o){super(o),this.laserLine=new l,this.observer=new d,this.target=new y,this.lineOfSight=new c}};o([p({type:l})],h.prototype,\"laserLine\",void 0),o([p({type:d})],h.prototype,\"observer\",void 0),o([p({type:y})],h.prototype,\"target\",void 0),o([p({type:c})],h.prototype,\"lineOfSight\",void 0),h=o([n(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightToolConfiguration\")],h);export{h as LineOfSightToolConfiguration};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{getGraphicEffectiveElevationInfo as e}from\"../../../../support/elevationInfoUtils.js\";function n(n,o=e(n)){return\"on-the-ground\"!==o.mode&&!(null==n.geometry||!n.geometry.hasZ)}function o(e,n){let o=null;const t=e.events.on(\"grab-changed\",(t=>{null!=o&&(o.remove(),o=null),\"start\"===t.action?(o=e.disableDisplay(),n&&n(t)):n&&n(t)}));return{remove(){null!=o&&o.remove(),t.remove()}}}export{n as canMoveZ,o as disableDisplayOnGrab};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport o from\"../../../../Color.js\";import{Manipulator3D as t}from\"../../interactive/Manipulator3D.js\";import{createManipulatorMaterial as r}from\"../../interactive/manipulatorUtils.js\";import{RenderObject as e}from\"../../interactive/RenderObject.js\";import{disableDisplayOnGrab as i}from\"../../interactive/editingTools/manipulatorUtils.js\";import{createSphereGeometry as s}from\"../../webgl-engine/lib/GeometryUtil.js\";import{ManipulatorStateCustomFlags as n}from\"../../../interactive/interfaces.js\";function m(t,i,n){return new e(s(r(o.toUnitRGBA(i)),t,32,32),n)}function u(o){const t=[];return o.customColor1&&t.push(m(o.size,o.customColor1,n.Custom1)),o.customColor2&&t.push(m(o.size,o.customColor2,n.Custom2)),o.customColor3&&t.push(m(o.size,o.customColor3,n.Custom3)),o.color&&t.push(m(o.size,o.color)),t}function c(o,r){const e=u(r),s=new t({view:o,renderObjects:e,elevationInfo:{mode:\"absolute-height\",offset:0}});return i(s),s}export{c as createSphereManipulator,u as createSphereManipulatorRenderObjects};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Color.js\";import i from\"../../../../analysis/LineOfSightAnalysisObserver.js\";import a from\"../../../../analysis/LineOfSightAnalysisTarget.js\";import r from\"../../../../core/Handles.js\";import n from\"../../../../core/Logger.js\";import{destroyMaybe as s,applySome as o}from\"../../../../core/maybe.js\";import{watch as l,syncAndInitial as u,initial as c}from\"../../../../core/reactiveUtils.js\";import{property as h}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WatchUpdatingTracking as d}from\"../../../../core/support/WatchUpdatingTracking.js\";import{create as g,fromPoints as _}from\"../../../../geometry/support/lineSegment.js\";import{getGraphicEffectiveElevationInfo as m,getConvertedElevation as v}from\"../../../../support/elevationInfoUtils.js\";import b from\"../../../../symbols/support/ElevationInfo.js\";import{LineOfSightRayIntersector as y}from\"./LineOfSightRayIntersector.js\";import{LineOfSightToolConfiguration as f}from\"./LineOfSightToolConfiguration.js\";import{createSphereManipulator as T,createSphereManipulatorRenderObjects as M}from\"./lineOfSightToolUtils.js\";import{LaserlineVisualElement as w}from\"../../interactive/visualElements/LaserlineVisualElement.js\";import{IntersectorType as C}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import\"../../../input/ViewEvents.js\";import{AnalysisToolBase as L}from\"../../../interactive/AnalysisToolBase.js\";import{createManipulatorDragEventPipeline as k}from\"../../../interactive/dragEventPipeline.js\";import{ManipulatorStateCustomFlags as V}from\"../../../interactive/interfaces.js\";import{createScreenPointFromEvent as O}from\"../../../support/screenUtils.js\";import{MouseButton as S}from\"../../../input/IViewEvents.js\";var D;!function(e){e.Ready=\"ready\",e.Creating=\"creating\",e.Created=\"created\"}(D||(D={}));let E=class extends L{constructor(e){super(e),this.removeIncompleteOnCancel=!1,this.configuration=new f,this.analysisViewData=null,this._latestPointerMovePointerType=null,this._laserlineVisualElement=null,this._grabbedManipulator=null,this._analysisHandles=new r,this._handles=new r,this._updatingHandles=new d,this._manipulatorHandles=new r,this._targetTrackerManipulator=null}initialize(){this._intersector=new y({view:this.view}),this._handles.add(l((()=>this.state),(e=>{e===D.Created&&this.finishToolCreation()}),u)),this._observerManipulator=this._createObserverManipulator(),this._handles.add([this._updatingHandles.add((()=>({...this.configuration.observer})),(()=>this._updateObserverManipulatorStyle())),this._updatingHandles.add((()=>this.analysisViewData?.elevationAlignedObserver),(e=>this._onObserverLocationChange(e)),c),this._updatingHandles.add((()=>({...this.configuration.laserLine})),(()=>this._createVisualElements()),c),this._updatingHandles.add((()=>this._laserLineRendererDependencies()),(e=>this._updateLaserLineRenderer(e))),this._connectComputations(),this._updatingHandles.addWhen((()=>!this._shouldRenderTracker),(()=>this._clearCursorTracker()),c)])}destroy(){this._updatingHandles=s(this._updatingHandles),this._handles=s(this._handles),this._manipulatorHandles=s(this._manipulatorHandles),this._analysisHandles=s(this._analysisHandles),this._observerManipulator=null,this._clearCursorTracker(),this._removeVisualElements(),this._intersector=null,this._set(\"analysis\",null)}get state(){return this.active?this.hasGrabbedManipulators?D.Created:D.Creating:null!=this.analysis.observer&&null!=this.analysis.observer.position?D.Created:D.Ready}get cursor(){return this.active&&this._showTracker?\"crosshair\":null}get updating(){return null!=this.analysisViewData&&this.analysisViewData.updating||this._updatingHandles.updating}get _showTracker(){return this.active&&\"mouse\"===this._latestPointerMovePointerType}get _shouldRenderTracker(){return this._showTracker&&null!=this.analysis.observer&&null!=this.analysis.observer.position&&!this.hasGrabbedManipulators}continue(){this.view.activeTool=this}stop(){this.view.activeTool=null}onEditableChange(){this.analysisViewData.editable=this.internallyEditable}onInputEvent(e){switch(e.type){case\"immediate-double-click\":this._doubleClickHandler(e);break;case\"key-down\":this._keyDownHandler(e);break;case\"pointer-move\":this._pointerMoveHandler(e)}}onInputEventAfter(e){if(\"immediate-click\"===e.type)this._clickHandler(e)}onShow(){}onHide(){}onDeactivate(){this._clearCursorTracker()}_connectComputations(){return this._updatingHandles.addOnCollectionChange((()=>this.analysisViewData.computations),(e=>this._onComputationsCollectionChange(e)),{initial:!0,final:!0})}_onComputationsCollectionChange({added:e,removed:t}){for(const i of t)this._disconnectComputation(i);for(const i of e)this._connectComputation(i)}_connectComputation(e){if(this.destroyed)return void n.getLogger(this).warn(\"Attempting to connect an analysis to a destroyed LineOfSight tool. Ignoring.\");const t=this._analysisHandles;if(t.has(e))return;const i=this._createTargetManipulator(e.target);null==this._targetTrackerManipulator&&i.metadata.target===this.analysisViewData.cursorTarget&&(this._targetTrackerManipulator=i,this._targetTrackerManipulator.available=!1,this._targetTrackerManipulator.interactive=!1,this._updateLaserLineRenderer()),t.add([this._updatingHandles.add((()=>this._getLineOfSightManipulatorStateDependencies(e)),(()=>this._updateManipulatorState(i,e)),c),this._updatingHandles.add((()=>e.elevationAlignedTargetLocation),(e=>this._onTargetLocationChange(e,i)),c)],e)}_disconnectComputation(e){if(this.destroyed)return void n.getLogger(this).warn(\"Attempting to disconnect an analysis from a destroyed LineOfSight tool. Ignoring.\");this._analysisHandles.remove(e);const t=this._getTargetManipulator(e.target);null!=t&&(this.manipulators.remove(t),this._manipulatorHandles.remove(t),null!=this._targetTrackerManipulator&&this._targetTrackerManipulator===t&&(this._targetTrackerManipulator=null))}_clearCursorTracker(){this.analysisViewData.cursorTarget=s(this.analysisViewData.cursorTarget)}_createManipulator(e,t,i){const a=T(this.view,e);return a.metadata=i,this._manipulatorHandles.add([t(a),a.events.on(\"grab-changed\",(e=>this._manipulatorGrabChanged(a,e))),a.events.on(\"immediate-click\",(e=>this._manipulatorClick(a,e)))],a),this.manipulators.add(a),a}_createTargetManipulator(e){const t=this.configuration,i={size:t.target.size,customColor1:t.target.visibleColor,customColor2:t.target.occludedColor,customColor3:t.target.undefinedColor,visible:!0},a={target:e,type:\"target\"},r=this._createManipulator(i,(e=>this._createTargetManipulatorDragPipeline(e)),a);return null!=e.position?r.elevationAlignedLocation=e.position:r.available=!1,r}_getTargetManipulator(e){let t=null;return this.manipulators.forEach((i=>{const a=i.manipulator;null==t&&\"target\"===a.metadata.type&&a.metadata.target===e&&(t=a)})),t}_createObserverManipulator(){const e=this.configuration,t={size:e.observer.size,color:e.observer.color,visible:!0};return this._createManipulator(t,(e=>this._createObserverManipulatorDragPipeline(e)),{type:\"observer\",intersection:null})}_updateObserverManipulatorStyle(){const e=this._observerManipulator,t=this.configuration.observer,i={size:t.size,color:t.color,visible:e.available};e.renderObjects=M(i)}_screenToIntersection(){return e=>{const t=this._intersector.getScreenPointIntersection(e.screenEnd);return null==t?null:{...e,intersection:t}}}_createTargetManipulatorDragPipeline(e){return k(e,((t,i,a)=>{i.next(this._screenToIntersection()).next(this._updateTargetDragStep(e)).next((()=>this._updateLaserLineRenderer())),a.next(this._cancelTargetDragStep(e.metadata.target)).next((()=>this._updateLaserLineRenderer()))}))}_createObserverManipulatorDragPipeline(e){return k(e,((e,t,i)=>{t.next(this._screenToIntersection()).next(this._updateObserverDragStep()).next((()=>this._updateLaserLineRenderer())),i.next(this._cancelObserverDragStep()).next((()=>this._updateLaserLineRenderer()))}))}_updateObserverDragStep(){return e=>(null!=e.intersection.mapPoint?(null==this.analysis.observer&&(this.analysis.observer=new i),this._updateFromIntersection(this.analysis.observer,e.intersection)):this.analysis.observer=null,e)}_cancelObserverDragStep(){const e=null!=this.analysis.observer&&null!=this.analysis.observer.position?this.analysis.observer.clone():null;return t=>(this.analysis.observer=e,t)}_updateTargetDragStep(e){return t=>{this._updateFromIntersection(e.metadata.target,t.intersection);const i=t.intersection.mapPoint;return null!=i&&(e.elevationAlignedLocation=i),t}}_cancelTargetDragStep(e){const t=o(e.position,(e=>e.clone()));return i=>(e.position=t,i)}_manipulatorGrabChanged(e,t){switch(t.action){case\"start\":this._grabbedManipulator=e;break;case\"end\":this._grabbedManipulator===e&&(this._grabbedManipulator=null)}}_updateManipulatorState(e,t){const{isValid:i,isTargetVisible:a}=t.computationResult;e.state=i?a?V.Custom1:V.Custom2:V.Custom3}_getLineOfSightManipulatorStateDependencies(e){const{isValid:t,isTargetVisible:i}=e.computationResult;return{isValid:t,isTargetVisible:i}}_laserLineRendererDependencies(){return{laserlineVisualElement:this._laserlineVisualElement,grabbedManipulator:this._grabbedManipulator,shouldRenderTracker:this._shouldRenderTracker,observerPosition:null!=this.analysis.observer?this.analysis.observer.position:null,visible:this.visible}}_updateLaserLineRenderer(e=this._laserLineRendererDependencies()){const{laserlineVisualElement:t,grabbedManipulator:i,shouldRenderTracker:a,observerPosition:r,visible:n}=e;if(null==t)return;const s=null!=i?i:a&&null!=r?this._targetTrackerManipulator:null;this.configuration.laserLine.enabled&&null!=s&&n?(t.visible=!0,t.heightManifoldTarget=s.renderLocation,s!==this._observerManipulator?t.lineVerticalPlaneSegment=_(this._observerManipulator.renderLocation,s.renderLocation,I):t.lineVerticalPlaneSegment=null):(t.visible=!1,t.heightManifoldTarget=null,t.lineVerticalPlaneSegment=null)}_createVisualElements(){const e=this.configuration.laserLine;this._removeVisualElements(),this._laserlineVisualElement=new w({view:this.view,attached:!0,visible:this.visible,style:{glowColor:t.toUnitRGB(e.glowColor),glowWidth:e.glowWidth,innerColor:t.toUnitRGB(e.innerColor),innerWidth:e.innerWidth,globalAlpha:e.globalAlpha}})}_removeVisualElements(){null!=this._laserlineVisualElement&&(this._laserlineVisualElement.destroy(),this._laserlineVisualElement=null)}_onObserverLocationChange(e){null!=e?(this._observerManipulator.metadata.intersection=null,this._observerManipulator.available=!0,this._observerManipulator.elevationAlignedLocation=e):this._observerManipulator.available=!1}_onTargetLocationChange(e,t){null!=e?(t.elevationAlignedLocation=e,t!==this._targetTrackerManipulator&&(t.available=!0)):t.available=!1}_addPointFromClickEvent(e){const t=this._intersector.getScreenPointIntersection(e);if(null!=t&&null!=t.mapPoint)if(null!=this.analysis.observer&&null!=this.analysis.observer.position){this._clearCursorTracker();const e=new a;this._updateFromIntersection(e,t),this.analysis.targets.add(e)}else{const e=new i;this._updateFromIntersection(e,t),this.analysis.observer=e}}_clickHandler(e){this.active&&e.button!==S.Right&&(this._addPointFromClickEvent(O(e)),e.stopPropagation())}_doubleClickHandler(e){this.active&&e.button!==S.Right&&(this.stop(),e.stopPropagation())}_keyDownHandler(e){this.active&&\"Escape\"===e.key&&(this.stop(),e.stopPropagation())}_pointerMoveHandler(e){if(this.hasGrabbedManipulators)return;if(this._latestPointerMovePointerType=e.pointerType,this._updateLaserLineRenderer(),!this._showTracker||null==this.analysis.observer||null==this.analysis.observer.position)return;const t=O(e),i=this._intersector.getScreenPointIntersection(t);null!=i&&null!=i.mapPoint&&(null==this.analysisViewData.cursorTarget&&(this.analysisViewData.cursorTarget=new a),this._updateFromIntersection(this.analysisViewData.cursorTarget,i),this._updateLaserLineRenderer())}_updateFromIntersection(e,t){if(null==t.mapPoint)return e.position=null,e.elevationInfo=null,void(e.feature=null);switch(t.type){case C.OBJECT:if(null!=t.graphic){const i=t.graphic,a=m(i);\"on-the-ground\"===a.mode&&(a.mode=\"relative-to-ground\",a.offset=0),e.elevationInfo=new b(a),e.feature=i}else e.elevationInfo=null,e.feature=null;break;case C.TERRAIN:case C.I3S:e.elevationInfo=new b({mode:\"on-the-ground\"}),e.feature=null;break;default:e.elevationInfo=null,e.feature=null}const i=t.mapPoint.clone();i.z=v(this.view,i,{mode:\"absolute-height\",offset:0},e.elevationInfo),e.position=i}_manipulatorClick(e,t){if(\"observer\"===e.metadata.type||e.grabbing||e.dragging||t.button!==S.Right||this.analysis.targets.length<=1)return;const{target:i}=e.metadata;this.analysis.targets.remove(i),t.stopPropagation()}get testInfo(){return{laserLineVisualElement:this._laserlineVisualElement,getTargetManipulator:e=>this._getTargetManipulator(e)}}};e([h({constructOnly:!0})],E.prototype,\"view\",void 0),e([h({constructOnly:!0})],E.prototype,\"analysis\",void 0),e([h({readOnly:!0})],E.prototype,\"state\",null),e([h({readOnly:!0})],E.prototype,\"cursor\",null),e([h()],E.prototype,\"removeIncompleteOnCancel\",void 0),e([h({readOnly:!0})],E.prototype,\"updating\",null),e([h({type:f})],E.prototype,\"configuration\",void 0),e([h({constructOnly:!0})],E.prototype,\"analysisViewData\",void 0),e([h({readOnly:!0})],E.prototype,\"_showTracker\",null),e([h()],E.prototype,\"_latestPointerMovePointerType\",void 0),e([h()],E.prototype,\"_shouldRenderTracker\",null),e([h()],E.prototype,\"_laserlineVisualElement\",void 0),e([h()],E.prototype,\"_grabbedManipulator\",void 0),E=e([p(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightTool\")],E);const I=g();export{E as LineOfSightTool};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nclass e{constructor(e,i,t,s){this.visibleLineVisualElement=e,this.occludedLineVisualElement=i,this.undefinedLineVisualElement=t,this.targetVisualElement=s}destroy(){this.visibleLineVisualElement.destroy(),this.occludedLineVisualElement.destroy(),this.undefinedLineVisualElement.destroy(),this.targetVisualElement.destroy()}}export{e as LineOfSightVisualElement};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Color.js\";import t from\"../../../../core/Accessor.js\";import n from\"../../../../core/Handles.js\";import{makeHandle as o}from\"../../../../core/handleUtils.js\";import{destroyMaybe as s}from\"../../../../core/maybe.js\";import{initial as r}from\"../../../../core/reactiveUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c}from\"../../../../chunks/mat4f64.js\";import{b as u}from\"../../../../chunks/vec3.js\";import{g as d,c as m}from\"../../../../chunks/vec3f64.js\";import{WatchUpdatingTracking as h}from\"../../../../core/support/WatchUpdatingTracking.js\";import{LineOfSightVisualElement as p}from\"./LineOfSightVisualElement.js\";import{LineVisualElement as g}from\"../../interactive/visualElements/LineVisualElement.js\";import{PointVisualElement as v}from\"../../interactive/visualElements/PointVisualElement.js\";import{RenderOccludedFlag as f}from\"../../webgl-engine/lib/Material.js\";let b=class extends t{constructor(i){super(i),this._lineOfSightVisualElements=new Array,this._computationHandles=new n,this._updatingHandles=new h}initialize(){this.addHandles(this._connectComputations()),this._createObserverVisualization()}destroy(){this._updatingHandles=s(this._updatingHandles),this._computationHandles=s(this._computationHandles),this._observerVisualElement=s(this._observerVisualElement)}get visible(){return this.analysisViewData.visible}get updating(){return this._updatingHandles.updating}get interactiveAndEditable(){return this.analysisViewData.interactive&&this.analysisViewData.editable}get test(){return{disablePartialOcclusion:()=>{for(const i of this._lineOfSightVisualElements)i.visibleLineVisualElement.renderOccluded=f.Occlude,i.occludedLineVisualElement.renderOccluded=f.Occlude,i.undefinedLineVisualElement.renderOccluded=f.Occlude},visualizations:this._lineOfSightVisualElements}}get _configuration(){return this.analysisViewData.configuration}_createLineOfSightVisualization(){const i=this._configuration,t=this.view,n={view:t,attached:!0,width:i.outerWidth,innerWidth:i.innerWidth},o=e.toUnitRGBA(i.visibleOuterColor),s=e.toUnitRGBA(i.visibleInnerColor),r=e.toUnitRGBA(i.occludedOuterColor),a=e.toUnitRGBA(i.occludedInnerColor),l=e.toUnitRGBA(i.undefinedOuterColor),c=e.toUnitRGBA(i.undefinedInnerColor),u=new g({...n,color:o,innerColor:s}),d=new g({...n,color:r,innerColor:a}),m=new g({...n,color:l,innerColor:c}),h=new v({view:t,attached:!0,..._,size:8}),f=new p(u,d,m,h);return this._lineOfSightVisualElements.push(f),f}_destroyLineOfSightVisualization(i){i.destroy(),this._lineOfSightVisualElements.splice(this._lineOfSightVisualElements.indexOf(i),1)}_updateLineOfSightVisualization(i,t,n){const o=this._configuration,{computationResult:s,inputPoints:r}=i,{start:a,end:l,intersection:c,isValid:m,isTargetVisible:h}=s,{observer:p}=r,g=C;g[12]=p[0],g[13]=p[1],g[14]=p[2];const v=u(O,a,p),f=u(V,l,p),b=u(y,c,p),{visibleLineVisualElement:_,occludedLineVisualElement:E,undefinedLineVisualElement:w,targetVisualElement:A}=t,S=null==this.analysisViewData.elevationAlignedObserver||null==i.elevationAlignedTargetLocation,j=this.visible&&!S;_.visible=j,E.visible=j,w.visible=j,A.visible=j,A.attached=!n.interactiveAndEditable,j&&(_.geometry=null,E.geometry=null,w.geometry=null,A.geometry=i.elevationAlignedTargetLocation,m?h?(_.geometry=[[d(v),d(f)]],_.transform=g,_.color=e.toUnitRGBA(o.visibleOuterColor),A.color=e.toUnitRGBA(o.visibleInnerColor)):(_.geometry=[[d(v),d(b)]],_.transform=g,_.color=e.toUnitRGBA(o.occludedOuterColor),E.geometry=[[d(b),d(f)]],E.transform=g,A.color=e.toUnitRGBA(o.occludedInnerColor)):(w.geometry=[[d(v),d(f)]],w.transform=g,A.color=e.toUnitRGBA(o.undefinedInnerColor)))}_getLineOfSightVisualizationDependencies(i){const{computationResult:e}=i,{occludedOuterColor:t,visibleOuterColor:n}=this._configuration;return{computationResult:e,occludedOuterColor:t,visibleOuterColor:n,visible:this.visible,interactiveAndEditable:this.interactiveAndEditable}}_connectComputation(i){const e=this._computationHandles;if(e.has(i))return;const t=this._createLineOfSightVisualization();e.add([this._updatingHandles.add((()=>this._getLineOfSightVisualizationDependencies(i)),(e=>this._updateLineOfSightVisualization(i,t,e)),{initial:!0,equals:()=>!1}),o((()=>this._destroyLineOfSightVisualization(t)))],i)}_disconnectComputation(i){this._computationHandles.remove(i)}_connectComputations(){return this._updatingHandles.addOnCollectionChange((()=>this.analysisViewData.computations),(i=>this._onComputationsCollectionChange(i)),{initial:!0,final:!0})}_onComputationsCollectionChange({added:i,removed:e}){for(const t of e)this._disconnectComputation(t);for(const t of i)this._connectComputation(t)}_createObserverVisualization(){const i=e.toUnitRGBA(this._configuration.visibleInnerColor),t=new v({view:this.view,attached:!1,color:i,..._});this._observerVisualElement=t,this.addHandles(this._updatingHandles.add((()=>({observer:this.analysisViewData.elevationAlignedObserver,interactiveAndEditable:this.interactiveAndEditable,visible:this.visible})),(({observer:i,interactiveAndEditable:e,visible:n})=>{null!=i&&!e&&n?(t.geometry=i,this._observerVisualElement.attached=!0):t.attached=!1}),r))}};i([a({constructOnly:!0})],b.prototype,\"analysis\",void 0),i([a({constructOnly:!0})],b.prototype,\"analysisViewData\",void 0),i([a({constructOnly:!0})],b.prototype,\"view\",void 0),i([a({readOnly:!0})],b.prototype,\"visible\",null),i([a()],b.prototype,\"updating\",null),i([a()],b.prototype,\"interactiveAndEditable\",null),i([a()],b.prototype,\"test\",null),i([a()],b.prototype,\"_configuration\",null),b=i([l(\"esri.views.3d.analysis.LineOfSight.LineOfSightVisualization\")],b);const _={size:6,pixelSnappingEnabled:!1,primitive:\"circle\",elevationInfo:{mode:\"absolute-height\",offset:0},outlineSize:0},O=m(),V=m(),y=m(),C=c();export{b as LineOfSightVisualization};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import i from\"../../../core/Accessor.js\";import s from\"../../../core/Collection.js\";import o from\"../../../core/Evented.js\";import{destroyMaybe as r,applySome as e}from\"../../../core/maybe.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{c as l}from\"../../../chunks/vec3f64.js\";import{AnalysisView3D as p}from\"./AnalysisView3D.js\";import{LineOfSightConfiguration as y}from\"./LineOfSight/LineOfSightConfiguration.js\";import{LineOfSightController as u}from\"./LineOfSight/LineOfSightController.js\";import{LineOfSightTool as h}from\"./LineOfSight/LineOfSightTool.js\";import{LineOfSightVisualization as c}from\"./LineOfSight/LineOfSightVisualization.js\";import{connectAnalysisViewToTool as m,removeAnalysisViewTool as d}from\"../../analysis/analysisViewUtils.js\";let g=class extends(p(o.EventedMixin(i))){constructor(t){super(t),this.type=\"line-of-sight-view-3d\",this.analysis=null,this.tool=null,this.computations=new s,this.elevationAlignedObserver=null,this.configuration=new y,this.observerEngineLocation=l(),this.cursorTarget=null,this.editable=!0}initialize(){const t=this.view,i=this.analysis;this._analysisController=new u({analysis:i,analysisViewData:this,view:t}),this._analysisVisualization=new c({analysis:i,analysisViewData:this,view:t}),this.addHandles([this._analysisController.on(\"result-changed\",(t=>{t.target!==this.cursorTarget&&this.emit(\"result-changed\",t)})),m(this,h)])}destroy(){d(this),this._analysisController=r(this._analysisController),this._analysisVisualization=r(this._analysisVisualization)}get results(){return this.computations.map((t=>t.result))}get priority(){return this._analysisController.priority}set priority(t){this._analysisController.priority=t}get updating(){return null!=this._analysisController&&this._analysisController.updating||null!=this._analysisVisualization&&this._analysisVisualization.updating}getResultForTarget(t){const i=this.computations.find((i=>i.target===t));return e(i,(t=>t.result))}get testInfo(){return{visualization:this._analysisVisualization,controller:this._analysisController}}};t([n({readOnly:!0})],g.prototype,\"type\",void 0),t([n({constructOnly:!0,nonNullable:!0})],g.prototype,\"analysis\",void 0),t([n()],g.prototype,\"tool\",void 0),t([n({readOnly:!0})],g.prototype,\"results\",null),t([n()],g.prototype,\"priority\",null),t([n()],g.prototype,\"computations\",void 0),t([n()],g.prototype,\"elevationAlignedObserver\",void 0),t([n()],g.prototype,\"configuration\",void 0),t([n()],g.prototype,\"observerEngineLocation\",void 0),t([n()],g.prototype,\"cursorTarget\",void 0),t([n()],g.prototype,\"updating\",null),t([n()],g.prototype,\"editable\",void 0),t([n()],g.prototype,\"_analysisController\",void 0),t([n()],g.prototype,\"_analysisVisualization\",void 0),g=t([a(\"esri.views.3d.analysis.LineOfSightAnalysisView3D\")],g);const f=g;export{f as default};\n"],
  "mappings": "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",
  "names": ["s", "o", "h", "y", "a", "s", "o", "y", "a", "i", "t", "n", "y", "a", "m", "y", "r", "t", "j", "a", "e", "t", "r", "d", "s", "i", "n", "o", "l", "y", "m", "c", "I", "U", "C", "u", "h", "f", "a", "s", "n", "e", "c", "t", "o", "i", "r", "a", "l", "u", "d", "h", "J", "g", "m", "v", "b", "f", "_", "x", "B", "y", "l", "o", "i", "u", "c", "y", "h", "a", "d", "o", "e", "n", "t", "m", "t", "i", "n", "e", "F", "h", "u", "o", "c", "r", "s", "e", "a", "h", "c", "l", "t", "i", "s", "r", "u", "d", "n", "I", "y", "e", "i", "t", "s", "b", "i", "c", "t", "n", "o", "h", "s", "r", "a", "l", "u", "d", "m", "y", "f", "e", "g", "C", "v", "O", "V", "_", "E", "w", "A", "S", "j", "g", "s", "n", "t", "i", "b", "a", "v", "y", "f"]
}
