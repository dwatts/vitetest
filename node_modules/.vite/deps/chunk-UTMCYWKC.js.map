{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/interactive/editingTools/dragEventPipeline3D.js", "../../@arcgis/core/views/3d/analysis/Slice/images/generateTextures.js", "../../@arcgis/core/views/3d/analysis/Slice/images/heading-rotate-svg.js", "../../@arcgis/core/views/3d/analysis/Slice/images/tilt-rotate-svg.js", "../../@arcgis/core/views/3d/analysis/Slice/images/Factory.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{screenPointObjectToArray as e,castScreenPointArray as n,createScreenPointArray as r}from\"../../../../core/screenUtils.js\";import{l as t,c as o,f as l,b as s,e as c,g as u,a as i}from\"../../../../chunks/vec3.js\";import{c as a}from\"../../../../chunks/vec3f64.js\";import{projectPoint as p}from\"../../../../geometry/projection.js\";import{intersectRay as d,create as m,fromPositionAndNormal as f}from\"../../../../geometry/support/plane.js\";import{create as g}from\"../../../../geometry/support/ray.js\";import{projectPoint as E}from\"../../../../geometry/support/vector.js\";import{sv2d as y}from\"../../../../geometry/support/vectorStacks.js\";import{getZForElevationMode as S,getGraphicEffectiveElevationInfo as j}from\"../../../../support/elevationInfoUtils.js\";import{fromScreen as v}from\"../../support/geometryUtils/ray.js\";import{newIntersector as x}from\"../../webgl-engine/lib/Intersector.js\";import{StoreResults as R,IntersectorType as b}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import{TERRAIN_ID as I}from\"../../webgl-engine/lib/verticalOffsetUtils.js\";import{EventPipeline as w}from\"../../../interactive/dragEventPipeline.js\";function H(e,n){return O(e,(()=>n))}function U(e){return O(e,(e=>e.plane))}function O(r,t){const o=a(),l=a();let s=!1;return c=>{const u=t(c);if(\"start\"===c.action){const t=e(c.screenStart,n(y.get())),l=v(r.state.camera,t,B);null!=l&&(s=d(u,l,o))}if(!s)return null;const i=e(c.screenEnd,n(y.get())),a=v(r.state.camera,i,B);return null==a?null:d(u,a,l)?{...c,renderStart:o,renderEnd:l,plane:u,ray:a}:null}}function C(e,n,t=0,o=null,l=null){let s=null;return c=>{if(\"start\"===c.action&&(s=e.sceneIntersectionHelper.intersectElevationFromScreen(r(c.screenStart.x,c.screenStart.y),n,t,l),null!=s&&null!=o&&!p(s,s,o)))return null;if(null==s)return null;const u=e.sceneIntersectionHelper.intersectElevationFromScreen(r(c.screenEnd.x,c.screenEnd.y),n,t,l);return null!=u&&(null==o||p(u,u,o))?{...c,mapStart:s,mapEnd:u}:null}}function T(e,n,r,t=null,o=null){return C(e,r,S(n,e,r),t,o)}function D(e,n,r,t=null,o=null){return T(e,r,j(n),t,o)}function M(e,n,r,t){const o=n.toMap(e.screenStart,{include:[r]});return null!=o?D(n,r,o,t):null}function N(e,n){const r=q,t=z,o=m();e.renderCoordsHelper.worldUpAtPosition(n,r);const c=l(o,r,s(t,n,e.state.camera.eye));return l(c,c,r),f(n,c,o)}function P(e,n,r){let t=null;const o=new w;return o.next(H(e,N(e,n))).next(h(e,n)).next(k(e,r)).next((e=>{e.mapEnd.x=e.mapStart.x,e.mapEnd.y=e.mapStart.y,t=e})),e=>(t=null,o.execute(e),t)}function h(e,n){const r=a(),l=t(n);e.renderCoordsHelper.worldUpAtPosition(n,r);const p=a(),d=a(),m=o=>{if(s(o,o,n),E(r,o,o),\"global\"===e.viewingMode){t(o)*Math.sign(c(r,o))<.001-l&&s(o,u(o,r,.001),n)}return i(o,o,n),o};return e=>(e.renderStart=m(o(p,e.renderStart)),e.renderEnd=m(o(d,e.renderEnd)),e)}function k(e,n){const r=e.renderCoordsHelper;return e=>{const t=r.fromRenderCoords(e.renderStart,n),o=r.fromRenderCoords(e.renderEnd,n);return null!=t&&null!=o?{...e,mapStart:t,mapEnd:o}:null}}var G;function A(e){let n=null;return r=>{switch(r.action){case\"start\":n=e.disableDisplay();break;case\"end\":case\"cancel\":null!=n&&(n.remove(),n=null)}return r}}function F(n,t=null){const o=x(n.state.viewingMode);o.options.selectionMode=!0,o.options.store=R.MIN,o.options.hud=!1;const l=r(),s={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},c=a(),u=t??n.spatialReference,i=r=>{n.map.ground&&n.map.ground.opacity<1?s.exclude.add(I):s.exclude.delete(I),n.sceneIntersectionHelper.intersectIntersectorScreen(e(r,l),o,s);const t=o.results.min;let i;if(t.getIntersectionPoint(c))i=t.intersector===b.TERRAIN?G.GROUND:G.OTHER;else{if(!o.results.ground.getIntersectionPoint(c))return null;i=G.GROUND}return{location:n.renderCoordsHelper.fromRenderCoords(c,u),surfaceType:i}};let p;return e=>{if(\"start\"===e.action){const n=i(e.screenStart);p=null!=n?n.location:null}if(null==p)return null;const n=i(e.screenEnd);return null!=n&&null!=n.location?{...e,mapStart:p,mapEnd:n.location,surfaceType:n.surfaceType}:null}}!function(e){e[e.GROUND=0]=\"GROUND\",e[e.OTHER=1]=\"OTHER\"}(G||(G={}));const q=a(),z=a(),B=g();export{G as SurfaceType,k as convertToMapCoordinates,A as hideManipulatorWhileDragging,h as projectToWorldUp,F as screenToMap3D,T as screenToMapXYAtLocation,M as screenToMapXYForGraphic,D as screenToMapXYForGraphicAtLocation,H as screenToRenderPlane,U as screenToRenderPlaneFromEvent,P as screenToZConstrained};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nconst t=\"theme-style\";function e(t,e){return a(r(n(o(t),e)),e.size)}function n(e,{accentColor:n,contrastColor:o}){const r=n.toHex(),a=n.a,s=o.toHex(),i=o.a,c=e.getElementsByTagNameNS(\"http://www.w3.org/2000/svg\",\"style\").namedItem(t);return c&&(c.innerHTML=`\\n      .contrast-fill { fill: ${s}; fill-opacity: ${i}; }\\n      .contrast-stroke { stroke: ${s}; stroke-opacity: ${i};  }\\n      .accent-fill { fill: ${r}; fill-opacity: ${a}; }\\n      .accent-stroke { stroke: ${r}; stroke-opacity:  ${a}; }`),e}function o(t){const e=t.split(\",\")[1],n=atob(e);return(new DOMParser).parseFromString(n,\"image/svg+xml\")}function r(t){const e=(new XMLSerializer).serializeToString(t);return`data:image/svg+xml;base64,${btoa(e)}`}function a(t,e){const n=new Image(e,e);return n.src=t,n}export{e as generateStyledTexture};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nconst I=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NnoiIGNsYXNzPSJhY2NlbnQtZmlsbCIvPjxwYXRoIHN0cm9rZS13aWR0aD0iNC45OSIgZD0iTTIwLjA1IDQwLjg2YTE1LjA1IDE1LjA1IDAgMCAwIDE3LjE0LTEuNSAxNS4wNSAxNS4wNSAwIDAgMCA0LjQ3LTE2LjY1IDE1LjA1IDE1LjA1IDAgMCAwLTIyLjcyLTcuMTUgMTUuMDUgMTUuMDUgMCAwIDAtNS41IDcuMTUiIGNsYXNzPSJjb250cmFzdC1zdHJva2UiLz48cGF0aCBkPSJtMTAuOTcgMzUuNTcgNS4zOCAxMi4wNyA3Ljc5LTEzLjQ3LTEzLjE3IDEuNHoiIGNsYXNzPSJjb250cmFzdC1maWxsIi8+PC9zdmc+\";export{I as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nconst I=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxjaXJjbGUgY3g9IjM5LjQ3OCIgY3k9IjMuMDc4IiByPSIyOCIgY2xhc3M9ImFjY2VudC1maWxsIiB0cmFuc2Zvcm09InJvdGF0ZSg0MC41NDIpIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI1IiBkPSJtNy4wNzQgMzAuMDUzIDI5LjM5NyAxMS45ODUtMy42NzMtMzMuNDkzIiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSIyLjk5NiIgZD0iTTI0LjUwNCAyMy4yMDdhMTEuOTgyIDExLjk4MiAwIDAgMC05LjggNy41MDciIGNsYXNzPSJjb250cmFzdC1zdHJva2UgY29udHJhc3QtZmlsbCIvPjxwYXRoIGQ9Im0yOS44MTggMjIuODA4LTYuMTg0IDQuNi0uNTQxLTguMzY0eiIgY2xhc3M9ImNvbnRyYXN0LWZpbGwiLz48L3N2Zz4=\";export{I as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{generateStyledTexture as t}from\"./generateTextures.js\";import o from\"./heading-rotate-svg.js\";import r from\"./tilt-rotate-svg.js\";import{Texture as e}from\"../../../webgl-engine/lib/Texture.js\";const a=64;function n(r,n){const{accentColor:l,contrastColor:c,preMultiplyAlpha:i}=n;return r.fromData(`heading-rotate:[accent:${l},contrast:${c},size:${a}]`,(()=>new e(t(o,{accentColor:l,contrastColor:c,size:a}),{mipmap:!0,preMultiplyAlpha:i})))}function l(o,n){const{accentColor:l,contrastColor:c,preMultiplyAlpha:i}=n;return o.fromData(`tilt-rotate:[accent:${l},contrast:${c},size:${a}]`,(()=>new e(t(r,{accentColor:l,contrastColor:c,size:a}),{mipmap:!0,preMultiplyAlpha:i})))}export{n as getRotateHeadingTexture,l as getTiltRotateTexture};\n"],
  "mappings": "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",
  "names": ["e", "n", "r", "t", "o", "l", "s", "u", "i", "a", "A", "e", "n", "r", "t", "o", "l", "s", "u", "i", "q", "d", "t", "e", "r", "n", "o", "a", "s", "i", "I", "a", "n", "r", "l", "i", "e", "o", "I"]
}
