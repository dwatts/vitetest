{
  "version": 3,
  "sources": ["../../@arcgis/core/views/layers/ImageryTileLayerView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Graphic.js\";import r from\"../../core/Error.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as i}from\"../../layers/support/commonProperties.js\";import{getDefaultDatumTransformationForDataset as a,projectExtent as n}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{getFetchPopupTemplate as l}from\"./support/popupUtils.js\";const p=p=>{let u=class extends p{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.tileInfo=null}get fullExtent(){return this._getfullExtent()}_getfullExtent(){return this.projectFullExtent(this.view.spatialReference)}get hasTilingEffects(){return!!(this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment)}get datumTransformation(){return a(this.layer.fullExtent,this.view.spatialReference,!0)}supportsSpatialReference(e){return!!this.projectFullExtent(e)}projectFullExtent(e){const t=this.layer.fullExtent,r=a(t,e,!1);return n(t,e,r)}async fetchPopupFeatures(e,o){const{layer:s}=this;if(!e)throw new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s});const{popupEnabled:i}=s,a=l(s,o);if(!i||null==a)throw new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:i,popupTemplate:a});const n=[],{value:p,magdirValue:u,processedValue:c}=await s.identify(e,{timeExtent:this.timeExtent});let f=\"\";if(p&&p.length){f=\"imagery-tile\"===s.type&&s.hasStandardTime()&&null!=p[0]?p.map((e=>s.getStandardTimeValue(e))).join(\", \"):p.join(\", \");const e={ObjectId:0},r=\"Raster.ServicePixelValue\";e[r]=c?.join(\", \")??f,e[r+\".Raw\"]=f;const o=s.rasterInfo.attributeTable;if(null!=o){const{fields:t,features:r}=o,s=t.find((({name:e})=>\"value\"===e.toLowerCase())),i=s?r.find((e=>String(e.attributes[s.name])===f)):null;if(i)for(const o in i.attributes)if(i.attributes.hasOwnProperty(o)){e[this._rasterFieldPrefix+o]=i.attributes[o]}}const i=s.rasterInfo.dataType;\"vector-magdir\"!==i&&\"vector-uv\"!==i||(e[\"Raster.Magnitude\"]=u?.[0],e[\"Raster.Direction\"]=u?.[1]);const a=new t(this.fullExtent.clone(),null,e);a.layer=s,a.sourceLayer=a.layer,n.push(a)}return n}};return e([o()],u.prototype,\"layer\",void 0),e([o(i)],u.prototype,\"timeExtent\",void 0),e([o()],u.prototype,\"view\",void 0),e([o()],u.prototype,\"fullExtent\",null),e([o()],u.prototype,\"tileInfo\",void 0),e([o({readOnly:!0})],u.prototype,\"hasTilingEffects\",null),e([o()],u.prototype,\"datumTransformation\",null),u=e([s(\"esri.views.layers.ImageryTileLayerView\")],u),u};export{p as default};\n"],
  "mappings": "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",
  "names": ["p", "e", "s", "a", "u", "o", "r", "i"]
}
