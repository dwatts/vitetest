{
  "version": 3,
  "sources": ["../../@arcgis/core/chunks/HeatmapDensity.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{OverlayStretch as e}from\"../views/3d/terrain/Overlay.js\";import{addProjViewLocalOrigin as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{FloatPassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as r}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as a}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as t}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function s(s){const d=new a,{vertex:n,fragment:u,attributes:l,varyings:c}=d;i(n,s);const{isAttributeDriven:f,usesHalfFloat:v}=s;return l.add(t.POSITION,\"vec3\"),l.add(t.UV0,\"vec2\"),f&&(l.add(t.FEATUREATTRIBUTE,\"float\"),c.add(\"attributeValue\",\"float\")),v&&d.constants.add(\"compressionFactor\",\"float\",.25),c.add(\"unitCirclePos\",\"vec2\"),n.uniforms.add(new o(\"radius\",(({resolutionForScale:i,searchRadius:o},{camera:r,screenToWorldRatio:a})=>2*o*(0===i?1:i/a)*r.pixelRatio/r.fullViewport[2]/e))),n.code.add(r`\n    void main() {\n      unitCirclePos = uv0;\n\n      vec4 posProj = proj * (view * vec4(${t.POSITION}, 1.0));\n      vec4 quadOffset = vec4(unitCirclePos * radius, 0.0, 0.0);\n\n      ${f?r`attributeValue = ${t.FEATUREATTRIBUTE};`:\"\"}\n      gl_Position = posProj + quadOffset;\n    }\n  `),u.code.add(r`\n    void main() {\n      float radiusRatioSquared = dot(unitCirclePos, unitCirclePos);\n      if (radiusRatioSquared > 1.0) {\n        discard;\n      }\n\n      float oneMinusRadiusRatioSquared = 1.0 - radiusRatioSquared;\n      float density = oneMinusRadiusRatioSquared * oneMinusRadiusRatioSquared ${f?r` * attributeValue`:\"\"} ${v?r` * compressionFactor`:\"\"};\n      fragColor = vec4(density);\n    }\n  `),d}const d=Object.freeze(Object.defineProperty({__proto__:null,build:s},Symbol.toStringTag,{value:\"Module\"}));export{d as H,s as b};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAI0gB,SAAS,EAAEA,IAAE;AAAC,QAAMC,KAAE,IAAI,KAAE,EAAC,QAAO,GAAE,UAAS,GAAE,YAAW,GAAE,UAAS,EAAC,IAAEA;AAAE,IAAE,GAAED,EAAC;AAAE,QAAK,EAAC,mBAAkB,GAAE,eAAc,EAAC,IAAEA;AAAE,SAAO,EAAE,IAAI,EAAE,UAAS,MAAM,GAAE,EAAE,IAAI,EAAE,KAAI,MAAM,GAAE,MAAI,EAAE,IAAI,EAAE,kBAAiB,OAAO,GAAE,EAAE,IAAI,kBAAiB,OAAO,IAAG,KAAGC,GAAE,UAAU,IAAI,qBAAoB,SAAQ,IAAG,GAAE,EAAE,IAAI,iBAAgB,MAAM,GAAE,EAAE,SAAS,IAAI,IAAIC,GAAE,UAAU,CAAC,EAAC,oBAAmBC,IAAE,cAAaD,GAAC,GAAE,EAAC,QAAO,GAAE,oBAAmB,EAAC,MAAI,IAAEA,MAAG,MAAIC,KAAE,IAAEA,KAAE,KAAG,EAAE,aAAW,EAAE,aAAa,CAAC,IAAE,CAAE,CAAC,GAAE,EAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA,2CAIr9B,EAAE,QAAQ;AAAA;AAAA;AAAA,QAG7C,IAAE,qBAAqB,EAAE,gBAAgB,MAAI,EAAE;AAAA;AAAA;AAAA,GAGpD,GAAE,EAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gFAQgE,IAAE,uBAAqB,EAAE,IAAI,IAAE,0BAAwB,EAAE;AAAA;AAAA;AAAA,GAGtI,GAAEF;AAAC;AAAC,IAAM,IAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["s", "d", "o", "i"]
}
