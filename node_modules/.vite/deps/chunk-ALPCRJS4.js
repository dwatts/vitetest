import {
  U,
  k,
  q,
  v
} from "./chunk-BA6PBZHC.js";
import {
  s2 as s,
  s3 as s2
} from "./chunk-HMVAPW5X.js";

// node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js
function s3(e, t, o, n, a) {
  if (null == e)
    return null;
  const s4 = e.referencesGeometry() && a ? i(t, n, a) : t, u2 = e.repurposeFeature(s4);
  try {
    return e.evaluate({ ...o, $feature: u2 }, e.services);
  } catch (c2) {
    return s.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:", c2), null;
  }
}
var u = /* @__PURE__ */ new Map();
function i(e, r, t) {
  const { transform: o, hasZ: n, hasM: a } = t;
  u.has(r) || u.set(r, c(r));
  const s4 = u.get(r)(e.geometry, o, n, a);
  return { ...e, geometry: s4 };
}
function c(s4) {
  const u2 = {};
  switch (s4) {
    case "esriGeometryPoint":
      return (e, r, t, o) => k(r, u2, e, t, o);
    case "esriGeometryPolygon":
      return (e, r, t, o) => q(r, u2, e, t, o);
    case "esriGeometryPolyline":
      return (e, r, t, n) => v(r, u2, e, t, n);
    case "esriGeometryMultipoint":
      return (e, r, o, n) => U(r, u2, e, o, n);
    default:
      return s.getLogger("esri.views.2d.support.arcadeOnDemand").error(new s2("mapview-arcade", `Unable to handle geometryType: ${s4}`)), (e) => e;
  }
}

export {
  s3 as s
};
//# sourceMappingURL=chunk-ALPCRJS4.js.map
