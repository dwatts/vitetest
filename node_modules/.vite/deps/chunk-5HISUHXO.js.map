{
  "version": 3,
  "sources": ["../../@arcgis/core/symbols/cim/CIMSymbolRasterizer.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../request.js\";import{unwrapOrThrow as a}from\"../../core/maybe.js\";import{throwIfAborted as i}from\"../../core/promiseUtils.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{CIMAnalyzer as o,analyzeCIMResource as s}from\"./cimAnalyzer.js\";import n from\"./CIMResourceManager.js\";import{Transformation as c,CanvasDrawHelper as l}from\"./CIMSymbolDrawHelper.js\";import{OverrideHelper as h,CIMSymbolHelper as m}from\"./CIMSymbolHelper.js\";import g from\"./Rasterizer.js\";import u from\"./TextRasterizer.js\";import{mapCIMSymbolToGeometryType as f,createLabelOverrideFunction as d,evaluateValueOrFunction as y,colorToArray as p}from\"./utils.js\";import{scaleCIMMarker as w}from\"../support/cimSymbolUtils.js\";import{Symbol3DAnchorPosition2D as C}from\"../support/Symbol3DAnchorPosition2D.js\";var M;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(M||(M={}));const _=e=>e&&e.scaleFactor?e.scaleFactor:1,b=96/72;class z{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._imageDataCanvas=null,this._pictureMarkerCache=new Map,this._textRasterizer=new u,this._cimResourceManager=new n,this._rasterizer=new g(this._cimResourceManager)}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,a,i,r,o,s,n){if(!e)return null;const{data:g}=e;if(!g||\"CIMSymbolReference\"!==g.type||!g.symbol)return null;const{symbol:u}=g;o||(o=f(u));const d=await h.resolveSymbolOverrides(g,t,this._spatialReference,r,o,s,n);this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const y=this._imageDataCanvas,p=this._cimResourceManager,w=[];m.fetchResources(d,p,w),m.fetchFonts(d,p,w),w.length>0&&await Promise.all(w);const{width:C,height:M}=a,_=v(o,C,M,i),z=m.getEnvelope(d,_,p);if(!z)return null;const I=(window.devicePixelRatio||1)*b;let x=1,R=0,P=0;switch(u.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":{let e=1;z.width>C&&(e=C/z.width);let t=1;z.height>M&&(t=M/z.height),\"preview\"===i&&(z.width<C&&(e=C/z.width),z.height<M&&(t=M/z.height)),x=Math.min(e,t),R=z.x+z.width/2,P=z.y+z.height/2}break;case\"CIMLineSymbol\":{let e=1;z.height>M&&(e=M/z.height),x=e,P=z.y+z.height/2;const t=z.x*x+C/2,a=(z.x+z.width)*x+C/2;if(t<0){const{paths:e}=_;e[0][0][0]-=t}if(a>C){const{paths:e}=_;e[0][2][0]-=a-C}}break;case\"CIMPolygonSymbol\":{R=z.x+z.width/2,P=z.y+z.height/2;const e=z.x*x+C/2,t=(z.x+z.width)*x+C/2,a=z.y*x+M/2,i=(z.y+z.height)*x+M/2,{rings:r}=_;e<0&&(r[0][0][0]-=e,r[0][3][0]-=e,r[0][4][0]-=e),a<0&&(r[0][0][1]+=a,r[0][1][1]+=a,r[0][4][1]+=a),t>C&&(r[0][1][0]-=t-C,r[0][2][0]-=t-C),i>M&&(r[0][2][1]+=i-M,r[0][3][1]+=i-M)}}y.width=C*I,y.height=M*I;const D=1;y.width+=2*D,y.height+=2*D;const S=y.getContext(\"2d\"),k=c.createIdentity();k.translate(-R,-P),k.scale(x*I,-x*I),k.translate(C*I/2+D,M*I/2+D),S.clearRect(0,0,y.width,y.height);return new l(S,p,k,!0).drawSymbol(d,_),S.getImageData(0,0,y.width,y.height)}async analyzeCIMSymbol3D(e,t,a,r,s){const n=[],c=t?{geometryType:r,spatialReference:this._spatialReference,fields:t}:null,l=[];m.fetchFonts(e.data.symbol,this._cimResourceManager,l),await Promise.all(l);const h=new o(this._cimResourceManager,c);let g;await h.analyzeSymbolReference(e.data,this._avoidSDF,n),i(s);for(const i of n)\"CIMPictureMarker\"!==i.cim.type&&\"CIMPictureFill\"!==i.cim.type&&\"CIMPictureStroke\"!==i.cim.type||(g||(g=[]),g.push(this._fetchPictureMarkerResource(i,s))),a&&\"text\"===i.type&&\"string\"==typeof i.text&&i.text.includes(\"[\")&&(i.text=d(a,i.text,i.cim.textCase));return g&&await Promise.all(g),n}rasterizeCIMSymbol3D(e,t,a,i,r,o){const s=[];for(const n of e){i&&\"function\"==typeof i.scaleFactor&&(i.scaleFactor=i.scaleFactor(t,r,o));const e=this._getRasterizedResource(n,t,a,i,r,o);if(!e)continue;let c=0,l=e.anchorX||0,h=e.anchorY||0,m=!1,g=0,u=0;if(\"esriGeometryPoint\"===a){const e=_(i);if(g=y(n.offsetX,t,r,o)*e||0,u=y(n.offsetY,t,r,o)*e||0,\"marker\"===n.type)c=y(n.rotation,t,r,o)||0,m=n.rotateClockwise??!1;else if(\"text\"===n.type){if(c=y(n.angle,t,r,o)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":h=.5;break;case\"bottom\":h=-.5;break;case\"baseline\":h=-.25;break;default:h=0}}}null!=e&&s.push({angle:c,rotateClockWise:m,anchorX:l,anchorY:h,offsetX:g,offsetY:u,rasterizedResource:e})}return this.getSymbolImage(s)}getSymbolImage(e){const t=document.createElement(\"canvas\"),i=a(t.getContext(\"2d\"));let o=0,s=0,n=0,c=0;const l=[];for(let a=0;a<e.length;a++){const t=e[a],h=t.rasterizedResource;if(!h)continue;const m=h.size,g=t.offsetX,u=t.offsetY,f=t.anchorX,d=t.anchorY,y=t.rotateClockWise||!1;let p=t.angle,w=r(g)-m[0]*(.5+f),C=r(u)-m[1]*(.5+d),M=w+m[0],_=C+m[1];if(p){y&&(p=-p);const e=Math.sin(p*Math.PI/180),t=Math.cos(p*Math.PI/180),a=w*t-C*e,i=w*e+C*t,r=w*t-_*e,o=w*e+_*t,s=M*t-_*e,n=M*e+_*t,c=M*t-C*e,l=M*e+C*t;w=Math.min(a,r,s,c),C=Math.min(i,o,n,l),M=Math.max(a,r,s,c),_=Math.max(i,o,n,l)}o=w<o?w:o,s=C<s?C:s,n=M>n?M:n,c=_>c?_:c;const b=i.createImageData(h.size[0],h.size[1]);b.data.set(new Uint8ClampedArray(h.image.buffer));const z={offsetX:g,offsetY:u,rotateClockwise:y,angle:p,rasterizedImage:b,anchorX:f,anchorY:d};l.push(z)}t.width=n-o,t.height=c-s;const h=-o,m=c;for(let a=0;a<l.length;a++){const e=l[a],t=this._imageDataToCanvas(e.rasterizedImage),o=e.rasterizedImage.width,s=e.rasterizedImage.height,n=h-o*(.5+e.anchorX),c=m-s*(.5-e.anchorY);if(e.angle){const a=(360-e.angle)*Math.PI/180;i.save(),i.translate(r(e.offsetX),-r(e.offsetY)),i.translate(h,m),i.rotate(a),i.translate(-h,-m),i.drawImage(t,n,c),i.restore()}else i.drawImage(t,n+r(e.offsetX),c-r(e.offsetY))}const g=new C({x:h/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?i.getImageData(0,0,t.width,t.height):i.createImageData(1,1),anchorPosition:g}}async _fetchPictureMarkerResource(e,a){const i=e.materialHash;if(!this._pictureMarkerCache.get(i)){const r=(await t(e.cim.url,{responseType:\"image\",signal:a&&a.signal})).data;this._pictureMarkerCache.set(i,r)}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,i=a(t.getContext(\"2d\"));return t.width=e.width,t.height=e.height,i.putImageData(e,0,0),t}_imageTo32Array(t,i,r,o){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const s=this._imageDataCanvas,n=a(s.getContext(\"2d\"));if(s.width=i,s.height=r,n.drawImage(t,0,0,i,r),o){n.save();const a=new e(o);n.fillStyle=a.toHex(),n.globalCompositeOperation=\"multiply\",n.fillRect(0,0,i,r),n.globalCompositeOperation=\"destination-atop\",n.drawImage(t,0,0,i,r),n.restore()}return new Uint32Array(n.getImageData(0,0,i,r).data.buffer)}_getRasterizedResource(e,t,i,r,o,s){let n,c,l;const h=null,m=null;if(\"text\"===e.type)return this._rasterizeTextResource(e,t,r,o,s);({analyzedCIM:n,hash:c}=I(e,t,o,s));const g=_(r);if(\"CIMPictureMarker\"===e.cim.type){const i=y(e.size,t,o,s)*g,{image:r,width:n,height:c}=a(this._getPictureResource(e,i,y(e.color,t,o,s)));return l={image:r,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},l}w(n,g,{preserveOutlineWidth:!1});const u=n;c+=i,r&&(c+=JSON.stringify(r));const f=this._resourceCache;return f.has(c)?f.get(c):(l=this._rasterizer.rasterizeJSONResource({cim:u,type:e.type,url:e.url,mosaicHash:c,size:h,path:m},window.devicePixelRatio||1,this._avoidSDF),f.set(c,l),l)}_rasterizeTextResource(e,t,a,i,r){const o=_(a),s=y(e.text,t,i,r);if(!s||0===s.length)return null;const n=e.cim,c=y(n?.fontFamilyName||e.fontName,t,i,r),l=y(n?.font?.style||e.style,t,i,r),h=y(n?.font?.weight||e.weight,t,i,r),m=y(n?.font?.decoration||e.decoration,t,i,r),g=y(e.size,t,i,r)*o,u=y(e.horizontalAlignment,t,i,r),f=y(e.verticalAlignment,t,i,r),d=p(y(e.color,t,i,r)),w=p(y(e.outlineColor,t,i,r)),C=y(e.outlineSize,t,i,r),M=null!=e.backgroundColor?p(e.backgroundColor):null,b=null!=e.borderLineColor?p(e.borderLineColor):null,z=null!=e.borderLineWidth?e.borderLineWidth:null,v={color:d,size:g,horizontalAlignment:u,verticalAlignment:f,font:{family:c,style:l,weight:h,decoration:m},halo:{size:C||0,color:w,style:l},backgroundColor:M,borderLine:null!=b&&null!=z?{color:b,size:z}:null,pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(s,v)}_getPictureResource(e,t,a){const i=this._pictureMarkerCache.get(e.materialHash);if(!i)return null;const o=i.height/i.width,s=t?o>1?r(t):r(t)/o:i.width,n=t?o>1?r(t)*o:r(t):i.height;return{image:this._imageTo32Array(i,s,n,a),width:s,height:n}}}function v(e,t,a,i){const r=1,o=-t/2+r,s=t/2-r,n=a/2-r,c=-a/2+r;switch(e){case\"esriGeometryPoint\":return{x:0,y:0};case\"esriGeometryPolyline\":return{paths:[[[o,0],[0,0],[s,0]]]};default:return\"legend\"===i?{rings:[[[o,n],[s,0],[s,c],[o,c],[o,n]]]}:{rings:[[[o,n],[s,n],[s,c],[o,c],[o,n]]]}}}function I(e,t,a,i){let r,o;if(\"function\"==typeof e.materialHash){r=(0,e.materialHash)(t,a,i),o=s(e.cim,e.materialOverrides)}else r=e.materialHash,o=e.cim;return{analyzedCIM:o,hash:r}}export{z as CIMSymbolRasterizer,M as GeometryStyle};\n"],
  "mappings": "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",
  "names": ["t", "h", "c", "r", "s", "u", "p", "M", "_", "z", "I", "e", "a", "i", "m", "g", "o", "n", "l", "b", "v"]
}
