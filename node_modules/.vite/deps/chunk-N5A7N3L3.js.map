{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as t,populateMissingFields as a}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as o,getRequiredFields as p}from\"../../../layers/support/popupUtils.js\";const i=i=>{let c=class extends i{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)throw new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});if(!o(s,e))throw new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){this._validateFetchPopupFeatures(r);const s=null!=r?r.clientGraphics:null;if(!s||0===s.length)return[];const i=\"scene\"===this.layer.type&&null!=this.layer.associatedLayer?this.layer.associatedLayer:this.layer;let c=[];\"fieldsIndex\"in this.layer&&(c=t(this.layer.fieldsIndex,await p(i,o(this.layer,r)))),await this.prepareFetchPopupFeatures(c);const l=new Set,n=[],u=[];for(const t of s)a(c,t,l)?u.push(t):n.push(t);return 0===u.length?n:this.whenGraphicAttributes(u,[...l]).catch((()=>u)).then((e=>n.concat(e)))}};return c=e([s(\"esri.views.3d.layers.support.PopupSceneLayerView\")],c),c};export{i as PopupSceneLayerView};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAI6hB,IAAM,IAAE,CAAAA,OAAG;AAAC,MAAI,IAAE,cAAcA,GAAC;AAAA,IAAC,4BAA4BC,IAAE;AAAC,YAAK,EAAC,OAAMC,GAAC,IAAE,MAAK,EAAC,cAAa,EAAC,IAAEA;AAAE,UAAG,CAAC;AAAE,cAAM,IAAI,EAAE,uCAAsC,uBAAsB,EAAC,OAAMA,GAAC,CAAC;AAAE,UAAG,CAAC,EAAEA,IAAED,EAAC;AAAE,cAAM,IAAI,EAAE,uCAAsC,0CAAyC,EAAC,OAAMC,GAAC,CAAC;AAAA,IAAC;AAAA,IAAC,MAAM,0BAA0BD,IAAE;AAAA,IAAC;AAAA,IAAC,MAAM,mBAAmBA,IAAE,GAAE;AAAC,WAAK,4BAA4B,CAAC;AAAE,YAAMC,KAAE,QAAM,IAAE,EAAE,iBAAe;AAAK,UAAG,CAACA,MAAG,MAAIA,GAAE;AAAO,eAAM,CAAC;AAAE,YAAMF,KAAE,YAAU,KAAK,MAAM,QAAM,QAAM,KAAK,MAAM,kBAAgB,KAAK,MAAM,kBAAgB,KAAK;AAAM,UAAIG,KAAE,CAAC;AAAE,uBAAgB,KAAK,UAAQA,KAAE,EAAE,KAAK,MAAM,aAAY,MAAM,EAAEH,IAAE,EAAE,KAAK,OAAM,CAAC,CAAC,CAAC,IAAG,MAAM,KAAK,0BAA0BG,EAAC;AAAE,YAAM,IAAE,oBAAI,OAAIC,KAAE,CAAC,GAAE,IAAE,CAAC;AAAE,iBAAU,KAAKF;AAAE,WAAEC,IAAE,GAAE,CAAC,IAAE,EAAE,KAAK,CAAC,IAAEC,GAAE,KAAK,CAAC;AAAE,aAAO,MAAI,EAAE,SAAOA,KAAE,KAAK,sBAAsB,GAAE,CAAC,GAAG,CAAC,CAAC,EAAE,MAAO,MAAI,CAAE,EAAE,KAAM,CAAAH,OAAGG,GAAE,OAAOH,EAAC,CAAE;AAAA,IAAC;AAAA,EAAC;AAAE,SAAO,IAAE,EAAE,CAAC,EAAE,kDAAkD,CAAC,GAAE,CAAC,GAAE;AAAC;",
  "names": ["i", "e", "s", "c", "n"]
}
