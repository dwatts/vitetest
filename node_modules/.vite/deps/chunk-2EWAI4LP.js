import {
  C
} from "./chunk-DNEN337Y.js";
import {
  e
} from "./chunk-467UETSR.js";
import {
  i
} from "./chunk-GOK4EI36.js";
import {
  S3 as S,
  p2 as p,
  x
} from "./chunk-JNDFAMXY.js";
import {
  u as u2
} from "./chunk-DOQ3SAAR.js";
import {
  a as a2
} from "./chunk-SVCGLUNW.js";
import {
  h
} from "./chunk-RRJGZKNX.js";
import {
  l
} from "./chunk-CQX57DED.js";
import {
  a
} from "./chunk-WCHO7VLT.js";
import {
  j
} from "./chunk-43LWRDQS.js";
import {
  u
} from "./chunk-DWOEYHKS.js";

// node_modules/@arcgis/core/symbols/support/gfxUtils.js
var n = "picture-fill";
var l2 = "simple-fill";
var c = "simple-line";
var a3 = "simple-marker";
var m = "text";
var p2 = "cim";
var u3 = new e(1e3);
function f(t) {
  const r = t.style;
  let o = null;
  if (t)
    switch (t.type) {
      case a3:
        "cross" !== r && "x" !== r && (o = t.color);
        break;
      case l2:
        "solid" === r ? o = t.color : "none" !== r && (o = { type: "pattern", x: 0, y: 0, src: a(`esri/symbols/patterns/${r}.png`), width: 5, height: 5 });
        break;
      case n:
        o = { type: "pattern", src: t.url, width: u2(t.width) * t.xscale, height: u2(t.height) * t.yscale, x: u2(t.xoffset), y: u2(t.yoffset) };
        break;
      case m:
        o = t.color;
        break;
      case p2:
        o = C(t);
    }
  return o;
}
function h2(e3, t) {
  const o = e3 + "-" + t;
  return void 0 !== u3.get(o) ? Promise.resolve(u3.get(o)) : j(e3, { responseType: "image" }).then((e4) => {
    const r = e4.data, s = r.naturalWidth, i2 = r.naturalHeight, n2 = document.createElement("canvas");
    n2.width = s, n2.height = i2;
    const l3 = n2.getContext("2d");
    l3.fillStyle = t, l3.fillRect(0, 0, s, i2), l3.globalCompositeOperation = "destination-in", l3.drawImage(r, 0, 0);
    const c2 = n2.toDataURL();
    return u3.put(o, c2), c2;
  });
}
function y(e3) {
  if (!e3)
    return null;
  let t = null;
  switch (e3.type) {
    case l2:
    case n:
    case a3:
      t = y(e3.outline);
      break;
    case c: {
      const r = u2(e3.width);
      null != e3.style && "none" !== e3.style && 0 !== r && (t = { color: e3.color, style: d(e3.style), width: r, cap: e3.cap, join: "miter" === e3.join ? u2(e3.miterLimit) : e3.join });
      break;
    }
    default:
      t = null;
  }
  return t;
}
var d = (() => {
  const e3 = {};
  return (t) => {
    if (e3[t])
      return e3[t];
    const r = t.replaceAll("-", "");
    return e3[t] = r, r;
  };
})();
var g = new h([128, 128, 128]);

// node_modules/@arcgis/core/symbols/support/utils.js
var f2 = new h("white");
function p3(e3) {
  if (null == e3 || !("symbolLayers" in e3) || null == e3.symbolLayers)
    return false;
  switch (e3.type) {
    case "point-3d":
      return e3.symbolLayers.some((e4) => "object" === e4.type);
    case "line-3d":
      return e3.symbolLayers.some((e4) => "path" === e4.type);
    case "polygon-3d":
      return e3.symbolLayers.some((e4) => "object" === e4.type || "extrude" === e4.type);
    default:
      return false;
  }
}
function h3(e3) {
  return u(e3.resource).href;
}
function b(n2, r) {
  if (!n2)
    return null;
  let l3 = null;
  return x(n2) ? l3 = w(n2) : S(n2) && (l3 = "cim" === n2.type ? C(n2) : n2.color ? new h(n2.color) : null), l3 ? d2(l3, r) : null;
}
function w(t) {
  const o = t.symbolLayers;
  if (!o)
    return null;
  let n2 = null;
  return o.forEach((e3) => {
    var _a;
    "object" === e3.type && ((_a = e3.resource) == null ? void 0 : _a.href) || (n2 = "water" === e3.type ? e3.color : e3.material ? e3.material.color : null);
  }), n2 ? new h(n2) : null;
}
function d2(t, o) {
  if (null == o || null == t)
    return t;
  const n2 = t.toRgba();
  return n2[3] = n2[3] * o, new h(n2);
}
function j2(e3, t, o) {
  const n2 = e3.symbolLayers;
  if (!n2)
    return;
  const r = (e4) => d2(t = t ?? e4 ?? (null != o ? f2 : null), o);
  n2.forEach((e4) => {
    var _a;
    if ("object" !== e4.type || !((_a = e4.resource) == null ? void 0 : _a.href) || t)
      if ("water" === e4.type)
        e4.color = r(e4.color);
      else {
        const t2 = null != e4.material ? e4.material.color : null, n3 = r(t2);
        null == e4.material ? e4.material = new p({ color: n3 }) : e4.material.color = n3, null != o && "outline" in e4 && null != e4.outline && null != e4.outline.color && (e4.outline.color = d2(e4.outline.color, o));
      }
  });
}
function k(e3, t, o) {
  (t = t ?? e3.color) && (e3.color = d2(t, o)), null != o && "outline" in e3 && e3.outline && e3.outline.color && (e3.outline.color = d2(e3.outline.color, o));
}
function g2(n2, r, l3) {
  n2 && (r || null != l3) && (r && (r = new h(r)), x(n2) ? j2(n2, r, l3) : S(n2) && k(n2, r, l3));
}
async function L(e3, t) {
  const o = e3.symbolLayers;
  o && await a2(o, async (e4) => z(e4, t));
}
async function z(e3, t) {
  switch (e3.type) {
    case "extrude":
      U(e3, t);
      break;
    case "icon":
    case "line":
    case "text":
      S2(e3, t);
      break;
    case "path":
      E(e3, t);
      break;
    case "object":
      await v(e3, t);
  }
}
function S2(e3, t) {
  const o = x2(t);
  null != o && (e3.size = o);
}
function x2(e3) {
  for (const t of e3)
    if ("number" == typeof t)
      return t;
  return null;
}
function U(e3, t) {
  e3.size = "number" == typeof t[2] ? t[2] : 0;
}
async function v(e3, t) {
  const { resourceSize: o, symbolSize: n2 } = await C2(e3), r = O(t, o, n2);
  e3.width = M(t[0], n2[0], o[0], r), e3.depth = M(t[1], n2[1], o[1], r), e3.height = M(t[2], n2[2], o[2], r);
}
function E(e3, t) {
  const o = O(t, l, [e3.width, void 0, e3.height]);
  e3.width = M(t[0], e3.width, 1, o), e3.height = M(t[2], e3.height, 1, o);
}
function O(e3, t, o) {
  for (let n2 = 0; n2 < 3; n2++) {
    const r = e3[n2];
    switch (r) {
      case "symbol-value": {
        const e4 = o[n2];
        return null != e4 ? e4 / t[n2] : 1;
      }
      case "proportional":
        break;
      default:
        if (r && t[n2])
          return r / t[n2];
    }
  }
  return 1;
}
async function C2(e3) {
  const { computeObjectLayerResourceSize: t } = await import("./symbolLayerUtils-TGENRVHC.js"), o = await t(e3, 10), { width: n2, height: r, depth: l3 } = e3, i2 = [n2, l3, r];
  let c2 = 1;
  for (let s = 0; s < 3; s++) {
    const e4 = i2[s];
    if (null != e4) {
      c2 = e4 / o[s];
      break;
    }
  }
  for (let s = 0; s < 3; s++)
    null == i2[s] && (i2[s] = o[s] * c2);
  return { resourceSize: o, symbolSize: i2 };
}
function M(e3, t, o, n2) {
  switch (e3) {
    case "proportional":
      return o * n2;
    case "symbol-value":
      return null != t ? t : o;
    default:
      return e3;
  }
}
function R(e3, t) {
  const o = x2(t);
  if (null != o)
    switch (e3.type) {
      case "simple-marker":
        e3.size = o;
        break;
      case "picture-marker": {
        const t2 = e3.width / e3.height;
        t2 > 1 ? (e3.width = o, e3.height = o * t2) : (e3.width = o * t2, e3.height = o);
        break;
      }
      case "simple-line":
        e3.width = o;
        break;
      case "text":
        e3.font.size = o;
    }
}
async function D(e3, n2) {
  if (e3 && n2)
    return x(e3) ? L(e3, n2) : void (S(e3) && R(e3, n2));
}
function I(e3, n2, r) {
  if (e3 && null != n2)
    if (x(e3)) {
      const t = e3.symbolLayers;
      t && t.forEach((e4) => {
        if (e4 && "object" === e4.type)
          switch (r) {
            case "tilt":
              e4.tilt = n2;
              break;
            case "roll":
              e4.roll = n2;
              break;
            default:
              e4.heading = n2;
          }
      });
    } else
      S(e3) && ("simple-marker" !== e3.type && "picture-marker" !== e3.type && "text" !== e3.type || (e3.angle = n2));
}
function J(e3) {
  if (!e3)
    return null;
  const t = e3.effects.filter((e4) => "bloom" !== e4.type).map((e4) => e4.toJSON());
  return i(t);
}
function N(e3) {
  return null != e3 && "polygon-3d" === e3.type && e3.symbolLayers.some((e4) => "extrude" === e4.type);
}
async function q(e3, t) {
  const o = await e3.fetchSymbol(t);
  return o || e3.fetchCIMSymbol(t);
}

export {
  f,
  h2 as h,
  y,
  d,
  g,
  p3 as p,
  h3 as h2,
  b,
  g2,
  D,
  I,
  J,
  N,
  q
};
//# sourceMappingURL=chunk-2EWAI4LP.js.map
