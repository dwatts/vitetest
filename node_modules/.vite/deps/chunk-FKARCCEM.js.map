{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/support/ElevationSampler.js", "../../@arcgis/core/layers/support/ElevationSamplerData.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import\"../../core/has.js\";import e from\"../../core/Logger.js\";import{getMetersPerUnitForSR as t}from\"../../core/unitUtils.js\";import{toExtent as n,containsXY as s,create as i}from\"../../geometry/support/aaBoundingRect.js\";import{project as o}from\"../../geometry/support/webMercatorUtils.js\";import a from\"../../geometry/Point.js\";const r=e.getLogger(\"esri.layers.support.ElevationSampler\");class l{queryElevation(e){return u(e.clone(),this)}on(){return d}projectIfRequired(e,t){return p(e,t)}}class m extends l{get spatialReference(){return this.extent.spatialReference}constructor(e,s,i){super(),this.tile=e,this.noDataValue=i;const o=e.tile.extent;this.extent=n(o,s.spatialReference),this.extent.zmin=e.zmin,this.extent.zmax=e.zmax,this._aaExtent=o;const a=t(s.spatialReference),r=s.lodAt(e.tile.level).resolution*a;this.demResolution={min:r,max:r}}contains(e){const t=this.projectIfRequired(e,this.spatialReference);return null!=t&&this.containsAt(t.x,t.y)}containsAt(e,t){return s(this._aaExtent,e,t)}elevationAt(e,t){if(!this.containsAt(e,t)){const n=this.extent,s=`${n.xmin}, ${n.ymin}, ${n.xmax}, ${n.ymax}`;return r.warn(\"#elevationAt()\",`Point used to sample elevation (${e}, ${t}) is outside of the sampler extent (${s})`),this.noDataValue}return this.tile.sample(e,t)??this.noDataValue}}class c extends l{get spatialReference(){return this.extent.spatialReference}constructor(e,t,s){let o;super(),\"number\"==typeof t?(this.noDataValue=t,o=null):(o=t,this.noDataValue=s),this.samplers=o?e.map((e=>new m(e,o,this.noDataValue))):e;const a=this.samplers[0];if(a){this.extent=a.extent.clone();const{min:e,max:t}=a.demResolution;this.demResolution={min:e,max:t};for(let n=1;n<this.samplers.length;n++){const e=this.samplers[n];this.extent.union(e.extent),this.demResolution.min=Math.min(this.demResolution.min,e.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,e.demResolution.max)}}else this.extent=n(i(),o.spatialReference),this.demResolution={min:0,max:0}}elevationAt(e,t){for(const n of this.samplers)if(n.containsAt(e,t))return n.elevationAt(e,t);return r.warn(\"#elevationAt()\",`Point used to sample elevation (${e}, ${t}) is outside of the sampler`),this.noDataValue}}function u(e,t){const n=p(e,t.spatialReference);if(!n)return null;switch(e.type){case\"point\":h(e,n,t);break;case\"polyline\":f(e,n,t);break;case\"multipoint\":x(e,n,t)}return e}function p(e,t){if(null==e)return null;const n=e.spatialReference;if(n.equals(t))return e;const s=o(e,t);return s||r.error(`Cannot project geometry spatial reference (wkid:${n.wkid}) to elevation sampler spatial reference (wkid:${t.wkid})`),s}function h(e,t,n){e.z=n.elevationAt(t.x,t.y)}function f(e,t,n){R.spatialReference=t.spatialReference;const s=e.hasM&&!e.hasZ;for(let i=0;i<e.paths.length;i++){const o=e.paths[i],a=t.paths[i];for(let e=0;e<o.length;e++){const t=o[e],i=a[e];R.x=i[0],R.y=i[1],s&&(t[3]=t[2]),t[2]=n.elevationAt(R.x,R.y)}}e.hasZ=!0}function x(e,t,n){R.spatialReference=t.spatialReference;const s=e.hasM&&!e.hasZ;for(let i=0;i<e.points.length;i++){const o=e.points[i],a=t.points[i];R.x=a[0],R.y=a[1],s&&(o[3]=o[2]),o[2]=n.elevationAt(R.x,R.y)}e.hasZ=!0}const R=new a,d={remove(){}};export{l as ElevationSamplerBase,c as MultiTileElevationSampler,m as TileElevationSampler,u as updateGeometryElevation};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nclass t{constructor(t,h){this.data=t,this.safeWidth=.99999999*(t.width-1),this.dx=(t.width-1)/(h[2]-h[0]),this.dy=(t.width-1)/(h[3]-h[1]),this.x0=h[0],this.y1=h[3]}}export{t as ElevationSamplerData};\n"],
  "mappings": "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",
  "names": ["t", "s", "i", "r", "c", "e", "x", "t", "h"]
}
