{
  "version": 3,
  "sources": ["../../@arcgis/core/symbols/support/symbolConversion.js", "../../@arcgis/core/symbols/support/jsonUtils.js", "../../@arcgis/core/support/featureFlags.js", "../../@arcgis/core/symbols/support/styleUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as o}from\"../../symbols.js\";import e from\"../../core/Error.js\";import r from\"../WebStyleSymbol.js\";import m from\"../PointSymbol3D.js\";import i from\"../SimpleLineSymbol.js\";import l from\"../LineSymbol3D.js\";import s from\"../SimpleMarkerSymbol.js\";import n from\"../PictureMarkerSymbol.js\";import t from\"../SimpleFillSymbol.js\";import y from\"../MeshSymbol3D.js\";import f from\"../PolygonSymbol3D.js\";import b from\"../TextSymbol.js\";import p from\"../LabelSymbol3D.js\";const a={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function S(S,c=a){if(!S)return{symbol:null};const{retainId:u=a.retainId,ignoreDrivers:d=a.ignoreDrivers,hasLabelingContext:j=a.hasLabelingContext,retainCIM:D=a.retainCIM}=c;let g=null;if(o(S)||S instanceof r)g=S.clone();else if(\"cim\"===S.type){const o=S.data?.symbol?.type;if(\"CIMPointSymbol\"!==o)return{error:new e(\"symbol-conversion:unsupported-cim-symbol\",`CIM symbol of type '${o||\"unknown\"}' is unsupported in 3D`,{symbol:S})};g=D?S.clone():m.fromCIMSymbol(S)}else if(S instanceof i)g=l.fromSimpleLineSymbol(S);else if(S instanceof s)g=m.fromSimpleMarkerSymbol(S);else if(S instanceof n)g=m.fromPictureMarkerSymbol(S);else if(S instanceof t)g=c.geometryType&&\"mesh\"===c.geometryType?y.fromSimpleFillSymbol(S):f.fromSimpleFillSymbol(S);else{if(!(S instanceof b))return{error:new e(\"symbol-conversion:unsupported-2d-symbol\",`2D symbol of type '${S.type||S.declaredClass}' is unsupported in 3D`,{symbol:S})};g=j?p.fromTextSymbol(S):m.fromTextSymbol(S)}return u&&g&&\"cim\"!==g.type&&(g.id=S.id),d&&o(g)&&g.symbolLayers.forEach((o=>o.ignoreDrivers=!0)),{symbol:g}}export{a as defaultTo3DOptions,S as to3D};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{readSymbol as o}from\"../../symbols.js\";import e from\"../../core/Error.js\";import{isSceneServiceLayer as n}from\"../../layers/support/layerUtils.js\";import t from\"../Symbol3D.js\";import{to3D as s}from\"./symbolConversion.js\";import r from\"../WebStyleSymbol.js\";function l(o,e,n,t){const s=a(o,{},{context:t,isLabelSymbol:!1});null!=s&&(e[n]=s)}function i(o,e,n,t){const s=a(o,{},{context:t,isLabelSymbol:!0});null!=s&&(e[n]=s)}function m(o){return o instanceof t||o instanceof r}function a(o,t,r){if(null==o)return null;const{context:l,isLabelSymbol:i}=r,a=l?.origin,b=l?.messages;if(\"web-scene\"===a&&!m(o)){const n=s(o,{retainCIM:!0,hasLabelingContext:i});return null!=n.symbol?n.symbol.write(t,l):(b?.push(new e(\"symbol:unsupported\",`Symbols of type '${o.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:o,context:l,error:n.error})),null)}return(\"web-map\"===a||\"portal-item\"===a&&!n(l?.layer))&&m(o)?(b?.push(new e(\"symbol:unsupported\",`Symbols of type '${o.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:o,context:l})),null):o.write(t,l)}function b(e,n){return o(e,null,n)}export{b as fromJSON,l as write,i as writeLabelSymbol};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport has from\"../core/has.js\";const e=()=>!!has(\"enable-feature:force-wosr\"),a=()=>!!has(\"enable-feature:direct-3d-object-feature-layer-display\"),t=()=>has.add(\"enable-feature:direct-3d-object-feature-layer-display\",!0,!0,!0),i=()=>has.add(\"enable-feature:direct-3d-object-feature-layer-display\",!1,!0,!0),r=()=>!!has(\"enable-i3s-patching\"),d=()=>has.add(\"enable-i3s-patching\",!0,!0,!0),c=()=>has.add(\"enable-i3s-patching\",!1,!0,!0),n=()=>!!has(\"enable-feature:SceneLayer-editing\"),l=(e=\"i3s-patching\")=>{switch(c(),i(),has.add(\"enable-feature:SceneLayer-editing\",!0,!0,!0),e){case\"feature-layer-view\":t();break;case\"i3s-patching\":d()}},s=()=>{c(),i(),has.add(\"enable-feature:SceneLayer-editing\",!1,!0,!0)},b=()=>has.add(\"disable-feature:idb-cache\",!0,!0,!0);l(\"i3s-patching\");export{a as direct3DObjectFeatureLayerDisplayEnabled,i as disableDirect3DObjectFeatureLayerDisplay,c as disableI3SPatching,b as disableIDBCache,s as disableSceneLayerEditing,t as enableDirect3DObjectFeatureLayerDisplay,d as enableI3SPatching,l as enableSceneLayerEditing,e as enableWebStyleForceWOSR,r as i3sPatchingEnabled,n as sceneLayerEditingEnabled};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{throwIfAbortError as r}from\"../../core/promiseUtils.js\";import{normalize as o,removeFile as s}from\"../../core/urlUtils.js\";import n from\"../../portal/Portal.js\";import l from\"../../portal/PortalQueryParams.js\";import{enableWebStyleForceWOSR as a}from\"../../support/featureFlags.js\";let u={};async function f(e,t){try{return{data:(await b(e,t)).data,baseUrl:s(e),styleUrl:e}}catch(o){return r(o),null}}function i(e,t,r){const o=null!=t.portal?t.portal:n.getDefault();let s;const l=`${o.url} - ${o.user&&o.user.username} - ${e}`;return u[l]||(u[l]=y(e,o,r).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl??\"\",styleName:e})))),u[l]}function m(){u&&(u={})}function y(e,r,o){return r.load(o).then((()=>{const t=new l({disableExtraQuery:!0,query:`owner:${h} AND type:${j} AND typekeywords:\"${e}\"`});return r.queryItems(t,o)})).then((({results:r})=>{let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r))for(const e of r){const t=e.typeKeywords?.some((e=>e.toLowerCase()===n));if(t&&e.type===j&&e.owner===h){s=e;break}}if(!s)throw new t(\"symbolstyleutils:style-not-found\",`The style '${e}' could not be found`,{styleName:e});return s.load(o)}))}function c(e,r,o){return e&&null!=e.styleUrl?f(e.styleUrl,o):e&&null!=e.styleName?i(e.styleName,r,o):Promise.reject(new t(\"symbolstyleutils:style-url-and-name-missing\",\"Either styleUrl or styleName is required to resolve a style\"))}function p(e){return null===e||\"CIMSymbolReference\"===e.type?e:{type:\"CIMSymbolReference\",symbol:e}}function d(e,t,r=[\"gltf\"]){if(\"cimRef\"===t)return e.cimRef;if(e.formatInfos&&!a())for(const o of r){const t=e.formatInfos.find((e=>e.type===o));if(t)return t.href}return e.webRef}function b(t,r){const s={responseType:\"json\",query:{f:\"json\"},...r};return e(o(t),s)}const h=\"esri_en\",j=\"Style\",w=\"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";export{w as Style2DUrlTemplate,u as cachedStyles,m as cleanupStyleUtilsCache,c as fetchStyle,p as makeCIMSymbolRef,b as requestJSON,d as symbolUrlFromStyleItem};\n"],
  "mappings": "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",
  "names": ["S", "c", "u", "d", "j", "o", "b", "m", "o", "e", "n", "t", "s", "a", "m", "r", "l", "i", "b", "S", "k", "a", "i", "c", "n", "l", "e", "l", "u", "f", "e", "t", "b", "o", "i", "r", "j", "s", "l", "y", "y", "e", "r", "o", "t", "h", "j", "s", "n", "c", "f", "i", "d", "b"]
}
