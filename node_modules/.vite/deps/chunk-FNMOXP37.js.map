{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../shaderModules/interfaces.js\";function e(e){e.vertex.code.add(o`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {\nvec3 camToVert = posWorld - camPosWorld;\nbool isBackface = dot(camToVert, normalWorld) > 0.0;\nif (isBackface) {\nposClip.z += 0.0000003 * posClip.w;\n}\nreturn posClip;\n}`)}export{e as Offset};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{s as r}from\"../../../../../../chunks/vec3.js\";import{c as i}from\"../../../../../../chunks/vec3f64.js\";import{ShaderOutput as o}from\"../ShaderOutput.js\";import{DoublePrecision as n}from\"../util/DoublePrecision.glsl.js\";import{addViewNormal as a}from\"../util/View.glsl.js\";import{Float3DrawUniform as t}from\"../../shaderModules/Float3DrawUniform.js\";import{glsl as s}from\"../../shaderModules/interfaces.js\";import{ShaderTechniqueConfiguration as c,parameter as d}from\"../../shaderTechnique/ShaderTechniqueConfiguration.js\";import{VertexAttribute as l}from\"../../../lib/VertexAttribute.js\";import{encodeDoubleHi as m,encodeDoubleLo as u}from\"../../../../../webgl/doublePrecisionUtils.js\";class v extends c{constructor(){super(...arguments),this.instancedDoublePrecision=!1}}function p(e,i){i.instanced&&i.instancedDoublePrecision&&(e.attributes.add(l.MODELORIGINHI,\"vec3\"),e.attributes.add(l.MODELORIGINLO,\"vec3\"),e.attributes.add(l.MODEL,\"mat3\"),e.attributes.add(l.MODELNORMAL,\"mat3\"));const c=e.vertex;i.instancedDoublePrecision&&(c.include(n,i),c.uniforms.add(new t(\"viewOriginHi\",((e,i)=>m(r(b,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]),b))),new t(\"viewOriginLo\",((e,i)=>u(r(b,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]),b))))),c.code.add(s`\n    vec3 calculateVPos() {\n      ${i.instancedDoublePrecision?\"return model * localPosition().xyz;\":\"return localPosition().xyz;\"}\n    }\n    `),c.code.add(s`\n    vec3 subtractOrigin(vec3 _pos) {\n      ${i.instancedDoublePrecision?s`\n          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;`:\"return vpos;\"}\n    }\n    `),c.code.add(s`\n    vec3 dpNormal(vec4 _normal) {\n      ${i.instancedDoublePrecision?\"return normalize(modelNormal * _normal.xyz);\":\"return normalize(_normal.xyz);\"}\n    }\n    `),i.output===o.Normal&&(a(c),c.code.add(s`\n    vec3 dpNormalView(vec4 _normal) {\n      ${i.instancedDoublePrecision?\"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);\":\"return normalize((viewNormal * _normal).xyz);\"}\n    }\n    `)),i.hasVertexTangents&&c.code.add(s`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${i.instancedDoublePrecision?\"return vec4(modelNormal * _tangent.xyz, _tangent.w);\":\"return _tangent;\"}\n\n    }\n    `)}e([d()],v.prototype,\"instancedDoublePrecision\",void 0);const b=i();export{v as InstancedDoubleConfiguration,p as InstancedDoublePrecision};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{DecodeSymbolColor as o}from\"../../../collections/Component/Material/shader/DecodeSymbolColor.glsl.js\";import{IntegerPassUniform as r}from\"../../shaderModules/IntegerPassUniform.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as l}from\"../../../lib/VertexAttribute.js\";import{colorMixModes as d}from\"../../../materials/internal/MaterialUtil.js\";function i(i,t){t.hasSymbolColors?(i.include(o),i.attributes.add(l.SYMBOLCOLOR,\"vec4\"),i.varyings.add(\"colorMixMode\",\"mediump float\"),i.vertex.code.add(e`int symbolColorMixMode;\nvec4 getSymbolColor() {\nreturn decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n}\nvoid forwardColorMixMode() {\ncolorMixMode = float(symbolColorMixMode) + 0.5;\n}`)):(i.fragment.uniforms.add(new r(\"colorMixMode\",(o=>d[o.colorMixMode]))),i.vertex.code.add(e`vec4 getSymbolColor() { return vec4(1.0); }\nvoid forwardColorMixMode() {}`))}export{i as SymbolColor};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{b as o}from\"../../../../../../chunks/mat3.js\";import{c as r}from\"../../../../../../chunks/mat3f64.js\";import{I as e}from\"../../../../../../chunks/mat4f64.js\";import{addNearFar as t}from\"../ForwardLinearDepth.glsl.js\";import{ShaderOutput as i}from\"../ShaderOutput.js\";import{SliceDraw as a}from\"../Slice.glsl.js\";import{Transform as s}from\"../Transform.glsl.js\";import{NormalAttribute as l,NormalType as d}from\"../attributes/NormalAttribute.glsl.js\";import{ObjectAndLayerIdColor as n}from\"../attributes/ObjectAndLayerIdColor.glsl.js\";import{TextureCoordinateAttribute as m}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as c}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as u}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as p}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as v}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlphaPass as f}from\"../util/AlphaDiscard.glsl.js\";import{addProjViewLocalOrigin as h}from\"../util/View.glsl.js\";import{glsl as g}from\"../../shaderModules/interfaces.js\";import{Matrix3PassUniform as x}from\"../../shaderModules/Matrix3PassUniform.js\";import{Matrix4PassUniform as j}from\"../../shaderModules/Matrix4PassUniform.js\";import{Texture2DPassUniform as w}from\"../../shaderModules/Texture2DPassUniform.js\";import{AlphaDiscardMode as T}from\"../../../lib/basicInterfaces.js\";function b(b,C){const{vertex:O,fragment:y}=b,V=C.hasModelTransformation;if(V){const t=r();O.uniforms.add(new j(\"model\",(o=>o.modelTransformation??e))),O.uniforms.add(new x(\"normalTransform\",(r=>(o(t,r.modelTransformation??e),t))))}const A=C.hasColorTexture&&C.alphaDiscardMode!==T.Opaque;switch(C.output){case i.Depth:case i.Shadow:case i.ShadowHighlight:case i.ShadowExcludeHighlight:case i.ObjectAndLayerIdColor:h(O,C),b.include(s,C),b.include(m,C),b.include(v,C),b.include(u,C),b.include(a,C),b.include(n,C),t(b),b.varyings.add(\"depth\",\"float\"),A&&y.uniforms.add(new w(\"tex\",(o=>o.texture))),O.code.add(g`\n          void main(void) {\n            vpos = calculateVPos();\n            ${V?\"vpos = (model * vec4(vpos, 1.0)).xyz;\":\"\"}\n            vpos = subtractOrigin(vpos);\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);\n            forwardTextureCoordinates();\n            forwardObjectAndLayerIdColor();\n          }\n        `),b.include(f,C),y.code.add(g`\n          void main(void) {\n            discardBySlice(vpos);\n            ${A?g`\n                    vec4 texColor = texture(tex, ${C.hasColorTextureTransform?g`colorUV`:g`vuv0`});\n                    discardOrAdjustAlpha(texColor);`:\"\"}\n            ${C.output===i.ObjectAndLayerIdColor?g`outputObjectAndLayerIdColor();`:g`outputDepth(depth);`}\n          }\n        `);break;case i.Normal:{h(O,C),b.include(s,C),b.include(l,C),b.include(c,C),b.include(m,C),b.include(v,C),A&&y.uniforms.add(new w(\"tex\",(o=>o.texture))),C.normalType===d.ScreenDerivative&&b.varyings.add(\"vPositionView\",\"vec3\");const o=C.normalType===d.Attribute||C.normalType===d.Compressed;O.code.add(g`\n          void main(void) {\n            vpos = calculateVPos();\n            ${V?\"vpos = (model * vec4(vpos, 1.0)).xyz;\":\"\"}\n\n            ${o?g`vNormalWorld = ${V?\"normalize(normalTransform * dpNormal(vvLocalNormal(normalModel())))\":\"dpNormalView(vvLocalNormal(normalModel()))\"};`:g`\n                  // Get vertex position in camera space for screen-space derivative normals\n                  vPositionView = (view * vec4(vpos, 1.0)).xyz;\n                `}\n            vpos = subtractOrigin(vpos);\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, vpos);\n            forwardTextureCoordinates();\n          }\n        `),b.include(a,C),b.include(f,C),y.code.add(g`\n          void main() {\n            discardBySlice(vpos);\n            ${A?g`\n                    vec4 texColor = texture(tex, ${C.hasColorTextureTransform?g`colorUV`:g`vuv0`});\n                    discardOrAdjustAlpha(texColor);`:\"\"}\n\n            ${C.normalType===d.ScreenDerivative?g`vec3 normal = screenDerivativeNormal(vPositionView);`:g`\n                  vec3 normal = normalize(vNormalWorld);\n                  if (gl_FrontFacing == false){\n                    normal = -normal;\n                  }`}\n            fragColor = vec4(0.5 + 0.5 * normal, 1.0);\n          }\n        `);break}case i.Highlight:h(O,C),b.include(s,C),b.include(m,C),b.include(v,C),A&&y.uniforms.add(new w(\"tex\",(o=>o.texture))),O.code.add(g`\n          void main(void) {\n            vpos = calculateVPos();\n            ${V?\"vpos = (model * vec4(vpos, 1.0)).xyz;\":\"\"}\n            vpos = subtractOrigin(vpos);\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, vpos);\n            forwardTextureCoordinates();\n          }\n        `),b.include(a,C),b.include(f,C),b.include(p,C),y.code.add(g`\n          void main() {\n            discardBySlice(vpos);\n            ${A?g`\n                    vec4 texColor = texture(tex, ${C.hasColorTextureTransform?g`colorUV`:g`vuv0`});\n                    discardOrAdjustAlpha(texColor);`:\"\"}\n            outputHighlight();\n          }\n        `)}}export{b as DefaultMaterialAuxiliaryPasses};\n"],
  "mappings": "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",
  "names": ["e", "o", "t", "p", "e", "i", "c", "o", "r", "i", "t", "e", "o", "b", "O", "t", "e", "o", "r", "P", "i", "s", "c", "g"]
}
