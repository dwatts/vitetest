{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/i3s/enums.js", "../../@arcgis/core/views/3d/layers/i3s/I3SClientMaterialUtil.js", "../../@arcgis/core/views/3d/layers/i3s/I3SClientNodeLoader.js", "../../@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js", "../../@arcgis/core/views/3d/layers/i3s/I3SIndex.js", "../../@arcgis/core/views/3d/layers/support/I3SLayerView.js", "../../@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js", "../../@arcgis/core/views/3d/webgl-engine/core/material/RenderTexture.js", "../../@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js", "../../@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js", "../../@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js", "../../@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js", "../../@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js", "../../@arcgis/core/core/ReactiveSet.js", "../../@arcgis/core/layers/support/featureQueryAll.js", "../../@arcgis/core/views/3d/layers/i3s/I3SOverrides.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nvar e,s;!function(e){e[e.KTX2=1]=\"KTX2\",e[e.Basis=2]=\"Basis\",e[e.DDS_S3TC=4]=\"DDS_S3TC\",e[e.PNG=8]=\"PNG\",e[e.JPG=16]=\"JPG\",e[e.KTX_ETC2=32]=\"KTX_ETC2\"}(e||(e={})),function(e){e[e.None=0]=\"None\",e[e.Color=1]=\"Color\",e[e.MetallicRoughness=2]=\"MetallicRoughness\",e[e.Normal=4]=\"Normal\",e[e.Occlusion=8]=\"Occlusion\",e[e.Emissive=16]=\"Emissive\",e[e.AlphaMask=32]=\"AlphaMask\",e[e.ColorTextures=19]=\"ColorTextures\",e[e.GeometryTextures=36]=\"GeometryTextures\",e[e.GeometryTexturesPBR=44]=\"GeometryTexturesPBR\",e[e.AllTextures=37]=\"AllTextures\",e[e.AllTexturesPBR=63]=\"AllTexturesPBR\"}(s||(s={}));export{e as TextureEncoding,s as TextureUsage};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import t from\"../../../../core/Error.js\";import{loadImageAsync as o}from\"../../../../support/requestUtils.js\";import{EncodedMeshTexture as r}from\"../../glTF/internal/resourceUtils.js\";import{TextureUsage as a,TextureEncoding as s}from\"./enums.js\";import{CullFaceOptions as n}from\"../../webgl-engine/lib/basicInterfaces.js\";import{useSchematicPBR as l}from\"../../webgl-engine/materials/pbrUtils.js\";async function i(t){const o=[],r=[];if(null==t){return{material:{alphaMode:\"opaque\",alphaCutoff:.1,doubleSided:!0,cullFace:0,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[1,1,1,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6000000238418579},wrapTextures:!1,hasParametersFromSource:!0},requiredTextures:o,textureData:r}}const s=d(t);\"auto\"===t.alphaMode&&console.warn('alphaMode \"auto\" not supported by I3S PBRMaterial - defaulting to \"blend\".');return{material:{alphaMode:\"auto\"===t.alphaMode?\"blend\":t.alphaMode,alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,cullFace:t.doubleSided?n.None:n.Back,normalTextureId:await u(t.normalTexture,o,r,a.Normal),emissiveTextureId:s?await u(t.emissiveTexture,o,r,a.Emissive):-1,occlusionTextureId:s?await u(t.occlusionTexture,o,r,a.Occlusion):-1,emissiveFactor:s&&null!=t.emissiveColor?e.toUnitRGB(t.emissiveColor):[0,0,0],metallicRoughness:{baseColorFactor:null!=t.color?e.toUnitRGBA(t.color):[1,1,1,1],baseColorTextureId:await u(t.colorTexture,o,r,a.Color),metallicRoughnessTextureId:s?await u(t.metallicRoughnessTexture,o,r,a.MetallicRoughness):-1,metallicFactor:s?t.metallic:0,roughnessFactor:s?t.roughness:0},wrapTextures:!0,hasParametersFromSource:l({normalTexture:t.normalTexture,emissiveTexture:s?t.emissiveTexture:null,emissiveFactor:s?e.toUnitRGB(t.emissiveColor):null,occlusionTexture:s?t.occlusionTexture:null,metallicRoughnessTexture:s?t.metallicRoughnessTexture:null,metallicFactor:s?t.metallic:null,roughnessFactor:s?t.roughness:null})},requiredTextures:o,textureData:r}}async function u(e,a,n,l){if(null==e)return-1;const i=n.length,u=e.data,d=e.url;if(null!=u){if(u instanceof HTMLImageElement||u instanceof HTMLCanvasElement){const e=c(u);return n.push({id:i,usage:l,data:e,encoding:s.PNG,downsampled:!1}),a.push({id:i,usage:l,encodings:[{name:void 0,encoding:s.PNG}]}),i}if(u instanceof HTMLVideoElement)return-1;if(u instanceof ImageData)throw new t(\"ImageData textures not supported yet for client side I3S nodes\");if(u instanceof r)throw new t(\"EncodedMeshTexture textures not supported yet for client side I3S nodes\")}else if(null!=d){const e=new Image;e.src=d;const t=c(await o(e,e.src,!1,void 0));return n.push({id:i,usage:l,data:t,encoding:s.PNG,downsampled:!1}),a.push({id:i,usage:l,encodings:[{name:void 0,encoding:s.PNG}]}),i}return-1}function c(e){const t=1048576,o=4096,r=2;let a=e.width*e.height;if(a>=o){let o=e.width,s=e.height;do{o=Math.ceil(o/r),s=Math.ceil(s/r),a=o*s}while(a>t);const n=document.createElement(\"canvas\");n.width=o,n.height=s;return n.getContext(\"2d\").drawImage(e,0,0,o,s),n}return e}function d(e){return e.hasOwnProperty(\"metallicRoughnessTexture\")}export{i as convertMeshMaterialToPBRMaterial};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{assertIsSome as t}from\"../../../../core/maybe.js\";import{MIN_PRIORITY as o}from\"../../../../core/MemCache.js\";import{throwIfAborted as n}from\"../../../../core/promiseUtils.js\";import{generateUUID as r}from\"../../../../core/uuid.js\";import{b as s}from\"../../../../chunks/mat3.js\";import{c as a}from\"../../../../chunks/mat3f64.js\";import{k as i}from\"../../../../chunks/vec3.js\";import{O as l}from\"../../../../chunks/vec3f64.js\";import{projectBoundingSphere as d}from\"../../../../geometry/projection.js\";import{k as u}from\"../../../../chunks/sphere.js\";import{ViewingMode as c}from\"../../../ViewingMode.js\";import{convertMeshMaterialToPBRMaterial as m}from\"./I3SClientMaterialUtil.js\";class h{constructor(e,t,o,n,r,s){this._uid=e,this._indexSR=t,this._renderSR=o,this._viewingMode=n,this._worker=s,this._id2Meta=new Map,this._oid2Meta=new Map,this._memCache=r.newCache(`sl-client-mesh-data-${this._uid}`)}get indexSR(){return this._indexSR}get renderSR(){return this._renderSR}createMeshNodeInfo(e,t){const o=`mesh${t}`,n=e.extent,r=n.spatialReference,s=this._indexSR,a=f(n,e.origin);d(a,r,a,s);return{type:\"mesh\",id:o,version:M(e),oid:t,mbs:a,componentNodeIds:[],unloadedMesh:e,nodeIndex:null,loadMeshPromise:null}}addMeshNode(t,o){if(null!=this.getMeshNodeIndex(o.oid))throw new e(`I3SClientNodeLoader: client side mesh for feature oid=${o.oid} already exists`);o.nodeIndex=t,this._id2Meta.set(o.id,o),this._oid2Meta.set(o.oid,o)}getMeshNodeIndex(e){const t=this._oid2Meta.get(e);return null==t||\"mesh\"!==t.type?null:t.nodeIndex}removeNode(e){if(null==e)return;const t=this._id2Meta.get(e);null!=t&&(this._id2Meta.delete(e),\"mesh\"===t.type&&this._oid2Meta.delete(t.oid))}async loadNodeJSON(t){const o=this._id2Meta.get(t);if(null==o)throw new e(`I3SClientNodeLoader::loadNodeJSON unable to find node ${t}`);switch(o.type){case\"mesh\":return this._loadMeshNodeJSON(o);case\"mesh-component\":return this._loadMeshComponentNodeJSON(o);default:throw new e(`I3SClientNodeLoader::loadNodeJSON unable to handle node ${t}`)}}async _loadMeshNodeJSON(e){const t=e.id,o=(await this._getMeshData(e)).loadedMesh;if(null==o.components||0===o.components.length)return{id:t,version:null,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:null};const n=[],r=o.components;for(let s=0;s<r.length;++s){const o=`${t}-component${s}`,r={type:\"mesh-component\",id:o,mbs:e.mbs,componentIndex:s,meshNodeInfo:e,textureData:new Map};this._id2Meta.set(r.id,r),e.componentNodeIds.push(o),n.push({id:r.id,href:null,mbs:r.mbs,obb:null})}return{id:t,version:null,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:n}}updateNodeIndex(e,t,o){if(null==e)return;const n=this._id2Meta.get(e);n&&\"mesh\"===n.type&&(n.nodeIndex=o)}async _loadMeshComponentNodeJSON(e){return{id:e.id,version:e.meshNodeInfo.version,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:null,isEmpty:!1}}async loadNodeData(o,r){const s=o.id,a=this._id2Meta.get(s);if(null==a||\"mesh-component\"!==a.type)throw new e(`Failed to load client node data for node ${o.id} (unexpected node info)`);const i=a.meshNodeInfo,l=await this._getMeshData(i),d=l.loadedMesh,u=i.oid;if(null==d.components)throw new e(`Failed to load client node data for node ${o.id} (unexpected null reference)`);const h=d.components[a.componentIndex],{material:f,requiredTextures:x,textureData:M}=await m(h.material);if(null!=M)for(const e of M)null!=e&&a.textureData.set(e.id,e);const g={params:{material:f},type:\"ArrayBufferView\"},{vertexSpace:w,origin:_,transform:b}=d,N=[_.x,_.y,_.z??0],S={featureDataPosition:N,featureIds:[],geometries:[g]},D={attributeData:{},loadedAttributes:[]};l.projectionPromise||(t(this._worker,\"SceneLayerWorker is needed to project mesh\"),l.projectionPromise=this._worker.project({positions:d.vertexAttributes.position,localMatrix:b?.localMatrix,vertexSpace:w.toJSON(),origin:N,inSpatialReference:d.spatialReference.toJSON(),outSpatialReference:this._indexSR.toJSON(),local:this._viewingMode===c.Local},r));const{projected:v,original:I}=await l.projectionPromise;d.vertexAttributes.position=I;const{transformed:j,original:A}=await p(h,l,this._worker,r);d.vertexAttributes.normal=A,n(r);const{geometryBuffer:R,geometryDescriptor:P}=y(v,h.faces,j,d.vertexAttributes.uv,d.vertexAttributes.color,u);return{geometryData:S,attributeDataInfo:D,geometryBuffer:R,geometryDescriptor:P,requiredTextures:x,textureData:M}}async loadAttributes(e,t,o){const n=e.numFeatures,r={};for(const{field:{name:s}}of t)r[s]=new Array(n);return r}async loadTextures(e,t,o){const n=e.id,r=this._id2Meta.get(n);if(null==r||\"mesh-component\"!==r.type)throw new Error(`Failed to load textures for node ${e.id} (unexpected node info)`);const s=[];for(const a of t)s.push(r.textureData.get(a.id)||null);return s}async _getMeshData(e){const t=e.version,n=this._memCache.get(t);if(null==n){if(null!=e.loadMeshPromise)return e.loadMeshPromise;const n=async(n,r)=>{const s=e.unloadedMesh.clone();try{await s.load()}catch(l){r(l)}const a=s.memoryUsage,i={loadedMesh:s,projectionPromise:null,normalsTransformPromise:null,usedMemoryInBytes:a};this._memCache.put(t,i,a,o),e.loadMeshPromise=null,n(i)};return e.loadMeshPromise=new Promise(((e,t)=>n(e,t))),e.loadMeshPromise}return n}}function f(e,t){const{spatialReference:o}=e,n=[1,-1],r=[.5*e.width,.5*e.height,e.hasZ?.5*(e.zmax-e.zmin):0],s=o.isGeographic?o.metersPerUnit:1,a=e.center;let i=0;if(e.hasZ)for(let l=0;l<2;++l)for(let e=0;e<2;++e)for(let o=0;o<2;++o){const d=(a.x+n[l]*r[0]-t.x)*s,u=(a.y+n[e]*r[1]-t.y)*s,c=a.z+n[o]*r[2]-t.z;i=Math.max(d*d+u*u+c*c,i)}else for(let l=0;l<2;++l)for(let e=0;e<2;++e){const o=(a.x+n[l]*r[0]-t.x)*s,d=(a.y+n[e]*r[1]-t.y)*s;i=Math.max(o*o+d*d,i)}return u([t.x,t.y,t.z],Math.sqrt(i))}async function p(e,o,n,r){const{transform:d,vertexAttributes:u}=o.loadedMesh,c=\"source\"===e.shading?u.normal:null;if(!(null!=c&&null!=d&&(0!==d.rotationAngle||!i(d.scale,l))))return{transformed:c,original:u.normal};if(!o.normalsTransformPromise){t(n,\"SceneLayerWorker is needed to transform mesh normals\");const e=a();s(e,d.localMatrix),o.normalsTransformPromise=n.transformNormals({normalMatrix:e,normals:c},r)}return o.normalsTransformPromise}function y(e,t,o,n,r,s){const a=1,i=t.length/3,l=3*i;let d=0,u=0,c=!1,m=0,h=!1,f=0,p=!1,y=0,M=0,N=0;d+=g,d+=g,u=d,d+=3*l*w,null!=o&&(c=!0,m=d,d+=3*l*w),null!=n&&(h=!0,f=d,d+=2*l*w),null!=r&&(p=!0,y=d,d+=4*l*_),M=d,d+=a*b,N=d,d+=2*a*g;const S=new ArrayBuffer(d),D=new Uint8Array(S);x(D,0,l),x(D,g,a);const v=new Float32Array(S,u),I=null!=o?new Float32Array(S,m):null,j=null!=n?new Float32Array(S,f):null,A=null!=r?new Uint8Array(S,y):null;for(let x=0;x<i;++x){const s=3*x;for(let a=0;a<3;++a){const i=t[s+a],l=3*i,d=9*x+3*a;if(v[d]=e[l],v[d+1]=e[l+1],v[d+2]=e[l+2],null!=I&&(I[d]=o[l],I[d+1]=o[l+1],I[d+2]=o[l+2]),null!=j){const e=2*i,t=6*x+2*a;j[t]=n[e],j[t+1]=n[e+1]}if(null!=A){const e=4*i,t=12*x+4*a;A[t]=r[e],A[t+1]=r[e+1],A[t+2]=r[e+2],A[t+3]=r[e+3]}}}x(D,M,s),x(D,M+g,s/2**32),x(D,N,0),x(D,N+g,i-1);return{geometryBuffer:S,geometryDescriptor:{isDraco:!1,isLegacy:!0,color:p,normal:c,uv0:h,uvRegion:!1,featureIndex:!0}}}function x(e,t,o){e[t]=255&o,e[t+1]=255&o>>8,e[t+2]=255&o>>16,e[t+3]=255&o>>24}function M(e){const t=e.metadata.displaySource?.source;if(null==t||!Array.isArray(t)||!t.length||t[0]instanceof File)return r();const o=t;let n=\"\";for(const r of o)n+=r.makeHash();return n+JSON.stringify(null!=e.transform?e.transform.toJSON():\"\")+(e.vertexSpace.isRelative?JSON.stringify(e.vertexSpace.origin):\"\")}const g=4,w=4,_=1,b=8;export{h as I3SClientNodeLoader,f as createSphereFromExtent,p as transformNormals};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../core/Accessor.js\";import{removeUnordered as t}from\"../../../../core/arrayUtils.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/has.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{TaskPriority as n}from\"../../../support/Scheduler.js\";let i=class extends s{constructor(){super(),this.referenceCount=0,this.callbacks=new Array,this.runIndex=0}get running(){return this.callbacks.some((r=>r.running))}runTask(r){this._sort();const s=this.callbacks,t={numIndexLoading:0,numNodesLoading:0};for(let e=0;e<s.length&&!r.done;++e)s[e].priority=s[e].runTask(r,t),this.runIndex=e}_sort(){const r=this.callbacks;let s=r.length;for(let t=this.runIndex;t>0;t--){const e=r[t-1];let o=t;for(;o<r.length&&e.priority<=r[o].priority&&(o!==s||e.priority<r[o].priority);)r[o-1]=r[o],o++;r[o-1]=e,s=o-1}this.runIndex=0}add(r){this._sort(),r.priority=1/0,this.callbacks.unshift(r),this.notifyChange(\"running\")}remove(r){t(this.callbacks,r),this.runIndex=this.callbacks.length,this._sort(),this.notifyChange(\"running\")}};r([e({readOnly:!0})],i.prototype,\"running\",null),i=r([o(\"esri.views.3d.layers.i3s.I3SFrameTask\")],i);class a{constructor(r,s){this.task=r,this.handle=s}}const c=new Map;function l(r,s){let t=c.get(r);if(null==t){const s=new i,e=r.registerTask(n.I3S_CONTROLLER,s);t=new a(s,e),c.set(r,t)}return t.task.add(s),{remove:()=>{if(null==t)return;t.task.remove(s);t.task.callbacks.length>0||(c.delete(r),t.handle.remove(),t.task.destroy()),t=null}}}export{l as addCallback};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/PooledArray.js\";import{isAbortError as t}from\"../../../../core/promiseUtils.js\";import{l as i}from\"../../../../chunks/vec3.js\";import{projectBoundingSphere as n}from\"../../../../geometry/projection.js\";import{f as s,h as o,u as r,c as l}from\"../../../../chunks/sphere.js\";import{i3sPatchingEnabled as a}from\"../../../../support/featureFlags.js\";import{LodMetric as d,NodeBase as h,Node as u,ElevationRange as c,NodeFilterImpact as _,NodeIMModificationImpact as g,NodeTraversalState as f}from\"./I3SNode.js\";import{invalidateMbs as m,invalidateObb as v,addWraparound as b}from\"./I3SUtil.js\";import{clone as p}from\"../../support/orientedBoundingBox.js\";class y{constructor(e,t,i,n,s){this.childOffset=e,this.childCount=t,this.visibilityCache=i,this.ref=n,this.node=s,this.useAsHole=0,this.filterImpact=_.NotChecked}}class N{constructor(t,i,n,s,o,r,l,h,u,c,_,g,f,m,v){this._layer=t,this._streamDataController=n,this._clientNodeLoader=s,this._viewportQueries=o,this._logger=r,this.holeFilling=l,this._isLoaded=h,this._isReloading=u,this._isSelected=c,this._enable=_,this._needsUpdate=g,this._canRequest=f,this._computeVisibilityObb=m,this._computeNodeFiltering=v,this._dirty=!0,this._nodePages=new Array,this._clientNodePage=null,this._nodeCount=0,this._nodesPerPage=0,this._rootIndex=0,this._lodMetric=d.None,this._lodConversion=e=>e,this._isEditable=!1,this._urlPrefix=\"\",this._loading=new Set,this._failedNodes=new Set,this._failedPages=new Set,this._indexMissing=1,this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.POSITIVE_INFINITY,this._nodeTraversalState=new Map,this._version=w(0),this._visibilityCacheVersion=w(0),this._maxLevel=1,this._featureEstimate={estimate:0,leavesReached:!1},this._unloadedMemoryEstimate=0,this._missing=new e({deallocator:null}),this._prefetch=new e({deallocator:null}),this._updates=new x(this._missing),this._imModificationUncategorized=new e({deallocator:null}),this.ignoreServiceObb=!1,this.progressiveLoadPenalty=0,this._pageQueue=[],this.needNodeElevationRange=!1,this.layerHasModifications=!1,this._layerHasFilter=!1,this._isEditable=a()&&null!=t.associatedLayer&&null!=t.associatedLayer.infoFor3D,t.serviceUpdateTimeStamp&&t.serviceUpdateTimeStamp.lastUpdate&&(this._lastUpdate=`${t.serviceUpdateTimeStamp.lastUpdate}`),this._maxLodLevel=this._viewportQueries?this._viewportQueries.maxLodLevel:1,this._init(i)}_init(e){if(\"page\"===e.type){const t=e.rootPage;switch(this._urlPrefix=e.urlPrefix,this._nodesPerPage=e.pageSize,e.lodMetric){case\"maxScreenThreshold\":this._lodMetric=d.MaxScreenThreshold;break;case\"maxScreenThresholdSQ\":this._lodMetric=d.MaxScreenThreshold,this._lodConversion=T}if(this._isEditable){this._rootIndex=-1;const i=V(e.rootIndex,e.pageSize),n=t.nodes[i],s={nodes:[{index:this._rootIndex,children:[e.rootIndex],mesh:void 0,obb:n.obb,lodThreshold:n.lodThreshold}]};this._addPage(E(this._rootIndex,this._nodesPerPage),s),this.getNode(-1).serviceObb=void 0}else this._rootIndex=e.rootIndex;this._addPage(E(e.rootIndex,this._nodesPerPage),t),this._updateParentsAndLevel()}else if(\"node\"===e.type){if(this._urlPrefix=e.urlPrefix,this._nodePages.push(O()),this._isEditable){this._clientNodePage=O();const t={id:\"-1\",version:null,mbs:e.rootNode.mbs,obb:e.rootNode.obb,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:[{id:\"root\",href:\"../root\",mbs:e.rootNode.mbs,obb:e.rootNode.obb}]};this._rootIndex=this._makeClientRefNode(new h(t.id,null),-1);const i=this._validateNode(t.id,t);i&&this._addNode(i,this._rootIndex)}else this._rootIndex=this._makeRefNode(new h(e.rootNode.id,null),-1);const t=this._validateNode(e.rootNode.id,e.rootNode);t&&this._addNode(t,0)}}addClientNodeToIndex(e,t){const i=-1,n=new h(e,t),s=this._makeClientRefNode(n,i);return this._linkChildToParentNode(i,s),this.requestUpdate(),s}removeClientNodeFromIndex(e,t,i){this._destroyClientRefNode(e,t,i),this.requestUpdate()}_loadPage(e){this._loading.add(e);const i=this._urlPrefix+e;this._streamDataController.request(i,\"json\").then((t=>{this._pageQueue.push({pageIndex:e,page:t})})).catch((i=>{this._loading.delete(e),t(i)||(this._failedPages.add(e),this._logger.error(\"#loadPage()\",this._layer,`Error when loading page ${e}`,i))}))}_addQueuedPages(e){for(;this._pageQueue.length>0&&!e.done;){const{pageIndex:t,page:i}=this._pageQueue.shift();this._addPage(t,i),this._loading.delete(t),e.madeProgress()}this._updateParentsAndLevel()}_addPage(e,t){const n=[],o=[],r=t.nodes.map(((t,r)=>{const l=n.length,a=t.children?t.children.length:0;o.push(this._rootIndex);for(let e=0;e<a;e++)n.push(t.children[e]);const d=`${t.index}`,h=p(t.obb),c=s(h.center[0],h.center[1],h.center[2],i(h.halfSize)),_=t.mesh&&t.mesh.attribute,g=t.mesh&&t.mesh.geometry,f=t.mesh&&t.mesh.material,m={hasSharedResource:!1,isEmpty:null==g,attributes:_&&null!=_.resource?`${_.resource}`:void 0,geometry:g&&null!=g.resource?`${g.resource}`:void 0,texture:f&&null!=f.resource?`${f.resource}`:void 0,geometryDefinition:g?g.definition:-1,materialDefinition:f?f.definition:-1},v=new u(d,L(r,e,this._nodesPerPage),c,a,0,m,this._lastUpdate,this._lodMetric,this._lodConversion(t.lodThreshold),g?g.featureCount:null);return v.serviceObb=h,v.visibilityObb=this._computeVisibilityObb(v),v.vertexCount=g?g.vertexCount:0,new y(l,a,C(this._visibilityCacheVersion),null,v)}));if(-1===e)this._clientNodePage=O(r,n,o);else{for(let t=this._nodePages.length;t<e;t++)this._nodePages[t]=null;this._nodePages[e]=O(r,n,o)}this._nodeCount+=r.length}_updateParentsAndLevel(){const e=new Array,t=(t,i,n)=>{const s=this._getPage(t);if(null!=s){const o=V(t,this._nodesPerPage);s.parents[o]=null!=i?i:-1;const r=s.nodes[o].node;null!=r&&(r.level=n,e.push(t))}};for(t(this._rootIndex,null,0);e.length;){const i=e.pop(),n=this.getNode(i);if(null!=n)for(let e=0;e<n.childCount;e++){t(this.getChildIndex(n.index,e),i,n.level+1),this._maxLevel=Math.max(this._maxLevel,n.level+1)}}}_getPage(e){const t=E(e,this._nodesPerPage);return t<0?this._clientNodePage:this._nodePages[t]}_getNodeInternal(e){const t=this._getPage(e);return null==t?null:t.nodes[V(e,this._nodesPerPage)]}_addNode(e,t){null!=e.children&&this.populateChildren(t,e.children);const i=this.getParent(t),n=null!=i?i.level+1:0;this._maxLevel=Math.max(this._maxLevel,e.children?n+1:n);const{lodMetric:s,maxError:o}=A(e.lodSelection),r=this._getNodeInternal(t);return r.node=new u(e.id,t,e.mbs,r.childCount,n,e.resources,e.version,s,o,e.numFeatures),e.obb&&(r.node.serviceObb=p(e.obb)),r.node.visibilityObb=this._computeVisibilityObb(r.node),null!=r.ref&&(null==r.ref.mbs&&(r.ref.mbs=e.mbs),r.node.renderMbs=r.ref.renderMbs,r.node.serviceObbInRenderSR=r.ref.serviceObbInRenderSR,r.ref.visibilityObb=r.node.visibilityObb),r.node}_makeRefNode(e,t){const i=this._nodePages[0];if(t<-1)return this._makeClientRefNode(e,t);if(null==i)return-1;const n=i.nodes.length;return i.nodes.push(new y(0,0,C(this._visibilityCacheVersion),e,null)),this._nodeCount++,i.parents.push(t),m(e.renderMbs),v(e.serviceObbInRenderSR),n}_makeClientRefNode(e,t){const i=this._clientNodePage;if(null==i)return-1;if(t>=0)throw new Error(\"I3SIndex::client side nodes can not be made children of service side nodes.\");const n=-(i.nodes.length+1);return i.nodes.push(new y(0,0,C(this._visibilityCacheVersion),e,null)),this._nodeCount++,i.parents.push(t),m(e.renderMbs),v(e.serviceObbInRenderSR),n}_linkChildToParentNode(e,t){const i=this._clientNodePage;if(null==i||e>=0)return;const n=V(e,this._nodesPerPage),s=V(t,this._nodesPerPage),o=i.nodes[n],r=o.childOffset;i.children.splice(o.childOffset+o.childCount,0,t);const l=1;o.childCount+=l,null!=o.node&&(o.node.childCount+=l);for(const a of i.nodes)a.childOffset>r&&(a.childOffset+=l);i.parents[s]=e,this._updateParentBoundingInformation(e)}_destroyClientRefNode(e,t,i){const n=this._clientNodePage;if(null==n)return;const s=this.getParentIndex(e);if(null==s)return;const o=new Set,r=new Map,l=e=>{const i=V(e,this._nodesPerPage),s=n.nodes[i];if(s.childCount>0)for(let t=s.childOffset;t<s.childOffset+s.childCount;++t)l(n.children[t]);t(s.node?.id,e),o.add(s),this._nodeTraversalState.delete(e)};l(e);const a=n.nodes,d=n.children,h=n.nodes.map((()=>-1)),u=[],c=[];for(let g=0;g<a.length;++g){const e=a[g];if(o.has(e))continue;const t=u.length,n=L(g,-1,this._nodesPerPage),s=L(t,-1,this._nodesPerPage);e.node&&(e.node.index=s),h[g]=s,u.push(e),n!==s&&(i(e.node?.id,n,s),r.set(n,s))}this._nodeCount-=a.length-u.length;const _=u.map((()=>-1));for(let g=0;g<u.length;++g){const e=L(g,-1,this._nodesPerPage),t=u[g],i=c.length;for(let n=t.childOffset;n<t.childOffset+t.childCount;++n){const t=d[n];if(t>=0)c.push(t);else{const i=V(t,this._nodesPerPage),n=a[i];if(o.has(n))continue;const s=h[i];c.push(s);_[V(s,this._nodesPerPage)]=e}}t.childOffset=i,t.childCount=c.length-i,t.node&&(t.node.childCount=t.childCount)}n.nodes=u,n.children=c,n.parents=_,this._updateParentBoundingInformation(h[V(s,this._nodesPerPage)])}_updateParentBoundingInformation(e){let t=e;do{let e=null;const i=this._clientNodeLoader.indexSR,s=this._clientNodeLoader.renderSR,a=this._getNodeInternal(t);if(null==a)return;for(let l=0;l<a.childCount;l++){const a=this.getChildIndex(t,l),d=this._getNodeInternal(a),h=null!=d?d.ref||d.node:null;if(null!=h&&h.mbs[3]>0)if(null==e)e=o(h.mbs,D);else{const t=U,o=Q,l=$;n(h.mbs,i,t,s),n(e,i,o,s),r(t,o,l),n(l,s,e,i)}}const d=a.ref||a.node;null!=d&&(null!=e?d.mbs=o(e,null!=d.mbs?d.mbs:l()):m(d.mbs),m(d.renderMbs),v(d.serviceObbInRenderSR),d.geometryObb=null),this.invalidateNodeVisibilityCacheInternal(a),t=this.getParentIndex(t)}while(null!=t)}populateChildren(e,t){const i=this._getNodeInternal(e),n=this._getPage(e);i.childOffset=n.children.length,i.childCount=t.length;for(let s=0;s<t.length;s++){const i=this._makeRefNode(t[s],e);n.children.push(i)}}getNode(e){const t=this._getNodeInternal(e);return null!=t?t.node:null}getIndexById(e){let t;return this._forAllNodes(((i,n)=>{(null!=i.node&&i.node.id===e||null!=i.ref&&i.ref.id===e)&&(t=n)})),t}getNodeById(e){const t=this.getIndexById(e);return null!=t&&t>=0?this.getNode(t):null}getChildIndex(e,t){const i=this._getPage(e);if(null==i)return-1;const n=i.nodes[V(e,this._nodesPerPage)];return i.children[n.childOffset+t]}getParentIndex(e){const t=this._getPage(e);return null!=t&&e!==this._rootIndex?t.parents[V(e,this._nodesPerPage)]:null}getParent(e){const t=this.getParentIndex(e);return null!=t?this.getNode(t):null}isLeaf(e){const t=this._getNodeInternal(e);return null!=t&&0===t.childCount}get rootNode(){return this.getNode(this._rootIndex)}get size(){return this._nodeCount}get isEditable(){return this._isEditable}removeAllGeometryObbs(){this._forAllNodes((e=>{null!=e.node&&(e.node.geometryObb=null)}))}invalidateVisibilityCache(){this._visibilityCacheVersion=w(this._visibilityCacheVersion)}invalidateNodeVisibilityCache(e){const t=this._getNodeInternal(e);null!=t&&this.invalidateNodeVisibilityCacheInternal(t)}invalidateNodeVisibilityCacheInternal(e){e.visibilityCache=C(this._visibilityCacheVersion)}invalidateBoundingVolumeCache(e){const t=this._getNodeInternal(e);null!=t&&(I(t),this.invalidateNodeVisibilityCacheInternal(t))}updateElevationChanged(e){const t=this._getNodeInternal(e);if(null==t)return;if(!this.needNodeElevationRange)return void this.invalidateBoundingVolumeCache(e);const i=null!=t.node?t.node:t.ref;if(null==i)return;const n=i.elevationRange;null!=n&&(n.valid=!1)}invalidateGeometryVisibility(e){const t=this._getNodeInternal(e);null!=t&&null!=t.node&&(t.node.geometryObb=null,m(t.node.renderMbs),v(t.node.serviceObbInRenderSR))}invalidateVisibilityObbs(){null!=this.rootNode&&this.traverse(this.rootNode,(e=>(e.visibilityObb=this._computeVisibilityObb(e),e.geometryObb=null,!0)))}_updateElevationRange(e){const t=this._getNodeInternal(e);if(null==t)return null;const i=null!=t.node?t.node:t.ref;if(null==i)return null;const n=i.elevationRange;if(null!=n&&n.valid)return n;const s=new c;let o=!1;for(let r=0;r<t.childCount;r++){const t=this._updateElevationRange(this.getChildIndex(e,r));null!=t?(s.min=Math.min(s.min,t.min),s.max=Math.max(s.max,t.max)):o=!0}if(0===t.childCount||o&&null!=t.node&&t.node.resources.geometry){const e=this._viewportQueries.getElevationRange(i);null!=e&&(s.min=Math.min(s.min,e.min),s.max=Math.max(s.max,e.max))}return null!=n&&n.min===s.min&&n.max===s.max?(n.valid=!0,n):(s.valid=!0,null!=t.node&&(t.node.elevationRange=s),null!=t.ref&&(t.ref.elevationRange=s),this.invalidateBoundingVolumeCache(e),s)}isNodeVisible(e){const t=this._getNodeInternal(e);if(null==t||null!=t.ref&&!t.ref.mbs)return!0;if(this.needNodeElevationRange&&this._updateElevationRange(e),!S(t.visibilityCache,this._visibilityCacheVersion)){const e=t.node,i=!e||t.ref&&!e.visibilityObb?t.ref??null:e;if(this._layerHasFilter&&this._computeNodeFiltering&&(null!=e||null!=t.ref)&&t.filterImpact===_.NotChecked){const i=null!=e?e.mbs:null!=t.ref?t.ref.mbs:null;t.filterImpact=null!=i?this._computeNodeFiltering(i):_.Unmodified}const n=null!=e&&t.filterImpact===_.Culled,s=!(null!=e&&e.imModificationImpact===g.Culled)&&(!i||this._viewportQueries.isNodeVisible(i))&&!n;return t.visibilityCache=M(s,this._visibilityCacheVersion),s}return R(t.visibilityCache)}isGeometryVisible(e){if(!this.isNodeVisible(e))return!1;const t=this._getNodeInternal(e);return!!(null==t||null==t.node||null==t.node.geometryObb||this.layerHasModifications&&t.node.imModificationImpact===g.NotChecked)||this._viewportQueries.isGeometryVisible(t.node)}_traverseCoverage(e,t,i,n,s){const o=this._getPage(e);if(null==o||0===t.childCount)return;const r=t.childOffset+t.childCount,l=new Array;for(let a=t.childOffset;a<r;++a){const e=o.children[a],t=this._getNodeInternal(e);null!=t&&null!=t.node&&this.isGeometryVisible(e)&&l.push(t)}n/=l.length;for(const a of l){const e=a.node.index;this._isLoaded(e)||this._isReloading(e)?(s.delta=Math.max(s.delta,i),s.coverage+=n):this._traverseCoverage(e,a,i+1,n,s)}}useNodeAsHole(e){if(\"off\"===this.holeFilling)return!1;const t=this._getNodeInternal(e);if(null==t)return!1;if(\"always\"===this.holeFilling)return!0;if(S(t.useAsHole,this._version))return R(t.useAsHole);const i={delta:0,coverage:0};this._traverseCoverage(e,t,0,1,i);const n=i.delta*i.coverage<=.5;return t.useAsHole=M(n,this._version),n}get maxLevel(){return this._maxLevel}get dirty(){return this._dirty}destroy(){this._updates.add.prune(),this._updates.update.prune()}requestUpdate(){this._dirty=!0,this._indexMissing=1,this._version=w(this._version)}imModificationsChanged(e){this.layerHasModifications=e,this._forAllNodes((({node:e})=>{null!=e&&(e.imModificationImpact=g.NotChecked,e.visibilityObb=this._computeVisibilityObb(e),e.hasModifications&&this.invalidateGeometryVisibility(e.index))})),this.invalidateVisibilityCache()}layerFilterChanged(e){this._layerHasFilter=e,this._forAllNodes((e=>{if(null!=e){e.filterImpact=_.NotChecked;const t=e.node;null!=t&&this.invalidateNodeVisibilityCache(t.index)}})),this.invalidateVisibilityCache()}update(e,t,i){if(!this._dirty)return;this._pageQueue.length>0&&this._addQueuedPages(t),this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.NEGATIVE_INFINITY,this._missing.clear(),this._prefetch.clear(),this._updates.reset(e),P.clear();let n=!0;const s=new F,o=new F,r=this._imModificationUncategorized;r.clear();const l=new Set,a=(a,d,h)=>{if(null==d){let e=this._entryPriority(a);e===1/0&&(e=this._entryPriority(h));const t=E(a,this._nodesPerPage);return P.set(t,Math.max(e,P.get(t)||0)),this._loading.has(t)||this._failedPages.has(t)||this._missing.push(t),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const u=d.node;if(this._updateNodeFeatureEstimate(u,o),null==u){const e=this._entryPriority(a);return this._loading.has(a)||this._failedNodes.has(a)||(this._missing.push(a),P.set(a,e)),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const c=this._getPage(a);if(0===this._missing.length&&0===this._nodesPerPage)for(let e=0;e<d.childCount;e++){const t=c.children[d.childOffset+e],i=this._getNodeInternal(t);null==i||i.node||this._loading.has(t)||this._failedNodes.has(t)||(P.set(t,this._entryPriority(t)),this._prefetch.push(t))}if(u.failed||u.resources.isEmpty)return void(n&&d.childCount>0&&this._isSelected(u)&&(n=!1));if(l.add(u.id),this._isLoaded(a)){if(s.known+=u.memory,++s.knownNodes,this._isSelected(u)?d.childCount>0&&(n=!1):(s.unremoved+=u.memory,n=!1),this._needsUpdate(u)){const e=this._entryPriority(a);P.set(a,e),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e),this._updates.update.push(a)}return}if(u.memory&&(s.known+=u.memory,++s.knownNodes),!this._isSelected(u))return void(this._isReloading(a)&&this._updates.remove.push(a));if(d.childCount>0&&(n=!1),u.memory?(s.missing+=u.memory,s.known+=u.memory,++s.knownNodes):++s.missingNodes,e.includes(u.index))return this._maxProcessingPrio=Math.max(this._maxProcessingPrio,this._entryPriority(a)),void(this._updates.cancel=this._updates.cancel.filter((e=>e!==u.index)));if(!t.done&&this._enable(u))return void t.madeProgress();const _=this._entryPriority(a);P.set(a,_),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,_),this._updates.add.push(a),this.layerHasModifications&&i&&null!=u&&u.imModificationImpact===g.NotChecked&&r.push(a)};this.traverseVisible(a);const d=this._updates.add;d.length>0&&this.layerHasModifications&&(r.length>0&&i?.(r),d.filterInPlace((e=>{const t=this._getNodeInternal(e),i=null==t||null==t.node||t.node.imModificationImpact!==g.Culled;return i||this.invalidateNodeVisibilityCache(e),i}))),this._unloadedMemoryEstimate=s.missing-s.unremoved,s.knownNodes>3&&s.missingNodes>0&&(this._unloadedMemoryEstimate+=s.known/s.knownNodes*s.missingNodes),this._unloadedMemoryEstimate=.8*Math.max(0,this._unloadedMemoryEstimate),this._featureEstimate.estimate=this._computeFeatureEstimate(o),this._featureEstimate.leavesReached=n,this._missing.sort(((e,t)=>e-t)),this._missing.filterInPlace(((e,t)=>t<1||this._missing.data[t-1]!==e)),this._missing.sort(((e,t)=>P.get(e)-P.get(t))),this._missing.length>0&&(this._maxUnloadedPrio=P.get(this._missing.back()),this._prefetch.clear()),this._updates.add.filterInPlace((e=>P.get(e)>=this._maxUnloadedPrio)).sort(((e,t)=>P.get(e)-P.get(t))),this._updates.update.sort(((e,t)=>P.get(e)-P.get(t))),this._indexMissing=this._loading.size+this._missing.length,this._dirty=this._indexMissing>0,P.clear()}checkFeatureTarget(e,t){const i=this._viewportQueries.updateScreenSpaceErrorBias(t);let n=t,s=t,o=i,r=10;for(;r--;){const i=new F;this._updateFeatureEstimate(n,i);if(this._computeFeatureEstimate(i)<=e){if(n>=t||i.missingNodes>0||0===r)break;o=n,n=.5*(n+s)}else s=n,n=.5*(n+o)}return this._version=w(this._version),this._viewportQueries.updateScreenSpaceErrorBias(i),Math.min(t,n)}_updateFeatureEstimate(e,t){this._version=w(this._version),this._viewportQueries.updateScreenSpaceErrorBias(e),this.traverseVisible(((e,i)=>this._updateNodeFeatureEstimate(null!=i?i.node:void 0,t)))}_updateNodeFeatureEstimate(e,t){if(null!=e&&!e.failed&&null!=e.numFeatures)return this._isLoaded(e.index)?(t.known+=e.numFeatures,++t.knownNodes,void(this._isSelected(e)||(t.unremoved+=e.numFeatures))):void(this._isSelected(e)&&(null!=e.numFeatures?(t.missing+=e.numFeatures,t.known+=e.numFeatures,++t.knownNodes):++t.missingNodes))}_computeFeatureEstimate(e){let t=e.known-e.unremoved;return e.knownNodes>3&&e.missingNodes>0&&(t+=e.known/e.knownNodes*e.missingNodes),Math.max(0,t)}load(){return this._load(this._missing)}prefetch(){return this._prefetch.sort(((e,t)=>P.get(e)-P.get(t))),this._load(this._prefetch)}_load(e){if(0===e.length||!this._canRequest())return!1;for(;e.length>0&&this._canRequest();)if(0===this._nodesPerPage)this._loadNode(e.pop());else{const t=e.pop();t>=0?this._loadPage(t):this._loadNode(t)}return!0}get isLoading(){return this._indexMissing>0}get isPrefetching(){return this._prefetch.length>0}get indexLoading(){return this._loading.size}get indexMissing(){return this._indexMissing}get unloadedMemoryEstimate(){return this._unloadedMemoryEstimate}get updates(){return this._updates}get featureEstimate(){return this._featureEstimate}get maxPriority(){return Math.max(this._maxProcessingPrio,this._maxUnloadedPrio)}nodeTraversalState(e){if(null==e)return null;let t=this._nodeTraversalState.get(e.index);if(t&&S(t.version,this._version))return t;const i=this._viewportQueries.getLodLevel(e),n=this._viewportQueries.hasLOD(e);let s=!0;if(n){const t=this.getParentIndex(e.index);if(null!=t){const e=this._nodeTraversalState.get(t);s=!!e&&i>e.lodLevel}else s=i>0}else s=0===e.childCount;return t?(t.lodLevel=i,t.isChosen=s,t.version=M(!0,this._version),t):(t=new f(n,s,i,M(!0,this._version)),this._nodeTraversalState.set(e.index,t),t)}async _loadNode(e){this._loading.add(e);const i=this._getNodeInternal(e).ref;if(null==i)return void this._failedNodes.add(e);const n=i.id,s=this._urlPrefix+n,o=()=>{this._loading.delete(e),0===this._missing.length&&0===this._loading.size&&this.requestUpdate()};let r=null;try{r=e>=0?await this._streamDataController.request(s,\"json\"):await this._clientNodeLoader.loadNodeJSON(n)}catch(d){return o(),void(t(d)||(this._logger.error(\"#loadNode()\",this._layer,\"Error loading node: \"+s),this._failedNodes.add(e)))}o();const l=this._validateNode(n,r);if(null==l)return;l.obb&&this.invalidateNodeVisibilityCache(e);const a=this._addNode(l,e);this.nodeTraversalState(a)}_validateNode(e,t){if(null==t||\"object\"!=typeof t||t.id!==e)return this._logger.error(\"#validateNode()\",this._layer,`Invalid node. Wrong type or wrong id \"${e}\"`),null;if(!Array.isArray(t.mbs))return this._logger.error(\"#validateNode()\",this._layer,`Invalid bounding volume on node ${e}.`),null;t.sharedResource&&\"./shared\"!==t.sharedResource.href&&\"./shared/\"!==t.sharedResource.href&&this._logger.warn(\"#validateNode()\",this._layer,`Invalid shared resource href on node \"${e}\"`);const i=t.geometryData;null==i||Array.isArray(i)&&0===i.length||Array.isArray(i)&&1===i.length&&\"./geometries/0\"===i[0].href||this._logger.warn(\"#validateNode()\",this._layer,`Invalid geometry data on node \"${e}\"`);const n=t.attributeData,s=this._layer.attributeStorageInfo;null==n||Array.isArray(n)&&!n.some(((e,t)=>e.href!==`./attributes/${s?.[t]?.key??`f_${t}`}/0`))||this._logger.warn(\"#validateNode()\",this._layer,`Invalid attribute data on node \"${e}\"`),t.featureData&&t.featureData.length>1&&this._logger.warn(\"#validateNode()\",this._layer,`Node ${e} has ${t.featureData.length} bundles. Only the first bundle will be loaded.`);const o=t.hasOwnProperty(\"obb\")&&!this.ignoreServiceObb?t.obb:null,r=t.featureData&&1===t.featureData.length&&t.featureData[0].featureRange?t.featureData[0].featureRange[1]-t.featureData[0].featureRange[0]+1:void 0,l=t=>{if(null==t)return null;const i=t=>this._logger.error(\"#validateNode()\",this._layer,`Invalid node reference on node ${e}: ${t}`);if(\"number\"==typeof t.id)i(`id ${t.id} is a number instead of a string.`);else if(\"string\"!=typeof t.id||!Array.isArray(t.mbs))return i(\"Missing or invalid id.\"),null;if(!Array.isArray(t.mbs))return i(`Invalid bounding volume on reference ${t.id}.`),null;t.href&&t.href!==\"../\"+t.id&&this._logger.error(\"#validateNode()\",this._layer,`Invalid node href on node \"${e}\"`);const n=t.hasOwnProperty(\"obb\")&&!this.ignoreServiceObb?t.obb:null,s=new h(`${t.id}`,t.mbs);return s.serviceObb=n,s.visibilityObb=this._computeVisibilityObb(s),s},a=Array.isArray(t.children)?t.children.map(l).filter((e=>null!=e)):null,d=t.featureData&&t.featureData.length>1,u=t.isEmpty&&!0===t.isEmpty;return{id:e,mbs:t.mbs,obb:o,children:a,resources:{isEmpty:!d&&u,hasSharedResource:null!=t.sharedResource,attributes:t.attributeData?e:void 0,texture:t.textureData&&t.textureData.length>0?e:void 0,geometry:null!=t.geometryData?e:void 0},version:\"string\"==typeof t.version?t.version:null,lodSelection:Array.isArray(t.lodSelection)?t.lodSelection:null,numFeatures:r}}resetFailedNodes(){this._failedNodes.clear(),this._failedPages.clear(),this._forAllNodes((e=>{null!=e.node&&(e.node.failed=!1)}))}_entryPriority(e){const t=this._getNodeInternal(e),i=this.getParentIndex(e);if(null==t||null==i&&null==t.node)return null==i?1/0:this._entryPriority(i);let n=0;if(t.node&&null!=i){const e=this._nodeTraversalState.get(i);null!=e&&(n=e.lodLevel)}let s=this.progressiveLoadPenalty;for(let r=e;null!=r;r=this.getParentIndex(r))if(this._isLoaded(r)){s=0;break}const o=null!=t.ref?this._viewportQueries.distToPOI(t.ref):null!=t.node?this._viewportQueries.distToPOI(t.node):0;return-o-n*(o+this.progressiveLoadPenalty)+s}traverseVisible(e){const t=this._getNodeInternal(this._rootIndex);null!=t?this._traverseVisible(this._rootIndex,null,t,e):e(this._rootIndex,null,null)}_traverseVisible(e,t,i,n){if(i.node&&0===i.childCount)return void(this.isGeometryVisible(e)&&n(e,i,t));if(!this.isNodeVisible(e))return;if(n(e,i,t),null==i.node)return;const s=this.nodeTraversalState(i.node);if(s?.nodeHasLOD&&s.lodLevel===this._maxLodLevel)return;const o=this._getPage(e);for(let r=0;r<i.childCount;r++){const t=o.children[i.childOffset+r],s=this._getNodeInternal(t);null!=s?this._traverseVisible(t,e,s,n):n(t,null,e)}}traverse(e,t){t(e)&&this.traverseChildren(e,t)}traverseChildren(e,t){const i=e.index,n=this._getNodeInternal(i);null!=n&&this._traverseChildren(i,n,t)}_traverseChildren(e,t,i){const n=this._getPage(e);if(null==n)return;const s=t.childOffset+t.childCount;for(let o=t.childOffset;o<s;++o){const e=n.children[o],t=this._getNodeInternal(e);null!=t&&null!=t.node&&i(t.node)&&this._traverseChildren(e,t,i)}}updateChildrenLoaded(e,t){let i=this.getNode(e);for(;null!=i;)i.childrenLoaded+=t,i=this.getParent(i.index)}checkChildrenLoadedInvariant(){if(null==this.rootNode)return!0;const e=[],t=i=>{let n=this._isLoaded(i.index)||this._isReloading(i.index)?1:0;return this.traverseChildren(i,(e=>(n+=t(e),!1))),i.childrenLoaded!==n&&e.push(i.index),n};return t(this.rootNode),e.length&&this._logger.error(\"childrenLoaded invariant broken at following nodes: \"+e.join(\",\")),e.length>0}updateStats(e){if(this._updates.add.length>0&&(e.nodes+=\" + \"+this._updates.add.length),(this._indexMissing||this._prefetch.length>0)&&(e.index+=\" + \"+this._indexMissing||this._prefetch.length),e.prio=this._maxProcessingPrio,this._featureEstimate.estimate){const t=this._featureEstimate.estimate-e.features;t>0?e.features+=\" + \"+t:t<0&&(e.features+=\" - \"+-t)}}updateElevationInfo(e,t){this.needNodeElevationRange=t&&!!e&&(\"relative-to-ground\"===e.mode||\"on-the-ground\"===e.mode),this._viewportQueries.updateElevationInfo(e),this.invalidateAllElevationRanges()}invalidateAllElevationRanges(){this._forAllNodes((e=>{I(e),null!=e.node&&(e.node.elevationRange=null),null!=e.ref&&(e.ref.elevationRange=null)}))}_forAllNodes(e){if(null!=this._clientNodePage){const t=this._clientNodePage;for(let i=0;i<t.nodes.length;i++)e(t.nodes[i],-(i+1))}for(let t=0;t<this._nodePages.length;t++){const i=this._nodePages[t];if(i){const n=t*this._nodesPerPage;for(let t=0;t<i.nodes.length;t++)e(i.nodes[t],n+t)}}}get test(){return{addNode:(e,t)=>this._addNode(e,t)}}}const P=new Map;class x{constructor(t){this.missing=t,this.update=new e({deallocator:null}),this.add=new e({deallocator:null}),this.remove=new e({deallocator:null}),this.cancel=[]}reset(e){this.add.clear(),this.update.clear(),this.cancel=e}}function I(e){null!=e.node&&(m(e.node.renderMbs),v(e.node.serviceObbInRenderSR)),null!=e.ref&&(m(e.ref.renderMbs),v(e.ref.serviceObbInRenderSR))}function C(e){return b(e,-2)}function w(e){return b(e,2)}function M(e,t){return t+(e?1:0)}function S(e,t){return(-2&e)===t}function R(e){return 1==(1&e)}function E(e,t){return e<0?-1:0===t?0:e/t|0}function O(e=[],t=[],i=[]){return{nodes:e,children:t,parents:i}}function V(e,t){return e<0?-e-1:0===t?e:e%t}function L(e,t,i){return-1===t?-(e+1):0===i?e:t*i+e}const k=[[\"maxScreenThreshold\",d.MaxScreenThreshold],[\"screenSpaceRelative\",d.ScreenSpaceRelative],[\"removedFeatureDiameter\",d.RemovedFeatureDiameter],[\"distanceRangeFromDefaultCamera\",d.DistanceRangeFromDefaultCamera]];function A(e){if(e)for(let t=0;t<e.length;t++)for(const i of k)if(i[0]===e[t].metricType)return{lodMetric:i[1],maxError:e[t].maxError};return{lodMetric:d.None,maxError:0}}class F{constructor(){this.known=0,this.knownNodes=0,this.missing=0,this.missingNodes=0,this.unremoved=0}}function T(e){return Math.sqrt(e*(4/Math.PI))}const D=l(),U=l(),Q=l(),$=l();export{N as I3SIndex,A as selectErrorMetric};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nvar a;!function(a){a[a.FadeIn=0]=\"FadeIn\",a[a.FadeOut=1]=\"FadeOut\"}(a||(a={}));export{a as FadeDirection};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/PooledArray.js\";import{NodeState as i}from\"./I3SNode.js\";import{FadeDirection as o}from\"../support/I3SLayerView.js\";class s{constructor(e){this._layerView=e,this._lodGlobalDirty=!1}startNodeLoading(e,i,o,s){this._maxLodLevel=s.maxLodLevel,this._index=o,this._isNodeInScaleBounds=e,this._removeNodes=i}shouldLoadNode(e){if(null==e)return!1;const i=this._index.nodeTraversalState(e);return!!this._isChosenMaxLOD(i)||!!i.isChosen&&this._childrenRequireLoading(e)}setLodGlobalDirty(){this._lodGlobalDirty=!0}get requiresLODGlobalHandling(){return null!=this._index&&!0===this._lodGlobalDirty}lodGlobalHandling(e){if(!this.requiresLODGlobalHandling)return!1;this._lodGlobalDirty=!1;const i=this._layerView.view.resourceController.memoryController.usedMemory,o=Math.max(0,Math.floor(10*(i-1)));d.clear(),this._lodGlobalHandling(this._index.rootNode,o,!1,!!this._layerView.nodeCrossfadingEnabled);const s=d.length;this._removeNodes(d,e);const t=d.length<s;return 0!==d.length&&(this._lodGlobalDirty=!0),d.clear(),t}_lodGlobalHandling(e,s,t,l){if(null==e)return!1;const r=e.index,n=this._index,a=this._layerView,h=n.nodeTraversalState(e),u=this._isChosenMaxLOD(h),_=e.resources.isEmpty;if(u&&_)return e.childrenLoaded>0&&this._removeChildrenRecursive(e),!0;const c=a.isNodeLoaded(r);if(l&&c&&u){const i=!t&&this.hasNoVisibleChildren(e);a.fadeNode(r,o.FadeIn,!i)}const x=c&&(!a.isNodeFullyFadedIn||a.isNodeFullyFadedIn(r));if(c&&(a.updateNodeState(r,u?i.Leaf:i.Hole),u))return x&&this._removeChildrenRecursive(e),x;const L=e.childCount>0;let y=L;if(L)for(let i=0;i<e.childCount;i++){const e=n.getChildIndex(r,i),o=n.getNode(e);if(null!=o){!(!n.isGeometryVisible(e)||this._lodGlobalHandling(o,s,t||x,l))&&this._isNodeInScaleBounds(o)&&(y=!1)}else n.isNodeVisible(e)&&(y=!1)}const N=c&&!u&&(y||d.length<s);N&&d.push(r),!l||N||!c||t||y||a.fadeNode(r,o.FadeIn,!1);const m=e.resources.isEmpty;return y||x&&!N||m}_removeChildrenRecursive(e){this._index.traverseChildren(e,(e=>((this._layerView.isNodeLoaded(e.index)||this._layerView.isNodeReloading(e.index))&&d.push(e.index),e.childrenLoaded>0)))}hasNoVisibleChildren(e){let i=!0;return this._index.traverseChildren(e,(e=>!(!i||!this._index.isNodeVisible(e.index))&&(this._layerView.isNodeLoaded(e.index)?(i=!1,!1):e.childrenLoaded>0))),i}_childrenRequireLoading(e){let i=!1,o=!0;return this._index.traverseChildren(e,(e=>{if(!o||!this._index.isNodeVisible(e.index))return!1;const s=this._index.nodeTraversalState(e);return this._isChosenMaxLOD(s)&&this._index.isGeometryVisible(e.index)&&(i=!0),this._layerView.isNodeLoaded(e.index)?(o=!1,!1):e.childrenLoaded>0})),o&&i}_isChosenMaxLOD(e){return e.isChosen&&(!e.nodeHasLOD||e.lodLevel===this._maxLodLevel)}}const d=new e({deallocator:null});export{s as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{releaseMaybe as e}from\"../../../../../core/maybe.js\";import{isPromiseLike as t}from\"../../../../../core/promiseUtils.js\";class s{constructor(s,r){this._textureRep=s,this.loadPromise=null,this._disposed=!1;const i=this._textureRep.acquire(r);t(i)?(i.then((t=>{this._disposed?e(t):this._textureRef=t})),this.loadPromise=i):this._textureRef=i}dispose(){this._textureRef=e(this._textureRef),this._disposed=!0}get glTexture(){return null!=this._textureRef?this._textureRef.glTexture:null}}export{s as RenderTexture};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clamp as e}from\"../../../../core/mathUtils.js\";import{TextureEncoding as o,TextureUsage as a}from\"./enums.js\";import{RenderTexture as r}from\"../../webgl-engine/core/material/RenderTexture.js\";import{defaultMaskAlphaCutoff as s}from\"../../webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{getEllipsoidMode as t}from\"../../webgl-engine/core/shaderLibrary/util/EllipsoidMode.js\";import{TextureEncodingMimeType as l,CullFaceOptions as n,AlphaDiscardMode as i}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Texture as u}from\"../../webgl-engine/lib/Texture.js\";import{useSchematicPBR as c,defaultSchematicMRRFactors as m,defaultAdvancedMRRFactors as d}from\"../../webgl-engine/materials/pbrUtils.js\";import{TextureWrapMode as p}from\"../../../webgl/enums.js\";function g(e,o){const r=new Map,s=(e,o)=>{if(null==e)return-1;const a=r.get(e.id);if(a)return a.usage|=o,a.id;const s=r.size;return r.set(e.id,{id:s,usage:o}),s},t=o.pbrMetallicRoughness,l=t?.baseColorFactor,i=o.emissiveFactor,u=c({normalTexture:o.normalTexture,emissiveTexture:o.emissiveTexture,emissiveFactor:o.emissiveFactor,occlusionTexture:o.occlusionTexture,metallicRoughnessTexture:t?.metallicRoughnessTexture,metallicFactor:t?.metallicFactor,roughnessFactor:t?.roughnessFactor}),p=u?m[0]:t?.metallicFactor??d[0],g=u?m[1]:t?.roughnessFactor??d[1],T=\"mask\"===o.alphaMode?a.Color|a.AlphaMask:a.Color,x={baseColorFactor:l?[l[0],l[1],l[2],l[3]]:[1,1,1,1],baseColorTextureId:s(t&&t.baseColorTexture,T),metallicRoughnessTextureId:s(t&&t.metallicRoughnessTexture,a.MetallicRoughness),metallicFactor:p,roughnessFactor:g},b={alphaMode:o.alphaMode,alphaCutoff:o.alphaCutoff,doubleSided:o.doubleSided,cullFace:\"none\"===o.cullFace?n.None:\"back\"===o.cullFace?n.Back:\"front\"===o.cullFace?n.Front:n.None,normalTextureId:s(o.normalTexture,a.Normal),emissiveTextureId:s(o.emissiveTexture,a.Emissive),occlusionTextureId:s(o.occlusionTexture,a.Occlusion),emissiveFactor:i?[i[0],i[1],i[2]]:[0,0,0],metallicRoughness:x,wrapTextures:!1,hasParametersFromSource:u},F=[];return r.forEach((({usage:o},a)=>{const r=null!=e&&e[a]&&e[a].formats,s=r?h(r.map((({name:e,format:o})=>({name:e,encoding:f[o]})))):[];F.push({id:a,usage:o,encodings:s})})),{material:b,textures:F}}function h(e){return e.sort(((e,o)=>e.encoding-o.encoding))}const f={ktx2:o.KTX2,basis:o.Basis,dds:o.DDS_S3TC,png:o.PNG,jpg:o.JPG,\"ktx-etc2\":o.KTX_ETC2},T={[l.KTX2_ENCODING]:o.Basis,[l.BASIS_ENCODING]:o.Basis,[l.DDS_ENCODING]:o.DDS_S3TC,\"image/png\":o.PNG,\"image/jpg\":o.JPG,\"image/jpeg\":o.JPG,\"image/ktx\":o.KTX_ETC2};function x(o){const r=o&&o.materialDefinitions?Object.keys(o.materialDefinitions)[0]:null,s=o&&o.textureDefinitions?Object.keys(o.textureDefinitions)[0]:null,t=r?o.materialDefinitions?.[r]:null,l=s?o.textureDefinitions?.[s]:null,i=b();if(null!=t){const o=t.params;o.diffuse&&(i.metallicRoughness.baseColorFactor=[o.diffuse[0],o.diffuse[1],o.diffuse[2],1]),null!=o.doubleSided&&(i.doubleSided=o.doubleSided,i.cullFace=o.doubleSided?n.None:n.Back),\"none\"!==o.cullFace&&\"front\"!==o.cullFace&&\"back\"!==o.cullFace||(i.cullFace=\"none\"===o.cullFace?n.None:\"back\"===o.cullFace?n.Back:n.Front),o.transparency&&(i.metallicRoughness.baseColorFactor[3]=e(1-o.transparency,0,1)),(o.useVertexColorAlpha||i.metallicRoughness.baseColorFactor[3]<1)&&(i.alphaMode=\"blend\")}const u=[];if(null!=l){const e=0;!l.wrap||\"repeat\"!==l.wrap[0]&&\"repeat\"!==l.wrap[1]||(i.wrapTextures=!0);let o=a.Color;\"rgba\"===l.channels&&(i.alphaMode=\"blend\",o|=a.AlphaMask);const r=l.images.length-1,s=l.images[r],t=e=>e&&e.split(\"/\").pop(),n=Array.isArray(l.encoding)?h(l.encoding.map(((e,o)=>({name:t(s.href[o]),encoding:T[e]||0})))):[{name:t(s.href),encoding:T[l.encoding]||0}];u.push({id:e,usage:o,encodings:n}),i.metallicRoughness.baseColorTextureId=e}return{material:i,textures:u}}const b=()=>({alphaMode:\"opaque\",alphaCutoff:s,doubleSided:!0,cullFace:n.None,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[.8,.8,.8,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6},wrapTextures:!1,hasParametersFromSource:!0});function F(e,o,r,s){if(null==e||null==e.data)return null;const t=e.data,l=s.renderingContext.parameters.maxMaxAnisotropy,n=!e.downsampled&&l>1,i=r||!o.wrapTextures?C:P,c=w(e.encoding),m=e.usage&a.Color?\"opaque\"===o.alphaMode?3:4:3;return new u(t,{mipmap:n,maxAnisotropy:l,encoding:c,wrap:i,components:m,noUnpackFlip:!0})}const C={s:p.CLAMP_TO_EDGE,t:p.CLAMP_TO_EDGE},P={s:p.REPEAT,t:p.REPEAT};function S(o,l,n,u,c,p){const g=p.rendererTextureUsage,h=e=>R(u,n,e&g),f=l.metallicRoughness.baseColorFactor,T=e(l.metallicRoughness.baseColorFactor[3],0,1);o.baseColor=[f[0],f[1],f[2],T],o.hasParametersFromSource=!!l.hasParametersFromSource,o.usePBR=p.usePBR,o.mrrFactors=[l.metallicRoughness.metallicFactor,l.metallicRoughness.roughnessFactor,l.hasParametersFromSource?m[2]:d[2]],o.emissiveFactor=l.emissiveFactor,o.isIntegratedMesh=p.isIntegratedMesh,o.textureAlphaCutoff=\"mask\"===l.alphaMode?l.alphaCutoff:s,o.alphaDiscardMode=\"opaque\"===l.alphaMode?i.Opaque:\"mask\"===l.alphaMode?i.Mask:i.MaskBlend;const x=[],b=h(a.Color|a.AlphaMask);null!=b&&(o.baseColorTexture=new r(c,b),x.push(o.baseColorTexture.loadPromise));const F=h(a.MetallicRoughness);null!=F&&(o.metallicRoughnessTexture=new r(c,F),x.push(o.metallicRoughnessTexture.loadPromise));const C=h(a.Emissive);null!=C&&(o.emissionTexture=new r(c,C),x.push(o.emissionTexture.loadPromise));const P=h(a.Occlusion);null!=P&&(o.occlusionTexture=new r(c,P),x.push(o.occlusionTexture.loadPromise));const S=h(a.Normal);return null!=S&&(o.normalTexture=new r(c,S),x.push(o.normalTexture.loadPromise)),o.commonMaterialParameters.hasSlicePlane=p.slicePlaneEnabled,o.commonMaterialParameters.doubleSided=l.doubleSided,o.commonMaterialParameters.cullFace=l.cullFace,o.ellipsoidMode=t(p.viewSpatialReference),Promise.all(x)}function M(e){const a=!!e.compressedTextureS3TC,r=!!e.compressedTextureETC,s=has(\"disable-feature:i3s-basis\")?0:o.Basis|o.KTX2,t=o.JPG|o.PNG,l=s|o.DDS_S3TC;return t|(a?l:0)|(r?s:0)}function D(e,o){if(null!=o)return e.find((e=>0!=(e.encoding&o)))}function R(e,o,r){if(null==e||r===a.None)return null;for(let a=0;a<e.length;a++){const s=e[a];if(null!=s&&0!=(s.usage&r)){const e=o[a];return null!=e?e.id:null}}return null}function w(e){switch(e){case o.KTX2:return l.KTX2_ENCODING;case o.Basis:return l.BASIS_ENCODING;case o.DDS_S3TC:return l.DDS_ENCODING;case o.PNG:return\"image/png\";case o.JPG:return\"image/jpeg\";case o.KTX_ETC2:return\"image/ktx\";default:return\"\"}}export{S as configureMaterial,F as createTexture,b as defaultMaterial,g as getMaterialAndTextures,x as getMaterialAndTexturesFromShared,M as getSupportedEncodings,D as selectEncoding};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{result as e,assertResult as t}from\"../../../../core/asyncUtils.js\";import has from\"../../../../core/has.js\";import{clone as r}from\"../../../../core/lang.js\";import{eachAlways as i,isAbortError as o}from\"../../../../core/promiseUtils.js\";import{makeAbsolute as n}from\"../../../../core/urlUtils.js\";import{TextureEncoding as s}from\"./enums.js\";import{readBinaryAttribute as a,createGeometryDescriptor as u}from\"./I3SBinaryReader.js\";import{getMaterialAndTextures as l,getMaterialAndTexturesFromShared as f,selectEncoding as d}from\"./I3SMaterialUtil.js\";class c{constructor(e,t,r,i,o,n){if(this._streamDataController=t,this._logger=r,this._defaultGeometrySchema=i,this._requiredAttributes=o,this._options=n,this._logLayer=e,this._layerUrl=e.parsedUrl.path,this._geometryDefinitions=e.geometryDefinitions,e.materialDefinitions){const t=e.textureSetDefinitions;this._materialAndTextures=e.materialDefinitions.map((e=>l(t,e)))}}_load(e,t,r){return this._streamDataController.request(e,t,r)}_loadAttribute(e,t,r){const i=`${this._layerUrl}/nodes/${e.resources.attributes}/attributes/${t.key}/0`;return this._load(i,\"binary\",r).then((e=>a(t,e)))}loadAttributes(e,t,r){return i(t.map((t=>this._loadAttribute(e,t.attributeStorageInfo,r)))).then((r=>{const i={};for(let n=0;n<t.length;++n){const s=r[n].value;if(s)i[t[n].name]=s;else{if(o(r[n].error))throw r[n].error;this._logger.error(\"#loadAttributes\",this._logLayer,`Failed to load attributeData for '${t[n].name}' on node '${e.id}'`,r[n].error)}}return i}))}async loadNodeData(r,i){const o=null!=this._requiredAttributes&&r.resources.attributes?e(this.loadAttributes(r,this._requiredAttributes,i)):null,{bufferDefinition:n,bufferIndex:s}=b(this._geometryDefinitions,r),a=!!r.resources.geometry,l=a?e(this._loadGeometry(r.resources.geometry,s,i)):null,d=r.resources.hasSharedResource?await this._loadShared(r,i):null,c=r.resources.materialDefinition,y=this._materialAndTextures&&null!=c&&c>=0?this._materialAndTextures[c]:null!=d?f(d):null,D=y?.material,p=y?.textures??[],x=`${r.id}`,A=!a&&this._options.loadFeatureData,w=A?await this._loadFeatureData(x,i):null,T=A?m(w):h(D),$=null==T?g(w):null,j=p.length>0?e(this.loadTextures(r,p,i)):null;let I=null,U=null;if(l){I=t(await l);const e=_(this._defaultGeometrySchema,d);U=u(n,e)}const S=j?t(await j):null,q=o?t(await o):{},B=q?{attributeData:q,loadedAttributes:this._requiredAttributes}:null;if(null!=T)return{geometryData:T,attributeDataInfo:B,geometryBuffer:I,geometryDescriptor:U,requiredTextures:p,textureData:S};if(null!=$)return{pointData:$,attributeDataInfo:B,geometryBuffer:I,geometryDescriptor:U,requiredTextures:p,textureData:S};throw new Error}static _addAbsoluteHrefTexture(e,t){const r=e.textureDefinitions;if(null!=r)for(const i of Object.keys(r))for(const e of r[i].images)Array.isArray(e.href)?e.hrefConcat=e.href.map((e=>n(e,t))):e.hrefConcat=n(e.href,t)}static _fixTextureEncodings(e){const t=e.textureDefinitions;if(null!=t)for(const r in t){const e=t[r];if(Array.isArray(e.encoding))for(let t=0;t<e.encoding.length;t++){const r=e.encoding[t];\"data:\"===r.substring(0,5)&&(e.encoding[t]=r.substring(5))}else{const t=e.encoding;\"data:\"===t.substring(0,5)&&(e.encoding=t.substring(5))}}}_loadShared(e,t){const r=`${this._layerUrl}/nodes/${e.resources.geometry}/shared`;return this._load(r,\"json\",t).then((e=>(c._fixTextureEncodings(e),c._addAbsoluteHrefTexture(e,r),e)))}_loadTexture(e,t,r,i,o,n){let a=!1;return o===s.DDS_S3TC||o===s.KTX2||o===s.Basis?this._load(e,\"binary\",n).then((e=>({id:t,usage:r,data:e,encoding:o,downsampled:a}))):this._load(e,\"image\",n).then((e=>{let n=e;const s=4096,u=2;if(i&&e.width*e.height>=s){const t=Math.ceil(e.width/u),r=Math.ceil(e.height/u),i=document.createElement(\"canvas\");i.width=t,i.height=r;i.getContext(\"2d\").drawImage(e,0,0,t,r),n=i,a=!0}return{id:t,usage:r,data:n,encoding:o,downsampled:a}}))}loadTextures(e,t,r){const i=!!this._options.uncompressedTextureDownsamplingEnabled,o=this._options.textureUsageMask;return Promise.all(t.map((t=>{if(0==(t.usage&o))return null;const n=d(t.encodings,this._options.textureEncodings);if(null==n)return this._logger.error(\"#loadTextures\",this._logLayer,`No known encoding for texture found on node ${e.id}`),Promise.reject();const s=e.resources.texture||e.id,a=`${this._layerUrl}/nodes/${s}/textures/${n.name}`;return this._loadTexture(a,t.id,t.usage,i,n.encoding,r)})))}_loadFeatureData(e,t){const r=`${this._layerUrl}/nodes/${e}/features/0`;return this._load(r,\"json\",t)}_loadGeometry(e,t,r){const i=`${this._layerUrl}/nodes/${e}/geometries/${t}`;return this._load(i,\"binary\",r)}}function h(e){return{featureIds:[],geometries:[{type:\"ArrayBufferView\",params:{material:e}}],featureDataPosition:[0,0,0]}}function m(e){if(!e)return null;for(const t of e.featureData){const e=t.geometries;if(null!=e)for(const r of e)return{featureIds:[t.id],featureDataPosition:t.position,geometries:[r]}}return null}function g(e){if(!e)return null;const t=new Array;for(const r of e.featureData)null!=r.position&&t.push({featureIds:[r.id],featureDataPosition:r.position,geometries:[]});return t}function _(e,t){if(!e||!t||!t.materialDefinitions)return e;const i=Object.keys(t.materialDefinitions)[0];return!t.materialDefinitions[i].params.vertexRegions&&e.vertexAttributes.region&&delete(e=r(e)).vertexAttributes.region,e}function b(e,t){const r={bufferDefinition:null,bufferIndex:0},i=t.resources.geometryDefinition;if(null==e||null==i||i<0)return r;const o=i>=0?e[i].geometryBuffers:null;if(null==o)return r;for(let n=0;n<o.length;n++){const e=o[n];if(null==e.compressedAttributes)r.bufferIndex=n,r.bufferDefinition=o[n];else if(\"draco\"===e.compressedAttributes.encoding&&!has(\"disable-feature:i3s-draco\"))return r.bufferIndex=n,r.bufferDefinition=e,r}return r}export{c as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{onAbortOrThrow as e,always as t}from\"../../../../core/promiseUtils.js\";class r{constructor(e,t){this._requester=e,this._apiKey=t,this._activeRequests=new Set}get busy(){return this._requester.busy}request(r,s,o){const l=new AbortController,a=e(o,(()=>l.abort())),n={signal:l.signal,query:{token:this._apiKey}},i=this._requester.request(r,s,n),u={response:i,abortController:l,abortHandle:a};return this._activeRequests.add(u),t(i,(()=>{u.abortController=null,u.abortHandle?.remove(),u.abortHandle=null,this._activeRequests.delete(u)})),i}cancelAll(){this._activeRequests.forEach((e=>{e.abortController?.abort(),e.abortController=null,e.abortHandle?.remove()})),this._activeRequests.clear()}}export{r as I3SStreamDataController};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{d as e,i as t,l as i,g as s,e as n,p as r,b as o,a}from\"../../../../chunks/vec3.js\";import{c as h}from\"../../../../chunks/vec3f64.js\";import{c}from\"../../../../chunks/vec4.js\";import{getReferenceEllipsoid as l}from\"../../../../geometry/ellipsoidUtils.js\";import{projectBoundingSphere as m}from\"../../../../geometry/projection.js\";import{getSphericalPCPF as u}from\"../../../../geometry/spatialReferenceEllipsoidUtils.js\";import{create as p,fromMatrix as _,intersectsSphere as d}from\"../../../../geometry/support/frustum.js\";import{isPlateCarree as g}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{w as v}from\"../../../../chunks/sphere.js\";import{makeDehydratedPoint as b}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{evaluateElevationAlignmentAtPoint as x}from\"../graphics/elevationAlignmentUtils.js\";import{ElevationContext as f}from\"../graphics/ElevationContext.js\";import{createContextWithoutExpressionSupport as R,extractExpressionInfo as M}from\"../graphics/featureExpressionInfoUtils.js\";import{LodMetric as C}from\"./I3SNode.js\";import{isValidMbs as D,isValidObb as S,transformObb as E,intersectBoundingRectWithMbs as P,MbsIntersectResult as O}from\"./I3SUtil.js\";import{create as L,computeOffsetObb as F,isVisible as j}from\"../../support/orientedBoundingBox.js\";const y=1e5;class B{constructor(e,t,i,s,n,r,o,a,c={}){this._indexSR=e,this._renderCoordsHelper=t,this._clippingArea=n,this._elevationProvider=r,this._viewingMode=o,this._options=c,this._frustum=p(),this._useFrustumCulling=!1,this._poi=h(),this._elevationContext=null,this.minDistance=1/0,this.maxDistance=0,this.maxLodLevel=2,this._tmpObb=L(),this._tmp1=h(),this._tmp2=h(),this._tmp3=h(),this._tmp0=h(),this._screenspaceErrorBias=c.screenspaceErrorBias||1,this._progressiveLoadFactor=c.progressiveLoadFactor||1,this.updateCamera(i,s),this.engineSR=this._renderCoordsHelper.spatialReference,this.updateElevationInfo(a),this._tmpPoint=b(0,0,0,e),this._isECEFOBBInLocalMode=this._indexSR.isWGS84&&(this.engineSR.isWebMercator||g(this.engineSR)),this._indexSREllipsoidRadius=l(this._indexSR).radius}updateElevationInfo(e){null!=e?(this._elevationContext=f.fromElevationInfo(e),this._elevationContext.updateFeatureExpressionInfoContext(R(M(e,!1)))):this._elevationContext=null}updateCamera(e,t){this._useFrustumCulling=t,t&&_(e.viewMatrix,e.projectionMatrix,this._frustum),this._screenSizeFactor=1/(e.perScreenPixelRatio/2),this._camPos=e.eye,this.minDistance=1/0,this.maxDistance=0}setPointOfInterest(e){this._poi=e}updateScreenSpaceErrorBias(e){const t=this._screenspaceErrorBias;return this._screenspaceErrorBias=e,t}updateClippingArea(e){this._clippingArea=e}getElevationRange(e){if(null==this._elevationContext)return null;const t=e.mbs;if(!t)return null;const i=\"relative-to-scene\"===this._elevationContext.mode?\"scene\":\"ground\";if(this._elevationProvider.getSphereElevationBounds)return this._elevationProvider.getSphereElevationBounds(t,this._indexSR);const s=t[0],n=t[1],r=t[2],o=this._elevationProvider.getElevation(s,n,r,this._indexSR,i);return null!=o?{min:o,max:o}:null}getRenderMbs(e){const t=e.renderMbs;if(D(t))return t;if(e.mbs&&c(t,e.mbs),this._elevationContext&&e.elevationRange&&Number.isFinite(e.elevationRange.min)){let i=0,s=0;switch(this._elevationContext.mode){case\"relative-to-ground\":i=this._elevationContext.geometryZWithOffset(t[2],this._renderCoordsHelper)+e.elevationRange.min-t[2],s=e.elevationRange.max-e.elevationRange.min;break;case\"on-the-ground\":i=e.elevationRange.min-t[2],s=e.elevationRange.max-e.elevationRange.min}t[2]+=i+.5*s,t[3]+=.5*s}else this._elevationContext&&t[3]<y&&(this._tmpPoint.x=t[0],this._tmpPoint.y=t[1],this._tmpPoint.z=t[2],t[2]=x(this._tmpPoint,this._elevationProvider,this._elevationContext,this._renderCoordsHelper));return m(t,this._indexSR,t,this.engineSR),t}getVisibilityObb(e){if(null!=e.visibilityObb)return e.visibilityObb;const t=e.serviceObb,i=.01*this._indexSREllipsoidRadius;return null==t||!e.mbs||!S(t)||this._isECEFOBBInLocalMode&&t.halfSize.some((e=>e>i))?null:(e.serviceObbInRenderSR=this._computeRenderObb(t,e.serviceObbInRenderSR,e.mbs[3],e.elevationRange),e.serviceObbInRenderSR)}_computeRenderObb(e,t,i,s){if(null==t)t=L();else if(S(t))return t;let n=0,r=0;if(this._elevationContext&&null!=s&&Number.isFinite(s.min))switch(this._elevationContext.mode){case\"relative-to-ground\":n=this._elevationContext.geometryZWithOffset(e.center[2],this._renderCoordsHelper)+s.min-e.center[2],r=s.max-s.min;break;case\"on-the-ground\":n=s.min-e.center[2],r=s.max-s.min}else this._elevationContext&&i<y&&(this._tmpPoint.x=e.center[0],this._tmpPoint.y=e.center[1],this._tmpPoint.z=e.center[2],n=x(this._tmpPoint,this._elevationProvider,this._elevationContext,this._renderCoordsHelper)-e.center[2]);return r>0?(E(e,this._indexSR,this._tmpObb,this.engineSR,n),F(this._tmpObb,0,r,this._viewingMode,t)):E(e,this._indexSR,t,this.engineSR,n),t}isNodeVisible(e){const t=this.getRenderMbs(e);if(!this._isMBSinClippingArea(t))return!1;if(!this._useFrustumCulling)return!0;const i=this.getVisibilityObb(e);return null!=i?j(i,this._frustum):d(this._frustum,v(t))}isGeometryVisible(e){if(!this._useFrustumCulling)return!0;const t=e.geometryObb;return null!=t?j(t,this._frustum):this.isNodeVisible(e)}_isMBSinClippingArea(e){return null==this._clippingArea||P(this._clippingArea,e)!==O.OUTSIDE}_screenSpaceDiameterMbs(t,i){const s=this.getRenderMbs(t),n=Math.sqrt(e(s,this._camPos)),r=n-s[3];return this._updateMinMaxDistance(n),r<0?.5*Number.MAX_VALUE:i/r*this._screenSizeFactor}calcCameraDistance(e){return this.calcCameraDistanceToCenter(e)-this.getRenderMbs(e)[3]}calcCameraDistanceToCenter(e){const i=this.getRenderMbs(e),s=t(i,this._camPos);return this._updateMinMaxDistance(s),s}calcAngleDependentLoD(e){const s=this.getRenderMbs(e),n=s[3],r=(Math.abs(s[0]*(s[0]-this._camPos[0])+s[1]*(s[1]-this._camPos[1])+s[2]*(s[2]-this._camPos[2]))/i(s)+n)/t(s,this._camPos);return Math.min(1,r)}hasLOD(e){return e.lodMetric!==C.None}_getDistancePlanarMode(e,t){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2],r=i*i+s*s,o=t[3];if(r<=o*o)return Math.abs(n);const a=Math.sqrt(r)-o;return Math.sqrt(n*n+a*a)}_getDistanceGlobeMode(h,c){const l=i(c),m=i(h)-l;s(this._tmp0,h,n(h,c)/r(h));const u=e(c,this._tmp0),p=c[3];if(u<=p*p)return Math.abs(m);{const e=s(this._tmp0,c,1/l),r=l,u=p*p/2/r,_=s(this._tmp1,e,r-u),d=h,g=o(this._tmp2,d,_),v=o(this._tmp2,g,s(this._tmp3,e,n(e,g))),b=a(this._tmp2,_,s(this._tmp2,v,p/i(v)));let x=t(d,b);if(m>=2e5){const t=o(this._tmp1,d,b);let s=n(t,e)/i(t);s<.08&&(s=1e-4),x/=s}return x}}_getDistance(e,t){return this.engineSR===u(this.engineSR)?this._getDistanceGlobeMode(e,t):this._getDistancePlanarMode(e,t)}_updateMinMaxDistance(e){e>0?(this.minDistance=Math.min(this.minDistance,e),this.maxDistance=Math.max(this.maxDistance,e)):(this.minDistance=0,this.maxDistance=Math.max(this.maxDistance,-e))}getLodLevel(e){if(e.lodMetric===C.None)return 0;if(0===e.childCount)return this.maxLodLevel;if(this._useFrustumCulling&&this._progressiveLoadFactor<1){const t=this._progressiveLoadFactor*this._screenspaceErrorBias,i=this._screenspaceErrorBias;return this.evaluateLODmetric(e,t)?this.evaluateLODmetric(e,i)?2:1:0}return this.evaluateLODmetric(e,this._screenspaceErrorBias)?this.maxLodLevel:0}evaluateLODmetric(e,t){switch(e.lodMetric){case C.ScreenSpaceRelative:{const i=this.getRenderMbs(e),s=this._getDistance(this._camPos,i),n=2*s/this._screenSizeFactor,r=s+i[3];return this._updateMinMaxDistance(r),e.maxError*t<=n}case C.MaxScreenThreshold:{let i=this._screenSpaceDiameterMbs(e,e.mbs[3]*t);return this._options.angleDependentLoD&&(i*=this.calcAngleDependentLoD(e)),i<e.maxError}case C.RemovedFeatureDiameter:return this._screenSpaceDiameterMbs(e,e.maxError)*t<10;case C.DistanceRangeFromDefaultCamera:return this.calcCameraDistance(e)>e.maxError*t}return!1}distToPOI(e){const i=this.getRenderMbs(e);return t(i,this._poi)-i[3]}distCameraToPOI(){return t(this._camPos,this._poi)}}export{B as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import i from\"../../../core/Handles.js\";import has from\"../../../core/has.js\";import s from\"../../../core/Logger.js\";import r from\"../../../core/PooledArray.js\";import{EsriPromiseMixin as a}from\"../../../core/Promise.js\";import{isAbortError as d}from\"../../../core/promiseUtils.js\";import{watch as o,initial as n,sync as l}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as u}from\"../../../core/accessorSupport/decorators/subclass.js\";import{projectBoundingRect as _}from\"../../../geometry/projection.js\";import{create as c,intersectsSphere as p}from\"../../../geometry/support/aaBoundingRect.js\";import{makeDehydratedPoint as g}from\"../dehydratedFeatures.js\";import{PromiseQueue as m}from\"../../support/PromiseQueue.js\";import{viewingModeFromString as y}from\"../../../views/ViewingMode.js\";import{I3SClientNodeLoader as x}from\"../../../views/3d/layers/i3s/I3SClientNodeLoader.js\";import{addCallback as f}from\"../../../views/3d/layers/i3s/I3SFrameTask.js\";import{I3SIndex as b}from\"../../../views/3d/layers/i3s/I3SIndex.js\";import N from\"../../../views/3d/layers/i3s/I3SLodHandling.js\";import{NodeState as w,CacheState as v}from\"../../../views/3d/layers/i3s/I3SNode.js\";import C from\"../../../views/3d/layers/i3s/I3SNodeLoader.js\";import{I3SStreamDataController as D}from\"../../../views/3d/layers/i3s/I3SStreamDataController.js\";import{getVertexCrs as L,getIndexCrs as S,findIntersectingNodes as V}from\"../../../views/3d/layers/i3s/I3SUtil.js\";import I from\"../../../views/3d/layers/i3s/I3SViewportQueries.js\";import{FadeDirection as A}from\"../../../views/3d/layers/support/I3SLayerView.js\";import{toBoundingRect as F}from\"../../../views/3d/support/extentUtils.js\";import{ClientType as M,maxDownloadSlots as O}from\"../../../views/3d/support/index.js\";import{extractSafeScaleBounds as U,scaleBoundsPredicate as P}from\"../../../views/support/layerViewUtils.js\";import{noBudget as G}from\"../../../views/support/Scheduler.js\";const q=\"esri.layers.graphics.controllers.I3SOnDemandController\",j=s.getLogger(q),Q=100,T=2,E=1e4,H=1e-4,k=1.2,R=500,B=1.5;let z=class extends(a(t)){get isMeshPyramid(){return\"mesh-pyramids\"===this.layer.profile||\"MeshPyramid\"===this.layer.store?.lodType}get isGraphics3D(){return\"points\"===this.layer.profile}get useMaximumNumberOfFeatures(){return!this.isMeshPyramid&&(null==this.layer.priority||\"High\"===this.layer.priority)}get indexStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(M.I3S_INDEX);return new D(e,this.layer.apiKey)}get dataStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(M.I3S_DATA);return new D(e,this.layer.apiKey)}get crsVertex(){return L(this.layer)}get crsIndex(){return S(this.layer)}get layer(){return this.layerView.i3slayer}get running(){return this.updating}get rootNodeVisible(){if(null!=this._index){const e=this._index.rootNode;if(null!=e)return this._updateViewData(),this._index.isNodeVisible(e.index)}return!0}get index(){return this._index}constructor(e){super(e),this.screenSizeFactor=0,this.featureTarget=5e4,this.fixedFeatureTarget=!1,this.updating=!0,this.updatingProgress=1,this.leavesReached=!1,this.scaleVisibilityEnabled=!0,this.worker=null,this._featureLOD=1,this._stableFeatureLOD=!1,this._isIdle=!1,this._cameraDirty=!0,this._invisibleDirty=!1,this._idleStateCallbacks=null,this._newLoadingNodes=new r({deallocator:null}),this._loadedNodeScales=new Map,this._modificationsNodeFilteringArray=new r,this._downloadingCount=0,this._loadingNodes=new Map,this._updatingNodes=new Map,this._progressMaxNumNodes=1,this._requiredAttributes=new Array,this._requiredAttributesDirty=!0,this._updatesDisabled=!1,this.disableIDBCache=!1,this._disableMemCache=!1,this._restartNodeLoading=!1,this._fields=null,this._attributeStorageInfo=null,this._handles=new i,this._idleQueue=new m,this._elevationUpdateNodes=new r({deallocator:null}),this._errorCount=0}initialize(){const{layerView:e,layer:t}=this;this._disableMemCache=!e.loadCachedGPUData||!e.addCachedGPUData,this._lodHandling=new N(e),this._defaultGeometrySchema=t.store.defaultGeometrySchema,this.disableIDBCache=has(\"disable-feature:idb-cache\"),\"fields\"in t&&(this._fields=t.fields,this._attributeStorageInfo=t.attributeStorageInfo),this.addResolvingPromise(Promise.all([t.indexInfo,t.when(),e.when()]).then((([i])=>{if(this.destroyed||!e||e.destroyed||!i)return;const{view:s,clientGeometry:r}=e,{resourceController:a}=s;if(this._setClippingArea(s.clippingArea),this.addHandles([o((()=>s?.pointsOfInterest?.focus?.renderLocation),(e=>this._pointOfInterestChanged(e)),n),o((()=>a.memoryController.memoryFactor),(()=>this._setCameraDirty()),l),o((()=>e.contentVisible),(e=>{const t=e?()=>this._updateIdleState(!0):()=>this._updateViewData(),i=e?()=>this._updateIdleState(!1):()=>{};e&&null!=this._index&&this._index.invalidateAllElevationRanges(),this._idleStateCallbacks?(e||this.cancelNodeLoading(),this.restartNodeLoading(),this._idleStateCallbacks.idleBegin=t,this._idleStateCallbacks.idleEnd=i):this._idleStateCallbacks=a.scheduler.registerIdleStateCallbacks(t,i)}),n),f(e.view.resourceController.scheduler,this),o((()=>e.uncompressedTextureDownsamplingEnabled),(()=>this.restartNodeLoading())),o((()=>[this.featureTarget,this.fixedFeatureTarget]),(()=>{this._setCameraDirty(),this._stableFeatureLOD=!1})),o((()=>s.state?.contentCamera),(()=>this._setCameraDirty())),o((()=>t.elevationInfo),(e=>this._elevationInfoChanged(e))),o((()=>t.effectiveScaleRange),(()=>this._scaleBoundsChanged())),o((()=>e.lodFactor),(()=>this._setCameraDirty())),o((()=>e.availableFields),(()=>this._requiredFieldsChange())),o((()=>e.holeFilling),(e=>null!=this._index&&(this._index.holeFilling=e)))]),this._updateScaleHandles(),this._viewportQueries=new I(this.crsIndex,s.renderCoordsHelper,s.state.contentCamera,!s.state.fixedContentCamera||this.isGraphics3D,this._clippingArea,this.isMeshPyramid?s.basemapTerrain:s.elevationProvider,y(s.viewingMode),this.layer.elevationInfo,{progressiveLoadFactor:this._getProgressiveLoadFactor(),screenspaceErrorBias:this._lod,angleDependentLoD:this._lod<.5}),this._clientNodeLoader=new x(this.layer.uid,this.crsIndex,s.renderCoordsHelper.spatialReference,s.state.viewingMode,s.resourceController.memoryController,this.worker),this._index=new b(t,i,this.indexStreamController,this._clientNodeLoader,this._viewportQueries,j,e.holeFilling,(t=>e.isNodeLoaded(t)),(t=>e.isNodeReloading(t)),(e=>this._shouldLoadNode(e)),(e=>this._enableFromGPUCache(e,w.Leaf)),(e=>this._needsUpdate(e)),(()=>!this.indexStreamController.busy),(t=>e.computeVisibilityObb?e.computeVisibilityObb(t):null),e?.computeNodeFiltering?t=>e.computeNodeFiltering(t):void 0),this._index.updateElevationInfo(this.layer.elevationInfo,this.isMeshPyramid||this.isGraphics3D),this._index.imModificationsChanged(!!e.hasModifications),this._index.layerFilterChanged(!!e.hasGeometryFilter),null!=r){for(const e of r)this._addMesh(e.mesh,e.oid);this.addHandles(r.on(\"change\",(e=>{for(const t of e.removed)this._removeMesh(t.oid);for(const t of e.added)this._addMesh(t.mesh,t.oid)})))}this._startNodeLoading()}))),this._tmpPoint=g(0,0,0,this.crsIndex)}updateNodeModificationStatus(e){const t=this._index,i=this.layerView;null!=t&&i?.updateNodeModificationStatus&&(this._modificationsNodeFilteringArray.clear(),e.forAll((e=>{const i=t.getNode(e);null!=i&&this._modificationsNodeFilteringArray.push(i)})),i.updateNodeModificationStatus(this._modificationsNodeFilteringArray),this._invisibleDirty=!0)}destroy(){this.cancelNodeLoading(),this._idleStateCallbacks&&(this._isIdle=!1,this._idleStateCallbacks.remove(),this._idleStateCallbacks=null),this._handles.destroy(),this._nodeLoader=null,K.prune(),null!=W&&(W.hide(),W=null)}_getRequiredAttributes(){if(null==this._attributeStorageInfo||!this._fields||!this.layerView.availableFields)return[];const e=this._attributeStorageInfo,t=this._fields,i=this.layer.objectIdField;return this.layerView.availableFields.map((i=>{const s=$(e,i),r=$(t,i);return s>=0&&r>=0?{index:s,name:t[r].name,field:t[r],attributeStorageInfo:e[s]}:null})).filter((e=>null!=e&&e.name!==i))}_requiredFieldsChange(){const e=this._getRequiredAttributes();X(this._requiredAttributes,e)||(this._requiredAttributes=e,this._requiredAttributesDirty=!1,this.restartNodeLoading())}requestUpdate(){this._requiredAttributesDirty=!0,this.restartNodeLoading()}_setClippingArea(e){const t=c();F(e,t,this.layerView.view.renderSpatialReference)?this._clippingArea=t:this._clippingArea=null}_pointOfInterestChanged(e){null!=this._viewportQueries&&(this._viewportQueries.setPointOfInterest(e),null!=this._index&&(this._index.progressiveLoadPenalty=J.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate()))}updateClippingArea(e){this._setClippingArea(e),null!=this._viewportQueries&&null!=this._index&&(this._viewportQueries.updateClippingArea(this._clippingArea),this._index.invalidateVisibilityCache()),this._setCameraDirty()}_setCameraDirty(){this._cameraDirty=!0,this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}_addMesh(e,t){if(null==this._index)return;const i=this._clientNodeLoader.createMeshNodeInfo(e,t),s=this._index.addClientNodeToIndex(i.id,i.mbs);this._clientNodeLoader.addMeshNode(s,i),this._evaluateUpdating(),this.notifyChange(\"rootNodeVisible\")}_removeMesh(e){const t=this._clientNodeLoader.getMeshNodeIndex(e);if(null!=t){if(null==this._index)throw new Error(\"delayed removal of client side i3s node geometry not supported yet.\");{const e=(e,t)=>{this.layerView.removeNode(t),this._loadedNodeScales.delete(t),this._clientNodeLoader.removeNode(e),this.layerView.deleteCachedNodeData&&null!=e&&this.layerView.deleteCachedNodeData(e),this.layerView.deleteCachedGPUData?.(this.layerView.loadCachedGPUData?.(t))},i=(e,t,i)=>{this._clientNodeLoader.updateNodeIndex(e,t,i),this.layerView.updateNodeIndex&&this.layerView.updateNodeIndex(t,i)};this._index.removeClientNodeFromIndex(t,e,i),this.notifyChange(\"rootNodeVisible\")}}}updateElevationChanged(e,t){const i=this._index;if(null==i||null==i.rootNode||null==t)return null;this.crsIndex.equals(t)||(_(e,t,Y,this.crsIndex),e=Y);const s=this._elevationUpdateNodes;return s.clear(),V(e,i.rootNode,i,(e=>s.push(e.index))),s.length&&(s.forAll((e=>i.updateElevationChanged(e))),this._setCameraDirty()),s}removeAllGeometryObbs(){null!=this._index&&this._index.removeAllGeometryObbs()}getRenderMbs(e){return null!=this._viewportQueries?this._viewportQueries.getRenderMbs(e):null}_elevationInfoChanged(e){null!=this._index&&(this._index.updateElevationInfo(e,this.isMeshPyramid||this.isGraphics3D),this._setCameraDirty())}_updateScaleHandles(){const e=\"scale-bounds\";this._handles.remove(e),this._areScaleBoundsActive&&this._handles.add(this.layerView.view.basemapTerrain.on(\"scale-change\",(e=>this._scaleUpdateHandler(e))),e)}_scaleBoundsChanged(){this._areScaleBoundsActive||this._loadedNodeScales.clear(),this._updateScaleHandles(),this._setCameraDirty()}_scaleUpdateHandler(e){this._updateScaleInBoundingRect(e.extent,e.spatialReference),this._setCameraDirty()}_updateScaleInBoundingRect(e,t){const i=this._index;if(null==i)return;null!=i.rootNode&&_(e,t,Y,this.crsIndex)&&this._loadedNodeScales.forEach(((e,t)=>{const s=i.getNode(t);null!=s&&p(Y,s.mbs)&&this._loadedNodeScales.set(t,this._computeScale(s))}))}restartNodeLoading(){this._restartNodeLoading=!0,this.cancelNodeLoading(),this._evaluateUpdating()}schedule(e,t){return this._idleQueue.push(e,t)}reschedule(e,t){return this._idleQueue.unshift(e,t)}get _isIntegratedMesh(){return\"integrated-mesh\"===this.layer.type}get _areScaleBoundsActive(){const{minScale:e,maxScale:t}=U(this.layer);return this.scaleVisibilityEnabled&&(e>0||t>0)}get unloadedMemoryEstimate(){return null!=this._index&&this.layerView.contentVisible?this._index.unloadedMemoryEstimate*this._lodDropFactor:0}async _loadNodeData(e,t){return(e.index<0?this._clientNodeLoader:this._nodeLoader).loadNodeData(e,t)}async _loadAttributes(e,t,i){return(e.index<0?this._clientNodeLoader:this._nodeLoader).loadAttributes(e,t,i)}get indexDepth(){return null!=this._index?this._index.maxLevel:0}set disableMemCache(e){this.layerView.loadCachedGPUData&&this.layerView.addCachedGPUData||(this._disableMemCache=!0),this._disableMemCache=e}runTask(e,t){return this.layerView.contentVisible?this.layerView.visible&&null!=this._index?(this._processWithErrorLogging(e,t),this._index.maxPriority):-1/0:(this._updateViewData(),this._evaluateUpdating(),-1/0)}_processWithErrorLogging(e,t){try{this._process(e,t)}catch(i){this._errorCount<50?j.error(\"Error during processing: \"+i):50===this._errorCount&&j.error(\"Too many errors for this layer. Further errors will not be displayed.\"),this._errorCount++}}_process(e,t){this._restartNodeLoading&&this._startNodeLoading(),null!=this._nodeLoader&&null!=this._index&&(this._updateViewData(),this._invisibleDirty&&this._removeInvisibleNodes(e)&&(this._invisibleDirty=!1),this._isIntegratedMesh&&(e.enabled=!1),e.run((()=>this._processIndex(e))),this._updateFeatureLOD(),e.run((()=>this._processCache(e))),this._isIntegratedMesh&&(e.enabled=!0),e.run((()=>this._processNodes(e,t))),this._idleQueue.runTask(e),e.run((()=>this._prefetchIndex())),t.numIndexLoading+=this._index.indexLoading,t.numNodesLoading+=this._downloadingCount,e.run((()=>this._lodHandling.lodGlobalHandling(e))),this._evaluateUpdating())}_processIndex(e){if(null==this._index)return!1;if(this._index.dirty){this._newLoadingNodes.clear(),this._index.update(Array.from(this._loadingNodes.keys()),e,(e=>this.updateNodeModificationStatus(e))),this._disableMemCache||(this._newLoadingNodes.pushArray(this._index.updates.add.data,this._index.updates.add.length),this._newLoadingNodes.pushArray(this._index.updates.missing.data,this._index.updates.missing.length));const t=this._index.featureEstimate.leavesReached;this._index.isLoading||t===this._get(\"leavesReached\")||this._set(\"leavesReached\",t)}return this._index.load()}_prefetchIndex(){return!(null==this._index||this._loadingNodes.size>0||this._index.updates.add.length>0)&&this._index.prefetch()}_updateFeatureLOD(){if(!this.useMaximumNumberOfFeatures||null==this._index||null==this._viewportQueries)return;const e=!this._index.isLoading,t=this.featureTarget*this._baseLOD,i=this._index.featureEstimate;if(i.estimate=i.estimate||t/2,this._index.indexMissing>R){if(this._featureLOD<=H)return;this._featureLOD/=B,this._stableFeatureLOD=!1}else if(e&&i.estimate<t){if(i.leavesReached||this._featureLOD>=E||this._stableFeatureLOD)return;const e=Math.min(10,Math.max(t/i.estimate,1.001));this._featureLOD*=e;const s=this._lod,r=this._index.checkFeatureTarget(t,s);r!==s&&(this._featureLOD=r/this._baseLOD,this._stableFeatureLOD=!0)}else{if(!(i.estimate>t*k||e&&i.estimate>t))return;if(this._featureLOD<=H)return;this._featureLOD/=1+.25*(i.estimate/t-1),this._stableFeatureLOD=!1}this._featureLOD=Math.min(E,Math.max(H,this._featureLOD)),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.requestUpdate()}_processCache(e){const t=this._index;if(null==t)return!1;for(;this._newLoadingNodes.length>0&&!e.done;){const i=this._newLoadingNodes.pop();for(let s=t.getParent(i);null!=s&&(!this.layerView.isNodeLoaded(s.index)&&this._isNodeInScaleBounds(s));s=t.getParent(s.index))if(this._enableFromGPUCache(s,w.Hole)){e.madeProgress();break}}return e.hasProgressed}_processNodes(e,t){if(null==this._index)return!1;let i=(this._isIdle?Q:T)-this._loadingNodes.size;const s=this._index.updates;for(s.cancel.forEach(this._cancelNode,this),s.cancel=[];s.remove.length>0&&!e.done;)this.layerView.removeNode(s.remove.pop()),e.madeProgress();for(;s.update.length>0&&!e.done;){const t=this._index.getNode(s.update.pop());null!=t&&(this._updateLoadedNode(t),e.madeProgress())}for(;s.add.length>0&&!e.done&&i>0;){--i;const r=this._index.getNode(s.add.back());if(null==r||r.cacheState!==v.Cached&&!this._hasNodeLoadToken(t))break;s.add.pop(),this._loadNode(r),e.madeProgress()}return e.hasProgressed}_cancelAllNodes(){this._loadingNodes.forEach((e=>e.abort())),this._loadingNodes.clear(),this._updatingNodes.forEach((e=>e.abort())),this._updatingNodes.clear()}_cancelNode(e){const t=this._loadingNodes.get(e);t&&(t.abort(),this._loadingNodes.delete(e))}_hasNodeLoadToken(e){return!(!this._isIdle&&e.numNodesLoading+this._loadingNodes.size>=T)&&(this._downloadingCount<O&&!this.dataStreamController.busy)}_evaluateUpdating(){let e=!1,t=0;if(this.layerView){if(this.layerView.contentVisible){const i=(null!=this._index?this._index.indexMissing:0)+3*(null!=this._index?this._index.updates.add.length:0)+2*this._loadingNodes.size;e=!!(i>0||this._updatingNodes.size>0||this._restartNodeLoading||this._cameraDirty||this._idleQueue.running||this._lodHandling&&this._lodHandling.requiresLODGlobalHandling||null!=this._index&&this._index.isPrefetching),0===i&&(this._progressMaxNumNodes=1),this._progressMaxNumNodes=Math.max(i,this._progressMaxNumNodes),t=1-i/this._progressMaxNumNodes}else e=this._cameraDirty,t=e?0:1;this.updating=e,this.updatingProgress=t}}_updateViewData(){if(!this._cameraDirty||null==this._index||null==this._viewportQueries)return;const e=this.layerView.view,{contentCamera:t,fixedContentCamera:i}=e.state;this.screenSizeFactor=1/(t.perScreenPixelRatio/2),this._viewportQueries.updateCamera(t,!i||this.isGraphics3D),this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.invalidateVisibilityCache(),this._index.progressiveLoadPenalty=J.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate(),this._stableFeatureLOD=!1,this._invisibleDirty=!0,this._cameraDirty=!1,this.notifyChange(\"rootNodeVisible\")}_getProgressiveLoadFactor(){return this.layerView.view.resourceController.memoryController.memoryFactor<1?1:this.layerView.progressiveLoadFactor}get _lod(){return this._featureLOD*this._baseLOD}get _baseLOD(){const e=this.layerView.lodFactor,t=this.layerView.view.resourceController.memoryController.memoryFactor;return this.fixedFeatureTarget?1:(e>0?e:1)*t}get _lodDropFactor(){if(this.fixedFeatureTarget)return 1;const e=this.layerView.view.resourceController.memoryController;return(Math.min(e.memoryFactor,.5)-e.minQuality)/(.5-e.minQuality)}isGeometryVisible(e){return null!=this._index&&this._index.isGeometryVisible(e.index)}updateVisibility(e){null!=this._index&&this._index.invalidateNodeVisibilityCache(e)}invalidateGeometryVisibility(e){null!=this._index&&this._index.invalidateGeometryVisibility(e)}invalidateVisibilityObbs(){null!=this._index&&this._index.invalidateVisibilityObbs()}modificationsChanged(){null!=this._index&&this._index.imModificationsChanged(!!this.layerView.hasModifications),this._invisibleDirty=!0}_shouldLoadNode(e){return!(!this._lodHandling.shouldLoadNode(e)||this._shouldDropNode(e))&&(!(null==this._index||!this._index.isGeometryVisible(e.index))&&this._isNodeInScaleBounds(e))}_shouldDropNode(e){if(null==this._viewportQueries)return!1;const t=this._lodDropFactor;if(t>=1||!this._lodHandling.hasNoVisibleChildren(e))return!1;return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e))-this._viewportQueries.minDistance>(this._viewportQueries.maxDistance-this._viewportQueries.minDistance)*t}_startNodeLoading(){this._restartNodeLoading=!1;const e=this._index;if(this._updatesDisabled||null==e||null==this._viewportQueries)return;this._updateViewData(),this._requiredAttributesDirty&&(this._requiredAttributes=this._getRequiredAttributes(),this._requiredAttributesDirty=!1);const t={textureEncodings:this.layerView.supportedTextureEncodings,uncompressedTextureDownsamplingEnabled:this.layerView.uncompressedTextureDownsamplingEnabled,textureUsageMask:this.layerView.rendererTextureUsage,loadFeatureData:this.useMaximumNumberOfFeatures};this._nodeLoader=new C(this.layer,this.dataStreamController,j,this._defaultGeometrySchema,this._requiredAttributes,t),e.requestUpdate(),this._lodHandling.startNodeLoading((e=>this._isNodeInScaleBounds(e)),((e,t)=>this._removeNodes(e,t,Z.fadeout)),e,{maxLodLevel:this._viewportQueries.maxLodLevel}),this._evaluateUpdating()}isNodeLoading(){return null!=this._nodeLoader&&null!=this._index}cancelNodeLoading(){this.isNodeLoading()&&(this.indexStreamController.cancelAll(),this.dataStreamController.cancelAll(),this._idleQueue.cancelAll(),this._cancelAllNodes(),this._nodeLoader=null,this._evaluateUpdating())}_removeInvisibleNodes(e){const t=this._index;if(null==t||null==this._viewportQueries)return!1;K.clear(),this.layerView.getLoadedNodeIndices(K);const i=0===this._viewportQueries.maxDistance,s=i?()=>!1:e=>this._shouldDropNode(e);return K.filterInPlace((e=>{const i=t.getNode(e);return null==i||!t.isGeometryVisible(e)||s(i)||!this._isNodeInScaleBounds(i)})),K.length>0&&this._lodHandling.setLodGlobalDirty(),this._removeNodes(K,e,Z.pop),!(i&&this._lodDropFactor<1)&&(0===K.length||(K.clear(),!1))}markNodeToRemove(e){K.push(e)}removeMarkedNodes(){this._removeNodes(K,G,Z.pop)}_removeNodes(e,t,i){const s=e.length;if(0!==s&&!t.done){for(null!=this._index&&this._index.requestUpdate();e.length>0&&!t.done;){const s=e.pop(),r=this._index;i===Z.fadeout&&this.layerView.nodeFadeoutEnabled&&null!=r&&r.isGeometryVisible(s)?this.layerView.fadeNode(s,A.FadeOut,!0):this.layerView.removeNode(s),t.madeProgress()}if(this._loadedNodeScales.size>0)for(let t=e.length;t<s;t++){const i=e.data[t];this._loadedNodeScales.delete(i)}}}_needsUpdate(e){if(e.resources.isEmpty||this._updatingNodes.has(e.index))return!1;const t=this.layerView.getLoadedAttributes(e.index);return null!=t&&t!==this._requiredAttributes}async _updateLoadedNode(e){const t=new AbortController;this._updatingNodes.set(e.index,t),this._evaluateUpdating();try{const i=X(this.layerView.getLoadedAttributes(e.index),this._requiredAttributes);let s=null;s=i?await Promise.resolve(this.layerView.getAttributeData(e.index)):await this._loadAttributes(e,this._requiredAttributes,t.signal),await this.schedule((()=>this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:s},t.signal)),t.signal)}catch(i){if(!d(i))return this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:{}},t.signal)}this._updatingNodes.delete(e.index),this._evaluateUpdating()}_loadNode(e){if(this._loadingNodes.has(e.index))return void j.error(\"already loading node \"+e.index);const t=new AbortController;this._loadingNodes.set(e.index,t),this._evaluateUpdating(),this._loadAndAddNode(e,t.signal).then((i=>{i&&null!=this._index&&this._loadingNodes.get(e.index)===t&&(this._loadingNodes.delete(e.index),this._index.requestUpdate())})).catch((e=>{if(!d(e))throw e})).finally((()=>{this._loadingNodes.get(e.index)===t&&this._loadingNodes.delete(e.index),this._evaluateUpdating()}))}_loadAndAddNode(e,t){return e.cacheState===v.Uncached?this._loadUncached(e,t).then((()=>!1)):this._loadCached(e,t).then((t=>!t&&(e.cacheState=v.Uncached,!0))).catch((t=>!d(t)&&(e.cacheState=v.Uncached,!0)))}_enableFromGPUCache(e,t){if(this._disableMemCache||null==this._index)return!1;if(t===w.Hole&&!this._index.useNodeAsHole(e.index))return!0;const i=this._loadCachedGPUData(e);return!!i&&(this.layerView.addCachedGPUData(e,i,t),this._nodeAdded(),!0)}_loadCachedGPUData(e){const t=this.layerView.loadCachedGPUData(e.index);return null!=t&&null!=t.attributeInfo&&X(t.attributeInfo.loadedAttributes,this._requiredAttributes)?t:(this.layerView.deleteCachedGPUData(t),null)}_nodeAdded(){null!=this._index&&this._index.requestUpdate(),this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateLoadStatus(e,t){const i=this._index;null!=i&&i.updateChildrenLoaded(e,t?1:-1)}async _loadCached(e,t){if(this._enableFromGPUCache(e,w.Leaf))return!0;const i=this.layerView;if(this.disableIDBCache||!i.loadCachedNodeData||!i.addCachedNodeData)return!1;const s=(t,i)=>this._nodeLoader.loadTextures(e,t,i),r=(t,i)=>this._clientNodeLoader.loadTextures(e,t,i),a=e.index>=0?s:r,d=await this.schedule((()=>i.loadCachedNodeData(e,t,a)),t);if(null==d)return!1;const o=this._requiredAttributes,n=await this.reschedule((()=>this._loadAttributes(e,o,t)),t);return await this.reschedule((()=>i.addCachedNodeData(e,d,{loadedAttributes:o,attributeData:n},t)),t),this._nodeAdded(),!0}_loadUncached(e,t){return this._downloadingCount++,this._loadNodeData(e,t).catch((e=>{throw this._downloadingCount--,e})).then((i=>(this._downloadingCount--,this.schedule((()=>this.layerView.addNode(e,i,t)),t)))).then((()=>{this._nodeAdded(),e.cacheState=v.Cached})).catch((t=>{if(!d(t))throw j.error(\"#loadNodeData()\",this.layer,`Failed to load node '${e.id}'`,t),e.failed=!0,null!=this._index&&this._index.requestUpdate(),t}))}_updateIdleState(e){e!==this._isIdle&&(this._isIdle=e,this._evaluateUpdating(),e&&this._index&&null!=this._index&&this._index.resetFailedNodes())}_getScale(e){if(this._loadedNodeScales.has(e.index))return this._loadedNodeScales.get(e.index);const t=this._computeScale(e);return this.layerView.isNodeLoaded(e.index)&&this._loadedNodeScales.set(e.index,t),t}_computeScale(e){this._tmpPoint.x=e.mbs[0],this._tmpPoint.y=e.mbs[1],this._tmpPoint.z=e.mbs[2];const t=e.mbs[3];return this.layerView.view.basemapTerrain.getSphereScale(this._tmpPoint,t)}_isNodeInScaleBounds(e){if(!this._areScaleBoundsActive)return!0;const t=this._getScale(e),{minScale:i,maxScale:s}=U(this.layer);return P(t,i,s)}updateStats(e){e.index=null!=this._index?this._index.size:0,this.isGraphics3D&&(e.detail=this._featureLOD,e.target=this.featureTarget*this._baseLOD),null!=this._index&&this._index.updateStats(e)}get test(){const e=this;return{index:this._index,set disableUpdates(t){e._updatesDisabled=t,t?e.cancelNodeLoading():e.requestUpdate()},set disableIDBCache(t){e.disableIDBCache=t},set ignoreServiceObb(t){null!=e._index&&(e._index.ignoreServiceObb=t)},shouldLoadNode:t=>e._shouldLoadNode(t)}}notifyLODUpdate(){this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating(),null!=this._index&&this._index.requestUpdate()}geometryFilterChanged(e){const t=this._index;null!=t&&t.layerFilterChanged(e),this._setCameraDirty()}};e([h({readOnly:!0})],z.prototype,\"isMeshPyramid\",null),e([h({readOnly:!0})],z.prototype,\"isGraphics3D\",null),e([h({readOnly:!0})],z.prototype,\"useMaximumNumberOfFeatures\",null),e([h({readOnly:!0})],z.prototype,\"indexStreamController\",null),e([h({readOnly:!0})],z.prototype,\"dataStreamController\",null),e([h({readOnly:!0})],z.prototype,\"crsVertex\",null),e([h({readOnly:!0})],z.prototype,\"crsIndex\",null),e([h()],z.prototype,\"screenSizeFactor\",void 0),e([h()],z.prototype,\"featureTarget\",void 0),e([h()],z.prototype,\"fixedFeatureTarget\",void 0),e([h()],z.prototype,\"layerView\",void 0),e([h()],z.prototype,\"layer\",null),e([h()],z.prototype,\"updating\",void 0),e([h({readOnly:!0})],z.prototype,\"running\",null),e([h()],z.prototype,\"updatingProgress\",void 0),e([h({readOnly:!0})],z.prototype,\"leavesReached\",void 0),e([h({constructOnly:!0})],z.prototype,\"scaleVisibilityEnabled\",void 0),e([h({constructOnly:!0})],z.prototype,\"worker\",void 0),e([h({readOnly:!0,dependsOn:[]})],z.prototype,\"rootNodeVisible\",null),z=e([u(q)],z);const K=new r({deallocator:null});let W;function X(e,t){return null!=e&&e.length===t.length&&e.every((e=>$(t,e.name)>=0))}function $(e,t){const i=t.toLowerCase();for(let s=0;s<e.length;s++)if(e[s].name.toLowerCase()===i)return s;return-1}const J={factorIM:.2,factor3dObject:.05,distancePenalty:10},Y=c();var Z;!function(e){e[e.pop=0]=\"pop\",e[e.fadeout=1]=\"fadeout\"}(Z||(Z={}));const ee=z;export{ee as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{trackAccess as t}from\"./accessorSupport/tracking.js\";import{SimpleObservable as e}from\"./accessorSupport/tracking/SimpleObservable.js\";class s{constructor(){this._set=new Set,this._observable=new e}get size(){return t(this._observable),this._set.size}add(t){const e=this._set.size;return this._set.add(t),this._set.size!==e&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(t){const e=this._set.delete(t);return e&&this._observable.notify(),e}entries(){return t(this._observable),this._set.entries()}forEach(e,s){t(this._observable),this._set.forEach(((t,r)=>e.call(s,t,r,this)),s)}has(e){return t(this._observable),this._set.has(e)}keys(){return t(this._observable),this._set.keys()}values(){return t(this._observable),this._set.values()}[Symbol.iterator](){return t(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}export{s as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../rest/support/Query.js\";async function r(e,r,a){r=r.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(r.maxRecordCountFactor=u(e));const n=t(e),o=e.capabilities.query.supportsPagination;r.start=0,r.num=n;let i=null;for(;;){const t=await e.source.queryFeaturesJSON(r,a);if(null==i?i=t:i.features=i.features.concat(t.features),i.exceededTransferLimit=t.exceededTransferLimit,!o||!t.exceededTransferLimit)break;r.start+=n}return i}function t(e){return u(e)*a(e)}function a(e){return e.capabilities.query.maxRecordCount||2e3}function u(r){return r.capabilities.query.supportsMaxRecordCountFactor?e.MAX_MAX_RECORD_COUNT_FACTOR:1}export{u as getMaxRecordCountFactor,t as getMaximumQuerySize,a as getMaximumRecordCount,r as queryAllJSON};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../request.js\";import s from\"../../../../core/Accessor.js\";import{splitIntoChunks as r}from\"../../../../core/arrayUtils.js\";import{resultOrAbort as i,result as o}from\"../../../../core/asyncUtils.js\";import{estimateStringByteSize as n,estimateNumberByteSize as a}from\"../../../../core/byteSizeEstimations.js\";import d from\"../../../../core/Collection.js\";import c from\"../../../../core/Logger.js\";import{destroyMaybe as h,abortMaybe as l}from\"../../../../core/maybe.js\";import{whenOrAbort as u,createResolver as m,ignoreAbortErrors as p,throwIfAborted as g}from\"../../../../core/promiseUtils.js\";import y from\"../../../../core/ReactiveSet.js\";import{watch as b,initial as _}from\"../../../../core/reactiveUtils.js\";import{property as f}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/has.js\";import{subclass as O}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{formatNumber as C}from\"../../../../intl/number.js\";import{getMaximumQuerySize as j,queryAllJSON as v}from\"../../../../layers/support/featureQueryAll.js\";import{assetMapFromAssetMapsJSON as I,extractMesh as A}from\"../../../../rest/support/meshFeatureSet.js\";import{direct3DObjectFeatureLayerDisplayEnabled as F,i3sPatchingEnabled as L,sceneLayerEditingEnabled as w}from\"../../../../support/featureFlags.js\";import{isTimeoutError as E}from\"../../../../support/requestUtils.js\";import x from\"../FeatureLayerView3D.js\";const G=\"esri.views.3d.layers.i3s.I3SOverrides\";let D=class extends s{constructor(e){super(e),this._warnMaximumChangedObjectsExceeded=!1,this._maximumNumberOfEditOVerrides=T,this._original3DOFLDefinitionExpression=null,this._interactiveEditingSessions=new d,this.geometryOverrides=new d,this._clientGeometryCache=new Map,this._associatedLayerView=null,this._attributeChangedObjectIds=new y,this._geometryChangedObjectIds=new y,this._pendingFetchChangedObjectIds=null,this._pendingFetchAbortController=new AbortController,this._pendingAttributeQueriesCache=new Map}initialize(){this._memCache=this.memoryController.newCache(`i3s-attribute-overrides-${this.layer.uid}`),this._pendingFetchChangedObjectIds=this._fetchChangedObjectIds(this._pendingFetchAbortController?.signal),this._pendingFetchChangedObjectIds.finally((()=>{this._pendingFetchAbortController=null,this._pendingFetchChangedObjectIds=null})),this.is3DOFL&&null!=this._associatedLayer&&(F()?this._associatedLayer.load().then((e=>{this.destroyed||(this._original3DOFLDefinitionExpression=e.definitionExpression,this.addHandles(b((()=>this._definitionExpression),(t=>e.definitionExpression=t),_)),this._associatedLayerView=new x({layer:this._associatedLayer,view:this.view}))})):L())}destroy(){this.is3DOFL&&null!=this._associatedLayer&&(F()?null!=this._associatedLayerView&&(this._associatedLayer.definitionExpression=this._original3DOFLDefinitionExpression):L()),this._set(\"layer\",null),this._memCache=h(this._memCache),this._pendingFetchAbortController=l(this._pendingFetchAbortController),this._pendingFetchChangedObjectIds=null,this._pendingAttributeQueriesCache.clear()}get is3DOFL(){return w()&&null!=this._associatedLayer&&null!=this._associatedLayer.infoFor3D}get sortedGeometryChangedObjectIds(){return this.is3DOFL?[...this._geometryChangedObjectIds].sort(((e,t)=>e-t)):[]}get _associatedLayer(){return null==this.layer?null:this.layer.associatedLayer}get hasGeometryChanges(){return this._geometryChangedObjectIds.size>0}get _definitionExpression(){const e=this.sortedGeometryChangedObjectIds;return 0===e.length?\"1 = 0\":`OBJECTID IN (${e.join(\",\")})`}get updating(){if(!this.is3DOFL)return!1;if(F()){return!(null!=this._associatedLayerView)||null!=this._associatedLayerView&&this._associatedLayerView.updating}return L(),!1}get isEmpty(){return null==this._pendingFetchChangedObjectIds&&0===this._attributeChangedObjectIds.size&&0===this._geometryChangedObjectIds.size}featureHasGeometryChanges(e){return this._geometryChangedObjectIds.has(e)}featureHasAttributeChanges(e){return this._attributeChangedObjectIds.has(e)}createInteractiveEditSession(e){this._attributeChangedObjectIds.add(e);const t=w()&&L()&&null!=this.is3DOFL,s=this._interactiveEditingSessions,r=new S(e,{rollback:()=>{s.remove(r)},commit:(s,r)=>{for(const[t,i]of s)this.updateAttributeValue(e,t,i);t&&null!=r&&this.updateGeometry(e,r)}});return s.unshift(r),r}async applyAttributeOverrides(e,t,s){if(null==t)return;const{loadedAttributes:r,attributeData:i}=t;if(null==r||0===r.length||null==i)return;if(this._pendingFetchChangedObjectIds&&await u(this._pendingFetchChangedObjectIds,s),0===this._attributeChangedObjectIds.size)return;const o={loadedAttributes:r,attributeData:i},n=this._getOverridesFromCache(e,o,this._attributeChangedObjectIds),{objectIds:a,fieldNames:d}=n;if(0===a.length||0===d.length)return;const c=await this._queryAttributeOverridesFromAssociatedLayer(a,d,s);null!=c&&this._processOverridesFromAssociatedLayer(e,c,d,o)}updateGeometry(e,t){this._geometryChangedObjectIds.add(e);const s=this._clientGeometryCache.get(e);if(null!=s&&(this.geometryOverrides.remove(s),this._clientGeometryCache.delete(e)),null!=t){const s={oid:e,mesh:t};this.geometryOverrides.add(s),this._clientGeometryCache.set(e,s)}}updateAttributeValue(e,t,s){this._attributeChangedObjectIds.add(e),this._cacheAttributeValue(e,t,s)}featureAdded(e){this.is3DOFL&&L()&&this._geometryChangedObjectIds.add(e),this._attributeChangedObjectIds.add(e)}_cacheAttributeValue(e,t,s){this._memCache.put(this._getAttributeCacheKey(e,t),s,this._memCacheAttributeValueSize(s))}_getOverridesFromCache(e,{loadedAttributes:t,attributeData:s},r){const i=new Set,o=new Array;for(const a of t)o[a.index]=s[a.name];const n=new Set;for(let a=0;a<e.length;a++){const s=e[a];if(r.has(s))for(const e of t){const t=this._attributeFromCache(s,e.index);void 0===t?(i.add(s),n.add(e.name)):o[e.index][a]=t}}return{objectIds:Array.from(i),fieldNames:Array.from(n)}}_attributeFromCache(e,t){const s=this._fromInteractiveEditingSession(e,t);if(void 0!==s)return s;const r=this._getAttributeCacheKey(e,t);return this._memCache.get(r)}_fromInteractiveEditingSession(e,t){if(null!=this._interactiveEditingSessions)for(const s of this._interactiveEditingSessions){if(s.objectId!==e)continue;const r=s.getAttribute(t);if(void 0!==r)return r}}_getAttributeCacheKey(e,t){return`${e}-${t}`}async _queryAttributeOverridesFromAssociatedLayer(e,t,s){if(0===e.length)return null;this._logWarningIfMaximumObjectsExceeded();const{associatedLayer:r}=this.layer;if(null==r)return null;const i=this._pendingAttributeQueriesCache,o=new Array,n=new Map;for(const g of e){const e=i.get(g);if(e)o.push(e);else{const e=m();p(e.promise),n.set(g,e),i.set(g,e.promise)}}const a=Array.from(n.keys()),d=r.createQuery(),{objectIdField:c}=r,h=[c,...t];d.where=\"1=1\",d.returnGeometry=!1,d.outFields=h,d.cacheHint=!0,d.objectIds=a;const[l,u]=await Promise.all([this._executeBatchQuery(r,a,d,s),Promise.all(o)]).then((e=>(g(s),e))).catch((e=>{for(const[t,s]of n)i.delete(t),s.reject(e);throw e})),y=[];for(const m of l)if(m.ok)for(const e of m.value.features){const t=e,s=t.attributes[c];n.get(s)?.resolve(t),i.delete(s),n.delete(s),y.push(t)}for(const m of u)m&&y.push(m);for(const[m,p]of n)i.delete(m),p.resolve(null);return y}async _queryGeometryOverridesFromAssociatedLayer(e,t){if(0===e.length||!this.is3DOFL||!L())return null;this._logWarningIfMaximumObjectsExceeded();const s=this.layer.associatedLayer,{objectIdField:r,globalIdField:i}=s,o=[r,...null!=i?[i]:[]],n=s.createQuery();n.where=\"1=1\",n.returnGeometry=!0,n.outFields=o,n.cacheHint=!0,n.objectIds=e,n.returnZ=s.hasZ,n.returnM=s.hasM;const a=await this._executeBatchQuery(s,e,n,t),d=s.infoFor3D,{spatialReference:c}=s,h=[];for(const l of a){if(!l.ok)continue;const e=l.value,{assetMaps:t,features:s,globalIdFieldName:r}=e;if(null==t)continue;const i=I(d,t);for(const o of s){const e=A(o,r,c,d,i),t=o;null!=e?(t.geometry=e,h.push(t)):t.geometry=null}}return h}_logWarningIfMaximumObjectsExceeded(){if(!this._warnMaximumChangedObjectsExceeded)return;this._warnMaximumChangedObjectsExceeded=!1;let e=`The number of edited objects that are not yet cached in the scene service exceeds the maximum limit. Attribute changes will only be available for the first ${C(this._maximumNumberOfEditOVerrides)} objects. Please consider re-caching the scene service`;const t=this.layer.portalItem;t&&t.loaded?e+=` (${t.portal.url}/home/item.html?id=${t.id}#settings)`:e+=` (${this.layer.parsedUrl.path})`,c.getLogger(G).warn(\"#queryOverrides()\",this.layer.title,`${e}.`)}async _executeBatchQuery(e,t,s,o){if(0===t.length)return[];const n=j(e);t=[...t].sort(((e,t)=>e-t));const a=r(t,n).map((t=>{const r=s.clone();return r.objectIds=t,i(v(e,r,{signal:o}))}));return Promise.all(a)}_processOverridesFromAssociatedLayer(e,t,s,{loadedAttributes:r,attributeData:i}){const o=this._associatedLayer;if(null==o)return;const n=o.objectIdField,a=s.map((t=>(t in i||(i[t]=new Array(e.length)),i[t]))),d=new Map(r.map((e=>[e.name,e.index]))),c=s.map((e=>d.get(e))),h=new Map(Array.from(e,((e,t)=>[e,t])));for(const l of t){const e=l.attributes[n];for(let t=0;t<s.length;t++){const r=c[t],i=h.get(e),o=l.attributes[s[t]];a[t][i]=o,this._cacheAttributeValue(e,r,o)}}}_memCacheAttributeValueSize(e){return\"string\"==typeof e?n(e):a()}async _fetchChangedObjectIds(e){const s=this.layer;await s.load({signal:e}),this._geometryChangedObjectIds.clear(),this._attributeChangedObjectIds.clear();const{associatedLayer:r}=s;if(null==r||!r.capabilities?.operations?.supportsChangeTracking)return;const i=this._getFetchChangedObjectIdsServerGen();if(null==i)return;const n=r.layerId,a=this.is3DOFL,d={f:\"json\",returnIdsOnly:!0,layers:`[${n}]`,returnUpdates:!0,returnDeletes:a,returnInserts:a,layerServerGens:JSON.stringify([{id:n,serverGen:i}])};if(a){const e=r.infoFor3D;d.fieldsToCompare=JSON.stringify({fields:[...Object.values(e.transformFieldRoles),e.sourceHashField]})}const h=await o(t(`${r.url}/extractChanges`,{method:\"post\",query:d,timeout:M,signal:e}));if(!h.ok&&E(h.error)){const e=this.layer.title;c.getLogger(G).warn(\"extractChanges:timeout\",e,`${e} could not obtain edited features that are not cached in the scene service. Display of features may not be up to date with the latest edits. Consider re-caching the scene service.`)}if(h.ok&&1===h.value.data?.edits?.length){const t=h.value.data.edits[0],s=t?.objectIds,i=t?.fieldUpdates,o=s?.adds??[],n=s?.updates??[],d=s?.deletes??[],c=[...o,...n,...d],l=a?[...o,...i??n,...d]:[],u=Math.min(this._maximumNumberOfEditOVerrides,c.length);u<c.length&&(this._warnMaximumChangedObjectsExceeded=!0);const m=c.sort(((e,t)=>e-t));for(let e=0;e<u;++e){const t=m[e];this._attributeChangedObjectIds.add(t)}for(const e of l)this._geometryChangedObjectIds.add(e);if(this.is3DOFL&&L()&&this._geometryChangedObjectIds.size>0){const t=await this._queryGeometryOverridesFromAssociatedLayer(Array.from(this._geometryChangedObjectIds),e);if(null!=t)for(const e of t)null!=e.geometry&&this.updateGeometry(e.attributes[r.objectIdField],e.geometry)}}}_getFetchChangedObjectIdsServerGen(){const e=this.layer;if(null!=e.serviceUpdateTimeStamp&&null!=e.serviceUpdateTimeStamp.lastUpdate)return e.serviceUpdateTimeStamp.lastUpdate;const t=e.associatedLayer;return null!=t&&null!=t.serverGens&&null!=t.serverGens.minServerGen?t.serverGens.minServerGen:null}get test(){const e=Array.from(this._attributeChangedObjectIds),t=this._pendingFetchChangedObjectIds,s=this;return{changedObjectIds:e,pendingFetchChangedObjectIds:t,get maximumNumberOfEditOVerrides(){return s._maximumNumberOfEditOVerrides},set maximumNumberOfEditOVerrides(e){s._maximumNumberOfEditOVerrides=e}}}};e([f({constructOnly:!0})],D.prototype,\"view\",void 0),e([f({constructOnly:!0})],D.prototype,\"layer\",void 0),e([f({readOnly:!0})],D.prototype,\"is3DOFL\",null),e([f()],D.prototype,\"_interactiveEditingSessions\",void 0),e([f({readOnly:!0})],D.prototype,\"sortedGeometryChangedObjectIds\",null),e([f({readOnly:!0})],D.prototype,\"geometryOverrides\",void 0),e([f()],D.prototype,\"_clientGeometryCache\",void 0),e([f()],D.prototype,\"_associatedLayer\",null),e([f()],D.prototype,\"_associatedLayerView\",void 0),e([f({constructOnly:!0})],D.prototype,\"memoryController\",void 0),e([f()],D.prototype,\"_attributeChangedObjectIds\",void 0),e([f()],D.prototype,\"_geometryChangedObjectIds\",void 0),e([f()],D.prototype,\"hasGeometryChanges\",null),e([f()],D.prototype,\"_pendingFetchChangedObjectIds\",void 0),e([f()],D.prototype,\"_pendingFetchAbortController\",void 0),e([f()],D.prototype,\"_definitionExpression\",null),e([f()],D.prototype,\"updating\",null),e([f()],D.prototype,\"isEmpty\",null),D=e([O(G)],D);class S{constructor(e,t){this.objectId=e,this._options=t,this._updates=new Map,this._updatedGeometry=void 0,this._state=V.ACTIVE}getAttribute(e){return this._updates.get(e)}setAttribute(e,t){this.isActive&&this._updates.set(e,t)}getGeometry(){return this._updatedGeometry}setGeometry(e){this.isActive&&(this._updatedGeometry=e)}rollback(){this.isActive&&(this._state=V.ROLLED_BACK,this._options.rollback(),this._updatedGeometry=void 0)}commit(){this.isActive&&(this._state=V.COMMITTED,this._options.commit(this._updates,this._updatedGeometry),this._updates.clear(),this._updatedGeometry=void 0)}get isActive(){return this._state===V.ACTIVE}}var V;!function(e){e[e.ACTIVE=0]=\"ACTIVE\",e[e.COMMITTED=1]=\"COMMITTED\",e[e.ROLLED_BACK=2]=\"ROLLED_BACK\"}(V||(V={}));const M=1e4,T=5e4;export{D as I3SOverrides};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAIA;AAAJ,IAAMC;AAAE,CAAC,SAASD,IAAE;AAAC,EAAAA,GAAEA,GAAE,OAAK,CAAC,IAAE,QAAOA,GAAEA,GAAE,QAAM,CAAC,IAAE,SAAQA,GAAEA,GAAE,WAAS,CAAC,IAAE,YAAWA,GAAEA,GAAE,MAAI,CAAC,IAAE,OAAMA,GAAEA,GAAE,MAAI,EAAE,IAAE,OAAMA,GAAEA,GAAE,WAAS,EAAE,IAAE;AAAU,EAAEA,OAAIA,KAAE,CAAC,EAAE,GAAE,SAASA,IAAE;AAAC,EAAAA,GAAEA,GAAE,OAAK,CAAC,IAAE,QAAOA,GAAEA,GAAE,QAAM,CAAC,IAAE,SAAQA,GAAEA,GAAE,oBAAkB,CAAC,IAAE,qBAAoBA,GAAEA,GAAE,SAAO,CAAC,IAAE,UAASA,GAAEA,GAAE,YAAU,CAAC,IAAE,aAAYA,GAAEA,GAAE,WAAS,EAAE,IAAE,YAAWA,GAAEA,GAAE,YAAU,EAAE,IAAE,aAAYA,GAAEA,GAAE,gBAAc,EAAE,IAAE,iBAAgBA,GAAEA,GAAE,mBAAiB,EAAE,IAAE,oBAAmBA,GAAEA,GAAE,sBAAoB,EAAE,IAAE,uBAAsBA,GAAEA,GAAE,cAAY,EAAE,IAAE,eAAcA,GAAEA,GAAE,iBAAe,EAAE,IAAE;AAAgB,EAAEC,OAAIA,KAAE,CAAC,EAAE;;;ACAxJ,eAAeC,GAAEC,IAAE;AAAC,QAAMC,KAAE,CAAC,GAAEC,KAAE,CAAC;AAAE,MAAG,QAAMF,IAAE;AAAC,WAAM,EAAC,UAAS,EAAC,WAAU,UAAS,aAAY,KAAG,aAAY,MAAG,UAAS,GAAE,iBAAgB,IAAG,mBAAkB,IAAG,oBAAmB,IAAG,gBAAe,CAAC,GAAE,GAAE,CAAC,GAAE,mBAAkB,EAAC,iBAAgB,CAAC,GAAE,GAAE,GAAE,CAAC,GAAE,oBAAmB,IAAG,4BAA2B,IAAG,gBAAe,GAAE,iBAAgB,mBAAiB,GAAE,cAAa,OAAG,yBAAwB,KAAE,GAAE,kBAAiBC,IAAE,aAAYC,GAAC;AAAA,EAAC;AAAC,QAAMC,MAAEC,GAAEJ,EAAC;AAAE,aAASA,GAAE,aAAW,QAAQ,KAAK,4EAA4E;AAAE,SAAM,EAAC,UAAS,EAAC,WAAU,WAASA,GAAE,YAAU,UAAQA,GAAE,WAAU,aAAYA,GAAE,aAAY,aAAYA,GAAE,aAAY,UAASA,GAAE,cAAYK,GAAE,OAAKA,GAAE,MAAK,iBAAgB,MAAMC,GAAEN,GAAE,eAAcC,IAAEC,IAAEC,GAAE,MAAM,GAAE,mBAAkBA,MAAE,MAAMG,GAAEN,GAAE,iBAAgBC,IAAEC,IAAEC,GAAE,QAAQ,IAAE,IAAG,oBAAmBA,MAAE,MAAMG,GAAEN,GAAE,kBAAiBC,IAAEC,IAAEC,GAAE,SAAS,IAAE,IAAG,gBAAeA,OAAG,QAAMH,GAAE,gBAAcO,GAAE,UAAUP,GAAE,aAAa,IAAE,CAAC,GAAE,GAAE,CAAC,GAAE,mBAAkB,EAAC,iBAAgB,QAAMA,GAAE,QAAMO,GAAE,WAAWP,GAAE,KAAK,IAAE,CAAC,GAAE,GAAE,GAAE,CAAC,GAAE,oBAAmB,MAAMM,GAAEN,GAAE,cAAaC,IAAEC,IAAEC,GAAE,KAAK,GAAE,4BAA2BA,MAAE,MAAMG,GAAEN,GAAE,0BAAyBC,IAAEC,IAAEC,GAAE,iBAAiB,IAAE,IAAG,gBAAeA,MAAEH,GAAE,WAAS,GAAE,iBAAgBG,MAAEH,GAAE,YAAU,EAAC,GAAE,cAAa,MAAG,yBAAwBM,GAAE,EAAC,eAAcN,GAAE,eAAc,iBAAgBG,MAAEH,GAAE,kBAAgB,MAAK,gBAAeG,MAAEI,GAAE,UAAUP,GAAE,aAAa,IAAE,MAAK,kBAAiBG,MAAEH,GAAE,mBAAiB,MAAK,0BAAyBG,MAAEH,GAAE,2BAAyB,MAAK,gBAAeG,MAAEH,GAAE,WAAS,MAAK,iBAAgBG,MAAEH,GAAE,YAAU,KAAI,CAAC,EAAC,GAAE,kBAAiBC,IAAE,aAAYC,GAAC;AAAC;AAAC,eAAeI,GAAEE,IAAEC,KAAEJ,KAAEK,IAAE;AAAC,MAAG,QAAMF;AAAE,WAAM;AAAG,QAAMT,KAAEM,IAAE,QAAOC,KAAEE,GAAE,MAAKJ,KAAEI,GAAE;AAAI,MAAG,QAAMF,IAAE;AAAC,QAAGA,cAAa,oBAAkBA,cAAa,mBAAkB;AAAC,YAAME,KAAEG,GAAEL,EAAC;AAAE,aAAOD,IAAE,KAAK,EAAC,IAAGN,IAAE,OAAMW,IAAE,MAAKF,IAAE,UAASA,GAAE,KAAI,aAAY,MAAE,CAAC,GAAEC,IAAE,KAAK,EAAC,IAAGV,IAAE,OAAMW,IAAE,WAAU,CAAC,EAAC,MAAK,QAAO,UAASF,GAAE,IAAG,CAAC,EAAC,CAAC,GAAET;AAAA,IAAC;AAAC,QAAGO,cAAa;AAAiB,aAAM;AAAG,QAAGA,cAAa;AAAU,YAAM,IAAIH,GAAE,gEAAgE;AAAE,QAAGG,cAAaD;AAAE,YAAM,IAAIF,GAAE,yEAAyE;AAAA,EAAC,WAAS,QAAMC,IAAE;AAAC,UAAMI,KAAE,IAAI;AAAM,IAAAA,GAAE,MAAIJ;AAAE,UAAMJ,KAAEW,GAAE,MAAMZ,GAAES,IAAEA,GAAE,KAAI,OAAG,MAAM,CAAC;AAAE,WAAOH,IAAE,KAAK,EAAC,IAAGN,IAAE,OAAMW,IAAE,MAAKV,IAAE,UAASQ,GAAE,KAAI,aAAY,MAAE,CAAC,GAAEC,IAAE,KAAK,EAAC,IAAGV,IAAE,OAAMW,IAAE,WAAU,CAAC,EAAC,MAAK,QAAO,UAASF,GAAE,IAAG,CAAC,EAAC,CAAC,GAAET;AAAA,EAAC;AAAC,SAAM;AAAE;AAAC,SAASY,GAAEH,IAAE;AAAC,QAAMR,KAAE,SAAQC,KAAE,MAAKC,KAAE;AAAE,MAAIO,MAAED,GAAE,QAAMA,GAAE;AAAO,MAAGC,OAAGR,IAAE;AAAC,QAAIA,KAAEO,GAAE,OAAML,MAAEK,GAAE;AAAO,OAAE;AAAC,MAAAP,KAAE,KAAK,KAAKA,KAAEC,EAAC,GAAEC,MAAE,KAAK,KAAKA,MAAED,EAAC,GAAEO,MAAER,KAAEE;AAAA,IAAC,SAAOM,MAAET;AAAG,UAAMK,MAAE,SAAS,cAAc,QAAQ;AAAE,IAAAA,IAAE,QAAMJ,IAAEI,IAAE,SAAOF;AAAE,WAAOE,IAAE,WAAW,IAAI,EAAE,UAAUG,IAAE,GAAE,GAAEP,IAAEE,GAAC,GAAEE;AAAA,EAAC;AAAC,SAAOG;AAAC;AAAC,SAASJ,GAAEI,IAAE;AAAC,SAAOA,GAAE,eAAe,0BAA0B;AAAC;;;ACAl6E,IAAMI,KAAN,MAAO;AAAA,EAAC,YAAYC,IAAEC,IAAEC,IAAEC,KAAEC,IAAEC,KAAE;AAAC,SAAK,OAAKL,IAAE,KAAK,WAASC,IAAE,KAAK,YAAUC,IAAE,KAAK,eAAaC,KAAE,KAAK,UAAQE,KAAE,KAAK,WAAS,oBAAI,OAAI,KAAK,YAAU,oBAAI,OAAI,KAAK,YAAUD,GAAE,SAAS,uBAAuB,KAAK,IAAI,EAAE;AAAA,EAAC;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK;AAAA,EAAQ;AAAA,EAAC,IAAI,WAAU;AAAC,WAAO,KAAK;AAAA,EAAS;AAAA,EAAC,mBAAmBJ,IAAEC,IAAE;AAAC,UAAMC,KAAE,OAAOD,EAAC,IAAGE,MAAEH,GAAE,QAAOI,KAAED,IAAE,kBAAiBE,MAAE,KAAK,UAASC,MAAEC,GAAEJ,KAAEH,GAAE,MAAM;AAAE,OAAEM,KAAEF,IAAEE,KAAED,GAAC;AAAE,WAAM,EAAC,MAAK,QAAO,IAAGH,IAAE,SAAQM,GAAER,EAAC,GAAE,KAAIC,IAAE,KAAIK,KAAE,kBAAiB,CAAC,GAAE,cAAaN,IAAE,WAAU,MAAK,iBAAgB,KAAI;AAAA,EAAC;AAAA,EAAC,YAAYC,IAAEC,IAAE;AAAC,QAAG,QAAM,KAAK,iBAAiBA,GAAE,GAAG;AAAE,YAAM,IAAIG,GAAE,yDAAyDH,GAAE,GAAG,iBAAiB;AAAE,IAAAA,GAAE,YAAUD,IAAE,KAAK,SAAS,IAAIC,GAAE,IAAGA,EAAC,GAAE,KAAK,UAAU,IAAIA,GAAE,KAAIA,EAAC;AAAA,EAAC;AAAA,EAAC,iBAAiBF,IAAE;AAAC,UAAMC,KAAE,KAAK,UAAU,IAAID,EAAC;AAAE,WAAO,QAAMC,MAAG,WAASA,GAAE,OAAK,OAAKA,GAAE;AAAA,EAAS;AAAA,EAAC,WAAWD,IAAE;AAAC,QAAG,QAAMA;AAAE;AAAO,UAAMC,KAAE,KAAK,SAAS,IAAID,EAAC;AAAE,YAAMC,OAAI,KAAK,SAAS,OAAOD,EAAC,GAAE,WAASC,GAAE,QAAM,KAAK,UAAU,OAAOA,GAAE,GAAG;AAAA,EAAE;AAAA,EAAC,MAAM,aAAaA,IAAE;AAAC,UAAMC,KAAE,KAAK,SAAS,IAAID,EAAC;AAAE,QAAG,QAAMC;AAAE,YAAM,IAAIG,GAAE,yDAAyDJ,EAAC,EAAE;AAAE,YAAOC,GAAE,MAAK;AAAA,MAAC,KAAI;AAAO,eAAO,KAAK,kBAAkBA,EAAC;AAAA,MAAE,KAAI;AAAiB,eAAO,KAAK,2BAA2BA,EAAC;AAAA,MAAE;AAAQ,cAAM,IAAIG,GAAE,2DAA2DJ,EAAC,EAAE;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,MAAM,kBAAkBD,IAAE;AAAC,UAAMC,KAAED,GAAE,IAAGE,MAAG,MAAM,KAAK,aAAaF,EAAC,GAAG;AAAW,QAAG,QAAME,GAAE,cAAY,MAAIA,GAAE,WAAW;AAAO,aAAM,EAAC,IAAGD,IAAE,SAAQ,MAAK,KAAID,GAAE,KAAI,KAAI,MAAK,gBAAe,MAAK,cAAa,MAAK,eAAc,MAAK,aAAY,MAAK,UAAS,KAAI;AAAE,UAAMG,MAAE,CAAC,GAAEC,KAAEF,GAAE;AAAW,aAAQG,MAAE,GAAEA,MAAED,GAAE,QAAO,EAAEC,KAAE;AAAC,YAAMH,KAAE,GAAGD,EAAC,aAAaI,GAAC,IAAGD,KAAE,EAAC,MAAK,kBAAiB,IAAGF,IAAE,KAAIF,GAAE,KAAI,gBAAeK,KAAE,cAAaL,IAAE,aAAY,oBAAI,MAAG;AAAE,WAAK,SAAS,IAAII,GAAE,IAAGA,EAAC,GAAEJ,GAAE,iBAAiB,KAAKE,EAAC,GAAEC,IAAE,KAAK,EAAC,IAAGC,GAAE,IAAG,MAAK,MAAK,KAAIA,GAAE,KAAI,KAAI,KAAI,CAAC;AAAA,IAAC;AAAC,WAAM,EAAC,IAAGH,IAAE,SAAQ,MAAK,KAAID,GAAE,KAAI,KAAI,MAAK,gBAAe,MAAK,cAAa,MAAK,eAAc,MAAK,aAAY,MAAK,UAASG,IAAC;AAAA,EAAC;AAAA,EAAC,gBAAgBH,IAAEC,IAAEC,IAAE;AAAC,QAAG,QAAMF;AAAE;AAAO,UAAMG,MAAE,KAAK,SAAS,IAAIH,EAAC;AAAE,IAAAG,OAAG,WAASA,IAAE,SAAOA,IAAE,YAAUD;AAAA,EAAE;AAAA,EAAC,MAAM,2BAA2BF,IAAE;AAAC,WAAM,EAAC,IAAGA,GAAE,IAAG,SAAQA,GAAE,aAAa,SAAQ,KAAIA,GAAE,KAAI,KAAI,MAAK,gBAAe,MAAK,cAAa,MAAK,eAAc,MAAK,aAAY,MAAK,UAAS,MAAK,SAAQ,MAAE;AAAA,EAAC;AAAA,EAAC,MAAM,aAAaE,IAAEE,IAAE;AAAC,UAAMC,MAAEH,GAAE,IAAGI,MAAE,KAAK,SAAS,IAAID,GAAC;AAAE,QAAG,QAAMC,OAAG,qBAAmBA,IAAE;AAAK,YAAM,IAAID,GAAE,4CAA4CH,GAAE,EAAE,yBAAyB;AAAE,UAAMO,KAAEH,IAAE,cAAaI,KAAE,MAAM,KAAK,aAAaD,EAAC,GAAEE,KAAED,GAAE,YAAWE,KAAEH,GAAE;AAAI,QAAG,QAAME,GAAE;AAAW,YAAM,IAAIN,GAAE,4CAA4CH,GAAE,EAAE,8BAA8B;AAAE,UAAMH,KAAEY,GAAE,WAAWL,IAAE,cAAc,GAAE,EAAC,UAASC,IAAE,kBAAiBM,IAAE,aAAYL,GAAC,IAAE,MAAMC,GAAEV,GAAE,QAAQ;AAAE,QAAG,QAAMS;AAAE,iBAAUR,MAAKQ;AAAE,gBAAMR,MAAGM,IAAE,YAAY,IAAIN,GAAE,IAAGA,EAAC;AAAE,UAAMc,KAAE,EAAC,QAAO,EAAC,UAASP,GAAC,GAAE,MAAK,kBAAiB,GAAE,EAAC,aAAYQ,IAAE,QAAOC,IAAE,WAAUC,GAAC,IAAEN,IAAEO,KAAE,CAACF,GAAE,GAAEA,GAAE,GAAEA,GAAE,KAAG,CAAC,GAAEG,KAAE,EAAC,qBAAoBD,IAAE,YAAW,CAAC,GAAE,YAAW,CAACJ,EAAC,EAAC,GAAEM,KAAE,EAAC,eAAc,CAAC,GAAE,kBAAiB,CAAC,EAAC;AAAE,IAAAV,GAAE,sBAAoB,EAAE,KAAK,SAAQ,4CAA4C,GAAEA,GAAE,oBAAkB,KAAK,QAAQ,QAAQ,EAAC,WAAUC,GAAE,iBAAiB,UAAS,aAAYM,MAAA,gBAAAA,GAAG,aAAY,aAAYF,GAAE,OAAO,GAAE,QAAOG,IAAE,oBAAmBP,GAAE,iBAAiB,OAAO,GAAE,qBAAoB,KAAK,SAAS,OAAO,GAAE,OAAM,KAAK,iBAAeD,GAAE,MAAK,GAAEN,EAAC;AAAG,UAAK,EAAC,WAAUiB,IAAE,UAASC,GAAC,IAAE,MAAMZ,GAAE;AAAkB,IAAAC,GAAE,iBAAiB,WAASW;AAAE,UAAK,EAAC,aAAYC,IAAE,UAASC,GAAC,IAAE,MAAMC,GAAE1B,IAAEW,IAAE,KAAK,SAAQN,EAAC;AAAE,IAAAO,GAAE,iBAAiB,SAAOa,IAAEnB,GAAED,EAAC;AAAE,UAAK,EAAC,gBAAesB,IAAE,oBAAmBC,GAAC,IAAEC,GAAEP,IAAEtB,GAAE,OAAMwB,IAAEZ,GAAE,iBAAiB,IAAGA,GAAE,iBAAiB,OAAMC,EAAC;AAAE,WAAM,EAAC,cAAaO,IAAE,mBAAkBC,IAAE,gBAAeM,IAAE,oBAAmBC,IAAE,kBAAiBd,IAAE,aAAYL,GAAC;AAAA,EAAC;AAAA,EAAC,MAAM,eAAeR,IAAEC,IAAEC,IAAE;AAAC,UAAMC,MAAEH,GAAE,aAAYI,KAAE,CAAC;AAAE,eAAS,EAAC,OAAM,EAAC,MAAKC,IAAC,EAAC,KAAIJ;AAAE,MAAAG,GAAEC,GAAC,IAAE,IAAI,MAAMF,GAAC;AAAE,WAAOC;AAAA,EAAC;AAAA,EAAC,MAAM,aAAaJ,IAAEC,IAAEC,IAAE;AAAC,UAAMC,MAAEH,GAAE,IAAGI,KAAE,KAAK,SAAS,IAAID,GAAC;AAAE,QAAG,QAAMC,MAAG,qBAAmBA,GAAE;AAAK,YAAM,IAAI,MAAM,oCAAoCJ,GAAE,EAAE,yBAAyB;AAAE,UAAMK,MAAE,CAAC;AAAE,eAAUC,OAAKL;AAAE,MAAAI,IAAE,KAAKD,GAAE,YAAY,IAAIE,IAAE,EAAE,KAAG,IAAI;AAAE,WAAOD;AAAA,EAAC;AAAA,EAAC,MAAM,aAAaL,IAAE;AAAC,UAAMC,KAAED,GAAE,SAAQG,MAAE,KAAK,UAAU,IAAIF,EAAC;AAAE,QAAG,QAAME,KAAE;AAAC,UAAG,QAAMH,GAAE;AAAgB,eAAOA,GAAE;AAAgB,YAAMG,MAAE,OAAMA,KAAEC,OAAI;AAAC,cAAMC,MAAEL,GAAE,aAAa,MAAM;AAAE,YAAG;AAAC,gBAAMK,IAAE,KAAK;AAAA,QAAC,SAAOK,IAAE;AAAC,UAAAN,GAAEM,EAAC;AAAA,QAAC;AAAC,cAAMJ,MAAED,IAAE,aAAYI,KAAE,EAAC,YAAWJ,KAAE,mBAAkB,MAAK,yBAAwB,MAAK,mBAAkBC,IAAC;AAAE,aAAK,UAAU,IAAIL,IAAEQ,IAAEH,KAAEN,EAAC,GAAEA,GAAE,kBAAgB,MAAKG,IAAEM,EAAC;AAAA,MAAC;AAAE,aAAOT,GAAE,kBAAgB,IAAI,QAAS,CAACA,IAAEC,OAAIE,IAAEH,IAAEC,EAAC,CAAE,GAAED,GAAE;AAAA,IAAe;AAAC,WAAOG;AAAA,EAAC;AAAC;AAAC,SAASI,GAAEP,IAAEC,IAAE;AAAC,QAAK,EAAC,kBAAiBC,GAAC,IAAEF,IAAEG,MAAE,CAAC,GAAE,EAAE,GAAEC,KAAE,CAAC,MAAGJ,GAAE,OAAM,MAAGA,GAAE,QAAOA,GAAE,OAAK,OAAIA,GAAE,OAAKA,GAAE,QAAM,CAAC,GAAEK,MAAEH,GAAE,eAAaA,GAAE,gBAAc,GAAEI,MAAEN,GAAE;AAAO,MAAIS,KAAE;AAAE,MAAGT,GAAE;AAAK,aAAQU,KAAE,GAAEA,KAAE,GAAE,EAAEA;AAAE,eAAQV,KAAE,GAAEA,KAAE,GAAE,EAAEA;AAAE,iBAAQE,KAAE,GAAEA,KAAE,GAAE,EAAEA,IAAE;AAAC,gBAAMS,MAAGL,IAAE,IAAEH,IAAEO,EAAC,IAAEN,GAAE,CAAC,IAAEH,GAAE,KAAGI,KAAEO,MAAGN,IAAE,IAAEH,IAAEH,EAAC,IAAEI,GAAE,CAAC,IAAEH,GAAE,KAAGI,KAAEwB,KAAEvB,IAAE,IAAEH,IAAED,EAAC,IAAEE,GAAE,CAAC,IAAEH,GAAE;AAAE,UAAAQ,KAAE,KAAK,IAAIE,KAAEA,KAAEC,KAAEA,KAAEiB,KAAEA,IAAEpB,EAAC;AAAA,QAAC;AAAA;AAAM,aAAQC,KAAE,GAAEA,KAAE,GAAE,EAAEA;AAAE,eAAQV,KAAE,GAAEA,KAAE,GAAE,EAAEA,IAAE;AAAC,cAAME,MAAGI,IAAE,IAAEH,IAAEO,EAAC,IAAEN,GAAE,CAAC,IAAEH,GAAE,KAAGI,KAAEM,MAAGL,IAAE,IAAEH,IAAEH,EAAC,IAAEI,GAAE,CAAC,IAAEH,GAAE,KAAGI;AAAE,QAAAI,KAAE,KAAK,IAAIP,KAAEA,KAAES,KAAEA,IAAEF,EAAC;AAAA,MAAC;AAAC,SAAO,EAAE,CAACR,GAAE,GAAEA,GAAE,GAAEA,GAAE,CAAC,GAAE,KAAK,KAAKQ,EAAC,CAAC;AAAC;AAAC,eAAegB,GAAEzB,IAAEE,IAAEC,KAAEC,IAAE;AAAC,QAAK,EAAC,WAAUO,IAAE,kBAAiBC,GAAC,IAAEV,GAAE,YAAW2B,KAAE,aAAW7B,GAAE,UAAQY,GAAE,SAAO;AAAK,MAAG,EAAE,QAAMiB,MAAG,QAAMlB,OAAI,MAAIA,GAAE,iBAAe,CAAC,EAAEA,GAAE,OAAMD,EAAC;AAAI,WAAM,EAAC,aAAYmB,IAAE,UAASjB,GAAE,OAAM;AAAE,MAAG,CAACV,GAAE,yBAAwB;AAAC,MAAEC,KAAE,sDAAsD;AAAE,UAAMH,KAAEA,GAAE;AAAE,IAAAc,GAAEd,IAAEW,GAAE,WAAW,GAAET,GAAE,0BAAwBC,IAAE,iBAAiB,EAAC,cAAaH,IAAE,SAAQ6B,GAAC,GAAEzB,EAAC;AAAA,EAAC;AAAC,SAAOF,GAAE;AAAuB;AAAC,SAAS0B,GAAE5B,IAAEC,IAAEC,IAAEC,KAAEC,IAAEC,KAAE;AAAC,QAAMC,MAAE,GAAEG,KAAER,GAAE,SAAO,GAAES,KAAE,IAAED;AAAE,MAAIE,KAAE,GAAEC,KAAE,GAAEiB,KAAE,OAAGC,KAAE,GAAE/B,KAAE,OAAGQ,KAAE,GAAEkB,KAAE,OAAGG,KAAE,GAAEpB,KAAE,GAAEU,KAAE;AAAE,EAAAP,MAAGG,IAAEH,MAAGG,IAAEF,KAAED,IAAEA,MAAG,IAAED,KAAEK,IAAE,QAAMb,OAAI2B,KAAE,MAAGC,KAAEnB,IAAEA,MAAG,IAAED,KAAEK,KAAG,QAAMZ,QAAIJ,KAAE,MAAGQ,KAAEI,IAAEA,MAAG,IAAED,KAAEK,KAAG,QAAMX,OAAIqB,KAAE,MAAGG,KAAEjB,IAAEA,MAAG,IAAED,KAAEM,KAAGR,KAAEG,IAAEA,MAAGL,MAAEW,IAAEC,KAAEP,IAAEA,MAAG,IAAEL,MAAEQ;AAAE,QAAMK,KAAE,IAAI,YAAYR,EAAC,GAAES,KAAE,IAAI,WAAWD,EAAC;AAAE,EAAAN,GAAEO,IAAE,GAAEV,EAAC,GAAEG,GAAEO,IAAEN,IAAER,GAAC;AAAE,QAAMe,KAAE,IAAI,aAAaF,IAAEP,EAAC,GAAEU,KAAE,QAAMpB,KAAE,IAAI,aAAaiB,IAAEW,EAAC,IAAE,MAAKP,KAAE,QAAMpB,MAAE,IAAI,aAAagB,IAAEZ,EAAC,IAAE,MAAKiB,KAAE,QAAMpB,KAAE,IAAI,WAAWe,IAAES,EAAC,IAAE;AAAK,WAAQf,KAAE,GAAEA,KAAEJ,IAAE,EAAEI,IAAE;AAAC,UAAMR,MAAE,IAAEQ;AAAE,aAAQP,MAAE,GAAEA,MAAE,GAAE,EAAEA,KAAE;AAAC,YAAMG,MAAER,GAAEI,MAAEC,GAAC,GAAEI,KAAE,IAAED,KAAEE,KAAE,IAAEE,KAAE,IAAEP;AAAE,UAAGe,GAAEV,EAAC,IAAEX,GAAEU,EAAC,GAAEW,GAAEV,KAAE,CAAC,IAAEX,GAAEU,KAAE,CAAC,GAAEW,GAAEV,KAAE,CAAC,IAAEX,GAAEU,KAAE,CAAC,GAAE,QAAMY,OAAIA,GAAEX,EAAC,IAAET,GAAEQ,EAAC,GAAEY,GAAEX,KAAE,CAAC,IAAET,GAAEQ,KAAE,CAAC,GAAEY,GAAEX,KAAE,CAAC,IAAET,GAAEQ,KAAE,CAAC,IAAG,QAAMa,IAAE;AAAC,cAAMvB,KAAE,IAAES,KAAER,KAAE,IAAEY,KAAE,IAAEP;AAAE,QAAAiB,GAAEtB,EAAC,IAAEE,IAAEH,EAAC,GAAEuB,GAAEtB,KAAE,CAAC,IAAEE,IAAEH,KAAE,CAAC;AAAA,MAAC;AAAC,UAAG,QAAMwB,IAAE;AAAC,cAAMxB,KAAE,IAAES,KAAER,KAAE,KAAGY,KAAE,IAAEP;AAAE,QAAAkB,GAAEvB,EAAC,IAAEG,GAAEJ,EAAC,GAAEwB,GAAEvB,KAAE,CAAC,IAAEG,GAAEJ,KAAE,CAAC,GAAEwB,GAAEvB,KAAE,CAAC,IAAEG,GAAEJ,KAAE,CAAC,GAAEwB,GAAEvB,KAAE,CAAC,IAAEG,GAAEJ,KAAE,CAAC;AAAA,MAAC;AAAA,IAAC;AAAA,EAAC;AAAC,EAAAa,GAAEO,IAAEZ,IAAEH,GAAC,GAAEQ,GAAEO,IAAEZ,KAAEM,IAAET,MAAE,KAAG,EAAE,GAAEQ,GAAEO,IAAEF,IAAE,CAAC,GAAEL,GAAEO,IAAEF,KAAEJ,IAAEL,KAAE,CAAC;AAAE,SAAM,EAAC,gBAAeU,IAAE,oBAAmB,EAAC,SAAQ,OAAG,UAAS,MAAG,OAAMM,IAAE,QAAOI,IAAE,KAAI9B,IAAE,UAAS,OAAG,cAAa,KAAE,EAAC;AAAC;AAAC,SAASc,GAAEb,IAAEC,IAAEC,IAAE;AAAC,EAAAF,GAAEC,EAAC,IAAE,MAAIC,IAAEF,GAAEC,KAAE,CAAC,IAAE,MAAIC,MAAG,GAAEF,GAAEC,KAAE,CAAC,IAAE,MAAIC,MAAG,IAAGF,GAAEC,KAAE,CAAC,IAAE,MAAIC,MAAG;AAAE;AAAC,SAASM,GAAER,IAAE;AAJ7pO;AAI8pO,QAAMC,MAAE,KAAAD,GAAE,SAAS,kBAAX,mBAA0B;AAAO,MAAG,QAAMC,MAAG,CAAC,MAAM,QAAQA,EAAC,KAAG,CAACA,GAAE,UAAQA,GAAE,CAAC,aAAY;AAAK,WAAOE,GAAE;AAAE,QAAMD,KAAED;AAAE,MAAIE,MAAE;AAAG,aAAUC,MAAKF;AAAE,IAAAC,OAAGC,GAAE,SAAS;AAAE,SAAOD,MAAE,KAAK,UAAU,QAAMH,GAAE,YAAUA,GAAE,UAAU,OAAO,IAAE,EAAE,KAAGA,GAAE,YAAY,aAAW,KAAK,UAAUA,GAAE,YAAY,MAAM,IAAE;AAAG;AAAC,IAAMc,KAAE;AAAR,IAAUC,KAAE;AAAZ,IAAcC,KAAE;AAAhB,IAAkBC,KAAE;;;ACAngO,IAAIc,KAAE,cAAc,EAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAE,KAAK,iBAAe,GAAE,KAAK,YAAU,IAAI,SAAM,KAAK,WAAS;AAAA,EAAC;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK,UAAU,KAAM,CAAAC,OAAGA,GAAE,OAAQ;AAAA,EAAC;AAAA,EAAC,QAAQA,IAAE;AAAC,SAAK,MAAM;AAAE,UAAMC,MAAE,KAAK,WAAUC,KAAE,EAAC,iBAAgB,GAAE,iBAAgB,EAAC;AAAE,aAAQC,KAAE,GAAEA,KAAEF,IAAE,UAAQ,CAACD,GAAE,MAAK,EAAEG;AAAE,MAAAF,IAAEE,EAAC,EAAE,WAASF,IAAEE,EAAC,EAAE,QAAQH,IAAEE,EAAC,GAAE,KAAK,WAASC;AAAA,EAAC;AAAA,EAAC,QAAO;AAAC,UAAMH,KAAE,KAAK;AAAU,QAAIC,MAAED,GAAE;AAAO,aAAQE,KAAE,KAAK,UAASA,KAAE,GAAEA,MAAI;AAAC,YAAMC,KAAEH,GAAEE,KAAE,CAAC;AAAE,UAAIE,KAAEF;AAAE,aAAKE,KAAEJ,GAAE,UAAQG,GAAE,YAAUH,GAAEI,EAAC,EAAE,aAAWA,OAAIH,OAAGE,GAAE,WAASH,GAAEI,EAAC,EAAE;AAAW,QAAAJ,GAAEI,KAAE,CAAC,IAAEJ,GAAEI,EAAC,GAAEA;AAAI,MAAAJ,GAAEI,KAAE,CAAC,IAAED,IAAEF,MAAEG,KAAE;AAAA,IAAC;AAAC,SAAK,WAAS;AAAA,EAAC;AAAA,EAAC,IAAIJ,IAAE;AAAC,SAAK,MAAM,GAAEA,GAAE,WAAS,IAAE,GAAE,KAAK,UAAU,QAAQA,EAAC,GAAE,KAAK,aAAa,SAAS;AAAA,EAAC;AAAA,EAAC,OAAOA,IAAE;AAAC,MAAE,KAAK,WAAUA,EAAC,GAAE,KAAK,WAAS,KAAK,UAAU,QAAO,KAAK,MAAM,GAAE,KAAK,aAAa,SAAS;AAAA,EAAC;AAAC;AAAE,EAAE,CAACK,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEN,GAAE,WAAU,WAAU,IAAI,GAAEA,KAAE,EAAE,CAACO,GAAE,uCAAuC,CAAC,GAAEP,EAAC;AAAE,IAAMO,KAAN,MAAO;AAAA,EAAC,YAAYN,IAAEC,KAAE;AAAC,SAAK,OAAKD,IAAE,KAAK,SAAOC;AAAA,EAAC;AAAC;AAAC,IAAMM,KAAE,oBAAI;AAAI,SAASC,GAAER,IAAEC,KAAE;AAAC,MAAIC,KAAEK,GAAE,IAAIP,EAAC;AAAE,MAAG,QAAME,IAAE;AAAC,UAAMD,MAAE,IAAIF,MAAEI,KAAEH,GAAE,aAAa,EAAE,gBAAeC,GAAC;AAAE,IAAAC,KAAE,IAAII,GAAEL,KAAEE,EAAC,GAAEI,GAAE,IAAIP,IAAEE,EAAC;AAAA,EAAC;AAAC,SAAOA,GAAE,KAAK,IAAID,GAAC,GAAE,EAAC,QAAO,MAAI;AAAC,QAAG,QAAMC;AAAE;AAAO,IAAAA,GAAE,KAAK,OAAOD,GAAC;AAAE,IAAAC,GAAE,KAAK,UAAU,SAAO,MAAIK,GAAE,OAAOP,EAAC,GAAEE,GAAE,OAAO,OAAO,GAAEA,GAAE,KAAK,QAAQ,IAAGA,KAAE;AAAA,EAAI,EAAC;AAAC;;;ACAr+B,IAAMO,KAAN,MAAO;AAAA,EAAC,YAAYC,IAAEC,IAAEC,IAAEC,KAAEC,KAAE;AAAC,SAAK,cAAYJ,IAAE,KAAK,aAAWC,IAAE,KAAK,kBAAgBC,IAAE,KAAK,MAAIC,KAAE,KAAK,OAAKC,KAAE,KAAK,YAAU,GAAE,KAAK,eAAaD,GAAE;AAAA,EAAU;AAAC;AAAC,IAAM,IAAN,MAAO;AAAA,EAAC,YAAYF,IAAEC,IAAEC,KAAEC,KAAEC,IAAEC,IAAEC,IAAEC,IAAEC,IAAEC,IAAEC,IAAEC,IAAEC,IAAEC,IAAEC,IAAE;AAAC,SAAK,SAAOd,IAAE,KAAK,wBAAsBE,KAAE,KAAK,oBAAkBC,KAAE,KAAK,mBAAiBC,IAAE,KAAK,UAAQC,IAAE,KAAK,cAAYC,IAAE,KAAK,YAAUC,IAAE,KAAK,eAAaC,IAAE,KAAK,cAAYC,IAAE,KAAK,UAAQC,IAAE,KAAK,eAAaC,IAAE,KAAK,cAAYC,IAAE,KAAK,wBAAsBC,IAAE,KAAK,wBAAsBC,IAAE,KAAK,SAAO,MAAG,KAAK,aAAW,IAAI,SAAM,KAAK,kBAAgB,MAAK,KAAK,aAAW,GAAE,KAAK,gBAAc,GAAE,KAAK,aAAW,GAAE,KAAK,aAAWC,GAAE,MAAK,KAAK,iBAAe,CAAAhB,OAAGA,IAAE,KAAK,cAAY,OAAG,KAAK,aAAW,IAAG,KAAK,WAAS,oBAAI,OAAI,KAAK,eAAa,oBAAI,OAAI,KAAK,eAAa,oBAAI,OAAI,KAAK,gBAAc,GAAE,KAAK,mBAAiB,OAAO,mBAAkB,KAAK,qBAAmB,OAAO,mBAAkB,KAAK,sBAAoB,oBAAI,OAAI,KAAK,WAASiB,GAAE,CAAC,GAAE,KAAK,0BAAwBA,GAAE,CAAC,GAAE,KAAK,YAAU,GAAE,KAAK,mBAAiB,EAAC,UAAS,GAAE,eAAc,MAAE,GAAE,KAAK,0BAAwB,GAAE,KAAK,WAAS,IAAIV,GAAE,EAAC,aAAY,KAAI,CAAC,GAAE,KAAK,YAAU,IAAIA,GAAE,EAAC,aAAY,KAAI,CAAC,GAAE,KAAK,WAAS,IAAIW,GAAE,KAAK,QAAQ,GAAE,KAAK,+BAA6B,IAAIX,GAAE,EAAC,aAAY,KAAI,CAAC,GAAE,KAAK,mBAAiB,OAAG,KAAK,yBAAuB,GAAE,KAAK,aAAW,CAAC,GAAE,KAAK,yBAAuB,OAAG,KAAK,wBAAsB,OAAG,KAAK,kBAAgB,OAAG,KAAK,cAAYD,GAAE,KAAG,QAAML,GAAE,mBAAiB,QAAMA,GAAE,gBAAgB,WAAUA,GAAE,0BAAwBA,GAAE,uBAAuB,eAAa,KAAK,cAAY,GAAGA,GAAE,uBAAuB,UAAU,KAAI,KAAK,eAAa,KAAK,mBAAiB,KAAK,iBAAiB,cAAY,GAAE,KAAK,MAAMC,EAAC;AAAA,EAAC;AAAA,EAAC,MAAMF,IAAE;AAAC,QAAG,WAASA,GAAE,MAAK;AAAC,YAAMC,KAAED,GAAE;AAAS,cAAO,KAAK,aAAWA,GAAE,WAAU,KAAK,gBAAcA,GAAE,UAASA,GAAE,WAAU;AAAA,QAAC,KAAI;AAAqB,eAAK,aAAWgB,GAAE;AAAmB;AAAA,QAAM,KAAI;AAAuB,eAAK,aAAWA,GAAE,oBAAmB,KAAK,iBAAeG;AAAA,MAAC;AAAC,UAAG,KAAK,aAAY;AAAC,aAAK,aAAW;AAAG,cAAMjB,KAAEkB,GAAEpB,GAAE,WAAUA,GAAE,QAAQ,GAAEG,MAAEF,GAAE,MAAMC,EAAC,GAAEE,MAAE,EAAC,OAAM,CAAC,EAAC,OAAM,KAAK,YAAW,UAAS,CAACJ,GAAE,SAAS,GAAE,MAAK,QAAO,KAAIG,IAAE,KAAI,cAAaA,IAAE,aAAY,CAAC,EAAC;AAAE,aAAK,SAASkB,GAAE,KAAK,YAAW,KAAK,aAAa,GAAEjB,GAAC,GAAE,KAAK,QAAQ,EAAE,EAAE,aAAW;AAAA,MAAM;AAAM,aAAK,aAAWJ,GAAE;AAAU,WAAK,SAASqB,GAAErB,GAAE,WAAU,KAAK,aAAa,GAAEC,EAAC,GAAE,KAAK,uBAAuB;AAAA,IAAC,WAAS,WAASD,GAAE,MAAK;AAAC,UAAG,KAAK,aAAWA,GAAE,WAAU,KAAK,WAAW,KAAKsB,GAAE,CAAC,GAAE,KAAK,aAAY;AAAC,aAAK,kBAAgBA,GAAE;AAAE,cAAMrB,KAAE,EAAC,IAAG,MAAK,SAAQ,MAAK,KAAID,GAAE,SAAS,KAAI,KAAIA,GAAE,SAAS,KAAI,gBAAe,MAAK,cAAa,MAAK,eAAc,MAAK,aAAY,MAAK,UAAS,CAAC,EAAC,IAAG,QAAO,MAAK,WAAU,KAAIA,GAAE,SAAS,KAAI,KAAIA,GAAE,SAAS,IAAG,CAAC,EAAC;AAAE,aAAK,aAAW,KAAK,mBAAmB,IAAIC,GAAEA,GAAE,IAAG,IAAI,GAAE,EAAE;AAAE,cAAMC,KAAE,KAAK,cAAcD,GAAE,IAAGA,EAAC;AAAE,QAAAC,MAAG,KAAK,SAASA,IAAE,KAAK,UAAU;AAAA,MAAC;AAAM,aAAK,aAAW,KAAK,aAAa,IAAID,GAAED,GAAE,SAAS,IAAG,IAAI,GAAE,EAAE;AAAE,YAAMC,KAAE,KAAK,cAAcD,GAAE,SAAS,IAAGA,GAAE,QAAQ;AAAE,MAAAC,MAAG,KAAK,SAASA,IAAE,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,qBAAqBD,IAAEC,IAAE;AAAC,UAAMC,KAAE,IAAGC,MAAE,IAAIF,GAAED,IAAEC,EAAC,GAAEG,MAAE,KAAK,mBAAmBD,KAAED,EAAC;AAAE,WAAO,KAAK,uBAAuBA,IAAEE,GAAC,GAAE,KAAK,cAAc,GAAEA;AAAA,EAAC;AAAA,EAAC,0BAA0BJ,IAAEC,IAAEC,IAAE;AAAC,SAAK,sBAAsBF,IAAEC,IAAEC,EAAC,GAAE,KAAK,cAAc;AAAA,EAAC;AAAA,EAAC,UAAUF,IAAE;AAAC,SAAK,SAAS,IAAIA,EAAC;AAAE,UAAME,KAAE,KAAK,aAAWF;AAAE,SAAK,sBAAsB,QAAQE,IAAE,MAAM,EAAE,KAAM,CAAAD,OAAG;AAAC,WAAK,WAAW,KAAK,EAAC,WAAUD,IAAE,MAAKC,GAAC,CAAC;AAAA,IAAC,CAAE,EAAE,MAAO,CAAAC,QAAG;AAAC,WAAK,SAAS,OAAOF,EAAC,GAAE,EAAEE,GAAC,MAAI,KAAK,aAAa,IAAIF,EAAC,GAAE,KAAK,QAAQ,MAAM,eAAc,KAAK,QAAO,2BAA2BA,EAAC,IAAGE,GAAC;AAAA,IAAE,CAAE;AAAA,EAAC;AAAA,EAAC,gBAAgBF,IAAE;AAAC,WAAK,KAAK,WAAW,SAAO,KAAG,CAACA,GAAE,QAAM;AAAC,YAAK,EAAC,WAAUC,IAAE,MAAKC,GAAC,IAAE,KAAK,WAAW,MAAM;AAAE,WAAK,SAASD,IAAEC,EAAC,GAAE,KAAK,SAAS,OAAOD,EAAC,GAAED,GAAE,aAAa;AAAA,IAAC;AAAC,SAAK,uBAAuB;AAAA,EAAC;AAAA,EAAC,SAASA,IAAEC,IAAE;AAAC,UAAME,MAAE,CAAC,GAAEE,KAAE,CAAC,GAAEC,KAAEL,GAAE,MAAM,IAAK,CAACA,IAAEK,OAAI;AAAC,YAAMC,KAAEJ,IAAE,QAAOa,MAAEf,GAAE,WAASA,GAAE,SAAS,SAAO;AAAE,MAAAI,GAAE,KAAK,KAAK,UAAU;AAAE,eAAQL,KAAE,GAAEA,KAAEgB,KAAEhB;AAAI,QAAAG,IAAE,KAAKF,GAAE,SAASD,EAAC,CAAC;AAAE,YAAMuB,KAAE,GAAGtB,GAAE,KAAK,IAAGO,KAAEgB,GAAEvB,GAAE,GAAG,GAAES,KAAE,EAAEF,GAAE,OAAO,CAAC,GAAEA,GAAE,OAAO,CAAC,GAAEA,GAAE,OAAO,CAAC,GAAEJ,GAAEI,GAAE,QAAQ,CAAC,GAAEG,KAAEV,GAAE,QAAMA,GAAE,KAAK,WAAUW,KAAEX,GAAE,QAAMA,GAAE,KAAK,UAASY,KAAEZ,GAAE,QAAMA,GAAE,KAAK,UAASa,KAAE,EAAC,mBAAkB,OAAG,SAAQ,QAAMF,IAAE,YAAWD,MAAG,QAAMA,GAAE,WAAS,GAAGA,GAAE,QAAQ,KAAG,QAAO,UAASC,MAAG,QAAMA,GAAE,WAAS,GAAGA,GAAE,QAAQ,KAAG,QAAO,SAAQC,MAAG,QAAMA,GAAE,WAAS,GAAGA,GAAE,QAAQ,KAAG,QAAO,oBAAmBD,KAAEA,GAAE,aAAW,IAAG,oBAAmBC,KAAEA,GAAE,aAAW,GAAE,GAAEE,KAAE,IAAIP,GAAEe,IAAEE,GAAEnB,IAAEN,IAAE,KAAK,aAAa,GAAEU,IAAEM,KAAE,GAAEF,IAAE,KAAK,aAAY,KAAK,YAAW,KAAK,eAAeb,GAAE,YAAY,GAAEW,KAAEA,GAAE,eAAa,IAAI;AAAE,aAAOG,GAAE,aAAWP,IAAEO,GAAE,gBAAc,KAAK,sBAAsBA,EAAC,GAAEA,GAAE,cAAYH,KAAEA,GAAE,cAAY,GAAE,IAAIb,GAAEQ,IAAES,KAAEU,GAAE,KAAK,uBAAuB,GAAE,MAAKX,EAAC;AAAA,IAAC,CAAE;AAAE,QAAG,OAAKf;AAAE,WAAK,kBAAgBsB,GAAEhB,IAAEH,KAAEE,EAAC;AAAA,SAAM;AAAC,eAAQJ,KAAE,KAAK,WAAW,QAAOA,KAAED,IAAEC;AAAI,aAAK,WAAWA,EAAC,IAAE;AAAK,WAAK,WAAWD,EAAC,IAAEsB,GAAEhB,IAAEH,KAAEE,EAAC;AAAA,IAAC;AAAC,SAAK,cAAYC,GAAE;AAAA,EAAM;AAAA,EAAC,yBAAwB;AAAC,UAAMN,KAAE,IAAI,SAAMC,KAAE,CAACA,IAAEC,IAAEC,QAAI;AAAC,YAAMC,MAAE,KAAK,SAASH,EAAC;AAAE,UAAG,QAAMG,KAAE;AAAC,cAAMC,KAAEe,GAAEnB,IAAE,KAAK,aAAa;AAAE,QAAAG,IAAE,QAAQC,EAAC,IAAE,QAAMH,KAAEA,KAAE;AAAG,cAAMI,KAAEF,IAAE,MAAMC,EAAC,EAAE;AAAK,gBAAMC,OAAIA,GAAE,QAAMH,KAAEH,GAAE,KAAKC,EAAC;AAAA,MAAE;AAAA,IAAC;AAAE,SAAIA,GAAE,KAAK,YAAW,MAAK,CAAC,GAAED,GAAE,UAAQ;AAAC,YAAME,KAAEF,GAAE,IAAI,GAAEG,MAAE,KAAK,QAAQD,EAAC;AAAE,UAAG,QAAMC;AAAE,iBAAQH,KAAE,GAAEA,KAAEG,IAAE,YAAWH,MAAI;AAAC,UAAAC,GAAE,KAAK,cAAcE,IAAE,OAAMH,EAAC,GAAEE,IAAEC,IAAE,QAAM,CAAC,GAAE,KAAK,YAAU,KAAK,IAAI,KAAK,WAAUA,IAAE,QAAM,CAAC;AAAA,QAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,SAASH,IAAE;AAAC,UAAMC,KAAEoB,GAAErB,IAAE,KAAK,aAAa;AAAE,WAAOC,KAAE,IAAE,KAAK,kBAAgB,KAAK,WAAWA,EAAC;AAAA,EAAC;AAAA,EAAC,iBAAiBD,IAAE;AAAC,UAAMC,KAAE,KAAK,SAASD,EAAC;AAAE,WAAO,QAAMC,KAAE,OAAKA,GAAE,MAAMmB,GAAEpB,IAAE,KAAK,aAAa,CAAC;AAAA,EAAC;AAAA,EAAC,SAASA,IAAEC,IAAE;AAAC,YAAMD,GAAE,YAAU,KAAK,iBAAiBC,IAAED,GAAE,QAAQ;AAAE,UAAME,KAAE,KAAK,UAAUD,EAAC,GAAEE,MAAE,QAAMD,KAAEA,GAAE,QAAM,IAAE;AAAE,SAAK,YAAU,KAAK,IAAI,KAAK,WAAUF,GAAE,WAASG,MAAE,IAAEA,GAAC;AAAE,UAAK,EAAC,WAAUC,KAAE,UAASC,GAAC,IAAEsB,GAAE3B,GAAE,YAAY,GAAEM,KAAE,KAAK,iBAAiBL,EAAC;AAAE,WAAOK,GAAE,OAAK,IAAIE,GAAER,GAAE,IAAGC,IAAED,GAAE,KAAIM,GAAE,YAAWH,KAAEH,GAAE,WAAUA,GAAE,SAAQI,KAAEC,IAAEL,GAAE,WAAW,GAAEA,GAAE,QAAMM,GAAE,KAAK,aAAWkB,GAAExB,GAAE,GAAG,IAAGM,GAAE,KAAK,gBAAc,KAAK,sBAAsBA,GAAE,IAAI,GAAE,QAAMA,GAAE,QAAM,QAAMA,GAAE,IAAI,QAAMA,GAAE,IAAI,MAAIN,GAAE,MAAKM,GAAE,KAAK,YAAUA,GAAE,IAAI,WAAUA,GAAE,KAAK,uBAAqBA,GAAE,IAAI,sBAAqBA,GAAE,IAAI,gBAAcA,GAAE,KAAK,gBAAeA,GAAE;AAAA,EAAI;AAAA,EAAC,aAAaN,IAAEC,IAAE;AAAC,UAAMC,KAAE,KAAK,WAAW,CAAC;AAAE,QAAGD,KAAE;AAAG,aAAO,KAAK,mBAAmBD,IAAEC,EAAC;AAAE,QAAG,QAAMC;AAAE,aAAM;AAAG,UAAMC,MAAED,GAAE,MAAM;AAAO,WAAOA,GAAE,MAAM,KAAK,IAAIH,GAAE,GAAE,GAAE2B,GAAE,KAAK,uBAAuB,GAAE1B,IAAE,IAAI,CAAC,GAAE,KAAK,cAAaE,GAAE,QAAQ,KAAKD,EAAC,GAAE,GAAED,GAAE,SAAS,GAAE,GAAEA,GAAE,oBAAoB,GAAEG;AAAA,EAAC;AAAA,EAAC,mBAAmBH,IAAEC,IAAE;AAAC,UAAMC,KAAE,KAAK;AAAgB,QAAG,QAAMA;AAAE,aAAM;AAAG,QAAGD,MAAG;AAAE,YAAM,IAAI,MAAM,6EAA6E;AAAE,UAAME,MAAE,EAAED,GAAE,MAAM,SAAO;AAAG,WAAOA,GAAE,MAAM,KAAK,IAAIH,GAAE,GAAE,GAAE2B,GAAE,KAAK,uBAAuB,GAAE1B,IAAE,IAAI,CAAC,GAAE,KAAK,cAAaE,GAAE,QAAQ,KAAKD,EAAC,GAAE,GAAED,GAAE,SAAS,GAAE,GAAEA,GAAE,oBAAoB,GAAEG;AAAA,EAAC;AAAA,EAAC,uBAAuBH,IAAEC,IAAE;AAAC,UAAMC,KAAE,KAAK;AAAgB,QAAG,QAAMA,MAAGF,MAAG;AAAE;AAAO,UAAMG,MAAEiB,GAAEpB,IAAE,KAAK,aAAa,GAAEI,MAAEgB,GAAEnB,IAAE,KAAK,aAAa,GAAEI,KAAEH,GAAE,MAAMC,GAAC,GAAEG,KAAED,GAAE;AAAY,IAAAH,GAAE,SAAS,OAAOG,GAAE,cAAYA,GAAE,YAAW,GAAEJ,EAAC;AAAE,UAAMM,KAAE;AAAE,IAAAF,GAAE,cAAYE,IAAE,QAAMF,GAAE,SAAOA,GAAE,KAAK,cAAYE;AAAG,eAAUS,OAAKd,GAAE;AAAM,MAAAc,IAAE,cAAYV,OAAIU,IAAE,eAAaT;AAAG,IAAAL,GAAE,QAAQE,GAAC,IAAEJ,IAAE,KAAK,iCAAiCA,EAAC;AAAA,EAAC;AAAA,EAAC,sBAAsBA,IAAEC,IAAEC,IAAE;AAJxnP;AAIynP,UAAMC,MAAE,KAAK;AAAgB,QAAG,QAAMA;AAAE;AAAO,UAAMC,MAAE,KAAK,eAAeJ,EAAC;AAAE,QAAG,QAAMI;AAAE;AAAO,UAAMC,KAAE,oBAAI,OAAIC,KAAE,oBAAI,OAAIC,KAAE,CAAAP,OAAG;AAJxvP,UAAA4B;AAIyvP,YAAM1B,MAAEkB,GAAEpB,IAAE,KAAK,aAAa,GAAEI,MAAED,IAAE,MAAMD,GAAC;AAAE,UAAGE,IAAE,aAAW;AAAE,iBAAQH,KAAEG,IAAE,aAAYH,KAAEG,IAAE,cAAYA,IAAE,YAAW,EAAEH;AAAE,UAAAM,GAAEJ,IAAE,SAASF,EAAC,CAAC;AAAE,MAAAA,IAAE2B,MAAAxB,IAAE,SAAF,gBAAAwB,IAAQ,IAAG5B,EAAC,GAAEK,GAAE,IAAID,GAAC,GAAE,KAAK,oBAAoB,OAAOJ,EAAC;AAAA,IAAC;AAAE,IAAAO,GAAEP,EAAC;AAAE,UAAMgB,MAAEb,IAAE,OAAMoB,KAAEpB,IAAE,UAASK,KAAEL,IAAE,MAAM,IAAK,MAAI,EAAG,GAAEM,KAAE,CAAC,GAAEC,KAAE,CAAC;AAAE,aAAQE,KAAE,GAAEA,KAAEI,IAAE,QAAO,EAAEJ,IAAE;AAAC,YAAMZ,KAAEgB,IAAEJ,EAAC;AAAE,UAAGP,GAAE,IAAIL,EAAC;AAAE;AAAS,YAAMC,KAAEQ,GAAE,QAAON,MAAEsB,GAAEb,IAAE,IAAG,KAAK,aAAa,GAAER,MAAEqB,GAAExB,IAAE,IAAG,KAAK,aAAa;AAAE,MAAAD,GAAE,SAAOA,GAAE,KAAK,QAAMI,MAAGI,GAAEI,EAAC,IAAER,KAAEK,GAAE,KAAKT,EAAC,GAAEG,QAAIC,QAAIF,IAAE,KAAAF,GAAE,SAAF,mBAAQ,IAAGG,KAAEC,GAAC,GAAEE,GAAE,IAAIH,KAAEC,GAAC;AAAA,IAAE;AAAC,SAAK,cAAYY,IAAE,SAAOP,GAAE;AAAO,UAAME,KAAEF,GAAE,IAAK,MAAI,EAAG;AAAE,aAAQG,KAAE,GAAEA,KAAEH,GAAE,QAAO,EAAEG,IAAE;AAAC,YAAMZ,KAAEyB,GAAEb,IAAE,IAAG,KAAK,aAAa,GAAEX,KAAEQ,GAAEG,EAAC,GAAEV,MAAEQ,GAAE;AAAO,eAAQP,MAAEF,GAAE,aAAYE,MAAEF,GAAE,cAAYA,GAAE,YAAW,EAAEE,KAAE;AAAC,cAAMF,KAAEsB,GAAEpB,GAAC;AAAE,YAAGF,MAAG;AAAE,UAAAS,GAAE,KAAKT,EAAC;AAAA,aAAM;AAAC,gBAAMC,MAAEkB,GAAEnB,IAAE,KAAK,aAAa,GAAEE,MAAEa,IAAEd,GAAC;AAAE,cAAGG,GAAE,IAAIF,GAAC;AAAE;AAAS,gBAAMC,MAAEI,GAAEN,GAAC;AAAE,UAAAQ,GAAE,KAAKN,GAAC;AAAE,UAAAO,GAAES,GAAEhB,KAAE,KAAK,aAAa,CAAC,IAAEJ;AAAA,QAAC;AAAA,MAAC;AAAC,MAAAC,GAAE,cAAYC,KAAED,GAAE,aAAWS,GAAE,SAAOR,KAAED,GAAE,SAAOA,GAAE,KAAK,aAAWA,GAAE;AAAA,IAAW;AAAC,IAAAE,IAAE,QAAMM,IAAEN,IAAE,WAASO,IAAEP,IAAE,UAAQQ,IAAE,KAAK,iCAAiCH,GAAEY,GAAEhB,KAAE,KAAK,aAAa,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,iCAAiCJ,IAAE;AAAC,QAAIC,KAAED;AAAE,OAAE;AAAC,UAAIA,KAAE;AAAK,YAAME,KAAE,KAAK,kBAAkB,SAAQE,MAAE,KAAK,kBAAkB,UAASY,MAAE,KAAK,iBAAiBf,EAAC;AAAE,UAAG,QAAMe;AAAE;AAAO,eAAQT,KAAE,GAAEA,KAAES,IAAE,YAAWT,MAAI;AAAC,cAAMS,MAAE,KAAK,cAAcf,IAAEM,EAAC,GAAEgB,KAAE,KAAK,iBAAiBP,GAAC,GAAER,KAAE,QAAMe,KAAEA,GAAE,OAAKA,GAAE,OAAK;AAAK,YAAG,QAAMf,MAAGA,GAAE,IAAI,CAAC,IAAE;AAAE,cAAG,QAAMR;AAAE,YAAAA,KAAE,EAAEQ,GAAE,KAAIqB,EAAC;AAAA,eAAM;AAAC,kBAAM5B,KAAE6B,IAAEzB,KAAE,GAAEE,KAAE;AAAE,eAAEC,GAAE,KAAIN,IAAED,IAAEG,GAAC,GAAE,GAAEJ,IAAEE,IAAEG,IAAED,GAAC,GAAE,EAAEH,IAAEI,IAAEE,EAAC,GAAE,GAAEA,IAAEH,KAAEJ,IAAEE,EAAC;AAAA,UAAC;AAAA,MAAC;AAAC,YAAMqB,KAAEP,IAAE,OAAKA,IAAE;AAAK,cAAMO,OAAI,QAAMvB,KAAEuB,GAAE,MAAI,EAAEvB,IAAE,QAAMuB,GAAE,MAAIA,GAAE,MAAIZ,GAAE,CAAC,IAAE,GAAEY,GAAE,GAAG,GAAE,GAAEA,GAAE,SAAS,GAAE,GAAEA,GAAE,oBAAoB,GAAEA,GAAE,cAAY,OAAM,KAAK,sCAAsCP,GAAC,GAAEf,KAAE,KAAK,eAAeA,EAAC;AAAA,IAAC,SAAO,QAAMA;AAAA,EAAE;AAAA,EAAC,iBAAiBD,IAAEC,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBF,EAAC,GAAEG,MAAE,KAAK,SAASH,EAAC;AAAE,IAAAE,GAAE,cAAYC,IAAE,SAAS,QAAOD,GAAE,aAAWD,GAAE;AAAO,aAAQG,MAAE,GAAEA,MAAEH,GAAE,QAAOG,OAAI;AAAC,YAAMF,MAAE,KAAK,aAAaD,GAAEG,GAAC,GAAEJ,EAAC;AAAE,MAAAG,IAAE,SAAS,KAAKD,GAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,QAAQF,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,WAAO,QAAMC,KAAEA,GAAE,OAAK;AAAA,EAAI;AAAA,EAAC,aAAaD,IAAE;AAAC,QAAIC;AAAE,WAAO,KAAK,aAAc,CAACC,IAAEC,QAAI;AAAC,OAAC,QAAMD,GAAE,QAAMA,GAAE,KAAK,OAAKF,MAAG,QAAME,GAAE,OAAKA,GAAE,IAAI,OAAKF,QAAKC,KAAEE;AAAA,IAAE,CAAE,GAAEF;AAAA,EAAC;AAAA,EAAC,YAAYD,IAAE;AAAC,UAAMC,KAAE,KAAK,aAAaD,EAAC;AAAE,WAAO,QAAMC,MAAGA,MAAG,IAAE,KAAK,QAAQA,EAAC,IAAE;AAAA,EAAI;AAAA,EAAC,cAAcD,IAAEC,IAAE;AAAC,UAAMC,KAAE,KAAK,SAASF,EAAC;AAAE,QAAG,QAAME;AAAE,aAAM;AAAG,UAAMC,MAAED,GAAE,MAAMkB,GAAEpB,IAAE,KAAK,aAAa,CAAC;AAAE,WAAOE,GAAE,SAASC,IAAE,cAAYF,EAAC;AAAA,EAAC;AAAA,EAAC,eAAeD,IAAE;AAAC,UAAMC,KAAE,KAAK,SAASD,EAAC;AAAE,WAAO,QAAMC,MAAGD,OAAI,KAAK,aAAWC,GAAE,QAAQmB,GAAEpB,IAAE,KAAK,aAAa,CAAC,IAAE;AAAA,EAAI;AAAA,EAAC,UAAUA,IAAE;AAAC,UAAMC,KAAE,KAAK,eAAeD,EAAC;AAAE,WAAO,QAAMC,KAAE,KAAK,QAAQA,EAAC,IAAE;AAAA,EAAI;AAAA,EAAC,OAAOD,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,WAAO,QAAMC,MAAG,MAAIA,GAAE;AAAA,EAAU;AAAA,EAAC,IAAI,WAAU;AAAC,WAAO,KAAK,QAAQ,KAAK,UAAU;AAAA,EAAC;AAAA,EAAC,IAAI,OAAM;AAAC,WAAO,KAAK;AAAA,EAAU;AAAA,EAAC,IAAI,aAAY;AAAC,WAAO,KAAK;AAAA,EAAW;AAAA,EAAC,wBAAuB;AAAC,SAAK,aAAc,CAAAD,OAAG;AAAC,cAAMA,GAAE,SAAOA,GAAE,KAAK,cAAY;AAAA,IAAK,CAAE;AAAA,EAAC;AAAA,EAAC,4BAA2B;AAAC,SAAK,0BAAwBiB,GAAE,KAAK,uBAAuB;AAAA,EAAC;AAAA,EAAC,8BAA8BjB,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,YAAMC,MAAG,KAAK,sCAAsCA,EAAC;AAAA,EAAC;AAAA,EAAC,sCAAsCD,IAAE;AAAC,IAAAA,GAAE,kBAAgB0B,GAAE,KAAK,uBAAuB;AAAA,EAAC;AAAA,EAAC,8BAA8B1B,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,YAAMC,OAAI8B,GAAE9B,EAAC,GAAE,KAAK,sCAAsCA,EAAC;AAAA,EAAE;AAAA,EAAC,uBAAuBD,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,QAAG,QAAMC;AAAE;AAAO,QAAG,CAAC,KAAK;AAAuB,aAAO,KAAK,KAAK,8BAA8BD,EAAC;AAAE,UAAME,KAAE,QAAMD,GAAE,OAAKA,GAAE,OAAKA,GAAE;AAAI,QAAG,QAAMC;AAAE;AAAO,UAAMC,MAAED,GAAE;AAAe,YAAMC,QAAIA,IAAE,QAAM;AAAA,EAAG;AAAA,EAAC,6BAA6BH,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,YAAMC,MAAG,QAAMA,GAAE,SAAOA,GAAE,KAAK,cAAY,MAAK,GAAEA,GAAE,KAAK,SAAS,GAAE,GAAEA,GAAE,KAAK,oBAAoB;AAAA,EAAE;AAAA,EAAC,2BAA0B;AAAC,YAAM,KAAK,YAAU,KAAK,SAAS,KAAK,UAAU,CAAAD,QAAIA,GAAE,gBAAc,KAAK,sBAAsBA,EAAC,GAAEA,GAAE,cAAY,MAAK,KAAI;AAAA,EAAC;AAAA,EAAC,sBAAsBA,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,QAAG,QAAMC;AAAE,aAAO;AAAK,UAAMC,KAAE,QAAMD,GAAE,OAAKA,GAAE,OAAKA,GAAE;AAAI,QAAG,QAAMC;AAAE,aAAO;AAAK,UAAMC,MAAED,GAAE;AAAe,QAAG,QAAMC,OAAGA,IAAE;AAAM,aAAOA;AAAE,UAAMC,MAAE,IAAIF;AAAE,QAAIG,KAAE;AAAG,aAAQC,KAAE,GAAEA,KAAEL,GAAE,YAAWK,MAAI;AAAC,YAAML,KAAE,KAAK,sBAAsB,KAAK,cAAcD,IAAEM,EAAC,CAAC;AAAE,cAAML,MAAGG,IAAE,MAAI,KAAK,IAAIA,IAAE,KAAIH,GAAE,GAAG,GAAEG,IAAE,MAAI,KAAK,IAAIA,IAAE,KAAIH,GAAE,GAAG,KAAGI,KAAE;AAAA,IAAE;AAAC,QAAG,MAAIJ,GAAE,cAAYI,MAAG,QAAMJ,GAAE,QAAMA,GAAE,KAAK,UAAU,UAAS;AAAC,YAAMD,KAAE,KAAK,iBAAiB,kBAAkBE,EAAC;AAAE,cAAMF,OAAII,IAAE,MAAI,KAAK,IAAIA,IAAE,KAAIJ,GAAE,GAAG,GAAEI,IAAE,MAAI,KAAK,IAAIA,IAAE,KAAIJ,GAAE,GAAG;AAAA,IAAE;AAAC,WAAO,QAAMG,OAAGA,IAAE,QAAMC,IAAE,OAAKD,IAAE,QAAMC,IAAE,OAAKD,IAAE,QAAM,MAAGA,QAAIC,IAAE,QAAM,MAAG,QAAMH,GAAE,SAAOA,GAAE,KAAK,iBAAeG,MAAG,QAAMH,GAAE,QAAMA,GAAE,IAAI,iBAAeG,MAAG,KAAK,8BAA8BJ,EAAC,GAAEI;AAAA,EAAE;AAAA,EAAC,cAAcJ,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,QAAG,QAAMC,MAAG,QAAMA,GAAE,OAAK,CAACA,GAAE,IAAI;AAAI,aAAM;AAAG,QAAG,KAAK,0BAAwB,KAAK,sBAAsBD,EAAC,GAAE,CAACgC,GAAE/B,GAAE,iBAAgB,KAAK,uBAAuB,GAAE;AAAC,YAAMD,KAAEC,GAAE,MAAKC,KAAE,CAACF,MAAGC,GAAE,OAAK,CAACD,GAAE,gBAAcC,GAAE,OAAK,OAAKD;AAAE,UAAG,KAAK,mBAAiB,KAAK,0BAAwB,QAAMA,MAAG,QAAMC,GAAE,QAAMA,GAAE,iBAAeE,GAAE,YAAW;AAAC,cAAMD,MAAE,QAAMF,KAAEA,GAAE,MAAI,QAAMC,GAAE,MAAIA,GAAE,IAAI,MAAI;AAAK,QAAAA,GAAE,eAAa,QAAMC,MAAE,KAAK,sBAAsBA,GAAC,IAAEC,GAAE;AAAA,MAAU;AAAC,YAAMA,MAAE,QAAMH,MAAGC,GAAE,iBAAeE,GAAE,QAAOC,MAAE,EAAE,QAAMJ,MAAGA,GAAE,yBAAuB,EAAE,YAAU,CAACE,MAAG,KAAK,iBAAiB,cAAcA,EAAC,MAAI,CAACC;AAAE,aAAOF,GAAE,kBAAgBgC,GAAE7B,KAAE,KAAK,uBAAuB,GAAEA;AAAA,IAAC;AAAC,WAAO,EAAEH,GAAE,eAAe;AAAA,EAAC;AAAA,EAAC,kBAAkBD,IAAE;AAAC,QAAG,CAAC,KAAK,cAAcA,EAAC;AAAE,aAAM;AAAG,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,WAAM,CAAC,EAAE,QAAMC,MAAG,QAAMA,GAAE,QAAM,QAAMA,GAAE,KAAK,eAAa,KAAK,yBAAuBA,GAAE,KAAK,yBAAuB,EAAE,eAAa,KAAK,iBAAiB,kBAAkBA,GAAE,IAAI;AAAA,EAAC;AAAA,EAAC,kBAAkBD,IAAEC,IAAEC,IAAEC,KAAEC,KAAE;AAAC,UAAMC,KAAE,KAAK,SAASL,EAAC;AAAE,QAAG,QAAMK,MAAG,MAAIJ,GAAE;AAAW;AAAO,UAAMK,KAAEL,GAAE,cAAYA,GAAE,YAAWM,KAAE,IAAI;AAAM,aAAQS,MAAEf,GAAE,aAAYe,MAAEV,IAAE,EAAEU,KAAE;AAAC,YAAMhB,KAAEK,GAAE,SAASW,GAAC,GAAEf,KAAE,KAAK,iBAAiBD,EAAC;AAAE,cAAMC,MAAG,QAAMA,GAAE,QAAM,KAAK,kBAAkBD,EAAC,KAAGO,GAAE,KAAKN,EAAC;AAAA,IAAC;AAAC,IAAAE,OAAGI,GAAE;AAAO,eAAUS,OAAKT,IAAE;AAAC,YAAMP,KAAEgB,IAAE,KAAK;AAAM,WAAK,UAAUhB,EAAC,KAAG,KAAK,aAAaA,EAAC,KAAGI,IAAE,QAAM,KAAK,IAAIA,IAAE,OAAMF,EAAC,GAAEE,IAAE,YAAUD,OAAG,KAAK,kBAAkBH,IAAEgB,KAAEd,KAAE,GAAEC,KAAEC,GAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,cAAcJ,IAAE;AAAC,QAAG,UAAQ,KAAK;AAAY,aAAM;AAAG,UAAMC,KAAE,KAAK,iBAAiBD,EAAC;AAAE,QAAG,QAAMC;AAAE,aAAM;AAAG,QAAG,aAAW,KAAK;AAAY,aAAM;AAAG,QAAG+B,GAAE/B,GAAE,WAAU,KAAK,QAAQ;AAAE,aAAO,EAAEA,GAAE,SAAS;AAAE,UAAMC,KAAE,EAAC,OAAM,GAAE,UAAS,EAAC;AAAE,SAAK,kBAAkBF,IAAEC,IAAE,GAAE,GAAEC,EAAC;AAAE,UAAMC,MAAED,GAAE,QAAMA,GAAE,YAAU;AAAG,WAAOD,GAAE,YAAUgC,GAAE9B,KAAE,KAAK,QAAQ,GAAEA;AAAA,EAAC;AAAA,EAAC,IAAI,WAAU;AAAC,WAAO,KAAK;AAAA,EAAS;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,KAAK;AAAA,EAAM;AAAA,EAAC,UAAS;AAAC,SAAK,SAAS,IAAI,MAAM,GAAE,KAAK,SAAS,OAAO,MAAM;AAAA,EAAC;AAAA,EAAC,gBAAe;AAAC,SAAK,SAAO,MAAG,KAAK,gBAAc,GAAE,KAAK,WAASc,GAAE,KAAK,QAAQ;AAAA,EAAC;AAAA,EAAC,uBAAuBjB,IAAE;AAAC,SAAK,wBAAsBA,IAAE,KAAK,aAAc,CAAC,EAAC,MAAKA,GAAC,MAAI;AAAC,cAAMA,OAAIA,GAAE,uBAAqB,EAAE,YAAWA,GAAE,gBAAc,KAAK,sBAAsBA,EAAC,GAAEA,GAAE,oBAAkB,KAAK,6BAA6BA,GAAE,KAAK;AAAA,IAAE,CAAE,GAAE,KAAK,0BAA0B;AAAA,EAAC;AAAA,EAAC,mBAAmBA,IAAE;AAAC,SAAK,kBAAgBA,IAAE,KAAK,aAAc,CAAAA,OAAG;AAAC,UAAG,QAAMA,IAAE;AAAC,QAAAA,GAAE,eAAaG,GAAE;AAAW,cAAMF,KAAED,GAAE;AAAK,gBAAMC,MAAG,KAAK,8BAA8BA,GAAE,KAAK;AAAA,MAAC;AAAA,IAAC,CAAE,GAAE,KAAK,0BAA0B;AAAA,EAAC;AAAA,EAAC,OAAOD,IAAEC,IAAEC,IAAE;AAAC,QAAG,CAAC,KAAK;AAAO;AAAO,SAAK,WAAW,SAAO,KAAG,KAAK,gBAAgBD,EAAC,GAAE,KAAK,mBAAiB,OAAO,mBAAkB,KAAK,qBAAmB,OAAO,mBAAkB,KAAK,SAAS,MAAM,GAAE,KAAK,UAAU,MAAM,GAAE,KAAK,SAAS,MAAMD,EAAC,GAAEwB,GAAE,MAAM;AAAE,QAAIrB,MAAE;AAAG,UAAMC,MAAE,IAAI8B,MAAE7B,KAAE,IAAI6B,MAAE5B,KAAE,KAAK;AAA6B,IAAAA,GAAE,MAAM;AAAE,UAAMC,KAAE,oBAAI,OAAIS,MAAE,CAACA,KAAEO,IAAEf,OAAI;AAAC,UAAG,QAAMe,IAAE;AAAC,YAAIvB,KAAE,KAAK,eAAegB,GAAC;AAAE,QAAAhB,OAAI,IAAE,MAAIA,KAAE,KAAK,eAAeQ,EAAC;AAAG,cAAMP,KAAEoB,GAAEL,KAAE,KAAK,aAAa;AAAE,eAAOQ,GAAE,IAAIvB,IAAE,KAAK,IAAID,IAAEwB,GAAE,IAAIvB,EAAC,KAAG,CAAC,CAAC,GAAE,KAAK,SAAS,IAAIA,EAAC,KAAG,KAAK,aAAa,IAAIA,EAAC,KAAG,KAAK,SAAS,KAAKA,EAAC,GAAE,MAAK,KAAK,qBAAmB,KAAK,IAAI,KAAK,oBAAmBD,EAAC;AAAA,MAAE;AAAC,YAAMS,KAAEc,GAAE;AAAK,UAAG,KAAK,2BAA2Bd,IAAEJ,EAAC,GAAE,QAAMI,IAAE;AAAC,cAAMT,KAAE,KAAK,eAAegB,GAAC;AAAE,eAAO,KAAK,SAAS,IAAIA,GAAC,KAAG,KAAK,aAAa,IAAIA,GAAC,MAAI,KAAK,SAAS,KAAKA,GAAC,GAAEQ,GAAE,IAAIR,KAAEhB,EAAC,IAAG,MAAK,KAAK,qBAAmB,KAAK,IAAI,KAAK,oBAAmBA,EAAC;AAAA,MAAE;AAAC,YAAMU,KAAE,KAAK,SAASM,GAAC;AAAE,UAAG,MAAI,KAAK,SAAS,UAAQ,MAAI,KAAK;AAAc,iBAAQhB,KAAE,GAAEA,KAAEuB,GAAE,YAAWvB,MAAI;AAAC,gBAAMC,KAAES,GAAE,SAASa,GAAE,cAAYvB,EAAC,GAAEE,MAAE,KAAK,iBAAiBD,EAAC;AAAE,kBAAMC,OAAGA,IAAE,QAAM,KAAK,SAAS,IAAID,EAAC,KAAG,KAAK,aAAa,IAAIA,EAAC,MAAIuB,GAAE,IAAIvB,IAAE,KAAK,eAAeA,EAAC,CAAC,GAAE,KAAK,UAAU,KAAKA,EAAC;AAAA,QAAE;AAAC,UAAGQ,GAAE,UAAQA,GAAE,UAAU;AAAQ,eAAO,MAAKN,OAAGoB,GAAE,aAAW,KAAG,KAAK,YAAYd,EAAC,MAAIN,MAAE;AAAK,UAAGI,GAAE,IAAIE,GAAE,EAAE,GAAE,KAAK,UAAUO,GAAC,GAAE;AAAC,YAAGZ,IAAE,SAAOK,GAAE,QAAO,EAAEL,IAAE,YAAW,KAAK,YAAYK,EAAC,IAAEc,GAAE,aAAW,MAAIpB,MAAE,UAAKC,IAAE,aAAWK,GAAE,QAAON,MAAE,QAAI,KAAK,aAAaM,EAAC,GAAE;AAAC,gBAAMT,KAAE,KAAK,eAAegB,GAAC;AAAE,UAAAQ,GAAE,IAAIR,KAAEhB,EAAC,GAAE,KAAK,qBAAmB,KAAK,IAAI,KAAK,oBAAmBA,EAAC,GAAE,KAAK,SAAS,OAAO,KAAKgB,GAAC;AAAA,QAAC;AAAC;AAAA,MAAM;AAAC,UAAGP,GAAE,WAASL,IAAE,SAAOK,GAAE,QAAO,EAAEL,IAAE,aAAY,CAAC,KAAK,YAAYK,EAAC;AAAE,eAAO,MAAK,KAAK,aAAaO,GAAC,KAAG,KAAK,SAAS,OAAO,KAAKA,GAAC;AAAG,UAAGO,GAAE,aAAW,MAAIpB,MAAE,QAAIM,GAAE,UAAQL,IAAE,WAASK,GAAE,QAAOL,IAAE,SAAOK,GAAE,QAAO,EAAEL,IAAE,cAAY,EAAEA,IAAE,cAAaJ,GAAE,SAASS,GAAE,KAAK;AAAE,eAAO,KAAK,qBAAmB,KAAK,IAAI,KAAK,oBAAmB,KAAK,eAAeO,GAAC,CAAC,GAAE,MAAK,KAAK,SAAS,SAAO,KAAK,SAAS,OAAO,OAAQ,CAAAhB,OAAGA,OAAIS,GAAE,KAAM;AAAG,UAAG,CAACR,GAAE,QAAM,KAAK,QAAQQ,EAAC;AAAE,eAAO,KAAKR,GAAE,aAAa;AAAE,YAAMU,KAAE,KAAK,eAAeK,GAAC;AAAE,MAAAQ,GAAE,IAAIR,KAAEL,EAAC,GAAE,KAAK,qBAAmB,KAAK,IAAI,KAAK,oBAAmBA,EAAC,GAAE,KAAK,SAAS,IAAI,KAAKK,GAAC,GAAE,KAAK,yBAAuBd,MAAG,QAAMO,MAAGA,GAAE,yBAAuB,EAAE,cAAYH,GAAE,KAAKU,GAAC;AAAA,IAAC;AAAE,SAAK,gBAAgBA,GAAC;AAAE,UAAMO,KAAE,KAAK,SAAS;AAAI,IAAAA,GAAE,SAAO,KAAG,KAAK,0BAAwBjB,GAAE,SAAO,MAAGJ,MAAA,gBAAAA,GAAII,MAAGiB,GAAE,cAAe,CAAAvB,OAAG;AAAC,YAAMC,KAAE,KAAK,iBAAiBD,EAAC,GAAEE,MAAE,QAAMD,MAAG,QAAMA,GAAE,QAAMA,GAAE,KAAK,yBAAuB,EAAE;AAAO,aAAOC,OAAG,KAAK,8BAA8BF,EAAC,GAAEE;AAAA,IAAC,CAAE,IAAG,KAAK,0BAAwBE,IAAE,UAAQA,IAAE,WAAUA,IAAE,aAAW,KAAGA,IAAE,eAAa,MAAI,KAAK,2BAAyBA,IAAE,QAAMA,IAAE,aAAWA,IAAE,eAAc,KAAK,0BAAwB,MAAG,KAAK,IAAI,GAAE,KAAK,uBAAuB,GAAE,KAAK,iBAAiB,WAAS,KAAK,wBAAwBC,EAAC,GAAE,KAAK,iBAAiB,gBAAcF,KAAE,KAAK,SAAS,KAAM,CAACH,IAAEC,OAAID,KAAEC,EAAE,GAAE,KAAK,SAAS,cAAe,CAACD,IAAEC,OAAIA,KAAE,KAAG,KAAK,SAAS,KAAKA,KAAE,CAAC,MAAID,EAAE,GAAE,KAAK,SAAS,KAAM,CAACA,IAAEC,OAAIuB,GAAE,IAAIxB,EAAC,IAAEwB,GAAE,IAAIvB,EAAC,CAAE,GAAE,KAAK,SAAS,SAAO,MAAI,KAAK,mBAAiBuB,GAAE,IAAI,KAAK,SAAS,KAAK,CAAC,GAAE,KAAK,UAAU,MAAM,IAAG,KAAK,SAAS,IAAI,cAAe,CAAAxB,OAAGwB,GAAE,IAAIxB,EAAC,KAAG,KAAK,gBAAiB,EAAE,KAAM,CAACA,IAAEC,OAAIuB,GAAE,IAAIxB,EAAC,IAAEwB,GAAE,IAAIvB,EAAC,CAAE,GAAE,KAAK,SAAS,OAAO,KAAM,CAACD,IAAEC,OAAIuB,GAAE,IAAIxB,EAAC,IAAEwB,GAAE,IAAIvB,EAAC,CAAE,GAAE,KAAK,gBAAc,KAAK,SAAS,OAAK,KAAK,SAAS,QAAO,KAAK,SAAO,KAAK,gBAAc,GAAEuB,GAAE,MAAM;AAAA,EAAC;AAAA,EAAC,mBAAmBxB,IAAEC,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiB,2BAA2BD,EAAC;AAAE,QAAIE,MAAEF,IAAEG,MAAEH,IAAEI,KAAEH,IAAEI,KAAE;AAAG,WAAKA,QAAK;AAAC,YAAMJ,MAAE,IAAIgC;AAAE,WAAK,uBAAuB/B,KAAED,GAAC;AAAE,UAAG,KAAK,wBAAwBA,GAAC,KAAGF,IAAE;AAAC,YAAGG,OAAGF,MAAGC,IAAE,eAAa,KAAG,MAAII;AAAE;AAAM,QAAAD,KAAEF,KAAEA,MAAE,OAAIA,MAAEC;AAAA,MAAE;AAAM,QAAAA,MAAED,KAAEA,MAAE,OAAIA,MAAEE;AAAA,IAAE;AAAC,WAAO,KAAK,WAASY,GAAE,KAAK,QAAQ,GAAE,KAAK,iBAAiB,2BAA2Bf,EAAC,GAAE,KAAK,IAAID,IAAEE,GAAC;AAAA,EAAC;AAAA,EAAC,uBAAuBH,IAAEC,IAAE;AAAC,SAAK,WAASgB,GAAE,KAAK,QAAQ,GAAE,KAAK,iBAAiB,2BAA2BjB,EAAC,GAAE,KAAK,gBAAiB,CAACA,IAAEE,OAAI,KAAK,2BAA2B,QAAMA,KAAEA,GAAE,OAAK,QAAOD,EAAC,CAAE;AAAA,EAAC;AAAA,EAAC,2BAA2BD,IAAEC,IAAE;AAAC,QAAG,QAAMD,MAAG,CAACA,GAAE,UAAQ,QAAMA,GAAE;AAAY,aAAO,KAAK,UAAUA,GAAE,KAAK,KAAGC,GAAE,SAAOD,GAAE,aAAY,EAAEC,GAAE,YAAW,MAAK,KAAK,YAAYD,EAAC,MAAIC,GAAE,aAAWD,GAAE,iBAAe,MAAK,KAAK,YAAYA,EAAC,MAAI,QAAMA,GAAE,eAAaC,GAAE,WAASD,GAAE,aAAYC,GAAE,SAAOD,GAAE,aAAY,EAAEC,GAAE,cAAY,EAAEA,GAAE;AAAA,EAAc;AAAA,EAAC,wBAAwBD,IAAE;AAAC,QAAIC,KAAED,GAAE,QAAMA,GAAE;AAAU,WAAOA,GAAE,aAAW,KAAGA,GAAE,eAAa,MAAIC,MAAGD,GAAE,QAAMA,GAAE,aAAWA,GAAE,eAAc,KAAK,IAAI,GAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,WAAO,KAAK,MAAM,KAAK,QAAQ;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,WAAO,KAAK,UAAU,KAAM,CAACD,IAAEC,OAAIuB,GAAE,IAAIxB,EAAC,IAAEwB,GAAE,IAAIvB,EAAC,CAAE,GAAE,KAAK,MAAM,KAAK,SAAS;AAAA,EAAC;AAAA,EAAC,MAAMD,IAAE;AAAC,QAAG,MAAIA,GAAE,UAAQ,CAAC,KAAK,YAAY;AAAE,aAAM;AAAG,WAAKA,GAAE,SAAO,KAAG,KAAK,YAAY;AAAG,UAAG,MAAI,KAAK;AAAc,aAAK,UAAUA,GAAE,IAAI,CAAC;AAAA,WAAM;AAAC,cAAMC,KAAED,GAAE,IAAI;AAAE,QAAAC,MAAG,IAAE,KAAK,UAAUA,EAAC,IAAE,KAAK,UAAUA,EAAC;AAAA,MAAC;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,IAAI,YAAW;AAAC,WAAO,KAAK,gBAAc;AAAA,EAAC;AAAA,EAAC,IAAI,gBAAe;AAAC,WAAO,KAAK,UAAU,SAAO;AAAA,EAAC;AAAA,EAAC,IAAI,eAAc;AAAC,WAAO,KAAK,SAAS;AAAA,EAAI;AAAA,EAAC,IAAI,eAAc;AAAC,WAAO,KAAK;AAAA,EAAa;AAAA,EAAC,IAAI,yBAAwB;AAAC,WAAO,KAAK;AAAA,EAAuB;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK;AAAA,EAAQ;AAAA,EAAC,IAAI,kBAAiB;AAAC,WAAO,KAAK;AAAA,EAAgB;AAAA,EAAC,IAAI,cAAa;AAAC,WAAO,KAAK,IAAI,KAAK,oBAAmB,KAAK,gBAAgB;AAAA,EAAC;AAAA,EAAC,mBAAmBD,IAAE;AAAC,QAAG,QAAMA;AAAE,aAAO;AAAK,QAAIC,KAAE,KAAK,oBAAoB,IAAID,GAAE,KAAK;AAAE,QAAGC,MAAG+B,GAAE/B,GAAE,SAAQ,KAAK,QAAQ;AAAE,aAAOA;AAAE,UAAMC,KAAE,KAAK,iBAAiB,YAAYF,EAAC,GAAEG,MAAE,KAAK,iBAAiB,OAAOH,EAAC;AAAE,QAAII,MAAE;AAAG,QAAGD,KAAE;AAAC,YAAMF,KAAE,KAAK,eAAeD,GAAE,KAAK;AAAE,UAAG,QAAMC,IAAE;AAAC,cAAMD,KAAE,KAAK,oBAAoB,IAAIC,EAAC;AAAE,QAAAG,MAAE,CAAC,CAACJ,MAAGE,KAAEF,GAAE;AAAA,MAAQ;AAAM,QAAAI,MAAEF,KAAE;AAAA,IAAC;AAAM,MAAAE,MAAE,MAAIJ,GAAE;AAAW,WAAOC,MAAGA,GAAE,WAASC,IAAED,GAAE,WAASG,KAAEH,GAAE,UAAQgC,GAAE,MAAG,KAAK,QAAQ,GAAEhC,OAAIA,KAAE,IAAIsB,GAAEpB,KAAEC,KAAEF,IAAE+B,GAAE,MAAG,KAAK,QAAQ,CAAC,GAAE,KAAK,oBAAoB,IAAIjC,GAAE,OAAMC,EAAC,GAAEA;AAAA,EAAE;AAAA,EAAC,MAAM,UAAUD,IAAE;AAAC,SAAK,SAAS,IAAIA,EAAC;AAAE,UAAME,KAAE,KAAK,iBAAiBF,EAAC,EAAE;AAAI,QAAG,QAAME;AAAE,aAAO,KAAK,KAAK,aAAa,IAAIF,EAAC;AAAE,UAAMG,MAAED,GAAE,IAAGE,MAAE,KAAK,aAAWD,KAAEE,KAAE,MAAI;AAAC,WAAK,SAAS,OAAOL,EAAC,GAAE,MAAI,KAAK,SAAS,UAAQ,MAAI,KAAK,SAAS,QAAM,KAAK,cAAc;AAAA,IAAC;AAAE,QAAIM,KAAE;AAAK,QAAG;AAAC,MAAAA,KAAEN,MAAG,IAAE,MAAM,KAAK,sBAAsB,QAAQI,KAAE,MAAM,IAAE,MAAM,KAAK,kBAAkB,aAAaD,GAAC;AAAA,IAAC,SAAOoB,IAAE;AAAC,aAAOlB,GAAE,GAAE,MAAK,EAAEkB,EAAC,MAAI,KAAK,QAAQ,MAAM,eAAc,KAAK,QAAO,yBAAuBnB,GAAC,GAAE,KAAK,aAAa,IAAIJ,EAAC;AAAA,IAAG;AAAC,IAAAK,GAAE;AAAE,UAAME,KAAE,KAAK,cAAcJ,KAAEG,EAAC;AAAE,QAAG,QAAMC;AAAE;AAAO,IAAAA,GAAE,OAAK,KAAK,8BAA8BP,EAAC;AAAE,UAAMgB,MAAE,KAAK,SAAST,IAAEP,EAAC;AAAE,SAAK,mBAAmBgB,GAAC;AAAA,EAAC;AAAA,EAAC,cAAchB,IAAEC,IAAE;AAAC,QAAG,QAAMA,MAAG,YAAU,OAAOA,MAAGA,GAAE,OAAKD;AAAE,aAAO,KAAK,QAAQ,MAAM,mBAAkB,KAAK,QAAO,yCAAyCA,EAAC,GAAG,GAAE;AAAK,QAAG,CAAC,MAAM,QAAQC,GAAE,GAAG;AAAE,aAAO,KAAK,QAAQ,MAAM,mBAAkB,KAAK,QAAO,mCAAmCD,EAAC,GAAG,GAAE;AAAK,IAAAC,GAAE,kBAAgB,eAAaA,GAAE,eAAe,QAAM,gBAAcA,GAAE,eAAe,QAAM,KAAK,QAAQ,KAAK,mBAAkB,KAAK,QAAO,yCAAyCD,EAAC,GAAG;AAAE,UAAME,KAAED,GAAE;AAAa,YAAMC,MAAG,MAAM,QAAQA,EAAC,KAAG,MAAIA,GAAE,UAAQ,MAAM,QAAQA,EAAC,KAAG,MAAIA,GAAE,UAAQ,qBAAmBA,GAAE,CAAC,EAAE,QAAM,KAAK,QAAQ,KAAK,mBAAkB,KAAK,QAAO,kCAAkCF,EAAC,GAAG;AAAE,UAAMG,MAAEF,GAAE,eAAcG,MAAE,KAAK,OAAO;AAAqB,YAAMD,OAAG,MAAM,QAAQA,GAAC,KAAG,CAACA,IAAE,KAAM,CAACH,IAAEC,OAAE;AAJrorB;AAIuorB,aAAAD,GAAE,SAAO,kBAAgB,KAAAI,OAAA,gBAAAA,IAAIH,QAAJ,mBAAQ,QAAK,KAAKA,EAAC,EAAE;AAAA,KAAK,KAAG,KAAK,QAAQ,KAAK,mBAAkB,KAAK,QAAO,mCAAmCD,EAAC,GAAG,GAAEC,GAAE,eAAaA,GAAE,YAAY,SAAO,KAAG,KAAK,QAAQ,KAAK,mBAAkB,KAAK,QAAO,QAAQD,EAAC,QAAQC,GAAE,YAAY,MAAM,iDAAiD;AAAE,UAAMI,KAAEJ,GAAE,eAAe,KAAK,KAAG,CAAC,KAAK,mBAAiBA,GAAE,MAAI,MAAKK,KAAEL,GAAE,eAAa,MAAIA,GAAE,YAAY,UAAQA,GAAE,YAAY,CAAC,EAAE,eAAaA,GAAE,YAAY,CAAC,EAAE,aAAa,CAAC,IAAEA,GAAE,YAAY,CAAC,EAAE,aAAa,CAAC,IAAE,IAAE,QAAOM,KAAE,CAAAN,OAAG;AAAC,UAAG,QAAMA;AAAE,eAAO;AAAK,YAAMC,MAAE,CAAAD,OAAG,KAAK,QAAQ,MAAM,mBAAkB,KAAK,QAAO,kCAAkCD,EAAC,KAAKC,EAAC,EAAE;AAAE,UAAG,YAAU,OAAOA,GAAE;AAAG,QAAAC,IAAE,MAAMD,GAAE,EAAE,mCAAmC;AAAA,eAAU,YAAU,OAAOA,GAAE,MAAI,CAAC,MAAM,QAAQA,GAAE,GAAG;AAAE,eAAOC,IAAE,wBAAwB,GAAE;AAAK,UAAG,CAAC,MAAM,QAAQD,GAAE,GAAG;AAAE,eAAOC,IAAE,wCAAwCD,GAAE,EAAE,GAAG,GAAE;AAAK,MAAAA,GAAE,QAAMA,GAAE,SAAO,QAAMA,GAAE,MAAI,KAAK,QAAQ,MAAM,mBAAkB,KAAK,QAAO,8BAA8BD,EAAC,GAAG;AAAE,YAAMG,MAAEF,GAAE,eAAe,KAAK,KAAG,CAAC,KAAK,mBAAiBA,GAAE,MAAI,MAAKG,MAAE,IAAIH,GAAE,GAAGA,GAAE,EAAE,IAAGA,GAAE,GAAG;AAAE,aAAOG,IAAE,aAAWD,KAAEC,IAAE,gBAAc,KAAK,sBAAsBA,GAAC,GAAEA;AAAA,IAAC,GAAEY,MAAE,MAAM,QAAQf,GAAE,QAAQ,IAAEA,GAAE,SAAS,IAAIM,EAAC,EAAE,OAAQ,CAAAP,OAAG,QAAMA,EAAE,IAAE,MAAKuB,KAAEtB,GAAE,eAAaA,GAAE,YAAY,SAAO,GAAEQ,KAAER,GAAE,WAAS,SAAKA,GAAE;AAAQ,WAAM,EAAC,IAAGD,IAAE,KAAIC,GAAE,KAAI,KAAII,IAAE,UAASW,KAAE,WAAU,EAAC,SAAQ,CAACO,MAAGd,IAAE,mBAAkB,QAAMR,GAAE,gBAAe,YAAWA,GAAE,gBAAcD,KAAE,QAAO,SAAQC,GAAE,eAAaA,GAAE,YAAY,SAAO,IAAED,KAAE,QAAO,UAAS,QAAMC,GAAE,eAAaD,KAAE,OAAM,GAAE,SAAQ,YAAU,OAAOC,GAAE,UAAQA,GAAE,UAAQ,MAAK,cAAa,MAAM,QAAQA,GAAE,YAAY,IAAEA,GAAE,eAAa,MAAK,aAAYK,GAAC;AAAA,EAAC;AAAA,EAAC,mBAAkB;AAAC,SAAK,aAAa,MAAM,GAAE,KAAK,aAAa,MAAM,GAAE,KAAK,aAAc,CAAAN,OAAG;AAAC,cAAMA,GAAE,SAAOA,GAAE,KAAK,SAAO;AAAA,IAAG,CAAE;AAAA,EAAC;AAAA,EAAC,eAAeA,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiBD,EAAC,GAAEE,KAAE,KAAK,eAAeF,EAAC;AAAE,QAAG,QAAMC,MAAG,QAAMC,MAAG,QAAMD,GAAE;AAAK,aAAO,QAAMC,KAAE,IAAE,IAAE,KAAK,eAAeA,EAAC;AAAE,QAAIC,MAAE;AAAE,QAAGF,GAAE,QAAM,QAAMC,IAAE;AAAC,YAAMF,KAAE,KAAK,oBAAoB,IAAIE,EAAC;AAAE,cAAMF,OAAIG,MAAEH,GAAE;AAAA,IAAS;AAAC,QAAII,MAAE,KAAK;AAAuB,aAAQE,KAAEN,IAAE,QAAMM,IAAEA,KAAE,KAAK,eAAeA,EAAC;AAAE,UAAG,KAAK,UAAUA,EAAC,GAAE;AAAC,QAAAF,MAAE;AAAE;AAAA,MAAK;AAAC,UAAMC,KAAE,QAAMJ,GAAE,MAAI,KAAK,iBAAiB,UAAUA,GAAE,GAAG,IAAE,QAAMA,GAAE,OAAK,KAAK,iBAAiB,UAAUA,GAAE,IAAI,IAAE;AAAE,WAAM,CAACI,KAAEF,OAAGE,KAAE,KAAK,0BAAwBD;AAAA,EAAC;AAAA,EAAC,gBAAgBJ,IAAE;AAAC,UAAMC,KAAE,KAAK,iBAAiB,KAAK,UAAU;AAAE,YAAMA,KAAE,KAAK,iBAAiB,KAAK,YAAW,MAAKA,IAAED,EAAC,IAAEA,GAAE,KAAK,YAAW,MAAK,IAAI;AAAA,EAAC;AAAA,EAAC,iBAAiBA,IAAEC,IAAEC,IAAEC,KAAE;AAAC,QAAGD,GAAE,QAAM,MAAIA,GAAE;AAAW,aAAO,MAAK,KAAK,kBAAkBF,EAAC,KAAGG,IAAEH,IAAEE,IAAED,EAAC;AAAG,QAAG,CAAC,KAAK,cAAcD,EAAC;AAAE;AAAO,QAAGG,IAAEH,IAAEE,IAAED,EAAC,GAAE,QAAMC,GAAE;AAAK;AAAO,UAAME,MAAE,KAAK,mBAAmBF,GAAE,IAAI;AAAE,SAAGE,OAAA,gBAAAA,IAAG,eAAYA,IAAE,aAAW,KAAK;AAAa;AAAO,UAAMC,KAAE,KAAK,SAASL,EAAC;AAAE,aAAQM,KAAE,GAAEA,KAAEJ,GAAE,YAAWI,MAAI;AAAC,YAAML,KAAEI,GAAE,SAASH,GAAE,cAAYI,EAAC,GAAEF,MAAE,KAAK,iBAAiBH,EAAC;AAAE,cAAMG,MAAE,KAAK,iBAAiBH,IAAED,IAAEI,KAAED,GAAC,IAAEA,IAAEF,IAAE,MAAKD,EAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,SAASA,IAAEC,IAAE;AAAC,IAAAA,GAAED,EAAC,KAAG,KAAK,iBAAiBA,IAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,iBAAiBD,IAAEC,IAAE;AAAC,UAAMC,KAAEF,GAAE,OAAMG,MAAE,KAAK,iBAAiBD,EAAC;AAAE,YAAMC,OAAG,KAAK,kBAAkBD,IAAEC,KAAEF,EAAC;AAAA,EAAC;AAAA,EAAC,kBAAkBD,IAAEC,IAAEC,IAAE;AAAC,UAAMC,MAAE,KAAK,SAASH,EAAC;AAAE,QAAG,QAAMG;AAAE;AAAO,UAAMC,MAAEH,GAAE,cAAYA,GAAE;AAAW,aAAQI,KAAEJ,GAAE,aAAYI,KAAED,KAAE,EAAEC,IAAE;AAAC,YAAML,KAAEG,IAAE,SAASE,EAAC,GAAEJ,KAAE,KAAK,iBAAiBD,EAAC;AAAE,cAAMC,MAAG,QAAMA,GAAE,QAAMC,GAAED,GAAE,IAAI,KAAG,KAAK,kBAAkBD,IAAEC,IAAEC,EAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,qBAAqBF,IAAEC,IAAE;AAAC,QAAIC,KAAE,KAAK,QAAQF,EAAC;AAAE,WAAK,QAAME;AAAG,MAAAA,GAAE,kBAAgBD,IAAEC,KAAE,KAAK,UAAUA,GAAE,KAAK;AAAA,EAAC;AAAA,EAAC,+BAA8B;AAAC,QAAG,QAAM,KAAK;AAAS,aAAM;AAAG,UAAMF,KAAE,CAAC,GAAEC,KAAE,CAAAC,OAAG;AAAC,UAAIC,MAAE,KAAK,UAAUD,GAAE,KAAK,KAAG,KAAK,aAAaA,GAAE,KAAK,IAAE,IAAE;AAAE,aAAO,KAAK,iBAAiBA,IAAG,CAAAF,QAAIG,OAAGF,GAAED,EAAC,GAAE,MAAI,GAAEE,GAAE,mBAAiBC,OAAGH,GAAE,KAAKE,GAAE,KAAK,GAAEC;AAAA,IAAC;AAAE,WAAOF,GAAE,KAAK,QAAQ,GAAED,GAAE,UAAQ,KAAK,QAAQ,MAAM,yDAAuDA,GAAE,KAAK,GAAG,CAAC,GAAEA,GAAE,SAAO;AAAA,EAAC;AAAA,EAAC,YAAYA,IAAE;AAAC,QAAG,KAAK,SAAS,IAAI,SAAO,MAAIA,GAAE,SAAO,QAAM,KAAK,SAAS,IAAI,UAAS,KAAK,iBAAe,KAAK,UAAU,SAAO,OAAKA,GAAE,SAAO,QAAM,KAAK,iBAAe,KAAK,UAAU,SAAQA,GAAE,OAAK,KAAK,oBAAmB,KAAK,iBAAiB,UAAS;AAAC,YAAMC,KAAE,KAAK,iBAAiB,WAASD,GAAE;AAAS,MAAAC,KAAE,IAAED,GAAE,YAAU,QAAMC,KAAEA,KAAE,MAAID,GAAE,YAAU,QAAM,CAACC;AAAA,IAAE;AAAA,EAAC;AAAA,EAAC,oBAAoBD,IAAEC,IAAE;AAAC,SAAK,yBAAuBA,MAAG,CAAC,CAACD,OAAI,yBAAuBA,GAAE,QAAM,oBAAkBA,GAAE,OAAM,KAAK,iBAAiB,oBAAoBA,EAAC,GAAE,KAAK,6BAA6B;AAAA,EAAC;AAAA,EAAC,+BAA8B;AAAC,SAAK,aAAc,CAAAA,OAAG;AAAC,MAAA+B,GAAE/B,EAAC,GAAE,QAAMA,GAAE,SAAOA,GAAE,KAAK,iBAAe,OAAM,QAAMA,GAAE,QAAMA,GAAE,IAAI,iBAAe;AAAA,IAAK,CAAE;AAAA,EAAC;AAAA,EAAC,aAAaA,IAAE;AAAC,QAAG,QAAM,KAAK,iBAAgB;AAAC,YAAMC,KAAE,KAAK;AAAgB,eAAQC,KAAE,GAAEA,KAAED,GAAE,MAAM,QAAOC;AAAI,QAAAF,GAAEC,GAAE,MAAMC,EAAC,GAAE,EAAEA,KAAE,EAAE;AAAA,IAAC;AAAC,aAAQD,KAAE,GAAEA,KAAE,KAAK,WAAW,QAAOA,MAAI;AAAC,YAAMC,KAAE,KAAK,WAAWD,EAAC;AAAE,UAAGC,IAAE;AAAC,cAAMC,MAAEF,KAAE,KAAK;AAAc,iBAAQA,KAAE,GAAEA,KAAEC,GAAE,MAAM,QAAOD;AAAI,UAAAD,GAAEE,GAAE,MAAMD,EAAC,GAAEE,MAAEF,EAAC;AAAA,MAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,IAAI,OAAM;AAAC,WAAM,EAAC,SAAQ,CAACD,IAAEC,OAAI,KAAK,SAASD,IAAEC,EAAC,EAAC;AAAA,EAAC;AAAC;AAAC,IAAMuB,KAAE,oBAAI;AAAI,IAAMN,KAAN,MAAO;AAAA,EAAC,YAAYjB,IAAE;AAAC,SAAK,UAAQA,IAAE,KAAK,SAAO,IAAIM,GAAE,EAAC,aAAY,KAAI,CAAC,GAAE,KAAK,MAAI,IAAIA,GAAE,EAAC,aAAY,KAAI,CAAC,GAAE,KAAK,SAAO,IAAIA,GAAE,EAAC,aAAY,KAAI,CAAC,GAAE,KAAK,SAAO,CAAC;AAAA,EAAC;AAAA,EAAC,MAAMP,IAAE;AAAC,SAAK,IAAI,MAAM,GAAE,KAAK,OAAO,MAAM,GAAE,KAAK,SAAOA;AAAA,EAAC;AAAC;AAAC,SAAS+B,GAAE/B,IAAE;AAAC,UAAMA,GAAE,SAAO,GAAEA,GAAE,KAAK,SAAS,GAAE,GAAEA,GAAE,KAAK,oBAAoB,IAAG,QAAMA,GAAE,QAAM,GAAEA,GAAE,IAAI,SAAS,GAAE,GAAEA,GAAE,IAAI,oBAAoB;AAAE;AAAC,SAAS0B,GAAE1B,IAAE;AAAC,SAAO,GAAEA,IAAE,EAAE;AAAC;AAAC,SAASiB,GAAEjB,IAAE;AAAC,SAAO,GAAEA,IAAE,CAAC;AAAC;AAAC,SAASiC,GAAEjC,IAAEC,IAAE;AAAC,SAAOA,MAAGD,KAAE,IAAE;AAAE;AAAC,SAASgC,GAAEhC,IAAEC,IAAE;AAAC,UAAO,KAAGD,QAAKC;AAAC;AAAC,SAAS,EAAED,IAAE;AAAC,SAAO,MAAI,IAAEA;AAAE;AAAC,SAASqB,GAAErB,IAAEC,IAAE;AAAC,SAAOD,KAAE,IAAE,KAAG,MAAIC,KAAE,IAAED,KAAEC,KAAE;AAAC;AAAC,SAASqB,GAAEtB,KAAE,CAAC,GAAEC,KAAE,CAAC,GAAEC,KAAE,CAAC,GAAE;AAAC,SAAM,EAAC,OAAMF,IAAE,UAASC,IAAE,SAAQC,GAAC;AAAC;AAAC,SAASkB,GAAEpB,IAAEC,IAAE;AAAC,SAAOD,KAAE,IAAE,CAACA,KAAE,IAAE,MAAIC,KAAED,KAAEA,KAAEC;AAAC;AAAC,SAASwB,GAAEzB,IAAEC,IAAEC,IAAE;AAAC,SAAM,OAAKD,KAAE,EAAED,KAAE,KAAG,MAAIE,KAAEF,KAAEC,KAAEC,KAAEF;AAAC;AAAC,IAAM,IAAE,CAAC,CAAC,sBAAqBgB,GAAE,kBAAkB,GAAE,CAAC,uBAAsBA,GAAE,mBAAmB,GAAE,CAAC,0BAAyBA,GAAE,sBAAsB,GAAE,CAAC,kCAAiCA,GAAE,8BAA8B,CAAC;AAAE,SAASW,GAAE3B,IAAE;AAAC,MAAGA;AAAE,aAAQC,KAAE,GAAEA,KAAED,GAAE,QAAOC;AAAI,iBAAUC,MAAK;AAAE,YAAGA,GAAE,CAAC,MAAIF,GAAEC,EAAC,EAAE;AAAW,iBAAM,EAAC,WAAUC,GAAE,CAAC,GAAE,UAASF,GAAEC,EAAC,EAAE,SAAQ;AAAA;AAAE,SAAM,EAAC,WAAUe,GAAE,MAAK,UAAS,EAAC;AAAC;AAAC,IAAMkB,KAAN,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,QAAM,GAAE,KAAK,aAAW,GAAE,KAAK,UAAQ,GAAE,KAAK,eAAa,GAAE,KAAK,YAAU;AAAA,EAAC;AAAC;AAAC,SAASf,GAAEnB,IAAE;AAAC,SAAO,KAAK,KAAKA,MAAG,IAAE,KAAK,GAAG;AAAC;AAAC,IAAM6B,KAAElB,GAAE;AAAV,IAAYmB,KAAEnB,GAAE;AAAhB,IAAkB,IAAEA,GAAE;AAAtB,IAAwB,IAAEA,GAAE;;;ACAhq3B,IAAIwB;AAAE,CAAC,SAASA,KAAE;AAAC,EAAAA,IAAEA,IAAE,SAAO,CAAC,IAAE,UAASA,IAAEA,IAAE,UAAQ,CAAC,IAAE;AAAS,EAAEA,OAAIA,KAAE,CAAC,EAAE;;;ACAsE,IAAMC,KAAN,MAAO;AAAA,EAAC,YAAYC,IAAE;AAAC,SAAK,aAAWA,IAAE,KAAK,kBAAgB;AAAA,EAAE;AAAA,EAAC,iBAAiBA,IAAEC,IAAEC,IAAEH,KAAE;AAAC,SAAK,eAAaA,IAAE,aAAY,KAAK,SAAOG,IAAE,KAAK,uBAAqBF,IAAE,KAAK,eAAaC;AAAA,EAAC;AAAA,EAAC,eAAeD,IAAE;AAAC,QAAG,QAAMA;AAAE,aAAM;AAAG,UAAMC,KAAE,KAAK,OAAO,mBAAmBD,EAAC;AAAE,WAAM,CAAC,CAAC,KAAK,gBAAgBC,EAAC,KAAG,CAAC,CAACA,GAAE,YAAU,KAAK,wBAAwBD,EAAC;AAAA,EAAC;AAAA,EAAC,oBAAmB;AAAC,SAAK,kBAAgB;AAAA,EAAE;AAAA,EAAC,IAAI,4BAA2B;AAAC,WAAO,QAAM,KAAK,UAAQ,SAAK,KAAK;AAAA,EAAe;AAAA,EAAC,kBAAkBA,IAAE;AAAC,QAAG,CAAC,KAAK;AAA0B,aAAM;AAAG,SAAK,kBAAgB;AAAG,UAAMC,KAAE,KAAK,WAAW,KAAK,mBAAmB,iBAAiB,YAAWC,KAAE,KAAK,IAAI,GAAE,KAAK,MAAM,MAAID,KAAE,EAAE,CAAC;AAAE,IAAAE,GAAE,MAAM,GAAE,KAAK,mBAAmB,KAAK,OAAO,UAASD,IAAE,OAAG,CAAC,CAAC,KAAK,WAAW,sBAAsB;AAAE,UAAMH,MAAEI,GAAE;AAAO,SAAK,aAAaA,IAAEH,EAAC;AAAE,UAAMI,KAAED,GAAE,SAAOJ;AAAE,WAAO,MAAII,GAAE,WAAS,KAAK,kBAAgB,OAAIA,GAAE,MAAM,GAAEC;AAAA,EAAC;AAAA,EAAC,mBAAmBJ,IAAED,KAAEK,IAAEC,IAAE;AAAC,QAAG,QAAML;AAAE,aAAM;AAAG,UAAMM,KAAEN,GAAE,OAAMO,MAAE,KAAK,QAAOC,MAAE,KAAK,YAAWC,KAAEF,IAAE,mBAAmBP,EAAC,GAAEU,KAAE,KAAK,gBAAgBD,EAAC,GAAEE,KAAEX,GAAE,UAAU;AAAQ,QAAGU,MAAGC;AAAE,aAAOX,GAAE,iBAAe,KAAG,KAAK,yBAAyBA,EAAC,GAAE;AAAG,UAAMY,KAAEJ,IAAE,aAAaF,EAAC;AAAE,QAAGD,MAAGO,MAAGF,IAAE;AAAC,YAAMT,KAAE,CAACG,MAAG,KAAK,qBAAqBJ,EAAC;AAAE,MAAAQ,IAAE,SAASF,IAAEE,GAAE,QAAO,CAACP,EAAC;AAAA,IAAC;AAAC,UAAMY,KAAED,OAAI,CAACJ,IAAE,sBAAoBA,IAAE,mBAAmBF,EAAC;AAAG,QAAGM,OAAIJ,IAAE,gBAAgBF,IAAEI,KAAEE,GAAE,OAAKA,GAAE,IAAI,GAAEF;AAAG,aAAOG,MAAG,KAAK,yBAAyBb,EAAC,GAAEa;AAAE,UAAMC,KAAEd,GAAE,aAAW;AAAE,QAAIe,KAAED;AAAE,QAAGA;AAAE,eAAQb,KAAE,GAAEA,KAAED,GAAE,YAAWC,MAAI;AAAC,cAAMD,KAAEO,IAAE,cAAcD,IAAEL,EAAC,GAAEC,KAAEK,IAAE,QAAQP,EAAC;AAAE,YAAG,QAAME,IAAE;AAAC,YAAE,CAACK,IAAE,kBAAkBP,EAAC,KAAG,KAAK,mBAAmBE,IAAEH,KAAEK,MAAGS,IAAER,EAAC,MAAI,KAAK,qBAAqBH,EAAC,MAAIa,KAAE;AAAA,QAAG;AAAM,UAAAR,IAAE,cAAcP,EAAC,MAAIe,KAAE;AAAA,MAAG;AAAC,UAAMC,KAAEJ,MAAG,CAACF,OAAIK,MAAGZ,GAAE,SAAOJ;AAAG,IAAAiB,MAAGb,GAAE,KAAKG,EAAC,GAAE,CAACD,MAAGW,MAAG,CAACJ,MAAGR,MAAGW,MAAGP,IAAE,SAASF,IAAEE,GAAE,QAAO,KAAE;AAAE,UAAMS,KAAEjB,GAAE,UAAU;AAAQ,WAAOe,MAAGF,MAAG,CAACG,MAAGC;AAAA,EAAC;AAAA,EAAC,yBAAyBjB,IAAE;AAAC,SAAK,OAAO,iBAAiBA,IAAG,CAAAA,SAAK,KAAK,WAAW,aAAaA,GAAE,KAAK,KAAG,KAAK,WAAW,gBAAgBA,GAAE,KAAK,MAAIG,GAAE,KAAKH,GAAE,KAAK,GAAEA,GAAE,iBAAe,EAAG;AAAA,EAAC;AAAA,EAAC,qBAAqBA,IAAE;AAAC,QAAIC,KAAE;AAAG,WAAO,KAAK,OAAO,iBAAiBD,IAAG,CAAAA,OAAG,EAAE,CAACC,MAAG,CAAC,KAAK,OAAO,cAAcD,GAAE,KAAK,OAAK,KAAK,WAAW,aAAaA,GAAE,KAAK,KAAGC,KAAE,OAAG,SAAID,GAAE,iBAAe,EAAG,GAAEC;AAAA,EAAC;AAAA,EAAC,wBAAwBD,IAAE;AAAC,QAAIC,KAAE,OAAGC,KAAE;AAAG,WAAO,KAAK,OAAO,iBAAiBF,IAAG,CAAAA,OAAG;AAAC,UAAG,CAACE,MAAG,CAAC,KAAK,OAAO,cAAcF,GAAE,KAAK;AAAE,eAAM;AAAG,YAAMD,MAAE,KAAK,OAAO,mBAAmBC,EAAC;AAAE,aAAO,KAAK,gBAAgBD,GAAC,KAAG,KAAK,OAAO,kBAAkBC,GAAE,KAAK,MAAIC,KAAE,OAAI,KAAK,WAAW,aAAaD,GAAE,KAAK,KAAGE,KAAE,OAAG,SAAIF,GAAE,iBAAe;AAAA,IAAC,CAAE,GAAEE,MAAGD;AAAA,EAAC;AAAA,EAAC,gBAAgBD,IAAE;AAAC,WAAOA,GAAE,aAAW,CAACA,GAAE,cAAYA,GAAE,aAAW,KAAK;AAAA,EAAa;AAAC;AAAC,IAAMG,KAAE,IAAIE,GAAE,EAAC,aAAY,KAAI,CAAC;;;ACArkF,IAAMa,MAAN,MAAO;AAAA,EAAC,YAAYA,KAAEC,IAAE;AAAC,SAAK,cAAYD,KAAE,KAAK,cAAY,MAAK,KAAK,YAAU;AAAG,UAAME,KAAE,KAAK,YAAY,QAAQD,EAAC;AAAE,MAAEC,EAAC,KAAGA,GAAE,KAAM,CAAAC,OAAG;AAAC,WAAK,YAAU,EAAEA,EAAC,IAAE,KAAK,cAAYA;AAAA,IAAC,CAAE,GAAE,KAAK,cAAYD,MAAG,KAAK,cAAYA;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,cAAY,EAAE,KAAK,WAAW,GAAE,KAAK,YAAU;AAAA,EAAE;AAAA,EAAC,IAAI,YAAW;AAAC,WAAO,QAAM,KAAK,cAAY,KAAK,YAAY,YAAU;AAAA,EAAI;AAAC;;;ACAuU,SAASE,GAAEC,IAAEC,IAAE;AAAC,QAAMC,KAAE,oBAAI,OAAIC,MAAE,CAACH,IAAEC,OAAI;AAAC,QAAG,QAAMD;AAAE,aAAM;AAAG,UAAMI,MAAEF,GAAE,IAAIF,GAAE,EAAE;AAAE,QAAGI;AAAE,aAAOA,IAAE,SAAOH,IAAEG,IAAE;AAAG,UAAMD,MAAED,GAAE;AAAK,WAAOA,GAAE,IAAIF,GAAE,IAAG,EAAC,IAAGG,KAAE,OAAMF,GAAC,CAAC,GAAEE;AAAA,EAAC,GAAEE,KAAEJ,GAAE,sBAAqBK,KAAED,MAAA,gBAAAA,GAAG,iBAAgBE,KAAEN,GAAE,gBAAeO,KAAEA,GAAE,EAAC,eAAcP,GAAE,eAAc,iBAAgBA,GAAE,iBAAgB,gBAAeA,GAAE,gBAAe,kBAAiBA,GAAE,kBAAiB,0BAAyBI,MAAA,gBAAAA,GAAG,0BAAyB,gBAAeA,MAAA,gBAAAA,GAAG,gBAAe,iBAAgBA,MAAA,gBAAAA,GAAG,gBAAe,CAAC,GAAEI,KAAED,KAAEN,GAAE,CAAC,KAAEG,MAAA,gBAAAA,GAAG,mBAAgBK,GAAE,CAAC,GAAEX,KAAES,KAAEN,GAAE,CAAC,KAAEG,MAAA,gBAAAA,GAAG,oBAAiBK,GAAE,CAAC,GAAEC,KAAE,WAASV,GAAE,YAAUE,GAAE,QAAMA,GAAE,YAAUA,GAAE,OAAMS,KAAE,EAAC,iBAAgBN,KAAE,CAACA,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAEA,GAAE,CAAC,CAAC,IAAE,CAAC,GAAE,GAAE,GAAE,CAAC,GAAE,oBAAmBH,IAAEE,MAAGA,GAAE,kBAAiBM,EAAC,GAAE,4BAA2BR,IAAEE,MAAGA,GAAE,0BAAyBF,GAAE,iBAAiB,GAAE,gBAAeM,IAAE,iBAAgBV,GAAC,GAAEc,KAAE,EAAC,WAAUZ,GAAE,WAAU,aAAYA,GAAE,aAAY,aAAYA,GAAE,aAAY,UAAS,WAASA,GAAE,WAASS,GAAE,OAAK,WAAST,GAAE,WAASS,GAAE,OAAK,YAAUT,GAAE,WAASS,GAAE,QAAMA,GAAE,MAAK,iBAAgBP,IAAEF,GAAE,eAAcE,GAAE,MAAM,GAAE,mBAAkBA,IAAEF,GAAE,iBAAgBE,GAAE,QAAQ,GAAE,oBAAmBA,IAAEF,GAAE,kBAAiBE,GAAE,SAAS,GAAE,gBAAeI,KAAE,CAACA,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAEA,GAAE,CAAC,CAAC,IAAE,CAAC,GAAE,GAAE,CAAC,GAAE,mBAAkBK,IAAE,cAAa,OAAG,yBAAwBJ,GAAC,GAAEM,KAAE,CAAC;AAAE,SAAOZ,GAAE,QAAS,CAAC,EAAC,OAAMD,GAAC,GAAEG,QAAI;AAAC,UAAMF,KAAE,QAAMF,MAAGA,GAAEI,GAAC,KAAGJ,GAAEI,GAAC,EAAE,SAAQD,MAAED,KAAEa,GAAEb,GAAE,IAAK,CAAC,EAAC,MAAKF,IAAE,QAAOC,GAAC,OAAK,EAAC,MAAKD,IAAE,UAASgB,GAAEf,EAAC,EAAC,EAAG,CAAC,IAAE,CAAC;AAAE,IAAAa,GAAE,KAAK,EAAC,IAAGV,KAAE,OAAMH,IAAE,WAAUE,IAAC,CAAC;AAAA,EAAC,CAAE,GAAE,EAAC,UAASU,IAAE,UAASC,GAAC;AAAC;AAAC,SAASC,GAAEf,IAAE;AAAC,SAAOA,GAAE,KAAM,CAACA,IAAEC,OAAID,GAAE,WAASC,GAAE,QAAS;AAAC;AAAC,IAAMe,KAAE,EAAC,MAAKhB,GAAE,MAAK,OAAMA,GAAE,OAAM,KAAIA,GAAE,UAAS,KAAIA,GAAE,KAAI,KAAIA,GAAE,KAAI,YAAWA,GAAE,SAAQ;AAA3F,IAA6FW,KAAE,EAAC,CAACH,GAAE,aAAa,GAAER,GAAE,OAAM,CAACQ,GAAE,cAAc,GAAER,GAAE,OAAM,CAACQ,GAAE,YAAY,GAAER,GAAE,UAAS,aAAYA,GAAE,KAAI,aAAYA,GAAE,KAAI,cAAaA,GAAE,KAAI,aAAYA,GAAE,SAAQ;AAAE,SAASY,GAAEX,IAAE;AAJpiF;AAIqiF,QAAMC,KAAED,MAAGA,GAAE,sBAAoB,OAAO,KAAKA,GAAE,mBAAmB,EAAE,CAAC,IAAE,MAAKE,MAAEF,MAAGA,GAAE,qBAAmB,OAAO,KAAKA,GAAE,kBAAkB,EAAE,CAAC,IAAE,MAAKI,KAAEH,MAAE,KAAAD,GAAE,wBAAF,mBAAwBC,MAAG,MAAKI,KAAEH,OAAE,KAAAF,GAAE,uBAAF,mBAAuBE,OAAG,MAAKI,KAAEM,GAAE;AAAE,MAAG,QAAMR,IAAE;AAAC,UAAMJ,KAAEI,GAAE;AAAO,IAAAJ,GAAE,YAAUM,GAAE,kBAAkB,kBAAgB,CAACN,GAAE,QAAQ,CAAC,GAAEA,GAAE,QAAQ,CAAC,GAAEA,GAAE,QAAQ,CAAC,GAAE,CAAC,IAAG,QAAMA,GAAE,gBAAcM,GAAE,cAAYN,GAAE,aAAYM,GAAE,WAASN,GAAE,cAAYS,GAAE,OAAKA,GAAE,OAAM,WAAST,GAAE,YAAU,YAAUA,GAAE,YAAU,WAASA,GAAE,aAAWM,GAAE,WAAS,WAASN,GAAE,WAASS,GAAE,OAAK,WAAST,GAAE,WAASS,GAAE,OAAKA,GAAE,QAAOT,GAAE,iBAAeM,GAAE,kBAAkB,gBAAgB,CAAC,IAAEA,GAAE,IAAEN,GAAE,cAAa,GAAE,CAAC,KAAIA,GAAE,uBAAqBM,GAAE,kBAAkB,gBAAgB,CAAC,IAAE,OAAKA,GAAE,YAAU;AAAA,EAAQ;AAAC,QAAMC,KAAE,CAAC;AAAE,MAAG,QAAMF,IAAE;AAAC,UAAMN,KAAE;AAAE,KAACM,GAAE,QAAM,aAAWA,GAAE,KAAK,CAAC,KAAG,aAAWA,GAAE,KAAK,CAAC,MAAIC,GAAE,eAAa;AAAI,QAAIN,KAAEE,GAAE;AAAM,eAASG,GAAE,aAAWC,GAAE,YAAU,SAAQN,MAAGE,GAAE;AAAW,UAAMD,KAAEI,GAAE,OAAO,SAAO,GAAEH,MAAEG,GAAE,OAAOJ,EAAC,GAAEG,KAAE,CAAAL,OAAGA,MAAGA,GAAE,MAAM,GAAG,EAAE,IAAI,GAAEU,MAAE,MAAM,QAAQJ,GAAE,QAAQ,IAAES,GAAET,GAAE,SAAS,IAAK,CAACN,IAAEC,QAAK,EAAC,MAAKI,GAAEF,IAAE,KAAKF,EAAC,CAAC,GAAE,UAASU,GAAEX,EAAC,KAAG,EAAC,EAAG,CAAC,IAAE,CAAC,EAAC,MAAKK,GAAEF,IAAE,IAAI,GAAE,UAASQ,GAAEL,GAAE,QAAQ,KAAG,EAAC,CAAC;AAAE,IAAAE,GAAE,KAAK,EAAC,IAAGR,IAAE,OAAMC,IAAE,WAAUS,IAAC,CAAC,GAAEH,GAAE,kBAAkB,qBAAmBP;AAAA,EAAC;AAAC,SAAM,EAAC,UAASO,IAAE,UAASC,GAAC;AAAC;AAAC,IAAMK,KAAE,OAAK,EAAC,WAAU,UAAS,aAAYZ,IAAE,aAAY,MAAG,UAASS,GAAE,MAAK,iBAAgB,IAAG,mBAAkB,IAAG,oBAAmB,IAAG,gBAAe,CAAC,GAAE,GAAE,CAAC,GAAE,mBAAkB,EAAC,iBAAgB,CAAC,KAAG,KAAG,KAAG,CAAC,GAAE,oBAAmB,IAAG,4BAA2B,IAAG,gBAAe,GAAE,iBAAgB,IAAE,GAAE,cAAa,OAAG,yBAAwB,KAAE;AAAG,SAASI,GAAEd,IAAEC,IAAEC,IAAEC,KAAE;AAAC,MAAG,QAAMH,MAAG,QAAMA,GAAE;AAAK,WAAO;AAAK,QAAMK,KAAEL,GAAE,MAAKM,KAAEH,IAAE,iBAAiB,WAAW,kBAAiBO,MAAE,CAACV,GAAE,eAAaM,KAAE,GAAEC,KAAEL,MAAG,CAACD,GAAE,eAAagB,KAAEC,IAAEC,KAAEC,GAAEpB,GAAE,QAAQ,GAAEqB,KAAErB,GAAE,QAAMG,GAAE,QAAM,aAAWF,GAAE,YAAU,IAAE,IAAE;AAAE,SAAO,IAAImB,GAAEf,IAAE,EAAC,QAAOK,KAAE,eAAcJ,IAAE,UAASa,IAAE,MAAKZ,IAAE,YAAWc,IAAE,cAAa,KAAE,CAAC;AAAC;AAAC,IAAMJ,KAAE,EAAC,GAAE,EAAE,eAAc,GAAE,EAAE,cAAa;AAA5C,IAA8CC,KAAE,EAAC,GAAE,EAAE,QAAO,GAAE,EAAE,OAAM;AAAE,SAASI,GAAErB,IAAEK,IAAEI,KAAEF,IAAEW,IAAEV,IAAE;AAAC,QAAMV,KAAEU,GAAE,sBAAqBM,KAAE,CAAAf,OAAGuB,GAAEf,IAAEE,KAAEV,KAAED,EAAC,GAAEiB,KAAEV,GAAE,kBAAkB,iBAAgBK,KAAEJ,GAAED,GAAE,kBAAkB,gBAAgB,CAAC,GAAE,GAAE,CAAC;AAAE,EAAAL,GAAE,YAAU,CAACe,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAEL,EAAC,GAAEV,GAAE,0BAAwB,CAAC,CAACK,GAAE,yBAAwBL,GAAE,SAAOQ,GAAE,QAAOR,GAAE,aAAW,CAACK,GAAE,kBAAkB,gBAAeA,GAAE,kBAAkB,iBAAgBA,GAAE,0BAAwBJ,GAAE,CAAC,IAAEQ,GAAE,CAAC,CAAC,GAAET,GAAE,iBAAeK,GAAE,gBAAeL,GAAE,mBAAiBQ,GAAE,kBAAiBR,GAAE,qBAAmB,WAASK,GAAE,YAAUA,GAAE,cAAYL,IAAEA,GAAE,mBAAiB,aAAWK,GAAE,YAAUC,GAAE,SAAO,WAASD,GAAE,YAAUC,GAAE,OAAKA,GAAE;AAAU,QAAMK,KAAE,CAAC,GAAEC,KAAEE,GAAEZ,GAAE,QAAMA,GAAE,SAAS;AAAE,UAAMU,OAAIZ,GAAE,mBAAiB,IAAIE,IAAEgB,IAAEN,EAAC,GAAED,GAAE,KAAKX,GAAE,iBAAiB,WAAW;AAAG,QAAMa,KAAEC,GAAEZ,GAAE,iBAAiB;AAAE,UAAMW,OAAIb,GAAE,2BAAyB,IAAIE,IAAEgB,IAAEL,EAAC,GAAEF,GAAE,KAAKX,GAAE,yBAAyB,WAAW;AAAG,QAAMgB,KAAEF,GAAEZ,GAAE,QAAQ;AAAE,UAAMc,OAAIhB,GAAE,kBAAgB,IAAIE,IAAEgB,IAAEF,EAAC,GAAEL,GAAE,KAAKX,GAAE,gBAAgB,WAAW;AAAG,QAAMiB,KAAEH,GAAEZ,GAAE,SAAS;AAAE,UAAMe,OAAIjB,GAAE,mBAAiB,IAAIE,IAAEgB,IAAED,EAAC,GAAEN,GAAE,KAAKX,GAAE,iBAAiB,WAAW;AAAG,QAAMqB,KAAEP,GAAEZ,GAAE,MAAM;AAAE,SAAO,QAAMmB,OAAIrB,GAAE,gBAAc,IAAIE,IAAEgB,IAAEG,EAAC,GAAEV,GAAE,KAAKX,GAAE,cAAc,WAAW,IAAGA,GAAE,yBAAyB,gBAAcQ,GAAE,mBAAkBR,GAAE,yBAAyB,cAAYK,GAAE,aAAYL,GAAE,yBAAyB,WAASK,GAAE,UAASL,GAAE,gBAAcG,GAAEK,GAAE,oBAAoB,GAAE,QAAQ,IAAIG,EAAC;AAAC;AAAC,SAASY,GAAExB,IAAE;AAAC,QAAMI,MAAE,CAAC,CAACJ,GAAE,uBAAsBE,KAAE,CAAC,CAACF,GAAE,sBAAqBG,MAAE,IAAI,2BAA2B,IAAE,IAAEH,GAAE,QAAMA,GAAE,MAAKK,KAAEL,GAAE,MAAIA,GAAE,KAAIM,KAAEH,MAAEH,GAAE;AAAS,SAAOK,MAAGD,MAAEE,KAAE,MAAIJ,KAAEC,MAAE;AAAE;AAAC,SAASsB,GAAEzB,IAAEC,IAAE;AAAC,MAAG,QAAMA;AAAE,WAAOD,GAAE,KAAM,CAAAA,OAAG,MAAIA,GAAE,WAASC,GAAG;AAAC;AAAC,SAASsB,GAAEvB,IAAEC,IAAEC,IAAE;AAAC,MAAG,QAAMF,MAAGE,OAAIC,GAAE;AAAK,WAAO;AAAK,WAAQC,MAAE,GAAEA,MAAEJ,GAAE,QAAOI,OAAI;AAAC,UAAMD,MAAEH,GAAEI,GAAC;AAAE,QAAG,QAAMD,OAAG,MAAIA,IAAE,QAAMD,KAAG;AAAC,YAAMF,KAAEC,GAAEG,GAAC;AAAE,aAAO,QAAMJ,KAAEA,GAAE,KAAG;AAAA,IAAI;AAAA,EAAC;AAAC,SAAO;AAAI;AAAC,SAASoB,GAAEpB,IAAE;AAAC,UAAOA,IAAE;AAAA,IAAC,KAAKA,GAAE;AAAK,aAAOQ,GAAE;AAAA,IAAc,KAAKR,GAAE;AAAM,aAAOQ,GAAE;AAAA,IAAe,KAAKR,GAAE;AAAS,aAAOQ,GAAE;AAAA,IAAa,KAAKR,GAAE;AAAI,aAAM;AAAA,IAAY,KAAKA,GAAE;AAAI,aAAM;AAAA,IAAa,KAAKA,GAAE;AAAS,aAAM;AAAA,IAAY;AAAQ,aAAM;AAAA,EAAE;AAAC;;;ACAx5L,IAAM0B,KAAN,MAAM,GAAC;AAAA,EAAC,YAAYC,IAAEC,IAAEC,IAAEC,IAAEC,IAAEC,KAAE;AAAC,QAAG,KAAK,wBAAsBJ,IAAE,KAAK,UAAQC,IAAE,KAAK,yBAAuBC,IAAE,KAAK,sBAAoBC,IAAE,KAAK,WAASC,KAAE,KAAK,YAAUL,IAAE,KAAK,YAAUA,GAAE,UAAU,MAAK,KAAK,uBAAqBA,GAAE,qBAAoBA,GAAE,qBAAoB;AAAC,YAAMC,KAAED,GAAE;AAAsB,WAAK,uBAAqBA,GAAE,oBAAoB,IAAK,CAAAA,OAAGM,GAAEL,IAAED,EAAC,CAAE;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,MAAMA,IAAEC,IAAEC,IAAE;AAAC,WAAO,KAAK,sBAAsB,QAAQF,IAAEC,IAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,eAAeF,IAAEC,IAAEC,IAAE;AAAC,UAAMC,KAAE,GAAG,KAAK,SAAS,UAAUH,GAAE,UAAU,UAAU,eAAeC,GAAE,GAAG;AAAK,WAAO,KAAK,MAAME,IAAE,UAASD,EAAC,EAAE,KAAM,CAAAF,OAAGO,GAAEN,IAAED,EAAC,CAAE;AAAA,EAAC;AAAA,EAAC,eAAeA,IAAEC,IAAEC,IAAE;AAAC,WAAO,EAAED,GAAE,IAAK,CAAAA,OAAG,KAAK,eAAeD,IAAEC,GAAE,sBAAqBC,EAAC,CAAE,CAAC,EAAE,KAAM,CAAAA,OAAG;AAAC,YAAMC,KAAE,CAAC;AAAE,eAAQE,MAAE,GAAEA,MAAEJ,GAAE,QAAO,EAAEI,KAAE;AAAC,cAAMG,MAAEN,GAAEG,GAAC,EAAE;AAAM,YAAGG;AAAE,UAAAL,GAAEF,GAAEI,GAAC,EAAE,IAAI,IAAEG;AAAA,aAAM;AAAC,cAAG,EAAEN,GAAEG,GAAC,EAAE,KAAK;AAAE,kBAAMH,GAAEG,GAAC,EAAE;AAAM,eAAK,QAAQ,MAAM,mBAAkB,KAAK,WAAU,qCAAqCJ,GAAEI,GAAC,EAAE,IAAI,cAAcL,GAAE,EAAE,KAAIE,GAAEG,GAAC,EAAE,KAAK;AAAA,QAAC;AAAA,MAAC;AAAC,aAAOF;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,MAAM,aAAaD,IAAEC,IAAE;AAAC,UAAMC,KAAE,QAAM,KAAK,uBAAqBF,GAAE,UAAU,aAAWO,GAAE,KAAK,eAAeP,IAAE,KAAK,qBAAoBC,EAAC,CAAC,IAAE,MAAK,EAAC,kBAAiBE,KAAE,aAAYG,IAAC,IAAEE,GAAE,KAAK,sBAAqBR,EAAC,GAAES,MAAE,CAAC,CAACT,GAAE,UAAU,UAASU,KAAED,MAAEF,GAAE,KAAK,cAAcP,GAAE,UAAU,UAASM,KAAEL,EAAC,CAAC,IAAE,MAAKU,KAAEX,GAAE,UAAU,oBAAkB,MAAM,KAAK,YAAYA,IAAEC,EAAC,IAAE,MAAKJ,KAAEG,GAAE,UAAU,oBAAmBY,KAAE,KAAK,wBAAsB,QAAMf,MAAGA,MAAG,IAAE,KAAK,qBAAqBA,EAAC,IAAE,QAAMc,KAAEE,GAAEF,EAAC,IAAE,MAAKG,KAAEF,MAAA,gBAAAA,GAAG,UAASG,MAAEH,MAAA,gBAAAA,GAAG,aAAU,CAAC,GAAEC,KAAE,GAAGb,GAAE,EAAE,IAAGgB,KAAE,CAACP,OAAG,KAAK,SAAS,iBAAgBQ,KAAED,KAAE,MAAM,KAAK,iBAAiBH,IAAEZ,EAAC,IAAE,MAAKiB,KAAEF,KAAEG,GAAEF,EAAC,IAAEG,GAAEN,EAAC,GAAEO,KAAE,QAAMH,KAAEd,GAAEa,EAAC,IAAE,MAAKK,KAAEP,GAAE,SAAO,IAAER,GAAE,KAAK,aAAaP,IAAEe,IAAEd,EAAC,CAAC,IAAE;AAAK,QAAII,KAAE,MAAKkB,KAAE;AAAK,QAAGb,IAAE;AAAC,MAAAL,KAAEO,GAAE,MAAMF,EAAC;AAAE,YAAMZ,KAAES,GAAE,KAAK,wBAAuBI,EAAC;AAAE,MAAAY,KAAER,GAAEZ,KAAEL,EAAC;AAAA,IAAC;AAAC,UAAM0B,KAAEF,KAAEV,GAAE,MAAMU,EAAC,IAAE,MAAKG,KAAEvB,KAAEU,GAAE,MAAMV,EAAC,IAAE,CAAC,GAAEwB,KAAED,KAAE,EAAC,eAAcA,IAAE,kBAAiB,KAAK,oBAAmB,IAAE;AAAK,QAAG,QAAMP;AAAE,aAAM,EAAC,cAAaA,IAAE,mBAAkBQ,IAAE,gBAAerB,IAAE,oBAAmBkB,IAAE,kBAAiBR,IAAE,aAAYS,GAAC;AAAE,QAAG,QAAMH;AAAE,aAAM,EAAC,WAAUA,IAAE,mBAAkBK,IAAE,gBAAerB,IAAE,oBAAmBkB,IAAE,kBAAiBR,IAAE,aAAYS,GAAC;AAAE,UAAM,IAAI;AAAA,EAAK;AAAA,EAAC,OAAO,wBAAwB1B,IAAEC,IAAE;AAAC,UAAMC,KAAEF,GAAE;AAAmB,QAAG,QAAME;AAAE,iBAAUC,MAAK,OAAO,KAAKD,EAAC;AAAE,mBAAUF,MAAKE,GAAEC,EAAC,EAAE;AAAO,gBAAM,QAAQH,GAAE,IAAI,IAAEA,GAAE,aAAWA,GAAE,KAAK,IAAK,CAAAA,OAAG,EAAEA,IAAEC,EAAC,CAAE,IAAED,GAAE,aAAW,EAAEA,GAAE,MAAKC,EAAC;AAAA,EAAC;AAAA,EAAC,OAAO,qBAAqBD,IAAE;AAAC,UAAMC,KAAED,GAAE;AAAmB,QAAG,QAAMC;AAAE,iBAAUC,MAAKD,IAAE;AAAC,cAAMD,KAAEC,GAAEC,EAAC;AAAE,YAAG,MAAM,QAAQF,GAAE,QAAQ;AAAE,mBAAQC,KAAE,GAAEA,KAAED,GAAE,SAAS,QAAOC,MAAI;AAAC,kBAAMC,KAAEF,GAAE,SAASC,EAAC;AAAE,wBAAUC,GAAE,UAAU,GAAE,CAAC,MAAIF,GAAE,SAASC,EAAC,IAAEC,GAAE,UAAU,CAAC;AAAA,UAAE;AAAA,aAAK;AAAC,gBAAMD,KAAED,GAAE;AAAS,sBAAUC,GAAE,UAAU,GAAE,CAAC,MAAID,GAAE,WAASC,GAAE,UAAU,CAAC;AAAA,QAAE;AAAA,MAAC;AAAA,EAAC;AAAA,EAAC,YAAYD,IAAEC,IAAE;AAAC,UAAMC,KAAE,GAAG,KAAK,SAAS,UAAUF,GAAE,UAAU,QAAQ;AAAU,WAAO,KAAK,MAAME,IAAE,QAAOD,EAAC,EAAE,KAAM,CAAAD,QAAI,GAAE,qBAAqBA,EAAC,GAAE,GAAE,wBAAwBA,IAAEE,EAAC,GAAEF,GAAG;AAAA,EAAC;AAAA,EAAC,aAAaA,IAAEC,IAAEC,IAAEC,IAAEC,IAAEC,KAAE;AAAC,QAAIM,MAAE;AAAG,WAAOP,OAAIJ,GAAE,YAAUI,OAAIJ,GAAE,QAAMI,OAAIJ,GAAE,QAAM,KAAK,MAAMA,IAAE,UAASK,GAAC,EAAE,KAAM,CAAAL,QAAI,EAAC,IAAGC,IAAE,OAAMC,IAAE,MAAKF,IAAE,UAASI,IAAE,aAAYO,IAAC,EAAG,IAAE,KAAK,MAAMX,IAAE,SAAQK,GAAC,EAAE,KAAM,CAAAL,OAAG;AAAC,UAAIK,MAAEL;AAAE,YAAMQ,MAAE,MAAKqB,KAAE;AAAE,UAAG1B,MAAGH,GAAE,QAAMA,GAAE,UAAQQ,KAAE;AAAC,cAAMP,KAAE,KAAK,KAAKD,GAAE,QAAM6B,EAAC,GAAE3B,KAAE,KAAK,KAAKF,GAAE,SAAO6B,EAAC,GAAE1B,MAAE,SAAS,cAAc,QAAQ;AAAE,QAAAA,IAAE,QAAMF,IAAEE,IAAE,SAAOD;AAAE,QAAAC,IAAE,WAAW,IAAI,EAAE,UAAUH,IAAE,GAAE,GAAEC,IAAEC,EAAC,GAAEG,MAAEF,KAAEQ,MAAE;AAAA,MAAE;AAAC,aAAM,EAAC,IAAGV,IAAE,OAAMC,IAAE,MAAKG,KAAE,UAASD,IAAE,aAAYO,IAAC;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,aAAaX,IAAEC,IAAEC,IAAE;AAAC,UAAMC,KAAE,CAAC,CAAC,KAAK,SAAS,wCAAuCC,KAAE,KAAK,SAAS;AAAiB,WAAO,QAAQ,IAAIH,GAAE,IAAK,CAAAA,OAAG;AAAC,UAAG,MAAIA,GAAE,QAAMG;AAAG,eAAO;AAAK,YAAMC,MAAEW,GAAEf,GAAE,WAAU,KAAK,SAAS,gBAAgB;AAAE,UAAG,QAAMI;AAAE,eAAO,KAAK,QAAQ,MAAM,iBAAgB,KAAK,WAAU,+CAA+CL,GAAE,EAAE,EAAE,GAAE,QAAQ,OAAO;AAAE,YAAMQ,MAAER,GAAE,UAAU,WAASA,GAAE,IAAGW,MAAE,GAAG,KAAK,SAAS,UAAUH,GAAC,aAAaH,IAAE,IAAI;AAAG,aAAO,KAAK,aAAaM,KAAEV,GAAE,IAAGA,GAAE,OAAME,IAAEE,IAAE,UAASH,EAAC;AAAA,IAAC,CAAE,CAAC;AAAA,EAAC;AAAA,EAAC,iBAAiBF,IAAEC,IAAE;AAAC,UAAMC,KAAE,GAAG,KAAK,SAAS,UAAUF,EAAC;AAAc,WAAO,KAAK,MAAME,IAAE,QAAOD,EAAC;AAAA,EAAC;AAAA,EAAC,cAAcD,IAAEC,IAAEC,IAAE;AAAC,UAAMC,KAAE,GAAG,KAAK,SAAS,UAAUH,EAAC,eAAeC,EAAC;AAAG,WAAO,KAAK,MAAME,IAAE,UAASD,EAAC;AAAA,EAAC;AAAC;AAAC,SAASoB,GAAEtB,IAAE;AAAC,SAAM,EAAC,YAAW,CAAC,GAAE,YAAW,CAAC,EAAC,MAAK,mBAAkB,QAAO,EAAC,UAASA,GAAC,EAAC,CAAC,GAAE,qBAAoB,CAAC,GAAE,GAAE,CAAC,EAAC;AAAC;AAAC,SAASqB,GAAErB,IAAE;AAAC,MAAG,CAACA;AAAE,WAAO;AAAK,aAAUC,MAAKD,GAAE,aAAY;AAAC,UAAMA,KAAEC,GAAE;AAAW,QAAG,QAAMD;AAAE,iBAAUE,MAAKF;AAAE,eAAM,EAAC,YAAW,CAACC,GAAE,EAAE,GAAE,qBAAoBA,GAAE,UAAS,YAAW,CAACC,EAAC,EAAC;AAAA,EAAC;AAAC,SAAO;AAAI;AAAC,SAASI,GAAEN,IAAE;AAAC,MAAG,CAACA;AAAE,WAAO;AAAK,QAAMC,KAAE,IAAI;AAAM,aAAUC,MAAKF,GAAE;AAAY,YAAME,GAAE,YAAUD,GAAE,KAAK,EAAC,YAAW,CAACC,GAAE,EAAE,GAAE,qBAAoBA,GAAE,UAAS,YAAW,CAAC,EAAC,CAAC;AAAE,SAAOD;AAAC;AAAC,SAASQ,GAAET,IAAEC,IAAE;AAAC,MAAG,CAACD,MAAG,CAACC,MAAG,CAACA,GAAE;AAAoB,WAAOD;AAAE,QAAMG,KAAE,OAAO,KAAKF,GAAE,mBAAmB,EAAE,CAAC;AAAE,SAAM,CAACA,GAAE,oBAAoBE,EAAC,EAAE,OAAO,iBAAeH,GAAE,iBAAiB,UAAQ,QAAOA,KAAE,EAAEA,EAAC,GAAG,iBAAiB,QAAOA;AAAC;AAAC,SAASU,GAAEV,IAAEC,IAAE;AAAC,QAAMC,KAAE,EAAC,kBAAiB,MAAK,aAAY,EAAC,GAAEC,KAAEF,GAAE,UAAU;AAAmB,MAAG,QAAMD,MAAG,QAAMG,MAAGA,KAAE;AAAE,WAAOD;AAAE,QAAME,KAAED,MAAG,IAAEH,GAAEG,EAAC,EAAE,kBAAgB;AAAK,MAAG,QAAMC;AAAE,WAAOF;AAAE,WAAQG,MAAE,GAAEA,MAAED,GAAE,QAAOC,OAAI;AAAC,UAAML,KAAEI,GAAEC,GAAC;AAAE,QAAG,QAAML,GAAE;AAAqB,MAAAE,GAAE,cAAYG,KAAEH,GAAE,mBAAiBE,GAAEC,GAAC;AAAA,aAAU,YAAUL,GAAE,qBAAqB,YAAU,CAAC,IAAI,2BAA2B;AAAE,aAAOE,GAAE,cAAYG,KAAEH,GAAE,mBAAiBF,IAAEE;AAAA,EAAC;AAAC,SAAOA;AAAC;;;ACAliL,IAAM4B,KAAN,MAAO;AAAA,EAAC,YAAYC,IAAEC,IAAE;AAAC,SAAK,aAAWD,IAAE,KAAK,UAAQC,IAAE,KAAK,kBAAgB,oBAAI;AAAA,EAAG;AAAA,EAAC,IAAI,OAAM;AAAC,WAAO,KAAK,WAAW;AAAA,EAAI;AAAA,EAAC,QAAQF,IAAEG,KAAEC,IAAE;AAAC,UAAMC,KAAE,IAAI,mBAAgBC,MAAE,EAAEF,IAAG,MAAIC,GAAE,MAAM,CAAE,GAAEE,MAAE,EAAC,QAAOF,GAAE,QAAO,OAAM,EAAC,OAAM,KAAK,QAAO,EAAC,GAAEG,KAAE,KAAK,WAAW,QAAQR,IAAEG,KAAEI,GAAC,GAAEE,KAAE,EAAC,UAASD,IAAE,iBAAgBH,IAAE,aAAYC,IAAC;AAAE,WAAO,KAAK,gBAAgB,IAAIG,EAAC,GAAE,EAAED,IAAG,MAAI;AAJzb;AAI0b,MAAAC,GAAE,kBAAgB,OAAK,KAAAA,GAAE,gBAAF,mBAAe,UAASA,GAAE,cAAY,MAAK,KAAK,gBAAgB,OAAOA,EAAC;AAAA,IAAC,CAAE,GAAED;AAAA,EAAC;AAAA,EAAC,YAAW;AAAC,SAAK,gBAAgB,QAAS,CAAAP,OAAG;AAJ7kB;AAI8kB,YAAAA,GAAE,oBAAF,mBAAmB,SAAQA,GAAE,kBAAgB,OAAK,KAAAA,GAAE,gBAAF,mBAAe;AAAA,IAAQ,CAAE,GAAE,KAAK,gBAAgB,MAAM;AAAA,EAAC;AAAC;;;ACAsmB,IAAMS,KAAE;AAAI,IAAM,IAAN,MAAO;AAAA,EAAC,YAAYC,IAAEC,IAAEC,IAAEC,KAAEC,KAAEC,IAAEC,IAAEC,KAAEC,KAAE,CAAC,GAAE;AAAC,SAAK,WAASR,IAAE,KAAK,sBAAoBC,IAAE,KAAK,gBAAcG,KAAE,KAAK,qBAAmBC,IAAE,KAAK,eAAaC,IAAE,KAAK,WAASE,IAAE,KAAK,WAASC,GAAE,GAAE,KAAK,qBAAmB,OAAG,KAAK,OAAK,EAAE,GAAE,KAAK,oBAAkB,MAAK,KAAK,cAAY,IAAE,GAAE,KAAK,cAAY,GAAE,KAAK,cAAY,GAAE,KAAK,UAAQ,EAAE,GAAE,KAAK,QAAM,EAAE,GAAE,KAAK,QAAM,EAAE,GAAE,KAAK,QAAM,EAAE,GAAE,KAAK,QAAM,EAAE,GAAE,KAAK,wBAAsBD,GAAE,wBAAsB,GAAE,KAAK,yBAAuBA,GAAE,yBAAuB,GAAE,KAAK,aAAaN,IAAEC,GAAC,GAAE,KAAK,WAAS,KAAK,oBAAoB,kBAAiB,KAAK,oBAAoBI,GAAC,GAAE,KAAK,YAAU,EAAE,GAAE,GAAE,GAAEP,EAAC,GAAE,KAAK,wBAAsB,KAAK,SAAS,YAAU,KAAK,SAAS,iBAAe,EAAE,KAAK,QAAQ,IAAG,KAAK,0BAAwB,EAAE,KAAK,QAAQ,EAAE;AAAA,EAAM;AAAA,EAAC,oBAAoBA,IAAE;AAAC,YAAMA,MAAG,KAAK,oBAAkBM,GAAE,kBAAkBN,EAAC,GAAE,KAAK,kBAAkB,mCAAmCU,GAAEC,GAAEX,IAAE,KAAE,CAAC,CAAC,KAAG,KAAK,oBAAkB;AAAA,EAAI;AAAA,EAAC,aAAaA,IAAEC,IAAE;AAAC,SAAK,qBAAmBA,IAAEA,MAAGE,GAAEH,GAAE,YAAWA,GAAE,kBAAiB,KAAK,QAAQ,GAAE,KAAK,oBAAkB,KAAGA,GAAE,sBAAoB,IAAG,KAAK,UAAQA,GAAE,KAAI,KAAK,cAAY,IAAE,GAAE,KAAK,cAAY;AAAA,EAAC;AAAA,EAAC,mBAAmBA,IAAE;AAAC,SAAK,OAAKA;AAAA,EAAC;AAAA,EAAC,2BAA2BA,IAAE;AAAC,UAAMC,KAAE,KAAK;AAAsB,WAAO,KAAK,wBAAsBD,IAAEC;AAAA,EAAC;AAAA,EAAC,mBAAmBD,IAAE;AAAC,SAAK,gBAAcA;AAAA,EAAC;AAAA,EAAC,kBAAkBA,IAAE;AAAC,QAAG,QAAM,KAAK;AAAkB,aAAO;AAAK,UAAMC,KAAED,GAAE;AAAI,QAAG,CAACC;AAAE,aAAO;AAAK,UAAMC,KAAE,wBAAsB,KAAK,kBAAkB,OAAK,UAAQ;AAAS,QAAG,KAAK,mBAAmB;AAAyB,aAAO,KAAK,mBAAmB,yBAAyBD,IAAE,KAAK,QAAQ;AAAE,UAAME,MAAEF,GAAE,CAAC,GAAEG,MAAEH,GAAE,CAAC,GAAEI,KAAEJ,GAAE,CAAC,GAAEK,KAAE,KAAK,mBAAmB,aAAaH,KAAEC,KAAEC,IAAE,KAAK,UAASH,EAAC;AAAE,WAAO,QAAMI,KAAE,EAAC,KAAIA,IAAE,KAAIA,GAAC,IAAE;AAAA,EAAI;AAAA,EAAC,aAAaN,IAAE;AAAC,UAAMC,KAAED,GAAE;AAAU,QAAG,GAAEC,EAAC;AAAE,aAAOA;AAAE,QAAGD,GAAE,OAAKO,GAAEN,IAAED,GAAE,GAAG,GAAE,KAAK,qBAAmBA,GAAE,kBAAgB,OAAO,SAASA,GAAE,eAAe,GAAG,GAAE;AAAC,UAAIE,KAAE,GAAEC,MAAE;AAAE,cAAO,KAAK,kBAAkB,MAAK;AAAA,QAAC,KAAI;AAAqB,UAAAD,KAAE,KAAK,kBAAkB,oBAAoBD,GAAE,CAAC,GAAE,KAAK,mBAAmB,IAAED,GAAE,eAAe,MAAIC,GAAE,CAAC,GAAEE,MAAEH,GAAE,eAAe,MAAIA,GAAE,eAAe;AAAI;AAAA,QAAM,KAAI;AAAgB,UAAAE,KAAEF,GAAE,eAAe,MAAIC,GAAE,CAAC,GAAEE,MAAEH,GAAE,eAAe,MAAIA,GAAE,eAAe;AAAA,MAAG;AAAC,MAAAC,GAAE,CAAC,KAAGC,KAAE,MAAGC,KAAEF,GAAE,CAAC,KAAG,MAAGE;AAAA,IAAC;AAAM,WAAK,qBAAmBF,GAAE,CAAC,IAAEF,OAAI,KAAK,UAAU,IAAEE,GAAE,CAAC,GAAE,KAAK,UAAU,IAAEA,GAAE,CAAC,GAAE,KAAK,UAAU,IAAEA,GAAE,CAAC,GAAEA,GAAE,CAAC,IAAEW,GAAE,KAAK,WAAU,KAAK,oBAAmB,KAAK,mBAAkB,KAAK,mBAAmB;AAAG,WAAO,GAAEX,IAAE,KAAK,UAASA,IAAE,KAAK,QAAQ,GAAEA;AAAA,EAAC;AAAA,EAAC,iBAAiBD,IAAE;AAAC,QAAG,QAAMA,GAAE;AAAc,aAAOA,GAAE;AAAc,UAAMC,KAAED,GAAE,YAAWE,KAAE,OAAI,KAAK;AAAwB,WAAO,QAAMD,MAAG,CAACD,GAAE,OAAK,CAAC,GAAEC,EAAC,KAAG,KAAK,yBAAuBA,GAAE,SAAS,KAAM,CAAAD,OAAGA,KAAEE,EAAE,IAAE,QAAMF,GAAE,uBAAqB,KAAK,kBAAkBC,IAAED,GAAE,sBAAqBA,GAAE,IAAI,CAAC,GAAEA,GAAE,cAAc,GAAEA,GAAE;AAAA,EAAqB;AAAA,EAAC,kBAAkBA,IAAEC,IAAEC,IAAEC,KAAE;AAAC,QAAG,QAAMF;AAAE,MAAAA,KAAE,EAAE;AAAA,aAAU,GAAEA,EAAC;AAAE,aAAOA;AAAE,QAAIG,MAAE,GAAEC,KAAE;AAAE,QAAG,KAAK,qBAAmB,QAAMF,OAAG,OAAO,SAASA,IAAE,GAAG;AAAE,cAAO,KAAK,kBAAkB,MAAK;AAAA,QAAC,KAAI;AAAqB,UAAAC,MAAE,KAAK,kBAAkB,oBAAoBJ,GAAE,OAAO,CAAC,GAAE,KAAK,mBAAmB,IAAEG,IAAE,MAAIH,GAAE,OAAO,CAAC,GAAEK,KAAEF,IAAE,MAAIA,IAAE;AAAI;AAAA,QAAM,KAAI;AAAgB,UAAAC,MAAED,IAAE,MAAIH,GAAE,OAAO,CAAC,GAAEK,KAAEF,IAAE,MAAIA,IAAE;AAAA,MAAG;AAAA;AAAM,WAAK,qBAAmBD,KAAEH,OAAI,KAAK,UAAU,IAAEC,GAAE,OAAO,CAAC,GAAE,KAAK,UAAU,IAAEA,GAAE,OAAO,CAAC,GAAE,KAAK,UAAU,IAAEA,GAAE,OAAO,CAAC,GAAEI,MAAEQ,GAAE,KAAK,WAAU,KAAK,oBAAmB,KAAK,mBAAkB,KAAK,mBAAmB,IAAEZ,GAAE,OAAO,CAAC;AAAG,WAAOK,KAAE,KAAG,GAAEL,IAAE,KAAK,UAAS,KAAK,SAAQ,KAAK,UAASI,GAAC,GAAE,GAAE,KAAK,SAAQ,GAAEC,IAAE,KAAK,cAAaJ,EAAC,KAAG,GAAED,IAAE,KAAK,UAASC,IAAE,KAAK,UAASG,GAAC,GAAEH;AAAA,EAAC;AAAA,EAAC,cAAcD,IAAE;AAAC,UAAMC,KAAE,KAAK,aAAaD,EAAC;AAAE,QAAG,CAAC,KAAK,qBAAqBC,EAAC;AAAE,aAAM;AAAG,QAAG,CAAC,KAAK;AAAmB,aAAM;AAAG,UAAMC,KAAE,KAAK,iBAAiBF,EAAC;AAAE,WAAO,QAAME,KAAEW,GAAEX,IAAE,KAAK,QAAQ,IAAEY,GAAE,KAAK,UAASC,GAAEd,EAAC,CAAC;AAAA,EAAC;AAAA,EAAC,kBAAkBD,IAAE;AAAC,QAAG,CAAC,KAAK;AAAmB,aAAM;AAAG,UAAMC,KAAED,GAAE;AAAY,WAAO,QAAMC,KAAEY,GAAEZ,IAAE,KAAK,QAAQ,IAAE,KAAK,cAAcD,EAAC;AAAA,EAAC;AAAA,EAAC,qBAAqBA,IAAE;AAAC,WAAO,QAAM,KAAK,iBAAe,GAAE,KAAK,eAAcA,EAAC,MAAI,GAAE;AAAA,EAAO;AAAA,EAAC,wBAAwBC,IAAEC,IAAE;AAAC,UAAMC,MAAE,KAAK,aAAaF,EAAC,GAAEG,MAAE,KAAK,KAAKY,GAAEb,KAAE,KAAK,OAAO,CAAC,GAAEE,KAAED,MAAED,IAAE,CAAC;AAAE,WAAO,KAAK,sBAAsBC,GAAC,GAAEC,KAAE,IAAE,MAAG,OAAO,YAAUH,KAAEG,KAAE,KAAK;AAAA,EAAiB;AAAA,EAAC,mBAAmBL,IAAE;AAAC,WAAO,KAAK,2BAA2BA,EAAC,IAAE,KAAK,aAAaA,EAAC,EAAE,CAAC;AAAA,EAAC;AAAA,EAAC,2BAA2BA,IAAE;AAAC,UAAME,KAAE,KAAK,aAAaF,EAAC,GAAEG,MAAE,EAAED,IAAE,KAAK,OAAO;AAAE,WAAO,KAAK,sBAAsBC,GAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,sBAAsBH,IAAE;AAAC,UAAMG,MAAE,KAAK,aAAaH,EAAC,GAAEI,MAAED,IAAE,CAAC,GAAEE,MAAG,KAAK,IAAIF,IAAE,CAAC,KAAGA,IAAE,CAAC,IAAE,KAAK,QAAQ,CAAC,KAAGA,IAAE,CAAC,KAAGA,IAAE,CAAC,IAAE,KAAK,QAAQ,CAAC,KAAGA,IAAE,CAAC,KAAGA,IAAE,CAAC,IAAE,KAAK,QAAQ,CAAC,EAAE,IAAEA,GAAEA,GAAC,IAAEC,OAAG,EAAED,KAAE,KAAK,OAAO;AAAE,WAAO,KAAK,IAAI,GAAEE,EAAC;AAAA,EAAC;AAAA,EAAC,OAAOL,IAAE;AAAC,WAAOA,GAAE,cAAYO,GAAE;AAAA,EAAI;AAAA,EAAC,uBAAuBP,IAAEC,IAAE;AAAC,UAAMC,KAAEF,GAAE,CAAC,IAAEC,GAAE,CAAC,GAAEE,MAAEH,GAAE,CAAC,IAAEC,GAAE,CAAC,GAAEG,MAAEJ,GAAE,CAAC,IAAEC,GAAE,CAAC,GAAEI,KAAEH,KAAEA,KAAEC,MAAEA,KAAEG,KAAEL,GAAE,CAAC;AAAE,QAAGI,MAAGC,KAAEA;AAAE,aAAO,KAAK,IAAIF,GAAC;AAAE,UAAMG,MAAE,KAAK,KAAKF,EAAC,IAAEC;AAAE,WAAO,KAAK,KAAKF,MAAEA,MAAEG,MAAEA,GAAC;AAAA,EAAC;AAAA,EAAC,sBAAsBU,IAAET,IAAE;AAAC,UAAMU,KAAEf,GAAEK,EAAC,GAAEW,KAAEhB,GAAEc,EAAC,IAAEC;AAAE,MAAE,KAAK,OAAMD,IAAE,EAAEA,IAAET,EAAC,IAAE,EAAES,EAAC,CAAC;AAAE,UAAMP,KAAEM,GAAER,IAAE,KAAK,KAAK,GAAEQ,KAAER,GAAE,CAAC;AAAE,QAAGE,MAAGM,KAAEA;AAAE,aAAO,KAAK,IAAIG,EAAC;AAAE;AAAC,YAAMnB,KAAE,EAAE,KAAK,OAAMQ,IAAE,IAAEU,EAAC,GAAEb,KAAEa,IAAER,MAAEM,KAAEA,KAAE,IAAEX,IAAEe,KAAE,EAAE,KAAK,OAAMpB,IAAEK,KAAEK,GAAC,GAAEC,KAAEM,IAAEI,KAAErB,GAAE,KAAK,OAAMW,IAAES,EAAC,GAAEE,KAAEtB,GAAE,KAAK,OAAMqB,IAAE,EAAE,KAAK,OAAMrB,IAAE,EAAEA,IAAEqB,EAAC,CAAC,CAAC,GAAEE,KAAE,EAAE,KAAK,OAAMH,IAAE,EAAE,KAAK,OAAME,IAAEN,KAAEb,GAAEmB,EAAC,CAAC,CAAC;AAAE,UAAIE,KAAE,EAAEb,IAAEY,EAAC;AAAE,UAAGJ,MAAG,KAAI;AAAC,cAAMlB,KAAED,GAAE,KAAK,OAAMW,IAAEY,EAAC;AAAE,YAAIpB,MAAE,EAAEF,IAAED,EAAC,IAAEG,GAAEF,EAAC;AAAE,QAAAE,MAAE,SAAMA,MAAE,OAAMqB,MAAGrB;AAAA,MAAC;AAAC,aAAOqB;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,aAAaxB,IAAEC,IAAE;AAAC,WAAO,KAAK,aAAWO,GAAE,KAAK,QAAQ,IAAE,KAAK,sBAAsBR,IAAEC,EAAC,IAAE,KAAK,uBAAuBD,IAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,sBAAsBD,IAAE;AAAC,IAAAA,KAAE,KAAG,KAAK,cAAY,KAAK,IAAI,KAAK,aAAYA,EAAC,GAAE,KAAK,cAAY,KAAK,IAAI,KAAK,aAAYA,EAAC,MAAI,KAAK,cAAY,GAAE,KAAK,cAAY,KAAK,IAAI,KAAK,aAAY,CAACA,EAAC;AAAA,EAAE;AAAA,EAAC,YAAYA,IAAE;AAAC,QAAGA,GAAE,cAAYO,GAAE;AAAK,aAAO;AAAE,QAAG,MAAIP,GAAE;AAAW,aAAO,KAAK;AAAY,QAAG,KAAK,sBAAoB,KAAK,yBAAuB,GAAE;AAAC,YAAMC,KAAE,KAAK,yBAAuB,KAAK,uBAAsBC,KAAE,KAAK;AAAsB,aAAO,KAAK,kBAAkBF,IAAEC,EAAC,IAAE,KAAK,kBAAkBD,IAAEE,EAAC,IAAE,IAAE,IAAE;AAAA,IAAC;AAAC,WAAO,KAAK,kBAAkBF,IAAE,KAAK,qBAAqB,IAAE,KAAK,cAAY;AAAA,EAAC;AAAA,EAAC,kBAAkBA,IAAEC,IAAE;AAAC,YAAOD,GAAE,WAAU;AAAA,MAAC,KAAKO,GAAE,qBAAoB;AAAC,cAAML,KAAE,KAAK,aAAaF,EAAC,GAAEG,MAAE,KAAK,aAAa,KAAK,SAAQD,EAAC,GAAEE,MAAE,IAAED,MAAE,KAAK,mBAAkBE,KAAEF,MAAED,GAAE,CAAC;AAAE,eAAO,KAAK,sBAAsBG,EAAC,GAAEL,GAAE,WAASC,MAAGG;AAAA,MAAC;AAAA,MAAC,KAAKG,GAAE,oBAAmB;AAAC,YAAIL,KAAE,KAAK,wBAAwBF,IAAEA,GAAE,IAAI,CAAC,IAAEC,EAAC;AAAE,eAAO,KAAK,SAAS,sBAAoBC,MAAG,KAAK,sBAAsBF,EAAC,IAAGE,KAAEF,GAAE;AAAA,MAAQ;AAAA,MAAC,KAAKO,GAAE;AAAuB,eAAO,KAAK,wBAAwBP,IAAEA,GAAE,QAAQ,IAAEC,KAAE;AAAA,MAAG,KAAKM,GAAE;AAA+B,eAAO,KAAK,mBAAmBP,EAAC,IAAEA,GAAE,WAASC;AAAA,IAAC;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,UAAUD,IAAE;AAAC,UAAME,KAAE,KAAK,aAAaF,EAAC;AAAE,WAAO,EAAEE,IAAE,KAAK,IAAI,IAAEA,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,kBAAiB;AAAC,WAAO,EAAE,KAAK,SAAQ,KAAK,IAAI;AAAA,EAAC;AAAC;;;ACAtoL,IAAMuB,KAAE;AAAR,IAAiEC,KAAE,EAAE,UAAUD,EAAC;AAAhF,IAAkFE,KAAE;AAApF,IAAwFC,KAAE;AAA1F,IAA4FC,KAAE;AAA9F,IAAkGC,KAAE;AAApG,IAAyGC,KAAE;AAA3G,IAA+GC,KAAE;AAAjH,IAAqHC,KAAE;AAAI,IAAIC,KAAE,cAAcC,GAAE,CAAC,EAAE;AAAA,EAAC,IAAI,gBAAe;AAJhzE;AAIizE,WAAM,oBAAkB,KAAK,MAAM,WAAS,oBAAgB,UAAK,MAAM,UAAX,mBAAkB;AAAA,EAAO;AAAA,EAAC,IAAI,eAAc;AAAC,WAAM,aAAW,KAAK,MAAM;AAAA,EAAO;AAAA,EAAC,IAAI,6BAA4B;AAAC,WAAM,CAAC,KAAK,kBAAgB,QAAM,KAAK,MAAM,YAAU,WAAS,KAAK,MAAM;AAAA,EAAS;AAAA,EAAC,IAAI,wBAAuB;AAAC,UAAMC,KAAE,KAAK,UAAU,KAAK,mBAAmB,0BAA0BC,GAAE,SAAS;AAAE,WAAO,IAAIC,GAAEF,IAAE,KAAK,MAAM,MAAM;AAAA,EAAC;AAAA,EAAC,IAAI,uBAAsB;AAAC,UAAMA,KAAE,KAAK,UAAU,KAAK,mBAAmB,0BAA0BC,GAAE,QAAQ;AAAE,WAAO,IAAIC,GAAEF,IAAE,KAAK,MAAM,MAAM;AAAA,EAAC;AAAA,EAAC,IAAI,YAAW;AAAC,WAAO,GAAE,KAAK,KAAK;AAAA,EAAC;AAAA,EAAC,IAAI,WAAU;AAAC,WAAO,GAAE,KAAK,KAAK;AAAA,EAAC;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,KAAK,UAAU;AAAA,EAAQ;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK;AAAA,EAAQ;AAAA,EAAC,IAAI,kBAAiB;AAAC,QAAG,QAAM,KAAK,QAAO;AAAC,YAAMA,KAAE,KAAK,OAAO;AAAS,UAAG,QAAMA;AAAE,eAAO,KAAK,gBAAgB,GAAE,KAAK,OAAO,cAAcA,GAAE,KAAK;AAAA,IAAC;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,KAAK;AAAA,EAAM;AAAA,EAAC,YAAYA,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,mBAAiB,GAAE,KAAK,gBAAc,KAAI,KAAK,qBAAmB,OAAG,KAAK,WAAS,MAAG,KAAK,mBAAiB,GAAE,KAAK,gBAAc,OAAG,KAAK,yBAAuB,MAAG,KAAK,SAAO,MAAK,KAAK,cAAY,GAAE,KAAK,oBAAkB,OAAG,KAAK,UAAQ,OAAG,KAAK,eAAa,MAAG,KAAK,kBAAgB,OAAG,KAAK,sBAAoB,MAAK,KAAK,mBAAiB,IAAIG,GAAE,EAAC,aAAY,KAAI,CAAC,GAAE,KAAK,oBAAkB,oBAAI,OAAI,KAAK,mCAAiC,IAAIA,MAAE,KAAK,oBAAkB,GAAE,KAAK,gBAAc,oBAAI,OAAI,KAAK,iBAAe,oBAAI,OAAI,KAAK,uBAAqB,GAAE,KAAK,sBAAoB,IAAI,SAAM,KAAK,2BAAyB,MAAG,KAAK,mBAAiB,OAAG,KAAK,kBAAgB,OAAG,KAAK,mBAAiB,OAAG,KAAK,sBAAoB,OAAG,KAAK,UAAQ,MAAK,KAAK,wBAAsB,MAAK,KAAK,WAAS,IAAI,KAAE,KAAK,aAAW,IAAIC,MAAE,KAAK,wBAAsB,IAAID,GAAE,EAAC,aAAY,KAAI,CAAC,GAAE,KAAK,cAAY;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,UAAK,EAAC,WAAUH,IAAE,OAAMK,GAAC,IAAE;AAAK,SAAK,mBAAiB,CAACL,GAAE,qBAAmB,CAACA,GAAE,kBAAiB,KAAK,eAAa,IAAIM,GAAEN,EAAC,GAAE,KAAK,yBAAuBK,GAAE,MAAM,uBAAsB,KAAK,kBAAgB,IAAI,2BAA2B,GAAE,YAAWA,OAAI,KAAK,UAAQA,GAAE,QAAO,KAAK,wBAAsBA,GAAE,uBAAsB,KAAK,oBAAoB,QAAQ,IAAI,CAACA,GAAE,WAAUA,GAAE,KAAK,GAAEL,GAAE,KAAK,CAAC,CAAC,EAAE,KAAM,CAAC,CAACO,EAAC,MAAI;AAAC,UAAG,KAAK,aAAW,CAACP,MAAGA,GAAE,aAAW,CAACO;AAAE;AAAO,YAAK,EAAC,MAAKD,KAAE,gBAAeJ,GAAC,IAAEF,IAAE,EAAC,oBAAmBQ,IAAC,IAAEF;AAAE,UAAG,KAAK,iBAAiBA,IAAE,YAAY,GAAE,KAAK,WAAW,CAACH,GAAG,MAAE;AAJvoJ;AAIyoJ,2BAAAG,OAAA,gBAAAA,IAAG,qBAAH,mBAAqB,UAArB,mBAA4B;AAAA,SAAiB,CAAAN,OAAG,KAAK,wBAAwBA,EAAC,GAAGS,EAAC,GAAEN,GAAG,MAAIK,IAAE,iBAAiB,cAAe,MAAI,KAAK,gBAAgB,GAAG,CAAC,GAAEL,GAAG,MAAIH,GAAE,gBAAiB,CAAAA,OAAG;AAAC,cAAMK,KAAEL,KAAE,MAAI,KAAK,iBAAiB,IAAE,IAAE,MAAI,KAAK,gBAAgB,GAAEO,MAAEP,KAAE,MAAI,KAAK,iBAAiB,KAAE,IAAE,MAAI;AAAA,QAAC;AAAE,QAAAA,MAAG,QAAM,KAAK,UAAQ,KAAK,OAAO,6BAA6B,GAAE,KAAK,uBAAqBA,MAAG,KAAK,kBAAkB,GAAE,KAAK,mBAAmB,GAAE,KAAK,oBAAoB,YAAUK,IAAE,KAAK,oBAAoB,UAAQE,OAAG,KAAK,sBAAoBC,IAAE,UAAU,2BAA2BH,IAAEE,GAAC;AAAA,MAAC,GAAGE,EAAC,GAAEN,GAAEH,GAAE,KAAK,mBAAmB,WAAU,IAAI,GAAEG,GAAG,MAAIH,GAAE,wCAAyC,MAAI,KAAK,mBAAmB,CAAE,GAAEG,GAAG,MAAI,CAAC,KAAK,eAAc,KAAK,kBAAkB,GAAI,MAAI;AAAC,aAAK,gBAAgB,GAAE,KAAK,oBAAkB;AAAA,MAAE,CAAE,GAAEA,GAAG,MAAE;AAJr8K;AAIu8K,qBAAAG,IAAE,UAAF,mBAAS;AAAA,SAAgB,MAAI,KAAK,gBAAgB,CAAE,GAAEH,GAAG,MAAIE,GAAE,eAAgB,CAAAL,OAAG,KAAK,sBAAsBA,EAAC,CAAE,GAAEG,GAAG,MAAIE,GAAE,qBAAsB,MAAI,KAAK,oBAAoB,CAAE,GAAEF,GAAG,MAAIH,GAAE,WAAY,MAAI,KAAK,gBAAgB,CAAE,GAAEG,GAAG,MAAIH,GAAE,iBAAkB,MAAI,KAAK,sBAAsB,CAAE,GAAEG,GAAG,MAAIH,GAAE,aAAc,CAAAA,OAAG,QAAM,KAAK,WAAS,KAAK,OAAO,cAAYA,GAAG,CAAC,CAAC,GAAE,KAAK,oBAAoB,GAAE,KAAK,mBAAiB,IAAI,EAAE,KAAK,UAASM,IAAE,oBAAmBA,IAAE,MAAM,eAAc,CAACA,IAAE,MAAM,sBAAoB,KAAK,cAAa,KAAK,eAAc,KAAK,gBAAcA,IAAE,iBAAeA,IAAE,mBAAkBI,GAAEJ,IAAE,WAAW,GAAE,KAAK,MAAM,eAAc,EAAC,uBAAsB,KAAK,0BAA0B,GAAE,sBAAqB,KAAK,MAAK,mBAAkB,KAAK,OAAK,IAAE,CAAC,GAAE,KAAK,oBAAkB,IAAIG,GAAE,KAAK,MAAM,KAAI,KAAK,UAASH,IAAE,mBAAmB,kBAAiBA,IAAE,MAAM,aAAYA,IAAE,mBAAmB,kBAAiB,KAAK,MAAM,GAAE,KAAK,SAAO,IAAI,EAAED,IAAEE,IAAE,KAAK,uBAAsB,KAAK,mBAAkB,KAAK,kBAAiBjB,IAAEU,GAAE,aAAa,CAAAK,OAAGL,GAAE,aAAaK,EAAC,GAAI,CAAAA,OAAGL,GAAE,gBAAgBK,EAAC,GAAI,CAAAL,OAAG,KAAK,gBAAgBA,EAAC,GAAI,CAAAA,OAAG,KAAK,oBAAoBA,IAAEW,GAAE,IAAI,GAAI,CAAAX,OAAG,KAAK,aAAaA,EAAC,GAAI,MAAI,CAAC,KAAK,sBAAsB,MAAO,CAAAK,OAAGL,GAAE,uBAAqBA,GAAE,qBAAqBK,EAAC,IAAE,OAAML,MAAA,gBAAAA,GAAG,wBAAqB,CAAAK,OAAGL,GAAE,qBAAqBK,EAAC,IAAE,MAAM,GAAE,KAAK,OAAO,oBAAoB,KAAK,MAAM,eAAc,KAAK,iBAAe,KAAK,YAAY,GAAE,KAAK,OAAO,uBAAuB,CAAC,CAACL,GAAE,gBAAgB,GAAE,KAAK,OAAO,mBAAmB,CAAC,CAACA,GAAE,iBAAiB,GAAE,QAAME,IAAE;AAAC,mBAAUF,MAAKE;AAAE,eAAK,SAASF,GAAE,MAAKA,GAAE,GAAG;AAAE,aAAK,WAAWE,GAAE,GAAG,UAAU,CAAAF,OAAG;AAAC,qBAAUK,MAAKL,GAAE;AAAQ,iBAAK,YAAYK,GAAE,GAAG;AAAE,qBAAUA,MAAKL,GAAE;AAAM,iBAAK,SAASK,GAAE,MAAKA,GAAE,GAAG;AAAA,QAAC,CAAE,CAAC;AAAA,MAAC;AAAC,WAAK,kBAAkB;AAAA,IAAC,CAAE,CAAC,GAAE,KAAK,YAAU,EAAE,GAAE,GAAE,GAAE,KAAK,QAAQ;AAAA,EAAC;AAAA,EAAC,6BAA6BL,IAAE;AAAC,UAAMK,KAAE,KAAK,QAAOE,KAAE,KAAK;AAAU,YAAMF,OAAGE,MAAA,gBAAAA,GAAG,kCAA+B,KAAK,iCAAiC,MAAM,GAAEP,GAAE,OAAQ,CAAAA,OAAG;AAAC,YAAMO,MAAEF,GAAE,QAAQL,EAAC;AAAE,cAAMO,OAAG,KAAK,iCAAiC,KAAKA,GAAC;AAAA,IAAC,CAAE,GAAEA,GAAE,6BAA6B,KAAK,gCAAgC,GAAE,KAAK,kBAAgB;AAAA,EAAG;AAAA,EAAC,UAAS;AAAC,SAAK,kBAAkB,GAAE,KAAK,wBAAsB,KAAK,UAAQ,OAAG,KAAK,oBAAoB,OAAO,GAAE,KAAK,sBAAoB,OAAM,KAAK,SAAS,QAAQ,GAAE,KAAK,cAAY,MAAK,EAAE,MAAM,GAAE,QAAMK,OAAIA,GAAE,KAAK,GAAEA,KAAE;AAAA,EAAK;AAAA,EAAC,yBAAwB;AAAC,QAAG,QAAM,KAAK,yBAAuB,CAAC,KAAK,WAAS,CAAC,KAAK,UAAU;AAAgB,aAAM,CAAC;AAAE,UAAMZ,KAAE,KAAK,uBAAsBK,KAAE,KAAK,SAAQE,KAAE,KAAK,MAAM;AAAc,WAAO,KAAK,UAAU,gBAAgB,IAAK,CAAAA,QAAG;AAAC,YAAMD,MAAEO,GAAEb,IAAEO,GAAC,GAAEL,KAAEW,GAAER,IAAEE,GAAC;AAAE,aAAOD,OAAG,KAAGJ,MAAG,IAAE,EAAC,OAAMI,KAAE,MAAKD,GAAEH,EAAC,EAAE,MAAK,OAAMG,GAAEH,EAAC,GAAE,sBAAqBF,GAAEM,GAAC,EAAC,IAAE;AAAA,IAAI,CAAE,EAAE,OAAQ,CAAAN,OAAG,QAAMA,MAAGA,GAAE,SAAOO,EAAE;AAAA,EAAC;AAAA,EAAC,wBAAuB;AAAC,UAAMP,KAAE,KAAK,uBAAuB;AAAE,MAAE,KAAK,qBAAoBA,EAAC,MAAI,KAAK,sBAAoBA,IAAE,KAAK,2BAAyB,OAAG,KAAK,mBAAmB;AAAA,EAAE;AAAA,EAAC,gBAAe;AAAC,SAAK,2BAAyB,MAAG,KAAK,mBAAmB;AAAA,EAAC;AAAA,EAAC,iBAAiBA,IAAE;AAAC,UAAMK,KAAEE,GAAE;AAAE,IAAAO,GAAEd,IAAEK,IAAE,KAAK,UAAU,KAAK,sBAAsB,IAAE,KAAK,gBAAcA,KAAE,KAAK,gBAAc;AAAA,EAAI;AAAA,EAAC,wBAAwBL,IAAE;AAAC,YAAM,KAAK,qBAAmB,KAAK,iBAAiB,mBAAmBA,EAAC,GAAE,QAAM,KAAK,WAAS,KAAK,OAAO,yBAAuB,EAAE,kBAAgB,KAAK,iBAAiB,gBAAgB,GAAE,KAAK,OAAO,cAAc;AAAA,EAAG;AAAA,EAAC,mBAAmBA,IAAE;AAAC,SAAK,iBAAiBA,EAAC,GAAE,QAAM,KAAK,oBAAkB,QAAM,KAAK,WAAS,KAAK,iBAAiB,mBAAmB,KAAK,aAAa,GAAE,KAAK,OAAO,0BAA0B,IAAG,KAAK,gBAAgB;AAAA,EAAC;AAAA,EAAC,kBAAiB;AAAC,SAAK,eAAa,MAAG,KAAK,aAAa,kBAAkB,GAAE,KAAK,kBAAkB;AAAA,EAAC;AAAA,EAAC,SAASA,IAAEK,IAAE;AAAC,QAAG,QAAM,KAAK;AAAO;AAAO,UAAME,KAAE,KAAK,kBAAkB,mBAAmBP,IAAEK,EAAC,GAAEC,MAAE,KAAK,OAAO,qBAAqBC,GAAE,IAAGA,GAAE,GAAG;AAAE,SAAK,kBAAkB,YAAYD,KAAEC,EAAC,GAAE,KAAK,kBAAkB,GAAE,KAAK,aAAa,iBAAiB;AAAA,EAAC;AAAA,EAAC,YAAYP,IAAE;AAAC,UAAMK,KAAE,KAAK,kBAAkB,iBAAiBL,EAAC;AAAE,QAAG,QAAMK,IAAE;AAAC,UAAG,QAAM,KAAK;AAAO,cAAM,IAAI,MAAM,qEAAqE;AAAE;AAAC,cAAML,KAAE,CAACA,IAAEK,OAAI;AAJ9gT;AAI+gT,eAAK,UAAU,WAAWA,EAAC,GAAE,KAAK,kBAAkB,OAAOA,EAAC,GAAE,KAAK,kBAAkB,WAAWL,EAAC,GAAE,KAAK,UAAU,wBAAsB,QAAMA,MAAG,KAAK,UAAU,qBAAqBA,EAAC,IAAE,gBAAK,WAAU,wBAAf,6BAAqC,gBAAK,WAAU,sBAAf,4BAAmCK;AAAA,QAAG,GAAEE,KAAE,CAACP,IAAEK,IAAEE,QAAI;AAAC,eAAK,kBAAkB,gBAAgBP,IAAEK,IAAEE,GAAC,GAAE,KAAK,UAAU,mBAAiB,KAAK,UAAU,gBAAgBF,IAAEE,GAAC;AAAA,QAAC;AAAE,aAAK,OAAO,0BAA0BF,IAAEL,IAAEO,EAAC,GAAE,KAAK,aAAa,iBAAiB;AAAA,MAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,uBAAuBP,IAAEK,IAAE;AAAC,UAAME,KAAE,KAAK;AAAO,QAAG,QAAMA,MAAG,QAAMA,GAAE,YAAU,QAAMF;AAAE,aAAO;AAAK,SAAK,SAAS,OAAOA,EAAC,MAAI,GAAEL,IAAEK,IAAE,GAAE,KAAK,QAAQ,GAAEL,KAAE;AAAG,UAAMM,MAAE,KAAK;AAAsB,WAAOA,IAAE,MAAM,GAAE,EAAEN,IAAEO,GAAE,UAASA,IAAG,CAAAP,OAAGM,IAAE,KAAKN,GAAE,KAAK,CAAE,GAAEM,IAAE,WAASA,IAAE,OAAQ,CAAAN,OAAGO,GAAE,uBAAuBP,EAAC,CAAE,GAAE,KAAK,gBAAgB,IAAGM;AAAA,EAAC;AAAA,EAAC,wBAAuB;AAAC,YAAM,KAAK,UAAQ,KAAK,OAAO,sBAAsB;AAAA,EAAC;AAAA,EAAC,aAAaN,IAAE;AAAC,WAAO,QAAM,KAAK,mBAAiB,KAAK,iBAAiB,aAAaA,EAAC,IAAE;AAAA,EAAI;AAAA,EAAC,sBAAsBA,IAAE;AAAC,YAAM,KAAK,WAAS,KAAK,OAAO,oBAAoBA,IAAE,KAAK,iBAAe,KAAK,YAAY,GAAE,KAAK,gBAAgB;AAAA,EAAE;AAAA,EAAC,sBAAqB;AAAC,UAAMA,KAAE;AAAe,SAAK,SAAS,OAAOA,EAAC,GAAE,KAAK,yBAAuB,KAAK,SAAS,IAAI,KAAK,UAAU,KAAK,eAAe,GAAG,gBAAgB,CAAAA,OAAG,KAAK,oBAAoBA,EAAC,CAAE,GAAEA,EAAC;AAAA,EAAC;AAAA,EAAC,sBAAqB;AAAC,SAAK,yBAAuB,KAAK,kBAAkB,MAAM,GAAE,KAAK,oBAAoB,GAAE,KAAK,gBAAgB;AAAA,EAAC;AAAA,EAAC,oBAAoBA,IAAE;AAAC,SAAK,2BAA2BA,GAAE,QAAOA,GAAE,gBAAgB,GAAE,KAAK,gBAAgB;AAAA,EAAC;AAAA,EAAC,2BAA2BA,IAAEK,IAAE;AAAC,UAAME,KAAE,KAAK;AAAO,QAAG,QAAMA;AAAE;AAAO,YAAMA,GAAE,YAAU,GAAEP,IAAEK,IAAE,GAAE,KAAK,QAAQ,KAAG,KAAK,kBAAkB,QAAS,CAACL,IAAEK,OAAI;AAAC,YAAMC,MAAEC,GAAE,QAAQF,EAAC;AAAE,cAAMC,OAAG,EAAE,GAAEA,IAAE,GAAG,KAAG,KAAK,kBAAkB,IAAID,IAAE,KAAK,cAAcC,GAAC,CAAC;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,qBAAoB;AAAC,SAAK,sBAAoB,MAAG,KAAK,kBAAkB,GAAE,KAAK,kBAAkB;AAAA,EAAC;AAAA,EAAC,SAASN,IAAEK,IAAE;AAAC,WAAO,KAAK,WAAW,KAAKL,IAAEK,EAAC;AAAA,EAAC;AAAA,EAAC,WAAWL,IAAEK,IAAE;AAAC,WAAO,KAAK,WAAW,QAAQL,IAAEK,EAAC;AAAA,EAAC;AAAA,EAAC,IAAI,oBAAmB;AAAC,WAAM,sBAAoB,KAAK,MAAM;AAAA,EAAI;AAAA,EAAC,IAAI,wBAAuB;AAAC,UAAK,EAAC,UAASL,IAAE,UAASK,GAAC,IAAES,GAAE,KAAK,KAAK;AAAE,WAAO,KAAK,2BAAyBd,KAAE,KAAGK,KAAE;AAAA,EAAE;AAAA,EAAC,IAAI,yBAAwB;AAAC,WAAO,QAAM,KAAK,UAAQ,KAAK,UAAU,iBAAe,KAAK,OAAO,yBAAuB,KAAK,iBAAe;AAAA,EAAC;AAAA,EAAC,MAAM,cAAcL,IAAEK,IAAE;AAAC,YAAOL,GAAE,QAAM,IAAE,KAAK,oBAAkB,KAAK,aAAa,aAAaA,IAAEK,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,gBAAgBL,IAAEK,IAAEE,IAAE;AAAC,YAAOP,GAAE,QAAM,IAAE,KAAK,oBAAkB,KAAK,aAAa,eAAeA,IAAEK,IAAEE,EAAC;AAAA,EAAC;AAAA,EAAC,IAAI,aAAY;AAAC,WAAO,QAAM,KAAK,SAAO,KAAK,OAAO,WAAS;AAAA,EAAC;AAAA,EAAC,IAAI,gBAAgBP,IAAE;AAAC,SAAK,UAAU,qBAAmB,KAAK,UAAU,qBAAmB,KAAK,mBAAiB,OAAI,KAAK,mBAAiBA;AAAA,EAAC;AAAA,EAAC,QAAQA,IAAEK,IAAE;AAAC,WAAO,KAAK,UAAU,iBAAe,KAAK,UAAU,WAAS,QAAM,KAAK,UAAQ,KAAK,yBAAyBL,IAAEK,EAAC,GAAE,KAAK,OAAO,eAAa,KAAG,KAAG,KAAK,gBAAgB,GAAE,KAAK,kBAAkB,GAAE,KAAG;AAAA,EAAE;AAAA,EAAC,yBAAyBL,IAAEK,IAAE;AAAC,QAAG;AAAC,WAAK,SAASL,IAAEK,EAAC;AAAA,IAAC,SAAOE,IAAE;AAAC,WAAK,cAAY,KAAGjB,GAAE,MAAM,8BAA4BiB,EAAC,IAAE,OAAK,KAAK,eAAajB,GAAE,MAAM,uEAAuE,GAAE,KAAK;AAAA,IAAa;AAAA,EAAC;AAAA,EAAC,SAASU,IAAEK,IAAE;AAAC,SAAK,uBAAqB,KAAK,kBAAkB,GAAE,QAAM,KAAK,eAAa,QAAM,KAAK,WAAS,KAAK,gBAAgB,GAAE,KAAK,mBAAiB,KAAK,sBAAsBL,EAAC,MAAI,KAAK,kBAAgB,QAAI,KAAK,sBAAoBA,GAAE,UAAQ,QAAIA,GAAE,IAAK,MAAI,KAAK,cAAcA,EAAC,CAAE,GAAE,KAAK,kBAAkB,GAAEA,GAAE,IAAK,MAAI,KAAK,cAAcA,EAAC,CAAE,GAAE,KAAK,sBAAoBA,GAAE,UAAQ,OAAIA,GAAE,IAAK,MAAI,KAAK,cAAcA,IAAEK,EAAC,CAAE,GAAE,KAAK,WAAW,QAAQL,EAAC,GAAEA,GAAE,IAAK,MAAI,KAAK,eAAe,CAAE,GAAEK,GAAE,mBAAiB,KAAK,OAAO,cAAaA,GAAE,mBAAiB,KAAK,mBAAkBL,GAAE,IAAK,MAAI,KAAK,aAAa,kBAAkBA,EAAC,CAAE,GAAE,KAAK,kBAAkB;AAAA,EAAE;AAAA,EAAC,cAAcA,IAAE;AAAC,QAAG,QAAM,KAAK;AAAO,aAAM;AAAG,QAAG,KAAK,OAAO,OAAM;AAAC,WAAK,iBAAiB,MAAM,GAAE,KAAK,OAAO,OAAO,MAAM,KAAK,KAAK,cAAc,KAAK,CAAC,GAAEA,IAAG,CAAAA,OAAG,KAAK,6BAA6BA,EAAC,CAAE,GAAE,KAAK,qBAAmB,KAAK,iBAAiB,UAAU,KAAK,OAAO,QAAQ,IAAI,MAAK,KAAK,OAAO,QAAQ,IAAI,MAAM,GAAE,KAAK,iBAAiB,UAAU,KAAK,OAAO,QAAQ,QAAQ,MAAK,KAAK,OAAO,QAAQ,QAAQ,MAAM;AAAG,YAAMK,KAAE,KAAK,OAAO,gBAAgB;AAAc,WAAK,OAAO,aAAWA,OAAI,KAAK,KAAK,eAAe,KAAG,KAAK,KAAK,iBAAgBA,EAAC;AAAA,IAAC;AAAC,WAAO,KAAK,OAAO,KAAK;AAAA,EAAC;AAAA,EAAC,iBAAgB;AAAC,WAAM,EAAE,QAAM,KAAK,UAAQ,KAAK,cAAc,OAAK,KAAG,KAAK,OAAO,QAAQ,IAAI,SAAO,MAAI,KAAK,OAAO,SAAS;AAAA,EAAC;AAAA,EAAC,oBAAmB;AAAC,QAAG,CAAC,KAAK,8BAA4B,QAAM,KAAK,UAAQ,QAAM,KAAK;AAAiB;AAAO,UAAML,KAAE,CAAC,KAAK,OAAO,WAAUK,KAAE,KAAK,gBAAc,KAAK,UAASE,KAAE,KAAK,OAAO;AAAgB,QAAGA,GAAE,WAASA,GAAE,YAAUF,KAAE,GAAE,KAAK,OAAO,eAAaT,IAAE;AAAC,UAAG,KAAK,eAAaF;AAAE;AAAO,WAAK,eAAaG,IAAE,KAAK,oBAAkB;AAAA,IAAE,WAASG,MAAGO,GAAE,WAASF,IAAE;AAAC,UAAGE,GAAE,iBAAe,KAAK,eAAad,MAAG,KAAK;AAAkB;AAAO,YAAMO,KAAE,KAAK,IAAI,IAAG,KAAK,IAAIK,KAAEE,GAAE,UAAS,KAAK,CAAC;AAAE,WAAK,eAAaP;AAAE,YAAMM,MAAE,KAAK,MAAKJ,KAAE,KAAK,OAAO,mBAAmBG,IAAEC,GAAC;AAAE,MAAAJ,OAAII,QAAI,KAAK,cAAYJ,KAAE,KAAK,UAAS,KAAK,oBAAkB;AAAA,IAAG,OAAK;AAAC,UAAG,EAAEK,GAAE,WAASF,KAAEV,MAAGK,MAAGO,GAAE,WAASF;AAAG;AAAO,UAAG,KAAK,eAAaX;AAAE;AAAO,WAAK,eAAa,IAAE,QAAKa,GAAE,WAASF,KAAE,IAAG,KAAK,oBAAkB;AAAA,IAAE;AAAC,SAAK,cAAY,KAAK,IAAIZ,IAAE,KAAK,IAAIC,IAAE,KAAK,WAAW,CAAC,GAAE,KAAK,iBAAiB,2BAA2B,KAAK,IAAI,GAAE,KAAK,OAAO,cAAc;AAAA,EAAC;AAAA,EAAC,cAAcM,IAAE;AAAC,UAAMK,KAAE,KAAK;AAAO,QAAG,QAAMA;AAAE,aAAM;AAAG,WAAK,KAAK,iBAAiB,SAAO,KAAG,CAACL,GAAE,QAAM;AAAC,YAAMO,KAAE,KAAK,iBAAiB,IAAI;AAAE,eAAQD,MAAED,GAAE,UAAUE,EAAC,GAAE,QAAMD,QAAI,CAAC,KAAK,UAAU,aAAaA,IAAE,KAAK,KAAG,KAAK,qBAAqBA,GAAC,IAAGA,MAAED,GAAE,UAAUC,IAAE,KAAK;AAAE,YAAG,KAAK,oBAAoBA,KAAEK,GAAE,IAAI,GAAE;AAAC,UAAAX,GAAE,aAAa;AAAE;AAAA,QAAK;AAAA,IAAC;AAAC,WAAOA,GAAE;AAAA,EAAa;AAAA,EAAC,cAAcA,IAAEK,IAAE;AAAC,QAAG,QAAM,KAAK;AAAO,aAAM;AAAG,QAAIE,MAAG,KAAK,UAAQhB,KAAEC,MAAG,KAAK,cAAc;AAAK,UAAMc,MAAE,KAAK,OAAO;AAAQ,SAAIA,IAAE,OAAO,QAAQ,KAAK,aAAY,IAAI,GAAEA,IAAE,SAAO,CAAC,GAAEA,IAAE,OAAO,SAAO,KAAG,CAACN,GAAE;AAAM,WAAK,UAAU,WAAWM,IAAE,OAAO,IAAI,CAAC,GAAEN,GAAE,aAAa;AAAE,WAAKM,IAAE,OAAO,SAAO,KAAG,CAACN,GAAE,QAAM;AAAC,YAAMK,KAAE,KAAK,OAAO,QAAQC,IAAE,OAAO,IAAI,CAAC;AAAE,cAAMD,OAAI,KAAK,kBAAkBA,EAAC,GAAEL,GAAE,aAAa;AAAA,IAAE;AAAC,WAAKM,IAAE,IAAI,SAAO,KAAG,CAACN,GAAE,QAAMO,KAAE,KAAG;AAAC,QAAEA;AAAE,YAAML,KAAE,KAAK,OAAO,QAAQI,IAAE,IAAI,KAAK,CAAC;AAAE,UAAG,QAAMJ,MAAGA,GAAE,eAAaI,GAAE,UAAQ,CAAC,KAAK,kBAAkBD,EAAC;AAAE;AAAM,MAAAC,IAAE,IAAI,IAAI,GAAE,KAAK,UAAUJ,EAAC,GAAEF,GAAE,aAAa;AAAA,IAAC;AAAC,WAAOA,GAAE;AAAA,EAAa;AAAA,EAAC,kBAAiB;AAAC,SAAK,cAAc,QAAS,CAAAA,OAAGA,GAAE,MAAM,CAAE,GAAE,KAAK,cAAc,MAAM,GAAE,KAAK,eAAe,QAAS,CAAAA,OAAGA,GAAE,MAAM,CAAE,GAAE,KAAK,eAAe,MAAM;AAAA,EAAC;AAAA,EAAC,YAAYA,IAAE;AAAC,UAAMK,KAAE,KAAK,cAAc,IAAIL,EAAC;AAAE,IAAAK,OAAIA,GAAE,MAAM,GAAE,KAAK,cAAc,OAAOL,EAAC;AAAA,EAAE;AAAA,EAAC,kBAAkBA,IAAE;AAAC,WAAM,EAAE,CAAC,KAAK,WAASA,GAAE,kBAAgB,KAAK,cAAc,QAAMR,QAAK,KAAK,oBAAkBuB,MAAG,CAAC,KAAK,qBAAqB;AAAA,EAAK;AAAA,EAAC,oBAAmB;AAAC,QAAIf,KAAE,OAAGK,KAAE;AAAE,QAAG,KAAK,WAAU;AAAC,UAAG,KAAK,UAAU,gBAAe;AAAC,cAAME,MAAG,QAAM,KAAK,SAAO,KAAK,OAAO,eAAa,KAAG,KAAG,QAAM,KAAK,SAAO,KAAK,OAAO,QAAQ,IAAI,SAAO,KAAG,IAAE,KAAK,cAAc;AAAK,QAAAP,KAAE,CAAC,EAAEO,KAAE,KAAG,KAAK,eAAe,OAAK,KAAG,KAAK,uBAAqB,KAAK,gBAAc,KAAK,WAAW,WAAS,KAAK,gBAAc,KAAK,aAAa,6BAA2B,QAAM,KAAK,UAAQ,KAAK,OAAO,gBAAe,MAAIA,OAAI,KAAK,uBAAqB,IAAG,KAAK,uBAAqB,KAAK,IAAIA,IAAE,KAAK,oBAAoB,GAAEF,KAAE,IAAEE,KAAE,KAAK;AAAA,MAAoB;AAAM,QAAAP,KAAE,KAAK,cAAaK,KAAEL,KAAE,IAAE;AAAE,WAAK,WAASA,IAAE,KAAK,mBAAiBK;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,kBAAiB;AAAC,QAAG,CAAC,KAAK,gBAAc,QAAM,KAAK,UAAQ,QAAM,KAAK;AAAiB;AAAO,UAAML,KAAE,KAAK,UAAU,MAAK,EAAC,eAAcK,IAAE,oBAAmBE,GAAC,IAAEP,GAAE;AAAM,SAAK,mBAAiB,KAAGK,GAAE,sBAAoB,IAAG,KAAK,iBAAiB,aAAaA,IAAE,CAACE,MAAG,KAAK,YAAY,GAAE,KAAK,iBAAiB,mBAAmBP,GAAE,iBAAiB,MAAM,cAAc,GAAE,KAAK,iBAAiB,2BAA2B,KAAK,IAAI,GAAE,KAAK,OAAO,0BAA0B,GAAE,KAAK,OAAO,yBAAuB,EAAE,kBAAgB,KAAK,iBAAiB,gBAAgB,GAAE,KAAK,OAAO,cAAc,GAAE,KAAK,oBAAkB,OAAG,KAAK,kBAAgB,MAAG,KAAK,eAAa,OAAG,KAAK,aAAa,iBAAiB;AAAA,EAAC;AAAA,EAAC,4BAA2B;AAAC,WAAO,KAAK,UAAU,KAAK,mBAAmB,iBAAiB,eAAa,IAAE,IAAE,KAAK,UAAU;AAAA,EAAqB;AAAA,EAAC,IAAI,OAAM;AAAC,WAAO,KAAK,cAAY,KAAK;AAAA,EAAQ;AAAA,EAAC,IAAI,WAAU;AAAC,UAAMA,KAAE,KAAK,UAAU,WAAUK,KAAE,KAAK,UAAU,KAAK,mBAAmB,iBAAiB;AAAa,WAAO,KAAK,qBAAmB,KAAGL,KAAE,IAAEA,KAAE,KAAGK;AAAA,EAAC;AAAA,EAAC,IAAI,iBAAgB;AAAC,QAAG,KAAK;AAAmB,aAAO;AAAE,UAAML,KAAE,KAAK,UAAU,KAAK,mBAAmB;AAAiB,YAAO,KAAK,IAAIA,GAAE,cAAa,GAAE,IAAEA,GAAE,eAAa,MAAGA,GAAE;AAAA,EAAW;AAAA,EAAC,kBAAkBA,IAAE;AAAC,WAAO,QAAM,KAAK,UAAQ,KAAK,OAAO,kBAAkBA,GAAE,KAAK;AAAA,EAAC;AAAA,EAAC,iBAAiBA,IAAE;AAAC,YAAM,KAAK,UAAQ,KAAK,OAAO,8BAA8BA,EAAC;AAAA,EAAC;AAAA,EAAC,6BAA6BA,IAAE;AAAC,YAAM,KAAK,UAAQ,KAAK,OAAO,6BAA6BA,EAAC;AAAA,EAAC;AAAA,EAAC,2BAA0B;AAAC,YAAM,KAAK,UAAQ,KAAK,OAAO,yBAAyB;AAAA,EAAC;AAAA,EAAC,uBAAsB;AAAC,YAAM,KAAK,UAAQ,KAAK,OAAO,uBAAuB,CAAC,CAAC,KAAK,UAAU,gBAAgB,GAAE,KAAK,kBAAgB;AAAA,EAAE;AAAA,EAAC,gBAAgBA,IAAE;AAAC,WAAM,EAAE,CAAC,KAAK,aAAa,eAAeA,EAAC,KAAG,KAAK,gBAAgBA,EAAC,OAAK,EAAE,QAAM,KAAK,UAAQ,CAAC,KAAK,OAAO,kBAAkBA,GAAE,KAAK,MAAI,KAAK,qBAAqBA,EAAC;AAAA,EAAE;AAAA,EAAC,gBAAgBA,IAAE;AAAC,QAAG,QAAM,KAAK;AAAiB,aAAM;AAAG,UAAMK,KAAE,KAAK;AAAe,QAAGA,MAAG,KAAG,CAAC,KAAK,aAAa,qBAAqBL,EAAC;AAAE,aAAM;AAAG,WAAO,KAAK,IAAI,KAAK,iBAAiB,2BAA2BA,EAAC,CAAC,IAAE,KAAK,iBAAiB,eAAa,KAAK,iBAAiB,cAAY,KAAK,iBAAiB,eAAaK;AAAA,EAAC;AAAA,EAAC,oBAAmB;AAAC,SAAK,sBAAoB;AAAG,UAAML,KAAE,KAAK;AAAO,QAAG,KAAK,oBAAkB,QAAMA,MAAG,QAAM,KAAK;AAAiB;AAAO,SAAK,gBAAgB,GAAE,KAAK,6BAA2B,KAAK,sBAAoB,KAAK,uBAAuB,GAAE,KAAK,2BAAyB;AAAI,UAAMK,KAAE,EAAC,kBAAiB,KAAK,UAAU,2BAA0B,wCAAuC,KAAK,UAAU,wCAAuC,kBAAiB,KAAK,UAAU,sBAAqB,iBAAgB,KAAK,2BAA0B;AAAE,SAAK,cAAY,IAAIM,GAAE,KAAK,OAAM,KAAK,sBAAqBrB,IAAE,KAAK,wBAAuB,KAAK,qBAAoBe,EAAC,GAAEL,GAAE,cAAc,GAAE,KAAK,aAAa,iBAAkB,CAAAA,OAAG,KAAK,qBAAqBA,EAAC,GAAI,CAACA,IAAEK,OAAI,KAAK,aAAaL,IAAEK,IAAEW,GAAE,OAAO,GAAGhB,IAAE,EAAC,aAAY,KAAK,iBAAiB,YAAW,CAAC,GAAE,KAAK,kBAAkB;AAAA,EAAC;AAAA,EAAC,gBAAe;AAAC,WAAO,QAAM,KAAK,eAAa,QAAM,KAAK;AAAA,EAAM;AAAA,EAAC,oBAAmB;AAAC,SAAK,cAAc,MAAI,KAAK,sBAAsB,UAAU,GAAE,KAAK,qBAAqB,UAAU,GAAE,KAAK,WAAW,UAAU,GAAE,KAAK,gBAAgB,GAAE,KAAK,cAAY,MAAK,KAAK,kBAAkB;AAAA,EAAE;AAAA,EAAC,sBAAsBA,IAAE;AAAC,UAAMK,KAAE,KAAK;AAAO,QAAG,QAAMA,MAAG,QAAM,KAAK;AAAiB,aAAM;AAAG,MAAE,MAAM,GAAE,KAAK,UAAU,qBAAqB,CAAC;AAAE,UAAME,KAAE,MAAI,KAAK,iBAAiB,aAAYD,MAAEC,KAAE,MAAI,QAAG,CAAAP,OAAG,KAAK,gBAAgBA,EAAC;AAAE,WAAO,EAAE,cAAe,CAAAA,OAAG;AAAC,YAAMO,MAAEF,GAAE,QAAQL,EAAC;AAAE,aAAO,QAAMO,OAAG,CAACF,GAAE,kBAAkBL,EAAC,KAAGM,IAAEC,GAAC,KAAG,CAAC,KAAK,qBAAqBA,GAAC;AAAA,IAAC,CAAE,GAAE,EAAE,SAAO,KAAG,KAAK,aAAa,kBAAkB,GAAE,KAAK,aAAa,GAAEP,IAAEgB,GAAE,GAAG,GAAE,EAAET,MAAG,KAAK,iBAAe,OAAK,MAAI,EAAE,WAAS,EAAE,MAAM,GAAE;AAAA,EAAI;AAAA,EAAC,iBAAiBP,IAAE;AAAC,MAAE,KAAKA,EAAC;AAAA,EAAC;AAAA,EAAC,oBAAmB;AAAC,SAAK,aAAa,GAAEiB,IAAED,GAAE,GAAG;AAAA,EAAC;AAAA,EAAC,aAAahB,IAAEK,IAAEE,IAAE;AAAC,UAAMD,MAAEN,GAAE;AAAO,QAAG,MAAIM,OAAG,CAACD,GAAE,MAAK;AAAC,WAAI,QAAM,KAAK,UAAQ,KAAK,OAAO,cAAc,GAAEL,GAAE,SAAO,KAAG,CAACK,GAAE,QAAM;AAAC,cAAMC,MAAEN,GAAE,IAAI,GAAEE,KAAE,KAAK;AAAO,QAAAK,OAAIS,GAAE,WAAS,KAAK,UAAU,sBAAoB,QAAMd,MAAGA,GAAE,kBAAkBI,GAAC,IAAE,KAAK,UAAU,SAASA,KAAEE,GAAE,SAAQ,IAAE,IAAE,KAAK,UAAU,WAAWF,GAAC,GAAED,GAAE,aAAa;AAAA,MAAC;AAAC,UAAG,KAAK,kBAAkB,OAAK;AAAE,iBAAQA,KAAEL,GAAE,QAAOK,KAAEC,KAAED,MAAI;AAAC,gBAAME,MAAEP,GAAE,KAAKK,EAAC;AAAE,eAAK,kBAAkB,OAAOE,GAAC;AAAA,QAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,aAAaP,IAAE;AAAC,QAAGA,GAAE,UAAU,WAAS,KAAK,eAAe,IAAIA,GAAE,KAAK;AAAE,aAAM;AAAG,UAAMK,KAAE,KAAK,UAAU,oBAAoBL,GAAE,KAAK;AAAE,WAAO,QAAMK,MAAGA,OAAI,KAAK;AAAA,EAAmB;AAAA,EAAC,MAAM,kBAAkBL,IAAE;AAAC,UAAMK,KAAE,IAAI;AAAgB,SAAK,eAAe,IAAIL,GAAE,OAAMK,EAAC,GAAE,KAAK,kBAAkB;AAAE,QAAG;AAAC,YAAME,KAAE,EAAE,KAAK,UAAU,oBAAoBP,GAAE,KAAK,GAAE,KAAK,mBAAmB;AAAE,UAAIM,MAAE;AAAK,MAAAA,MAAEC,KAAE,MAAM,QAAQ,QAAQ,KAAK,UAAU,iBAAiBP,GAAE,KAAK,CAAC,IAAE,MAAM,KAAK,gBAAgBA,IAAE,KAAK,qBAAoBK,GAAE,MAAM,GAAE,MAAM,KAAK,SAAU,MAAI,KAAK,UAAU,iBAAiBL,GAAE,OAAM,EAAC,kBAAiB,KAAK,qBAAoB,eAAcM,IAAC,GAAED,GAAE,MAAM,GAAGA,GAAE,MAAM;AAAA,IAAC,SAAOE,IAAE;AAAC,UAAG,CAAC,EAAEA,EAAC;AAAE,eAAO,KAAK,UAAU,iBAAiBP,GAAE,OAAM,EAAC,kBAAiB,KAAK,qBAAoB,eAAc,CAAC,EAAC,GAAEK,GAAE,MAAM;AAAA,IAAC;AAAC,SAAK,eAAe,OAAOL,GAAE,KAAK,GAAE,KAAK,kBAAkB;AAAA,EAAC;AAAA,EAAC,UAAUA,IAAE;AAAC,QAAG,KAAK,cAAc,IAAIA,GAAE,KAAK;AAAE,aAAO,KAAKV,GAAE,MAAM,0BAAwBU,GAAE,KAAK;AAAE,UAAMK,KAAE,IAAI;AAAgB,SAAK,cAAc,IAAIL,GAAE,OAAMK,EAAC,GAAE,KAAK,kBAAkB,GAAE,KAAK,gBAAgBL,IAAEK,GAAE,MAAM,EAAE,KAAM,CAAAE,OAAG;AAAC,MAAAA,MAAG,QAAM,KAAK,UAAQ,KAAK,cAAc,IAAIP,GAAE,KAAK,MAAIK,OAAI,KAAK,cAAc,OAAOL,GAAE,KAAK,GAAE,KAAK,OAAO,cAAc;AAAA,IAAE,CAAE,EAAE,MAAO,CAAAA,OAAG;AAAC,UAAG,CAAC,EAAEA,EAAC;AAAE,cAAMA;AAAA,IAAC,CAAE,EAAE,QAAS,MAAI;AAAC,WAAK,cAAc,IAAIA,GAAE,KAAK,MAAIK,MAAG,KAAK,cAAc,OAAOL,GAAE,KAAK,GAAE,KAAK,kBAAkB;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,gBAAgBA,IAAEK,IAAE;AAAC,WAAOL,GAAE,eAAaM,GAAE,WAAS,KAAK,cAAcN,IAAEK,EAAC,EAAE,KAAM,MAAI,KAAG,IAAE,KAAK,YAAYL,IAAEK,EAAC,EAAE,KAAM,CAAAA,OAAG,CAACA,OAAIL,GAAE,aAAWM,GAAE,UAAS,KAAI,EAAE,MAAO,CAAAD,OAAG,CAAC,EAAEA,EAAC,MAAIL,GAAE,aAAWM,GAAE,UAAS,KAAI;AAAA,EAAC;AAAA,EAAC,oBAAoBN,IAAEK,IAAE;AAAC,QAAG,KAAK,oBAAkB,QAAM,KAAK;AAAO,aAAM;AAAG,QAAGA,OAAIM,GAAE,QAAM,CAAC,KAAK,OAAO,cAAcX,GAAE,KAAK;AAAE,aAAM;AAAG,UAAMO,KAAE,KAAK,mBAAmBP,EAAC;AAAE,WAAM,CAAC,CAACO,OAAI,KAAK,UAAU,iBAAiBP,IAAEO,IAAEF,EAAC,GAAE,KAAK,WAAW,GAAE;AAAA,EAAG;AAAA,EAAC,mBAAmBL,IAAE;AAAC,UAAMK,KAAE,KAAK,UAAU,kBAAkBL,GAAE,KAAK;AAAE,WAAO,QAAMK,MAAG,QAAMA,GAAE,iBAAe,EAAEA,GAAE,cAAc,kBAAiB,KAAK,mBAAmB,IAAEA,MAAG,KAAK,UAAU,oBAAoBA,EAAC,GAAE;AAAA,EAAK;AAAA,EAAC,aAAY;AAAC,YAAM,KAAK,UAAQ,KAAK,OAAO,cAAc,GAAE,KAAK,aAAa,kBAAkB,GAAE,KAAK,kBAAkB;AAAA,EAAC;AAAA,EAAC,iBAAiBL,IAAEK,IAAE;AAAC,UAAME,KAAE,KAAK;AAAO,YAAMA,MAAGA,GAAE,qBAAqBP,IAAEK,KAAE,IAAE,EAAE;AAAA,EAAC;AAAA,EAAC,MAAM,YAAYL,IAAEK,IAAE;AAAC,QAAG,KAAK,oBAAoBL,IAAEW,GAAE,IAAI;AAAE,aAAM;AAAG,UAAMJ,KAAE,KAAK;AAAU,QAAG,KAAK,mBAAiB,CAACA,GAAE,sBAAoB,CAACA,GAAE;AAAkB,aAAM;AAAG,UAAMD,MAAE,CAACD,IAAEE,QAAI,KAAK,YAAY,aAAaP,IAAEK,IAAEE,GAAC,GAAEL,KAAE,CAACG,IAAEE,QAAI,KAAK,kBAAkB,aAAaP,IAAEK,IAAEE,GAAC,GAAEC,MAAER,GAAE,SAAO,IAAEM,MAAEJ,IAAEgB,KAAE,MAAM,KAAK,SAAU,MAAIX,GAAE,mBAAmBP,IAAEK,IAAEG,GAAC,GAAGH,EAAC;AAAE,QAAG,QAAMa;AAAE,aAAM;AAAG,UAAMR,KAAE,KAAK,qBAAoBN,MAAE,MAAM,KAAK,WAAY,MAAI,KAAK,gBAAgBJ,IAAEU,IAAEL,EAAC,GAAGA,EAAC;AAAE,WAAO,MAAM,KAAK,WAAY,MAAIE,GAAE,kBAAkBP,IAAEkB,IAAE,EAAC,kBAAiBR,IAAE,eAAcN,IAAC,GAAEC,EAAC,GAAGA,EAAC,GAAE,KAAK,WAAW,GAAE;AAAA,EAAE;AAAA,EAAC,cAAcL,IAAEK,IAAE;AAAC,WAAO,KAAK,qBAAoB,KAAK,cAAcL,IAAEK,EAAC,EAAE,MAAO,CAAAL,OAAG;AAAC,YAAM,KAAK,qBAAoBA;AAAA,IAAC,CAAE,EAAE,KAAM,CAAAO,QAAI,KAAK,qBAAoB,KAAK,SAAU,MAAI,KAAK,UAAU,QAAQP,IAAEO,IAAEF,EAAC,GAAGA,EAAC,EAAG,EAAE,KAAM,MAAI;AAAC,WAAK,WAAW,GAAEL,GAAE,aAAWM,GAAE;AAAA,IAAM,CAAE,EAAE,MAAO,CAAAD,OAAG;AAAC,UAAG,CAAC,EAAEA,EAAC;AAAE,cAAMf,GAAE,MAAM,mBAAkB,KAAK,OAAM,wBAAwBU,GAAE,EAAE,KAAIK,EAAC,GAAEL,GAAE,SAAO,MAAG,QAAM,KAAK,UAAQ,KAAK,OAAO,cAAc,GAAEK;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,iBAAiBL,IAAE;AAAC,IAAAA,OAAI,KAAK,YAAU,KAAK,UAAQA,IAAE,KAAK,kBAAkB,GAAEA,MAAG,KAAK,UAAQ,QAAM,KAAK,UAAQ,KAAK,OAAO,iBAAiB;AAAA,EAAE;AAAA,EAAC,UAAUA,IAAE;AAAC,QAAG,KAAK,kBAAkB,IAAIA,GAAE,KAAK;AAAE,aAAO,KAAK,kBAAkB,IAAIA,GAAE,KAAK;AAAE,UAAMK,KAAE,KAAK,cAAcL,EAAC;AAAE,WAAO,KAAK,UAAU,aAAaA,GAAE,KAAK,KAAG,KAAK,kBAAkB,IAAIA,GAAE,OAAMK,EAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,cAAcL,IAAE;AAAC,SAAK,UAAU,IAAEA,GAAE,IAAI,CAAC,GAAE,KAAK,UAAU,IAAEA,GAAE,IAAI,CAAC,GAAE,KAAK,UAAU,IAAEA,GAAE,IAAI,CAAC;AAAE,UAAMK,KAAEL,GAAE,IAAI,CAAC;AAAE,WAAO,KAAK,UAAU,KAAK,eAAe,eAAe,KAAK,WAAUK,EAAC;AAAA,EAAC;AAAA,EAAC,qBAAqBL,IAAE;AAAC,QAAG,CAAC,KAAK;AAAsB,aAAM;AAAG,UAAMK,KAAE,KAAK,UAAUL,EAAC,GAAE,EAAC,UAASO,IAAE,UAASD,IAAC,IAAEQ,GAAE,KAAK,KAAK;AAAE,WAAOT,GAAEA,IAAEE,IAAED,GAAC;AAAA,EAAC;AAAA,EAAC,YAAYN,IAAE;AAAC,IAAAA,GAAE,QAAM,QAAM,KAAK,SAAO,KAAK,OAAO,OAAK,GAAE,KAAK,iBAAeA,GAAE,SAAO,KAAK,aAAYA,GAAE,SAAO,KAAK,gBAAc,KAAK,WAAU,QAAM,KAAK,UAAQ,KAAK,OAAO,YAAYA,EAAC;AAAA,EAAC;AAAA,EAAC,IAAI,OAAM;AAAC,UAAMA,KAAE;AAAK,WAAM,EAAC,OAAM,KAAK,QAAO,IAAI,eAAeK,IAAE;AAAC,MAAAL,GAAE,mBAAiBK,IAAEA,KAAEL,GAAE,kBAAkB,IAAEA,GAAE,cAAc;AAAA,IAAC,GAAE,IAAI,gBAAgBK,IAAE;AAAC,MAAAL,GAAE,kBAAgBK;AAAA,IAAC,GAAE,IAAI,iBAAiBA,IAAE;AAAC,cAAML,GAAE,WAASA,GAAE,OAAO,mBAAiBK;AAAA,IAAE,GAAE,gBAAe,CAAAA,OAAGL,GAAE,gBAAgBK,EAAC,EAAC;AAAA,EAAC;AAAA,EAAC,kBAAiB;AAAC,SAAK,aAAa,kBAAkB,GAAE,KAAK,kBAAkB,GAAE,QAAM,KAAK,UAAQ,KAAK,OAAO,cAAc;AAAA,EAAC;AAAA,EAAC,sBAAsBL,IAAE;AAAC,UAAMK,KAAE,KAAK;AAAO,YAAMA,MAAGA,GAAE,mBAAmBL,EAAC,GAAE,KAAK,gBAAgB;AAAA,EAAC;AAAC;AAAE,EAAE,CAACmB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,iBAAgB,IAAI,GAAE,EAAE,CAACqB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,gBAAe,IAAI,GAAE,EAAE,CAACqB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,8BAA6B,IAAI,GAAE,EAAE,CAACqB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,yBAAwB,IAAI,GAAE,EAAE,CAACqB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,wBAAuB,IAAI,GAAE,EAAE,CAACqB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,aAAY,IAAI,GAAE,EAAE,CAACqB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,YAAW,IAAI,GAAE,EAAE,CAACqB,GAAE,CAAC,GAAErB,GAAE,WAAU,oBAAmB,MAAM,GAAE,EAAE,CAACqB,GAAE,CAAC,GAAErB,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAACqB,GAAE,CAAC,GAAErB,GAAE,WAAU,sBAAqB,MAAM,GAAE,EAAE,CAACqB,GAAE,CAAC,GAAErB,GAAE,WAAU,aAAY,MAAM,GAAE,EAAE,CAACqB,GAAE,CAAC,GAAErB,GAAE,WAAU,SAAQ,IAAI,GAAE,EAAE,CAACqB,GAAE,CAAC,GAAErB,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAACqB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,WAAU,IAAI,GAAE,EAAE,CAACqB,GAAE,CAAC,GAAErB,GAAE,WAAU,oBAAmB,MAAM,GAAE,EAAE,CAACqB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAACqB,GAAE,EAAC,eAAc,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,0BAAyB,MAAM,GAAE,EAAE,CAACqB,GAAE,EAAC,eAAc,KAAE,CAAC,CAAC,GAAErB,GAAE,WAAU,UAAS,MAAM,GAAE,EAAE,CAACqB,GAAE,EAAC,UAAS,MAAG,WAAU,CAAC,EAAC,CAAC,CAAC,GAAErB,GAAE,WAAU,mBAAkB,IAAI,GAAEA,KAAE,EAAE,CAACU,GAAEnB,EAAC,CAAC,GAAES,EAAC;AAAE,IAAM,IAAE,IAAIK,GAAE,EAAC,aAAY,KAAI,CAAC;AAAE,IAAIS;AAAE,SAAS,EAAEZ,IAAEK,IAAE;AAAC,SAAO,QAAML,MAAGA,GAAE,WAASK,GAAE,UAAQL,GAAE,MAAO,CAAAA,OAAGa,GAAER,IAAEL,GAAE,IAAI,KAAG,CAAE;AAAC;AAAC,SAASa,GAAEb,IAAEK,IAAE;AAAC,QAAME,KAAEF,GAAE,YAAY;AAAE,WAAQC,MAAE,GAAEA,MAAEN,GAAE,QAAOM;AAAI,QAAGN,GAAEM,GAAC,EAAE,KAAK,YAAY,MAAIC;AAAE,aAAOD;AAAE,SAAM;AAAE;AAAC,IAAM,IAAE,EAAC,UAAS,KAAG,gBAAe,MAAI,iBAAgB,GAAE;AAA1D,IAA4D,IAAEC,GAAE;AAAE,IAAIS;AAAE,CAAC,SAAShB,IAAE;AAAC,EAAAA,GAAEA,GAAE,MAAI,CAAC,IAAE,OAAMA,GAAEA,GAAE,UAAQ,CAAC,IAAE;AAAS,EAAEgB,OAAIA,KAAE,CAAC,EAAE;AAAE,IAAMI,MAAGtB;;;ACAx71B,IAAMuB,MAAN,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,OAAK,oBAAI,OAAI,KAAK,cAAY,IAAIA;AAAA,EAAC;AAAA,EAAC,IAAI,OAAM;AAAC,WAAO,EAAE,KAAK,WAAW,GAAE,KAAK,KAAK;AAAA,EAAI;AAAA,EAAC,IAAIC,IAAE;AAAC,UAAMC,KAAE,KAAK,KAAK;AAAK,WAAO,KAAK,KAAK,IAAID,EAAC,GAAE,KAAK,KAAK,SAAOC,MAAG,KAAK,YAAY,OAAO,GAAE;AAAA,EAAI;AAAA,EAAC,QAAO;AAAC,SAAK,KAAK,OAAK,MAAI,KAAK,KAAK,MAAM,GAAE,KAAK,YAAY,OAAO;AAAA,EAAE;AAAA,EAAC,OAAOD,IAAE;AAAC,UAAMC,KAAE,KAAK,KAAK,OAAOD,EAAC;AAAE,WAAOC,MAAG,KAAK,YAAY,OAAO,GAAEA;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,WAAO,EAAE,KAAK,WAAW,GAAE,KAAK,KAAK,QAAQ;AAAA,EAAC;AAAA,EAAC,QAAQA,IAAEF,KAAE;AAAC,MAAE,KAAK,WAAW,GAAE,KAAK,KAAK,QAAS,CAACC,IAAEE,OAAID,GAAE,KAAKF,KAAEC,IAAEE,IAAE,IAAI,GAAGH,GAAC;AAAA,EAAC;AAAA,EAAC,IAAIE,IAAE;AAAC,WAAO,EAAE,KAAK,WAAW,GAAE,KAAK,KAAK,IAAIA,EAAC;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,WAAO,EAAE,KAAK,WAAW,GAAE,KAAK,KAAK,KAAK;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,WAAO,EAAE,KAAK,WAAW,GAAE,KAAK,KAAK,OAAO;AAAA,EAAC;AAAA,EAAC,CAAC,OAAO,QAAQ,IAAG;AAAC,WAAO,EAAE,KAAK,WAAW,GAAE,KAAK,KAAK,OAAO,QAAQ,EAAE;AAAA,EAAC;AAAA,EAAC,KAAI,OAAO,WAAW,IAAG;AAAC,WAAO,KAAK,KAAK,OAAO,WAAW;AAAA,EAAC;AAAC;;;ACAv4B,eAAeE,GAAEC,IAAED,IAAEE,KAAE;AAAC,EAAAF,KAAEA,GAAE,MAAM,GAAEC,GAAE,aAAa,MAAM,iCAA+BD,GAAE,uBAAqBG,GAAEF,EAAC;AAAG,QAAMG,MAAEC,GAAEJ,EAAC,GAAEK,KAAEL,GAAE,aAAa,MAAM;AAAmB,EAAAD,GAAE,QAAM,GAAEA,GAAE,MAAII;AAAE,MAAIG,KAAE;AAAK,aAAO;AAAC,UAAMF,KAAE,MAAMJ,GAAE,OAAO,kBAAkBD,IAAEE,GAAC;AAAE,QAAG,QAAMK,KAAEA,KAAEF,KAAEE,GAAE,WAASA,GAAE,SAAS,OAAOF,GAAE,QAAQ,GAAEE,GAAE,wBAAsBF,GAAE,uBAAsB,CAACC,MAAG,CAACD,GAAE;AAAsB;AAAM,IAAAL,GAAE,SAAOI;AAAA,EAAC;AAAC,SAAOG;AAAC;AAAC,SAASF,GAAEJ,IAAE;AAAC,SAAOE,GAAEF,EAAC,IAAEC,GAAED,EAAC;AAAC;AAAC,SAASC,GAAED,IAAE;AAAC,SAAOA,GAAE,aAAa,MAAM,kBAAgB;AAAG;AAAC,SAASE,GAAEH,IAAE;AAAC,SAAOA,GAAE,aAAa,MAAM,+BAA6BQ,GAAE,8BAA4B;AAAC;;;ACA+4B,IAAMC,KAAE;AAAwC,IAAIC,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,qCAAmC,OAAG,KAAK,gCAA8BC,IAAE,KAAK,qCAAmC,MAAK,KAAK,8BAA4B,IAAI,KAAE,KAAK,oBAAkB,IAAI,KAAE,KAAK,uBAAqB,oBAAI,OAAI,KAAK,uBAAqB,MAAK,KAAK,6BAA2B,IAAIC,OAAE,KAAK,4BAA0B,IAAIA,OAAE,KAAK,gCAA8B,MAAK,KAAK,+BAA6B,IAAI,mBAAgB,KAAK,gCAA8B,oBAAI;AAAA,EAAG;AAAA,EAAC,aAAY;AAJ3lE;AAI4lE,SAAK,YAAU,KAAK,iBAAiB,SAAS,2BAA2B,KAAK,MAAM,GAAG,EAAE,GAAE,KAAK,gCAA8B,KAAK,wBAAuB,UAAK,iCAAL,mBAAmC,MAAM,GAAE,KAAK,8BAA8B,QAAS,MAAI;AAAC,WAAK,+BAA6B,MAAK,KAAK,gCAA8B;AAAA,IAAI,CAAE,GAAE,KAAK,WAAS,QAAM,KAAK,qBAAmBC,GAAE,IAAE,KAAK,iBAAiB,KAAK,EAAE,KAAM,CAAAH,OAAG;AAAC,WAAK,cAAY,KAAK,qCAAmCA,GAAE,sBAAqB,KAAK,WAAWI,GAAG,MAAI,KAAK,uBAAwB,CAAAC,OAAGL,GAAE,uBAAqBK,IAAGC,EAAC,CAAC,GAAE,KAAK,uBAAqB,IAAIF,GAAE,EAAC,OAAM,KAAK,kBAAiB,MAAK,KAAK,KAAI,CAAC;AAAA,IAAE,CAAE,IAAEG,GAAE;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,SAAK,WAAS,QAAM,KAAK,qBAAmBJ,GAAE,IAAE,QAAM,KAAK,yBAAuB,KAAK,iBAAiB,uBAAqB,KAAK,sCAAoCI,GAAE,IAAG,KAAK,KAAK,SAAQ,IAAI,GAAE,KAAK,YAAU,EAAE,KAAK,SAAS,GAAE,KAAK,+BAA6BP,GAAE,KAAK,4BAA4B,GAAE,KAAK,gCAA8B,MAAK,KAAK,8BAA8B,MAAM;AAAA,EAAC;AAAA,EAAC,IAAI,UAAS;AAAC,WAAOQ,GAAE,KAAG,QAAM,KAAK,oBAAkB,QAAM,KAAK,iBAAiB;AAAA,EAAS;AAAA,EAAC,IAAI,iCAAgC;AAAC,WAAO,KAAK,UAAQ,CAAC,GAAG,KAAK,yBAAyB,EAAE,KAAM,CAACR,IAAEK,OAAIL,KAAEK,EAAE,IAAE,CAAC;AAAA,EAAC;AAAA,EAAC,IAAI,mBAAkB;AAAC,WAAO,QAAM,KAAK,QAAM,OAAK,KAAK,MAAM;AAAA,EAAe;AAAA,EAAC,IAAI,qBAAoB;AAAC,WAAO,KAAK,0BAA0B,OAAK;AAAA,EAAC;AAAA,EAAC,IAAI,wBAAuB;AAAC,UAAML,KAAE,KAAK;AAA+B,WAAO,MAAIA,GAAE,SAAO,UAAQ,gBAAgBA,GAAE,KAAK,GAAG,CAAC;AAAA,EAAG;AAAA,EAAC,IAAI,WAAU;AAAC,QAAG,CAAC,KAAK;AAAQ,aAAM;AAAG,QAAGG,GAAE,GAAE;AAAC,aAAM,EAAE,QAAM,KAAK,yBAAuB,QAAM,KAAK,wBAAsB,KAAK,qBAAqB;AAAA,IAAQ;AAAC,WAAOI,GAAE,GAAE;AAAA,EAAE;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,QAAM,KAAK,iCAA+B,MAAI,KAAK,2BAA2B,QAAM,MAAI,KAAK,0BAA0B;AAAA,EAAI;AAAA,EAAC,0BAA0BP,IAAE;AAAC,WAAO,KAAK,0BAA0B,IAAIA,EAAC;AAAA,EAAC;AAAA,EAAC,2BAA2BA,IAAE;AAAC,WAAO,KAAK,2BAA2B,IAAIA,EAAC;AAAA,EAAC;AAAA,EAAC,6BAA6BA,IAAE;AAAC,SAAK,2BAA2B,IAAIA,EAAC;AAAE,UAAMK,KAAEG,GAAE,KAAGD,GAAE,KAAG,QAAM,KAAK,SAAQL,MAAE,KAAK,6BAA4BK,KAAE,IAAIE,GAAET,IAAE,EAAC,UAAS,MAAI;AAAC,MAAAE,IAAE,OAAOK,EAAC;AAAA,IAAC,GAAE,QAAO,CAACL,KAAEK,OAAI;AAAC,iBAAS,CAACF,IAAEK,EAAC,KAAIR;AAAE,aAAK,qBAAqBF,IAAEK,IAAEK,EAAC;AAAE,MAAAL,MAAG,QAAME,MAAG,KAAK,eAAeP,IAAEO,EAAC;AAAA,IAAC,EAAC,CAAC;AAAE,WAAOL,IAAE,QAAQK,EAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,MAAM,wBAAwBP,IAAEK,IAAEH,KAAE;AAAC,QAAG,QAAMG;AAAE;AAAO,UAAK,EAAC,kBAAiBE,IAAE,eAAcG,GAAC,IAAEL;AAAE,QAAG,QAAME,MAAG,MAAIA,GAAE,UAAQ,QAAMG;AAAE;AAAO,QAAG,KAAK,iCAA+B,MAAMC,GAAE,KAAK,+BAA8BT,GAAC,GAAE,MAAI,KAAK,2BAA2B;AAAK;AAAO,UAAMU,KAAE,EAAC,kBAAiBL,IAAE,eAAcG,GAAC,GAAEF,MAAE,KAAK,uBAAuBR,IAAEY,IAAE,KAAK,0BAA0B,GAAE,EAAC,WAAUT,KAAE,YAAWU,GAAC,IAAEL;AAAE,QAAG,MAAIL,IAAE,UAAQ,MAAIU,GAAE;AAAO;AAAO,UAAMC,KAAE,MAAM,KAAK,4CAA4CX,KAAEU,IAAEX,GAAC;AAAE,YAAMY,MAAG,KAAK,qCAAqCd,IAAEc,IAAED,IAAED,EAAC;AAAA,EAAC;AAAA,EAAC,eAAeZ,IAAEK,IAAE;AAAC,SAAK,0BAA0B,IAAIL,EAAC;AAAE,UAAME,MAAE,KAAK,qBAAqB,IAAIF,EAAC;AAAE,QAAG,QAAME,QAAI,KAAK,kBAAkB,OAAOA,GAAC,GAAE,KAAK,qBAAqB,OAAOF,EAAC,IAAG,QAAMK,IAAE;AAAC,YAAMH,MAAE,EAAC,KAAIF,IAAE,MAAKK,GAAC;AAAE,WAAK,kBAAkB,IAAIH,GAAC,GAAE,KAAK,qBAAqB,IAAIF,IAAEE,GAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,qBAAqBF,IAAEK,IAAEH,KAAE;AAAC,SAAK,2BAA2B,IAAIF,EAAC,GAAE,KAAK,qBAAqBA,IAAEK,IAAEH,GAAC;AAAA,EAAC;AAAA,EAAC,aAAaF,IAAE;AAAC,SAAK,WAASO,GAAE,KAAG,KAAK,0BAA0B,IAAIP,EAAC,GAAE,KAAK,2BAA2B,IAAIA,EAAC;AAAA,EAAC;AAAA,EAAC,qBAAqBA,IAAEK,IAAEH,KAAE;AAAC,SAAK,UAAU,IAAI,KAAK,sBAAsBF,IAAEK,EAAC,GAAEH,KAAE,KAAK,4BAA4BA,GAAC,CAAC;AAAA,EAAC;AAAA,EAAC,uBAAuBF,IAAE,EAAC,kBAAiBK,IAAE,eAAcH,IAAC,GAAEK,IAAE;AAAC,UAAMG,KAAE,oBAAI,OAAIE,KAAE,IAAI;AAAM,eAAUT,OAAKE;AAAE,MAAAO,GAAET,IAAE,KAAK,IAAED,IAAEC,IAAE,IAAI;AAAE,UAAMK,MAAE,oBAAI;AAAI,aAAQL,MAAE,GAAEA,MAAEH,GAAE,QAAOG,OAAI;AAAC,YAAMD,MAAEF,GAAEG,GAAC;AAAE,UAAGI,GAAE,IAAIL,GAAC;AAAE,mBAAUF,MAAKK,IAAE;AAAC,gBAAMA,KAAE,KAAK,oBAAoBH,KAAEF,GAAE,KAAK;AAAE,qBAASK,MAAGK,GAAE,IAAIR,GAAC,GAAEM,IAAE,IAAIR,GAAE,IAAI,KAAGY,GAAEZ,GAAE,KAAK,EAAEG,GAAC,IAAEE;AAAA,QAAC;AAAA,IAAC;AAAC,WAAM,EAAC,WAAU,MAAM,KAAKK,EAAC,GAAE,YAAW,MAAM,KAAKF,GAAC,EAAC;AAAA,EAAC;AAAA,EAAC,oBAAoBR,IAAEK,IAAE;AAAC,UAAMH,MAAE,KAAK,+BAA+BF,IAAEK,EAAC;AAAE,QAAG,WAASH;AAAE,aAAOA;AAAE,UAAMK,KAAE,KAAK,sBAAsBP,IAAEK,EAAC;AAAE,WAAO,KAAK,UAAU,IAAIE,EAAC;AAAA,EAAC;AAAA,EAAC,+BAA+BP,IAAEK,IAAE;AAAC,QAAG,QAAM,KAAK;AAA4B,iBAAUH,OAAK,KAAK,6BAA4B;AAAC,YAAGA,IAAE,aAAWF;AAAE;AAAS,cAAMO,KAAEL,IAAE,aAAaG,EAAC;AAAE,YAAG,WAASE;AAAE,iBAAOA;AAAA,MAAC;AAAA,EAAC;AAAA,EAAC,sBAAsBP,IAAEK,IAAE;AAAC,WAAM,GAAGL,EAAC,IAAIK,EAAC;AAAA,EAAE;AAAA,EAAC,MAAM,4CAA4CL,IAAEK,IAAEH,KAAE;AAJn2M;AAIo2M,QAAG,MAAIF,GAAE;AAAO,aAAO;AAAK,SAAK,oCAAoC;AAAE,UAAK,EAAC,iBAAgBO,GAAC,IAAE,KAAK;AAAM,QAAG,QAAMA;AAAE,aAAO;AAAK,UAAMG,KAAE,KAAK,+BAA8BE,KAAE,IAAI,SAAMJ,MAAE,oBAAI;AAAI,eAAUO,MAAKf,IAAE;AAAC,YAAMA,KAAEU,GAAE,IAAIK,EAAC;AAAE,UAAGf;AAAE,QAAAY,GAAE,KAAKZ,EAAC;AAAA,WAAM;AAAC,cAAMA,KAAE,EAAE;AAAE,UAAEA,GAAE,OAAO,GAAEQ,IAAE,IAAIO,IAAEf,EAAC,GAAEU,GAAE,IAAIK,IAAEf,GAAE,OAAO;AAAA,MAAC;AAAA,IAAC;AAAC,UAAMG,MAAE,MAAM,KAAKK,IAAE,KAAK,CAAC,GAAEK,KAAEN,GAAE,YAAY,GAAE,EAAC,eAAcO,GAAC,IAAEP,IAAED,KAAE,CAACQ,IAAE,GAAGT,EAAC;AAAE,IAAAQ,GAAE,QAAM,OAAMA,GAAE,iBAAe,OAAGA,GAAE,YAAUP,IAAEO,GAAE,YAAU,MAAGA,GAAE,YAAUV;AAAE,UAAK,CAACC,IAAEY,EAAC,IAAE,MAAM,QAAQ,IAAI,CAAC,KAAK,mBAAmBT,IAAEJ,KAAEU,IAAEX,GAAC,GAAE,QAAQ,IAAIU,EAAC,CAAC,CAAC,EAAE,KAAM,CAAAZ,QAAIE,GAAEA,GAAC,GAAEF,GAAG,EAAE,MAAO,CAAAA,OAAG;AAAC,iBAAS,CAACK,IAAEH,GAAC,KAAIM;AAAE,QAAAE,GAAE,OAAOL,EAAC,GAAEH,IAAE,OAAOF,EAAC;AAAE,YAAMA;AAAA,IAAC,CAAE,GAAEiB,KAAE,CAAC;AAAE,eAAUC,MAAKd;AAAE,UAAGc,GAAE;AAAG,mBAAUlB,MAAKkB,GAAE,MAAM,UAAS;AAAC,gBAAMb,KAAEL,IAAEE,MAAEG,GAAE,WAAWS,EAAC;AAAE,gBAAAN,IAAE,IAAIN,GAAC,MAAP,mBAAU,QAAQG,KAAGK,GAAE,OAAOR,GAAC,GAAEM,IAAE,OAAON,GAAC,GAAEe,GAAE,KAAKZ,EAAC;AAAA,QAAC;AAAC,eAAUa,MAAKF;AAAE,MAAAE,MAAGD,GAAE,KAAKC,EAAC;AAAE,eAAS,CAACA,IAAEP,EAAC,KAAIH;AAAE,MAAAE,GAAE,OAAOQ,EAAC,GAAEP,GAAE,QAAQ,IAAI;AAAE,WAAOM;AAAA,EAAC;AAAA,EAAC,MAAM,2CAA2CjB,IAAEK,IAAE;AAAC,QAAG,MAAIL,GAAE,UAAQ,CAAC,KAAK,WAAS,CAACO,GAAE;AAAE,aAAO;AAAK,SAAK,oCAAoC;AAAE,UAAML,MAAE,KAAK,MAAM,iBAAgB,EAAC,eAAcK,IAAE,eAAcG,GAAC,IAAER,KAAEU,KAAE,CAACL,IAAE,GAAG,QAAMG,KAAE,CAACA,EAAC,IAAE,CAAC,CAAC,GAAEF,MAAEN,IAAE,YAAY;AAAE,IAAAM,IAAE,QAAM,OAAMA,IAAE,iBAAe,MAAGA,IAAE,YAAUI,IAAEJ,IAAE,YAAU,MAAGA,IAAE,YAAUR,IAAEQ,IAAE,UAAQN,IAAE,MAAKM,IAAE,UAAQN,IAAE;AAAK,UAAMC,MAAE,MAAM,KAAK,mBAAmBD,KAAEF,IAAEQ,KAAEH,EAAC,GAAEQ,KAAEX,IAAE,WAAU,EAAC,kBAAiBY,GAAC,IAAEZ,KAAEI,KAAE,CAAC;AAAE,eAAUF,MAAKD,KAAE;AAAC,UAAG,CAACC,GAAE;AAAG;AAAS,YAAMJ,KAAEI,GAAE,OAAM,EAAC,WAAUC,IAAE,UAASH,KAAE,mBAAkBK,GAAC,IAAEP;AAAE,UAAG,QAAMK;AAAE;AAAS,YAAMK,MAAE,EAAEG,IAAER,EAAC;AAAE,iBAAUO,MAAKV,KAAE;AAAC,cAAMF,KAAE,EAAEY,IAAEL,IAAEO,IAAED,IAAEH,GAAC,GAAEL,KAAEO;AAAE,gBAAMZ,MAAGK,GAAE,WAASL,IAAEM,GAAE,KAAKD,EAAC,KAAGA,GAAE,WAAS;AAAA,MAAI;AAAA,IAAC;AAAC,WAAOC;AAAA,EAAC;AAAA,EAAC,sCAAqC;AAAC,QAAG,CAAC,KAAK;AAAmC;AAAO,SAAK,qCAAmC;AAAG,QAAIN,KAAE,+JAA+J,EAAE,KAAK,6BAA6B,CAAC;AAAyD,UAAMK,KAAE,KAAK,MAAM;AAAW,IAAAA,MAAGA,GAAE,SAAOL,MAAG,KAAKK,GAAE,OAAO,GAAG,sBAAsBA,GAAE,EAAE,eAAaL,MAAG,KAAK,KAAK,MAAM,UAAU,IAAI,KAAI,EAAE,UAAUF,EAAC,EAAE,KAAK,qBAAoB,KAAK,MAAM,OAAM,GAAGE,EAAC,GAAG;AAAA,EAAC;AAAA,EAAC,MAAM,mBAAmBA,IAAEK,IAAEH,KAAEU,IAAE;AAAC,QAAG,MAAIP,GAAE;AAAO,aAAM,CAAC;AAAE,UAAMG,MAAEH,GAAEL,EAAC;AAAE,IAAAK,KAAE,CAAC,GAAGA,EAAC,EAAE,KAAM,CAACL,IAAEK,OAAIL,KAAEK,EAAE;AAAE,UAAMF,MAAE,EAAEE,IAAEG,GAAC,EAAE,IAAK,CAAAH,OAAG;AAAC,YAAME,KAAEL,IAAE,MAAM;AAAE,aAAOK,GAAE,YAAUF,IAAEc,GAAEZ,GAAEP,IAAEO,IAAE,EAAC,QAAOK,GAAC,CAAC,CAAC;AAAA,IAAC,CAAE;AAAE,WAAO,QAAQ,IAAIT,GAAC;AAAA,EAAC;AAAA,EAAC,qCAAqCH,IAAEK,IAAEH,KAAE,EAAC,kBAAiBK,IAAE,eAAcG,GAAC,GAAE;AAAC,UAAME,KAAE,KAAK;AAAiB,QAAG,QAAMA;AAAE;AAAO,UAAMJ,MAAEI,GAAE,eAAcT,MAAED,IAAE,IAAK,CAAAG,QAAIA,MAAKK,OAAIA,GAAEL,EAAC,IAAE,IAAI,MAAML,GAAE,MAAM,IAAGU,GAAEL,EAAC,EAAG,GAAEQ,KAAE,IAAI,IAAIN,GAAE,IAAK,CAAAP,OAAG,CAACA,GAAE,MAAKA,GAAE,KAAK,CAAE,CAAC,GAAEc,KAAEZ,IAAE,IAAK,CAAAF,OAAGa,GAAE,IAAIb,EAAC,CAAE,GAAEM,KAAE,IAAI,IAAI,MAAM,KAAKN,IAAG,CAACA,IAAEK,OAAI,CAACL,IAAEK,EAAC,CAAE,CAAC;AAAE,eAAUD,MAAKC,IAAE;AAAC,YAAML,KAAEI,GAAE,WAAWI,GAAC;AAAE,eAAQH,KAAE,GAAEA,KAAEH,IAAE,QAAOG,MAAI;AAAC,cAAME,KAAEO,GAAET,EAAC,GAAEK,MAAEJ,GAAE,IAAIN,EAAC,GAAEY,KAAER,GAAE,WAAWF,IAAEG,EAAC,CAAC;AAAE,QAAAF,IAAEE,EAAC,EAAEK,GAAC,IAAEE,IAAE,KAAK,qBAAqBZ,IAAEO,IAAEK,EAAC;AAAA,MAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,4BAA4BZ,IAAE;AAAC,WAAM,YAAU,OAAOA,KAAEO,GAAEP,EAAC,IAAEQ,GAAE;AAAA,EAAC;AAAA,EAAC,MAAM,uBAAuBR,IAAE;AAJjtS;AAIktS,UAAME,MAAE,KAAK;AAAM,UAAMA,IAAE,KAAK,EAAC,QAAOF,GAAC,CAAC,GAAE,KAAK,0BAA0B,MAAM,GAAE,KAAK,2BAA2B,MAAM;AAAE,UAAK,EAAC,iBAAgBO,GAAC,IAAEL;AAAE,QAAG,QAAMK,MAAG,GAAC,WAAAA,GAAE,iBAAF,mBAAgB,eAAhB,mBAA4B;AAAuB;AAAO,UAAMG,KAAE,KAAK,mCAAmC;AAAE,QAAG,QAAMA;AAAE;AAAO,UAAMF,MAAED,GAAE,SAAQJ,MAAE,KAAK,SAAQU,KAAE,EAAC,GAAE,QAAO,eAAc,MAAG,QAAO,IAAIL,GAAC,KAAI,eAAc,MAAG,eAAcL,KAAE,eAAcA,KAAE,iBAAgB,KAAK,UAAU,CAAC,EAAC,IAAGK,KAAE,WAAUE,GAAC,CAAC,CAAC,EAAC;AAAE,QAAGP,KAAE;AAAC,YAAMH,KAAEO,GAAE;AAAU,MAAAM,GAAE,kBAAgB,KAAK,UAAU,EAAC,QAAO,CAAC,GAAG,OAAO,OAAOb,GAAE,mBAAmB,GAAEA,GAAE,eAAe,EAAC,CAAC;AAAA,IAAC;AAAC,UAAMM,KAAE,MAAMc,GAAEC,GAAE,GAAGd,GAAE,GAAG,mBAAkB,EAAC,QAAO,QAAO,OAAMM,IAAE,SAAQS,IAAE,QAAOtB,GAAC,CAAC,CAAC;AAAE,QAAG,CAACM,GAAE,MAAIY,GAAEZ,GAAE,KAAK,GAAE;AAAC,YAAMN,KAAE,KAAK,MAAM;AAAM,QAAE,UAAUF,EAAC,EAAE,KAAK,0BAAyBE,IAAE,GAAGA,EAAC,qLAAqL;AAAA,IAAC;AAAC,QAAGM,GAAE,MAAI,QAAI,WAAAA,GAAE,MAAM,SAAR,mBAAc,UAAd,mBAAqB,SAAO;AAAC,YAAMD,KAAEC,GAAE,MAAM,KAAK,MAAM,CAAC,GAAEJ,MAAEG,MAAA,gBAAAA,GAAG,WAAUK,MAAEL,MAAA,gBAAAA,GAAG,cAAaO,MAAEV,OAAA,gBAAAA,IAAG,SAAM,CAAC,GAAEM,OAAEN,OAAA,gBAAAA,IAAG,YAAS,CAAC,GAAEW,MAAEX,OAAA,gBAAAA,IAAG,YAAS,CAAC,GAAEY,KAAE,CAAC,GAAGF,IAAE,GAAGJ,KAAE,GAAGK,EAAC,GAAET,KAAED,MAAE,CAAC,GAAGS,IAAE,GAAGF,OAAGF,KAAE,GAAGK,EAAC,IAAE,CAAC,GAAEG,KAAE,KAAK,IAAI,KAAK,+BAA8BF,GAAE,MAAM;AAAE,MAAAE,KAAEF,GAAE,WAAS,KAAK,qCAAmC;AAAI,YAAMI,KAAEJ,GAAE,KAAM,CAACd,IAAEK,OAAIL,KAAEK,EAAE;AAAE,eAAQL,KAAE,GAAEA,KAAEgB,IAAE,EAAEhB,IAAE;AAAC,cAAMK,KAAEa,GAAElB,EAAC;AAAE,aAAK,2BAA2B,IAAIK,EAAC;AAAA,MAAC;AAAC,iBAAUL,MAAKI;AAAE,aAAK,0BAA0B,IAAIJ,EAAC;AAAE,UAAG,KAAK,WAASO,GAAE,KAAG,KAAK,0BAA0B,OAAK,GAAE;AAAC,cAAMF,KAAE,MAAM,KAAK,2CAA2C,MAAM,KAAK,KAAK,yBAAyB,GAAEL,EAAC;AAAE,YAAG,QAAMK;AAAE,qBAAUL,MAAKK;AAAE,oBAAML,GAAE,YAAU,KAAK,eAAeA,GAAE,WAAWO,GAAE,aAAa,GAAEP,GAAE,QAAQ;AAAA,MAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,qCAAoC;AAAC,UAAMA,KAAE,KAAK;AAAM,QAAG,QAAMA,GAAE,0BAAwB,QAAMA,GAAE,uBAAuB;AAAW,aAAOA,GAAE,uBAAuB;AAAW,UAAMK,KAAEL,GAAE;AAAgB,WAAO,QAAMK,MAAG,QAAMA,GAAE,cAAY,QAAMA,GAAE,WAAW,eAAaA,GAAE,WAAW,eAAa;AAAA,EAAI;AAAA,EAAC,IAAI,OAAM;AAAC,UAAML,KAAE,MAAM,KAAK,KAAK,0BAA0B,GAAEK,KAAE,KAAK,+BAA8BH,MAAE;AAAK,WAAM,EAAC,kBAAiBF,IAAE,8BAA6BK,IAAE,IAAI,+BAA8B;AAAC,aAAOH,IAAE;AAAA,IAA6B,GAAE,IAAI,6BAA6BF,IAAE;AAAC,MAAAE,IAAE,gCAA8BF;AAAA,IAAC,EAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAACiB,GAAE,EAAC,eAAc,KAAE,CAAC,CAAC,GAAElB,GAAE,WAAU,QAAO,MAAM,GAAE,EAAE,CAACkB,GAAE,EAAC,eAAc,KAAE,CAAC,CAAC,GAAElB,GAAE,WAAU,SAAQ,MAAM,GAAE,EAAE,CAACkB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAElB,GAAE,WAAU,WAAU,IAAI,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,+BAA8B,MAAM,GAAE,EAAE,CAACkB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAElB,GAAE,WAAU,kCAAiC,IAAI,GAAE,EAAE,CAACkB,GAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAElB,GAAE,WAAU,qBAAoB,MAAM,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,wBAAuB,MAAM,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,oBAAmB,IAAI,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,wBAAuB,MAAM,GAAE,EAAE,CAACkB,GAAE,EAAC,eAAc,KAAE,CAAC,CAAC,GAAElB,GAAE,WAAU,oBAAmB,MAAM,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,8BAA6B,MAAM,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,6BAA4B,MAAM,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,sBAAqB,IAAI,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,iCAAgC,MAAM,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,gCAA+B,MAAM,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,yBAAwB,IAAI,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,YAAW,IAAI,GAAE,EAAE,CAACkB,GAAE,CAAC,GAAElB,GAAE,WAAU,WAAU,IAAI,GAAEA,KAAE,EAAE,CAACI,GAAEL,EAAC,CAAC,GAAEC,EAAC;AAAE,IAAMU,KAAN,MAAO;AAAA,EAAC,YAAYT,IAAEK,IAAE;AAAC,SAAK,WAASL,IAAE,KAAK,WAASK,IAAE,KAAK,WAAS,oBAAI,OAAI,KAAK,mBAAiB,QAAO,KAAK,SAAOkB,GAAE;AAAA,EAAM;AAAA,EAAC,aAAavB,IAAE;AAAC,WAAO,KAAK,SAAS,IAAIA,EAAC;AAAA,EAAC;AAAA,EAAC,aAAaA,IAAEK,IAAE;AAAC,SAAK,YAAU,KAAK,SAAS,IAAIL,IAAEK,EAAC;AAAA,EAAC;AAAA,EAAC,cAAa;AAAC,WAAO,KAAK;AAAA,EAAgB;AAAA,EAAC,YAAYL,IAAE;AAAC,SAAK,aAAW,KAAK,mBAAiBA;AAAA,EAAE;AAAA,EAAC,WAAU;AAAC,SAAK,aAAW,KAAK,SAAOuB,GAAE,aAAY,KAAK,SAAS,SAAS,GAAE,KAAK,mBAAiB;AAAA,EAAO;AAAA,EAAC,SAAQ;AAAC,SAAK,aAAW,KAAK,SAAOA,GAAE,WAAU,KAAK,SAAS,OAAO,KAAK,UAAS,KAAK,gBAAgB,GAAE,KAAK,SAAS,MAAM,GAAE,KAAK,mBAAiB;AAAA,EAAO;AAAA,EAAC,IAAI,WAAU;AAAC,WAAO,KAAK,WAASA,GAAE;AAAA,EAAM;AAAC;AAAC,IAAIA;AAAE,CAAC,SAASvB,IAAE;AAAC,EAAAA,GAAEA,GAAE,SAAO,CAAC,IAAE,UAASA,GAAEA,GAAE,YAAU,CAAC,IAAE,aAAYA,GAAEA,GAAE,cAAY,CAAC,IAAE;AAAa,EAAEuB,OAAIA,KAAE,CAAC,EAAE;AAAE,IAAMD,KAAE;AAAR,IAAYrB,KAAE;",
  "names": ["e", "s", "i", "t", "o", "r", "s", "d", "n", "u", "h", "e", "a", "l", "c", "h", "e", "t", "o", "n", "r", "s", "a", "f", "M", "i", "l", "d", "u", "x", "g", "w", "_", "b", "N", "S", "D", "v", "I", "j", "A", "p", "R", "P", "y", "c", "m", "i", "r", "s", "t", "e", "o", "y", "a", "c", "l", "y", "e", "t", "i", "n", "s", "o", "r", "l", "h", "u", "c", "_", "g", "f", "m", "v", "a", "w", "x", "T", "V", "E", "O", "d", "P", "L", "C", "A", "_a", "D", "U", "I", "S", "M", "F", "a", "s", "e", "i", "o", "d", "t", "l", "r", "n", "a", "h", "u", "_", "c", "x", "L", "y", "N", "m", "s", "r", "i", "t", "g", "e", "o", "r", "s", "a", "t", "l", "i", "u", "p", "n", "T", "x", "b", "F", "h", "f", "C", "P", "c", "w", "m", "S", "R", "M", "D", "c", "e", "t", "r", "i", "o", "n", "g", "I", "s", "_", "b", "a", "l", "d", "y", "x", "D", "p", "A", "w", "T", "m", "h", "$", "j", "U", "S", "q", "B", "u", "r", "e", "t", "s", "o", "l", "a", "n", "i", "u", "y", "e", "t", "i", "s", "n", "r", "o", "a", "c", "I", "u", "d", "f", "Z", "P", "C", "p", "h", "l", "m", "_", "g", "v", "b", "x", "q", "j", "Q", "T", "E", "H", "k", "R", "B", "z", "m", "e", "A", "r", "l", "n", "t", "s", "i", "a", "h", "o", "c", "W", "$", "u", "I", "Z", "C", "d", "y", "ee", "s", "t", "e", "r", "r", "e", "a", "u", "n", "t", "o", "i", "b", "G", "D", "e", "T", "s", "a", "l", "t", "h", "r", "n", "S", "i", "p", "o", "d", "c", "g", "u", "y", "m", "b", "_", "j", "M", "V"]
}
