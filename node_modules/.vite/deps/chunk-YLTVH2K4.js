import {
  t
} from "./chunk-FB4A6PBH.js";
import {
  n
} from "./chunk-V66LHQVK.js";
import {
  N
} from "./chunk-JP7O2ZWE.js";
import {
  T
} from "./chunk-7I33FAWS.js";
import {
  f
} from "./chunk-DWOEYHKS.js";

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js
var r = class extends t {
  constructor(t2) {
    super(t2), this._numLoading = 0, this._disposed = false, this._textureRepository = t2.textureRep, this._textureId = t2.textureId, this._acquire(t2.textureId, (t3) => this._texture = t3), this._acquire(t2.normalTextureId, (t3) => this._textureNormal = t3), this._acquire(t2.emissiveTextureId, (t3) => this._textureEmissive = t3), this._acquire(t2.occlusionTextureId, (t3) => this._textureOcclusion = t3), this._acquire(t2.metallicRoughnessTextureId, (t3) => this._textureMetallicRoughness = t3);
  }
  dispose() {
    this._texture = f(this._texture), this._textureNormal = f(this._textureNormal), this._textureEmissive = f(this._textureEmissive), this._textureOcclusion = f(this._textureOcclusion), this._textureMetallicRoughness = f(this._textureMetallicRoughness), this._disposed = true;
  }
  ensureResources(t2) {
    return 0 === this._numLoading ? N.LOADED : N.LOADING;
  }
  get textureBindParameters() {
    return new l(null != this._texture ? this._texture.glTexture : null, null != this._textureNormal ? this._textureNormal.glTexture : null, null != this._textureEmissive ? this._textureEmissive.glTexture : null, null != this._textureOcclusion ? this._textureOcclusion.glTexture : null, null != this._textureMetallicRoughness ? this._textureMetallicRoughness.glTexture : null);
  }
  updateTexture(e) {
    null != this._texture && e === this._texture.id || (this._texture = f(this._texture), this._textureId = e, this._acquire(this._textureId, (t2) => this._texture = t2));
  }
  _acquire(s, i) {
    if (null == s)
      return void i(null);
    const u = this._textureRepository.acquire(s);
    if (T(u))
      return ++this._numLoading, void u.then((e) => {
        if (this._disposed)
          return f(e), void i(null);
        i(e);
      }).finally(() => --this._numLoading);
    i(u);
  }
};
var l = class extends n {
  constructor(t2 = null, e = null, s = null, i = null, u = null) {
    super(), this.texture = t2, this.textureNormal = e, this.textureEmissive = s, this.textureOcclusion = i, this.textureMetallicRoughness = u;
  }
};

export {
  r,
  l
};
//# sourceMappingURL=chunk-YLTVH2K4.js.map
