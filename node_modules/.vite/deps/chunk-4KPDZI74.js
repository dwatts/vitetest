import {
  o as o4
} from "./chunk-WA4HIOYR.js";
import {
  s
} from "./chunk-BFVOSCOB.js";
import {
  a
} from "./chunk-IVMJPIWO.js";
import {
  e
} from "./chunk-WRFNQB7U.js";
import {
  o as o2
} from "./chunk-UUW6REOV.js";
import {
  o as o3
} from "./chunk-2US5EKDI.js";
import {
  s as s2
} from "./chunk-Z3NHJA5D.js";
import {
  i2 as i
} from "./chunk-BO2REVMA.js";
import {
  o
} from "./chunk-V66LHQVK.js";
import {
  x
} from "./chunk-TPJLFGOT.js";

// node_modules/@arcgis/core/chunks/SSAOBlur.glsl.js
var f = 4;
function c() {
  const c2 = new i(), u2 = c2.fragment;
  c2.include(o3);
  const m = (f + 1) / 2, p = 1 / (2 * m * m);
  return u2.include(a), u2.uniforms.add(new s2("depthMap", (e2) => e2.depthTexture), new s("tex", (e2) => e2.colorTexture), new o4("blurSize", (e2) => e2.blurSize), new o2("projScale", (r, o5) => {
    const t = x(o5.camera.eye, o5.camera.center);
    return t > 5e4 ? Math.max(0, r.projScale - (t - 5e4)) : r.projScale;
  }), new e("nearFar", (e2, r) => r.camera.nearFar)), u2.code.add(o`
    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {
      float c = texture(tex, uv).r;
      float d = linearDepthFromTexture(depthMap, uv, nearFar);

      float ddiff = d - center_d;

      float w = exp(-r * r * ${o.float(p)} - ddiff * ddiff * sharpness);
      wTotal += w;
      bTotal += w * c;
    }
  `), u2.code.add(o`
    void main(void) {
      float b = 0.0;
      float w_total = 0.0;

      float center_d = linearDepthFromTexture(depthMap, uv, nearFar);

      float sharpness = -0.05 * projScale / center_d;
      for (int r = -${o.int(f)}; r <= ${o.int(f)}; ++r) {
        float rf = float(r);
        vec2 uvOffset = uv + rf * blurSize;
        blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);
      }

      fragColor = vec4(b / w_total);
    }
  `), c2;
}
var u = Object.freeze(Object.defineProperty({ __proto__: null, build: c }, Symbol.toStringTag, { value: "Module" }));

export {
  c,
  u
};
//# sourceMappingURL=chunk-4KPDZI74.js.map
