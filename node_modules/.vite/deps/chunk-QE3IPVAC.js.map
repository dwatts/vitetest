{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/support/overlayImageUtils.js", "../../@arcgis/core/views/3d/layers/DynamicLayerView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{width as t,height as e,intersects as r}from\"../../../../geometry/support/aaBoundingRect.js\";import{newDoubleArray as o}from\"../../../../geometry/support/DoubleArray.js\";import{newFloatArray as n}from\"../../../../geometry/support/FloatArray.js\";import{Attribute as i}from\"../../webgl-engine/lib/Attribute.js\";import{Geometry as m}from\"../../webgl-engine/lib/Geometry.js\";import{createSquareGeometry as h}from\"../../webgl-engine/lib/GeometryUtil.js\";import{VertexAttribute as g}from\"../../webgl-engine/lib/VertexAttribute.js\";function u(r,o,n){const i=t(r)/e(r),m={width:n,height:n};return i>1.0001?m.height=n/i:i<.9999&&(m.width=n*i),m.width=Math.round(m.width/(t(r)/t(o))),m.height=Math.round(m.height/(e(r)/e(o))),m}function l(t,e){return h(t,[[e[0],e[1],-1],[e[2],e[1],-1],[e[2],e[3],-1],[e[0],e[3],-1]])}function s(t,e,h){if(!r(e,h))return l(t,h);const u=[e[1]-h[1],Math.min(e[3],h[3])-Math.max(e[1],h[1]),h[3]-e[3],123456],s=[e[0]-h[0],Math.min(e[2],h[2])-Math.max(e[0],h[0]),h[2]-e[2],123456],f=h[2]-h[0],p=h[3]-h[1],w=s[0]>0&&s[2]>0?3:2,b=u[0]>0&&u[2]>0?3:2,c=(b+1)*(w+1),y=o(3*c),A=n(2*c),M=new Array(6*(b*w-1));let d=0,j=0,O=0,x=0,I=0;for(let r=0;r<4;r++){const t=u[r];if(t<=0)continue;let e=0;for(let o=0;o<4;o++){const t=s[o];t<=0||(y[j++]=h[0]+e,y[j++]=h[1]+d,y[j++]=-1,A[O++]=e/f,A[O++]=d/p,o<3&&r<3&&(1!==o||1!==r)&&(M[I++]=x,M[I++]=x+1,M[I++]=x+w+1,M[I++]=x+1,M[I++]=x+w+2,M[I++]=x+w+1),x++,e+=t)}d+=t}const N=new Array(M.length);return new m(t,[[g.POSITION,new i(y,3,!0)],[g.NORMAL,new i(a,3,!0)],[g.UV0,new i(A,2,!0)]],[[g.POSITION,M],[g.NORMAL,N],[g.UV0,M]])}const a=[0,0,1];export{u as computeImageExportSize,l as createGeometryForExtent,s as createOuterImageGeometry};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{forEach as t,result as i}from\"../../../core/asyncUtils.js\";import{makeHandle as r}from\"../../../core/handleUtils.js\";import a from\"../../../core/Logger.js\";import{abortMaybe as s}from\"../../../core/maybe.js\";import{debounce as n,isAbortError as o,eachAlways as l,onAbort as h,isAborted as m,createAbortError as d,throwIfAborted as c}from\"../../../core/promiseUtils.js\";import{whenOnce as g}from\"../../../core/reactiveUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import f from\"../../../geometry/Extent.js\";import{equals as y,create as _,width as w,height as x,copy as R,intersection as v}from\"../../../geometry/support/aaBoundingRect.js\";import{DrapeSourceType as S}from\"./interfaces.js\";import{LayerView3D as b}from\"./LayerView3D.js\";import{computeImageExportSize as E,createGeometryForExtent as j,createOuterImageGeometry as I}from\"./support/overlayImageUtils.js\";import{toViewIfLocal as A}from\"./support/projectExtentUtils.js\";import C from\"../support/debugFlags.js\";import{OverlayIndex as D}from\"../terrain/interfaces.js\";import{DirtyOperation as L}from\"../webgl-engine/lib/ModelDirtyTypes.js\";import{RenderGeometry as M}from\"../webgl-engine/lib/RenderGeometry.js\";import{Texture as T}from\"../webgl-engine/lib/Texture.js\";import{UpdatePolicy as G}from\"../webgl-engine/lib/UpdatePolicy.js\";import{ImageMaterial as P}from\"../webgl-engine/materials/ImageMaterial.js\";import O from\"../../layers/LayerView.js\";import U from\"../../layers/RefreshableLayerView.js\";import{isScaleRangeActive as H}from\"../../support/layerViewUtils.js\";import{TextureWrapMode as N}from\"../../webgl/enums.js\";let V=class extends(U(b(O))){constructor(){super(...arguments),this.drapeSourceType=S.RasterImage,this.updatePolicy=G.SYNC,this.fullExtentInLocalViewSpatialReference=null,this.maximumDataResolution=null,this._images=new Array,this._extents=new Array,this._overlays=new Array,this.updateWhenStationary=!0,this._drapeSourceRenderer=null,this.refreshDebounced=n((async e=>{this.destroyed||await this._doRefresh(e).catch((e=>{o(e)||a.getLogger(this).error(e)}))}),2e3)}initialize(){this._drapeSourceRenderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.handles.add(r((()=>this.view.basemapTerrain.overlayManager.unregisterDrapeSource(this)))),this.addResolvingPromise(A(this).then((e=>this._set(\"fullExtentInLocalViewSpatialReference\",e)))),this.updatingHandles.add((()=>this.suspended),(()=>this._suspendedChangeHandler())),this.handles.add(this.view.resourceController.scheduler.registerIdleStateCallbacks((()=>{this._isScaleRangeActive()&&this.notifyChange(\"suspended\")}),(()=>{}))),this._isScaleRangeLayer()&&this.updatingHandles.add((()=>this.layer.effectiveScaleRange),(()=>this.notifyChange(\"suspended\")))}destroy(){this.clear()}setDrapingExtent(e,t){this._spatialReference=t,e.forEach((e=>{this._overlays[e.index]=e,this._updateImageExtent(e)}))}_updateImageExtent(e){const t=this._clippedExtent(e.extent,F);if(null==t)return;const i=E(e.extent,t,e.resolution);let r=e.pixelRatio*this.view.state.pixelRatio;const{layer:s}=this;if(\"imageMaxWidth\"in s&&null!=s.imageMaxWidth||\"imageMaxHeight\"in s&&null!=s.imageMaxHeight){const e=s.imageMaxWidth,t=s.imageMaxHeight;if(i.width>e){const t=e/i.width;i.height=Math.floor(i.height*t),i.width=e,r*=t}if(i.height>t){const e=t/i.height;i.width=Math.floor(i.width*e),i.height=t,r*=e}}const n=this._extents[e.index];n&&y(n.extent,t)&&this._imageSizeEquals(t,n.imageSize,i)||(this._extents[e.index]={extent:_(t),imageSize:i,pixelRatio:r},this.suspended||this._fetch(e.index).catch((e=>{o(e)||a.getLogger(this).error(e)})))}clear(){for(let e=0;e<this._images.length;e++)this._clearImage(e)}async doRefresh(){return this._doRefresh()}async _doRefresh(e){if(this.suspended)return;const t=[];for(let i=0;i<this._extents.length;i++)this._extents[i]&&t.push(this._fetch(i,e));await l(t)}canResume(){if(!super.canResume())return!1;const e=this.layer;if(this._isScaleRangeActive()){const{minScale:t,maxScale:i}=e.effectiveScaleRange,r=this.view.scale;if(r<i||t>0&&r>t)return!1}return!0}isUpdating(){return this._images.some((e=>!!e.loadingPromise))}async processResult(e,t,i){(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&(e.image=t)}findExtentInfoAt(e){for(const t of this._extents){const i=t.extent;if(new f(i[0],i[1],i[2],i[3],this._spatialReference).contains(e))return t}return null}getFetchOptions(){}async redraw(e,i){await t(this._images,(async(t,r)=>{t&&(await e(t,i),await this._createStageObjects(r,t.image,i))}))}_imageSizeEquals(e,t,i){if(!this.maximumDataResolution)return!1;const r=w(e)/this.maximumDataResolution.x,a=x(e)/this.maximumDataResolution.y,s=r/t.width,n=a/t.height,o=r/i.width,l=a/i.height,h=Math.abs(s-o),m=Math.abs(n-l),d=C.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return h<=d&&m<=d}async _fetch(e,t){if(this.suspended)return;const i=this._extents[e],r=i.extent;this._images[e]||(this._images[e]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:_(r)});const n=this._images[e];n.loadingAbortController=s(n.loadingAbortController);const l=new f(r[0],r[1],r[2],r[3],this._spatialReference);if(0===l.width||0===l.height)return void this._clearImage(e);const c=new AbortController;n.loadingAbortController=c,h(t,(()=>c.abort()));const g=c.signal,u=this._waitFetchReady(g).then((async()=>{const t={requestAsImageElement:!0,pixelRatio:this._overlays[e].pixelRatio,...this.getFetchOptions(),signal:g},{height:r,width:a}=i.imageSize;return this.layer.fetchImage(l,a,r,t)})).then((e=>{if(m(g))throw a.getLogger(this).warnOnce(\"A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true.\"),d();return this.processResult(n,e)})).then((()=>{R(n.renderExtent,r)})).finally((()=>{u===n.loadingPromise&&(n.loadingPromise=null,n.loadingAbortController=null)}));n.loadingPromise=u,this.notifyChange(\"updating\"),await u.then((async()=>{if(g.aborted)throw d();await this._createStageObjects(e,n.image,g),this.notifyChange(\"updating\")})).catch((e=>{throw e&&!o(e)&&a.getLogger(this).error(e),this.notifyChange(\"updating\"),e}))}_clearImage(e){const t=this._images[e];if(t){null!=t.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([t.renderGeometry],L.UPDATE),t.renderGeometry=null);const e=this.view._stage;e.remove(t.texture),t.texture=null,e.remove(t.material),t.material=null,t.loadingAbortController=s(t.loadingAbortController),t.loadingPromise=null,t.image=null,t.pixelData=null}}async _createStageObjects(e,t,r){const a=this.view._stage,s=this._images[e],n=()=>{a.remove(s.texture),s.texture=null,null!=s.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([s.renderGeometry],L.UPDATE),s.renderGeometry=null)};if(t){const o=new T(t,{width:t.width,height:t.height,preMultiplyAlpha:!0,wrap:{s:N.CLAMP_TO_EDGE,t:N.CLAMP_TO_EDGE}});let l;if(await i(this._images[e===D.INNER?D.OUTER:D.INNER].loadingPromise),c(r),n(),a.add(o),await a.loadImmediate(o),s.texture=o,null==s.material?(s.material=new P({transparent:!0,textureId:o.id}),a.add(s.material)):s.material.setParameters({textureId:o.id}),e===D.INNER)l=j(s.material,s.renderExtent);else{const e=this._images[0].renderExtent;if(!e)return void n();l=I(s.material,e,s.renderExtent)}s.renderGeometry=new M(l),s.renderGeometry.localOrigin=this._overlays[e].renderLocalOrigin,this._drapeSourceRenderer.addGeometries([s.renderGeometry],L.UPDATE)}else n(),a.remove(s.material),s.material=null}_isScaleRangeLayer(){return\"effectiveScaleRange\"in this.layer}_isScaleRangeActive(){const e=this.layer;if(!this._isScaleRangeLayer())return!1;const{minScale:t,maxScale:i}=e.effectiveScaleRange;return H(t,i)}_clippedExtent(e,t){if(\"local\"!==this.view.viewingMode)return R(t,e);const i=this.view.basemapTerrain;return i.ready?v(e,i.extent,t):R(t,e)}_suspendedChangeHandler(){this.suspended?this.clear():this.refreshDebounced()}async _waitFetchReady(e){await g((()=>this.view.stationary),e),c(e)}};e([u()],V.prototype,\"layer\",void 0),e([u()],V.prototype,\"suspended\",void 0),e([u({readOnly:!0})],V.prototype,\"fullExtentInLocalViewSpatialReference\",void 0),e([u()],V.prototype,\"updating\",void 0),V=e([p(\"esri.views.3d.layers.DynamicLayerView3D\")],V);const z=V,F=_();export{z as default};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAImhB,SAAS,EAAE,GAAE,GAAEA,IAAE;AAAC,QAAMC,KAAEC,GAAE,CAAC,IAAEC,GAAE,CAAC,GAAE,IAAE,EAAC,OAAMH,IAAE,QAAOA,GAAC;AAAE,SAAOC,KAAE,SAAO,EAAE,SAAOD,KAAEC,KAAEA,KAAE,WAAQ,EAAE,QAAMD,KAAEC,KAAG,EAAE,QAAM,KAAK,MAAM,EAAE,SAAOC,GAAE,CAAC,IAAEA,GAAE,CAAC,EAAE,GAAE,EAAE,SAAO,KAAK,MAAM,EAAE,UAAQC,GAAE,CAAC,IAAEA,GAAE,CAAC,EAAE,GAAE;AAAC;AAAC,SAASC,GAAEC,IAAEC,IAAE;AAAC,SAAO,GAAED,IAAE,CAAC,CAACC,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAE,EAAE,GAAE,CAACA,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAE,EAAE,GAAE,CAACA,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAE,EAAE,GAAE,CAACA,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAE,EAAE,CAAC,CAAC;AAAC;AAAC,SAASH,GAAEE,IAAEC,IAAE,GAAE;AAAC,MAAG,CAAC,EAAEA,IAAE,CAAC;AAAE,WAAOF,GAAEC,IAAE,CAAC;AAAE,QAAME,KAAE,CAACD,GAAE,CAAC,IAAE,EAAE,CAAC,GAAE,KAAK,IAAIA,GAAE,CAAC,GAAE,EAAE,CAAC,CAAC,IAAE,KAAK,IAAIA,GAAE,CAAC,GAAE,EAAE,CAAC,CAAC,GAAE,EAAE,CAAC,IAAEA,GAAE,CAAC,GAAE,MAAM,GAAEH,KAAE,CAACG,GAAE,CAAC,IAAE,EAAE,CAAC,GAAE,KAAK,IAAIA,GAAE,CAAC,GAAE,EAAE,CAAC,CAAC,IAAE,KAAK,IAAIA,GAAE,CAAC,GAAE,EAAE,CAAC,CAAC,GAAE,EAAE,CAAC,IAAEA,GAAE,CAAC,GAAE,MAAM,GAAE,IAAE,EAAE,CAAC,IAAE,EAAE,CAAC,GAAE,IAAE,EAAE,CAAC,IAAE,EAAE,CAAC,GAAEE,KAAEL,GAAE,CAAC,IAAE,KAAGA,GAAE,CAAC,IAAE,IAAE,IAAE,GAAEM,KAAEF,GAAE,CAAC,IAAE,KAAGA,GAAE,CAAC,IAAE,IAAE,IAAE,GAAEG,MAAGD,KAAE,MAAID,KAAE,IAAGG,KAAE,EAAE,IAAED,EAAC,GAAE,IAAEL,GAAE,IAAEK,EAAC,GAAER,KAAE,IAAI,MAAM,KAAGO,KAAED,KAAE,EAAE;AAAE,MAAII,KAAE,GAAEC,KAAE,GAAEC,KAAE,GAAE,IAAE,GAAE,IAAE;AAAE,WAAQ,IAAE,GAAE,IAAE,GAAE,KAAI;AAAC,UAAMT,KAAEE,GAAE,CAAC;AAAE,QAAGF,MAAG;AAAE;AAAS,QAAIC,KAAE;AAAE,aAAQ,IAAE,GAAE,IAAE,GAAE,KAAI;AAAC,YAAMD,KAAEF,GAAE,CAAC;AAAE,MAAAE,MAAG,MAAIM,GAAEE,IAAG,IAAE,EAAE,CAAC,IAAEP,IAAEK,GAAEE,IAAG,IAAE,EAAE,CAAC,IAAED,IAAED,GAAEE,IAAG,IAAE,IAAG,EAAEC,IAAG,IAAER,KAAE,GAAE,EAAEQ,IAAG,IAAEF,KAAE,GAAE,IAAE,KAAG,IAAE,MAAI,MAAI,KAAG,MAAI,OAAKV,GAAE,GAAG,IAAE,GAAEA,GAAE,GAAG,IAAE,IAAE,GAAEA,GAAE,GAAG,IAAE,IAAEM,KAAE,GAAEN,GAAE,GAAG,IAAE,IAAE,GAAEA,GAAE,GAAG,IAAE,IAAEM,KAAE,GAAEN,GAAE,GAAG,IAAE,IAAEM,KAAE,IAAG,KAAIF,MAAGD;AAAA,IAAE;AAAC,IAAAO,MAAGP;AAAA,EAAC;AAAC,QAAM,IAAE,IAAI,MAAMH,GAAE,MAAM;AAAE,SAAO,IAAI,EAAEG,IAAE,CAAC,CAAC,EAAE,UAAS,IAAIF,GAAEQ,IAAE,GAAE,IAAE,CAAC,GAAE,CAAC,EAAE,QAAO,IAAIR,GAAEY,IAAE,GAAE,IAAE,CAAC,GAAE,CAAC,EAAE,KAAI,IAAIZ,GAAE,GAAE,GAAE,IAAE,CAAC,CAAC,GAAE,CAAC,CAAC,EAAE,UAASD,EAAC,GAAE,CAAC,EAAE,QAAO,CAAC,GAAE,CAAC,EAAE,KAAIA,EAAC,CAAC,CAAC;AAAC;AAAC,IAAMa,KAAE,CAAC,GAAE,GAAE,CAAC;;;ACA6R,IAAI,IAAE,cAAcC,GAAE,EAAEC,EAAC,CAAC,EAAE;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,kBAAgBC,GAAE,aAAY,KAAK,eAAa,EAAE,MAAK,KAAK,wCAAsC,MAAK,KAAK,wBAAsB,MAAK,KAAK,UAAQ,IAAI,SAAM,KAAK,WAAS,IAAI,SAAM,KAAK,YAAU,IAAI,SAAM,KAAK,uBAAqB,MAAG,KAAK,uBAAqB,MAAK,KAAK,mBAAiB,EAAG,OAAMA,OAAG;AAAC,WAAK,aAAW,MAAM,KAAK,WAAWA,EAAC,EAAE,MAAO,CAAAA,OAAG;AAAC,UAAEA,EAAC,KAAG,EAAE,UAAU,IAAI,EAAE,MAAMA,EAAC;AAAA,MAAC,CAAE;AAAA,IAAC,GAAG,GAAG;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,SAAK,uBAAqB,KAAK,KAAK,eAAe,eAAe,4BAA4B,IAAI,GAAE,KAAK,QAAQ,IAAIA,GAAG,MAAI,KAAK,KAAK,eAAe,eAAe,sBAAsB,IAAI,CAAE,CAAC,GAAE,KAAK,oBAAoB,EAAE,IAAI,EAAE,KAAM,CAAAA,OAAG,KAAK,KAAK,yCAAwCA,EAAC,CAAE,CAAC,GAAE,KAAK,gBAAgB,IAAK,MAAI,KAAK,WAAY,MAAI,KAAK,wBAAwB,CAAE,GAAE,KAAK,QAAQ,IAAI,KAAK,KAAK,mBAAmB,UAAU,2BAA4B,MAAI;AAAC,WAAK,oBAAoB,KAAG,KAAK,aAAa,WAAW;AAAA,IAAC,GAAI,MAAI;AAAA,IAAC,CAAE,CAAC,GAAE,KAAK,mBAAmB,KAAG,KAAK,gBAAgB,IAAK,MAAI,KAAK,MAAM,qBAAsB,MAAI,KAAK,aAAa,WAAW,CAAE;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,MAAM;AAAA,EAAC;AAAA,EAAC,iBAAiBA,IAAEC,IAAE;AAAC,SAAK,oBAAkBA,IAAED,GAAE,QAAS,CAAAA,OAAG;AAAC,WAAK,UAAUA,GAAE,KAAK,IAAEA,IAAE,KAAK,mBAAmBA,EAAC;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,mBAAmBA,IAAE;AAAC,UAAMC,KAAE,KAAK,eAAeD,GAAE,QAAO,CAAC;AAAE,QAAG,QAAMC;AAAE;AAAO,UAAMC,KAAE,EAAEF,GAAE,QAAOC,IAAED,GAAE,UAAU;AAAE,QAAI,IAAEA,GAAE,aAAW,KAAK,KAAK,MAAM;AAAW,UAAK,EAAC,OAAMG,GAAC,IAAE;AAAK,QAAG,mBAAkBA,MAAG,QAAMA,GAAE,iBAAe,oBAAmBA,MAAG,QAAMA,GAAE,gBAAe;AAAC,YAAMH,KAAEG,GAAE,eAAcF,KAAEE,GAAE;AAAe,UAAGD,GAAE,QAAMF,IAAE;AAAC,cAAMC,KAAED,KAAEE,GAAE;AAAM,QAAAA,GAAE,SAAO,KAAK,MAAMA,GAAE,SAAOD,EAAC,GAAEC,GAAE,QAAMF,IAAE,KAAGC;AAAA,MAAC;AAAC,UAAGC,GAAE,SAAOD,IAAE;AAAC,cAAMD,KAAEC,KAAEC,GAAE;AAAO,QAAAA,GAAE,QAAM,KAAK,MAAMA,GAAE,QAAMF,EAAC,GAAEE,GAAE,SAAOD,IAAE,KAAGD;AAAA,MAAC;AAAA,IAAC;AAAC,UAAMI,KAAE,KAAK,SAASJ,GAAE,KAAK;AAAE,IAAAI,MAAG,EAAEA,GAAE,QAAOH,EAAC,KAAG,KAAK,iBAAiBA,IAAEG,GAAE,WAAUF,EAAC,MAAI,KAAK,SAASF,GAAE,KAAK,IAAE,EAAC,QAAO,EAAEC,EAAC,GAAE,WAAUC,IAAE,YAAW,EAAC,GAAE,KAAK,aAAW,KAAK,OAAOF,GAAE,KAAK,EAAE,MAAO,CAAAA,OAAG;AAAC,QAAEA,EAAC,KAAG,EAAE,UAAU,IAAI,EAAE,MAAMA,EAAC;AAAA,IAAC,CAAE;AAAA,EAAE;AAAA,EAAC,QAAO;AAAC,aAAQA,KAAE,GAAEA,KAAE,KAAK,QAAQ,QAAOA;AAAI,WAAK,YAAYA,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,YAAW;AAAC,WAAO,KAAK,WAAW;AAAA,EAAC;AAAA,EAAC,MAAM,WAAWA,IAAE;AAAC,QAAG,KAAK;AAAU;AAAO,UAAMC,KAAE,CAAC;AAAE,aAAQC,KAAE,GAAEA,KAAE,KAAK,SAAS,QAAOA;AAAI,WAAK,SAASA,EAAC,KAAGD,GAAE,KAAK,KAAK,OAAOC,IAAEF,EAAC,CAAC;AAAE,UAAM,EAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,YAAW;AAAC,QAAG,CAAC,MAAM,UAAU;AAAE,aAAM;AAAG,UAAMD,KAAE,KAAK;AAAM,QAAG,KAAK,oBAAoB,GAAE;AAAC,YAAK,EAAC,UAASC,IAAE,UAASC,GAAC,IAAEF,GAAE,qBAAoB,IAAE,KAAK,KAAK;AAAM,UAAG,IAAEE,MAAGD,KAAE,KAAG,IAAEA;AAAE,eAAM;AAAA,IAAE;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,aAAY;AAAC,WAAO,KAAK,QAAQ,KAAM,CAAAD,OAAG,CAAC,CAACA,GAAE,cAAe;AAAA,EAAC;AAAA,EAAC,MAAM,cAAcA,IAAEC,IAAEC,IAAE;AAAC,KAACD,cAAa,oBAAkBA,cAAa,uBAAqBD,GAAE,QAAMC;AAAA,EAAE;AAAA,EAAC,iBAAiBD,IAAE;AAAC,eAAUC,MAAK,KAAK,UAAS;AAAC,YAAMC,KAAED,GAAE;AAAO,UAAG,IAAI,EAAEC,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAE,KAAK,iBAAiB,EAAE,SAASF,EAAC;AAAE,eAAOC;AAAA,IAAC;AAAC,WAAO;AAAA,EAAI;AAAA,EAAC,kBAAiB;AAAA,EAAC;AAAA,EAAC,MAAM,OAAOD,IAAEE,IAAE;AAAC,UAAMJ,GAAE,KAAK,SAAS,OAAMG,IAAE,MAAI;AAAC,MAAAA,OAAI,MAAMD,GAAEC,IAAEC,EAAC,GAAE,MAAM,KAAK,oBAAoB,GAAED,GAAE,OAAMC,EAAC;AAAA,IAAE,CAAE;AAAA,EAAC;AAAA,EAAC,iBAAiBF,IAAEC,IAAEC,IAAE;AAAC,QAAG,CAAC,KAAK;AAAsB,aAAM;AAAG,UAAM,IAAEG,GAAEL,EAAC,IAAE,KAAK,sBAAsB,GAAEF,KAAEK,GAAEH,EAAC,IAAE,KAAK,sBAAsB,GAAEG,KAAE,IAAEF,GAAE,OAAMG,KAAEN,KAAEG,GAAE,QAAO,IAAE,IAAEC,GAAE,OAAMI,KAAER,KAAEI,GAAE,QAAO,IAAE,KAAK,IAAIC,KAAE,CAAC,GAAE,IAAE,KAAK,IAAIC,KAAEE,EAAC,GAAEP,KAAEE,GAAE,8BAA4B,IAAE;AAAI,WAAO,KAAGF,MAAG,KAAGA;AAAA,EAAC;AAAA,EAAC,MAAM,OAAOC,IAAEC,IAAE;AAAC,QAAG,KAAK;AAAU;AAAO,UAAMC,KAAE,KAAK,SAASF,EAAC,GAAE,IAAEE,GAAE;AAAO,SAAK,QAAQF,EAAC,MAAI,KAAK,QAAQA,EAAC,IAAE,EAAC,SAAQ,MAAK,UAAS,MAAK,gBAAe,MAAK,gBAAe,MAAK,wBAAuB,MAAK,OAAM,MAAK,WAAU,MAAK,cAAa,EAAE,CAAC,EAAC;AAAG,UAAMI,KAAE,KAAK,QAAQJ,EAAC;AAAE,IAAAI,GAAE,yBAAuBJ,GAAEI,GAAE,sBAAsB;AAAE,UAAME,KAAE,IAAI,EAAE,EAAE,CAAC,GAAE,EAAE,CAAC,GAAE,EAAE,CAAC,GAAE,EAAE,CAAC,GAAE,KAAK,iBAAiB;AAAE,QAAG,MAAIA,GAAE,SAAO,MAAIA,GAAE;AAAO,aAAO,KAAK,KAAK,YAAYN,EAAC;AAAE,UAAMO,KAAE,IAAI;AAAgB,IAAAH,GAAE,yBAAuBG,IAAE,EAAEN,IAAG,MAAIM,GAAE,MAAM,CAAE;AAAE,UAAM,IAAEA,GAAE,QAAOC,KAAE,KAAK,gBAAgB,CAAC,EAAE,KAAM,YAAS;AAAC,YAAMP,KAAE,EAAC,uBAAsB,MAAG,YAAW,KAAK,UAAUD,EAAC,EAAE,YAAW,GAAG,KAAK,gBAAgB,GAAE,QAAO,EAAC,GAAE,EAAC,QAAOS,IAAE,OAAMX,GAAC,IAAEI,GAAE;AAAU,aAAO,KAAK,MAAM,WAAWI,IAAER,IAAEW,IAAER,EAAC;AAAA,IAAC,CAAE,EAAE,KAAM,CAAAD,OAAG;AAAC,UAAG,EAAE,CAAC;AAAE,cAAM,EAAE,UAAU,IAAI,EAAE,SAAS,qIAAqI,GAAE,EAAE;AAAE,aAAO,KAAK,cAAcI,IAAEJ,EAAC;AAAA,IAAC,CAAE,EAAE,KAAM,MAAI;AAAC,MAAAA,GAAEI,GAAE,cAAa,CAAC;AAAA,IAAC,CAAE,EAAE,QAAS,MAAI;AAAC,MAAAI,OAAIJ,GAAE,mBAAiBA,GAAE,iBAAe,MAAKA,GAAE,yBAAuB;AAAA,IAAK,CAAE;AAAE,IAAAA,GAAE,iBAAeI,IAAE,KAAK,aAAa,UAAU,GAAE,MAAMA,GAAE,KAAM,YAAS;AAAC,UAAG,EAAE;AAAQ,cAAM,EAAE;AAAE,YAAM,KAAK,oBAAoBR,IAAEI,GAAE,OAAM,CAAC,GAAE,KAAK,aAAa,UAAU;AAAA,IAAC,CAAE,EAAE,MAAO,CAAAJ,OAAG;AAAC,YAAMA,MAAG,CAAC,EAAEA,EAAC,KAAG,EAAE,UAAU,IAAI,EAAE,MAAMA,EAAC,GAAE,KAAK,aAAa,UAAU,GAAEA;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,YAAYA,IAAE;AAAC,UAAMC,KAAE,KAAK,QAAQD,EAAC;AAAE,QAAGC,IAAE;AAAC,cAAMA,GAAE,mBAAiB,KAAK,qBAAqB,iBAAiB,CAACA,GAAE,cAAc,GAAE,EAAE,MAAM,GAAEA,GAAE,iBAAe;AAAM,YAAMD,KAAE,KAAK,KAAK;AAAO,MAAAA,GAAE,OAAOC,GAAE,OAAO,GAAEA,GAAE,UAAQ,MAAKD,GAAE,OAAOC,GAAE,QAAQ,GAAEA,GAAE,WAAS,MAAKA,GAAE,yBAAuBD,GAAEC,GAAE,sBAAsB,GAAEA,GAAE,iBAAe,MAAKA,GAAE,QAAM,MAAKA,GAAE,YAAU;AAAA,IAAI;AAAA,EAAC;AAAA,EAAC,MAAM,oBAAoBD,IAAEC,IAAE,GAAE;AAAC,UAAMH,KAAE,KAAK,KAAK,QAAOK,KAAE,KAAK,QAAQH,EAAC,GAAEI,KAAE,MAAI;AAAC,MAAAN,GAAE,OAAOK,GAAE,OAAO,GAAEA,GAAE,UAAQ,MAAK,QAAMA,GAAE,mBAAiB,KAAK,qBAAqB,iBAAiB,CAACA,GAAE,cAAc,GAAE,EAAE,MAAM,GAAEA,GAAE,iBAAe;AAAA,IAAK;AAAE,QAAGF,IAAE;AAAC,YAAM,IAAE,IAAIS,GAAET,IAAE,EAAC,OAAMA,GAAE,OAAM,QAAOA,GAAE,QAAO,kBAAiB,MAAG,MAAK,EAAC,GAAE,EAAE,eAAc,GAAE,EAAE,cAAa,EAAC,CAAC;AAAE,UAAIK;AAAE,UAAG,MAAM,EAAE,KAAK,QAAQN,OAAIW,GAAE,QAAMA,GAAE,QAAMA,GAAE,KAAK,EAAE,cAAc,GAAER,GAAE,CAAC,GAAEC,GAAE,GAAEN,GAAE,IAAI,CAAC,GAAE,MAAMA,GAAE,cAAc,CAAC,GAAEK,GAAE,UAAQ,GAAE,QAAMA,GAAE,YAAUA,GAAE,WAAS,IAAII,GAAE,EAAC,aAAY,MAAG,WAAU,EAAE,GAAE,CAAC,GAAET,GAAE,IAAIK,GAAE,QAAQ,KAAGA,GAAE,SAAS,cAAc,EAAC,WAAU,EAAE,GAAE,CAAC,GAAEH,OAAIW,GAAE;AAAM,QAAAL,KAAEA,GAAEH,GAAE,UAASA,GAAE,YAAY;AAAA,WAAM;AAAC,cAAMH,KAAE,KAAK,QAAQ,CAAC,EAAE;AAAa,YAAG,CAACA;AAAE,iBAAO,KAAKI,GAAE;AAAE,QAAAE,KAAEH,GAAEA,GAAE,UAASH,IAAEG,GAAE,YAAY;AAAA,MAAC;AAAC,MAAAA,GAAE,iBAAe,IAAIL,GAAEQ,EAAC,GAAEH,GAAE,eAAe,cAAY,KAAK,UAAUH,EAAC,EAAE,mBAAkB,KAAK,qBAAqB,cAAc,CAACG,GAAE,cAAc,GAAE,EAAE,MAAM;AAAA,IAAC;AAAM,MAAAC,GAAE,GAAEN,GAAE,OAAOK,GAAE,QAAQ,GAAEA,GAAE,WAAS;AAAA,EAAI;AAAA,EAAC,qBAAoB;AAAC,WAAM,yBAAwB,KAAK;AAAA,EAAK;AAAA,EAAC,sBAAqB;AAAC,UAAMH,KAAE,KAAK;AAAM,QAAG,CAAC,KAAK,mBAAmB;AAAE,aAAM;AAAG,UAAK,EAAC,UAASC,IAAE,UAASC,GAAC,IAAEF,GAAE;AAAoB,WAAOO,GAAEN,IAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,eAAeF,IAAEC,IAAE;AAAC,QAAG,YAAU,KAAK,KAAK;AAAY,aAAOD,GAAEC,IAAED,EAAC;AAAE,UAAME,KAAE,KAAK,KAAK;AAAe,WAAOA,GAAE,QAAM,EAAEF,IAAEE,GAAE,QAAOD,EAAC,IAAED,GAAEC,IAAED,EAAC;AAAA,EAAC;AAAA,EAAC,0BAAyB;AAAC,SAAK,YAAU,KAAK,MAAM,IAAE,KAAK,iBAAiB;AAAA,EAAC;AAAA,EAAC,MAAM,gBAAgBA,IAAE;AAAC,UAAMY,GAAG,MAAI,KAAK,KAAK,YAAYZ,EAAC,GAAEG,GAAEH,EAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,SAAQ,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,aAAY,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAE,EAAE,WAAU,yCAAwC,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,YAAW,MAAM,GAAE,IAAE,EAAE,CAACF,GAAE,yCAAyC,CAAC,GAAE,CAAC;AAAE,IAAM,IAAE;AAAR,IAAU,IAAE,EAAE;",
  "names": ["n", "i", "M", "s", "l", "t", "e", "u", "w", "b", "c", "y", "d", "j", "O", "a", "a", "d", "e", "t", "i", "s", "n", "M", "l", "c", "u", "r", "w", "O", "j"]
}
