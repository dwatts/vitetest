import {
  o as o4
} from "./chunk-CG3URTR2.js";
import {
  n
} from "./chunk-IBJTEQQG.js";
import {
  o as o2
} from "./chunk-SADO52IH.js";
import {
  e
} from "./chunk-WVOBJDWI.js";
import {
  h
} from "./chunk-73PNWDTS.js";
import {
  o as o3
} from "./chunk-PKS3ZVLN.js";
import {
  P
} from "./chunk-N3RXOITN.js";
import {
  p
} from "./chunk-DOR4M5EA.js";
import {
  o as o5
} from "./chunk-UUW6REOV.js";
import {
  s
} from "./chunk-Z3NHJA5D.js";
import {
  i2 as i
} from "./chunk-BO2REVMA.js";
import {
  o
} from "./chunk-V66LHQVK.js";
import {
  O
} from "./chunk-BN6X2OXK.js";

// node_modules/@arcgis/core/chunks/ImageMaterial.glsl.js
function v(v2) {
  const f2 = new i(), { vertex: u, fragment: m } = f2;
  return p(u, v2), f2.include(o4, v2), f2.attributes.add(O.POSITION, "vec3"), f2.attributes.add(O.UV0, "vec2"), f2.varyings.add("vpos", "vec3"), v2.hasMultipassTerrain && f2.varyings.add("depth", "float"), u.code.add(o`
    void main(void) {
      vpos = position;
      ${v2.hasMultipassTerrain ? "depth = (view * vec4(vpos, 1.0)).z;" : ""}
      vTexCoord = uv0;
      gl_Position = transformPosition(proj, view, vpos);
    }
  `), f2.include(P, v2), f2.include(n, v2), m.uniforms.add(new s("tex", (e2) => e2.texture), new o5("opacity", (e2) => e2.opacity)), f2.varyings.add("vTexCoord", "vec2"), v2.output === h.Alpha ? m.code.add(o`
    void main() {
      discardBySlice(vpos);
      ${v2.hasMultipassTerrain ? "terrainDepthTest(gl_FragCoord, depth);" : ""}

      float alpha = texture(tex, vTexCoord).a * opacity;
      if (alpha  < ${o.float(o3)}) {
        discard;
      }

      fragColor = vec4(alpha);
    }
    `) : (m.include(e), m.code.add(o`
    void main() {
      discardBySlice(vpos);
      ${v2.hasMultipassTerrain ? "terrainDepthTest(gl_FragCoord, depth);" : ""}
      fragColor = texture(tex, vTexCoord) * opacity;

      if (fragColor.a < ${o.float(o3)}) {
        discard;
      }

      fragColor = highlightSlice(fragColor, vpos);
      ${v2.transparencyPassType === o2.Color ? "fragColor = premultiplyAlpha(fragColor);" : ""}
    }
    `)), f2;
}
var f = Object.freeze(Object.defineProperty({ __proto__: null, build: v }, Symbol.toStringTag, { value: "Module" }));

export {
  v,
  f
};
//# sourceMappingURL=chunk-XW6BCJUG.js.map
