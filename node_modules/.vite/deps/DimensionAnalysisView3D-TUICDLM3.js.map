{
  "version": 3,
  "sources": ["../../@arcgis/core/views/support/euclideanLengthMeasurementUtils.js", "../../@arcgis/core/views/3d/analysis/Dimension/lengthDimensionUtils.js", "../../@arcgis/core/views/3d/analysis/Dimension/DimensionController.js", "../../@arcgis/core/views/3d/analysis/Dimension/settings.js", "../../@arcgis/core/views/3d/analysis/Dimension/lengthDimensionManipulatorUtils.js", "../../@arcgis/core/core/memoize.js", "../../@arcgis/core/views/3d/analysis/Dimension/lengthDimensionConstraintUtils.js", "../../@arcgis/core/views/3d/interactive/visualElements/ExtendedLineVisualElement.js", "../../@arcgis/core/views/3d/interactive/visualElements/ParallelLineVisualElement.js", "../../@arcgis/core/views/interactive/snapping/Settings.js", "../../@arcgis/core/views/interactive/snapping/hints/IntersectionSnappingHint.js", "../../@arcgis/core/views/interactive/snapping/hints/ParallelSnappingHint.js", "../../@arcgis/core/views/interactive/snapping/hints/RightAngleSnappingHint.js", "../../@arcgis/core/views/interactive/snapping/SnappingVisualizer.js", "../../@arcgis/core/views/3d/interactive/SnappingVisualizer3D.js", "../../@arcgis/core/views/3d/support/renderInfoUtils/point.js", "../../@arcgis/core/views/3d/interactive/visualElements/VerticesVisualElement.js", "../../@arcgis/core/views/interactive/snapping/FeatureSnappingLayerSource.js", "../../@arcgis/core/views/interactive/snapping/SnappingOptions.js", "../../@arcgis/core/views/interactive/snapping/allLayerSnapping.js", "../../@arcgis/core/views/interactive/snapping/candidates/RightAngleSnappingCandidate.js", "../../@arcgis/core/views/interactive/snapping/FeatureSnappingEngine.js", "../../@arcgis/core/views/interactive/snapping/SnappingAlgorithm.js", "../../@arcgis/core/views/interactive/snapping/candidates/LineSnappingCandidate.js", "../../@arcgis/core/views/interactive/snapping/LineSnapper.js", "../../@arcgis/core/views/interactive/snapping/candidates/ParallelLineSnappingCandidate.js", "../../@arcgis/core/views/interactive/snapping/ParallelLineSnapper.js", "../../@arcgis/core/views/interactive/snapping/RightAngleSnapper.js", "../../@arcgis/core/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate.js", "../../@arcgis/core/views/interactive/snapping/RightAngleTriangleSnapper.js", "../../@arcgis/core/views/interactive/snapping/SelfSnappingEngine.js", "../../@arcgis/core/views/interactive/snapping/snappingFactory.js", "../../@arcgis/core/views/interactive/snapping/candidates/IntersectionSnappingCandidate.js", "../../@arcgis/core/views/interactive/snapping/SnappingManager.js", "../../@arcgis/core/views/interactive/snapping/SceneSnappingManagerPool.js", "../../@arcgis/core/views/interactive/snapping/SnappingContext.js", "../../@arcgis/core/views/interactive/snapping/SnappingDragPipelineStep.js", "../../@arcgis/core/views/interactive/snapping/SnappingOperation.js", "../../@arcgis/core/views/3d/analysis/Dimension/LengthDimensionSubTool.js", "../../@arcgis/core/views/3d/analysis/Dimension/DimensionTool.js", "../../@arcgis/core/views/3d/interactive/visualElements/MarkerVisualElement.js", "../../@arcgis/core/views/3d/analysis/Dimension/LengthDimensionVisualization.js", "../../@arcgis/core/views/3d/analysis/Dimension/DimensionVisualization.js", "../../@arcgis/core/views/analysis/LengthDimensionResult.js", "../../@arcgis/core/views/3d/analysis/Dimension/LengthDimensionComputation.js", "../../@arcgis/core/views/analysis/DimensionAnalysisView.js", "../../@arcgis/core/views/3d/analysis/DimensionAnalysisView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{createLength as n}from\"../../core/quantityUtils.js\";import{lengthUnitFromSpatialReference as t,verticalLengthUnitFromSpatialReference as r}from\"../../core/unitUtils.js\";import{i as e,s as i}from\"../../chunks/vec3.js\";import{c as l}from\"../../chunks/vec3f64.js\";import{projectVectorToVector as o}from\"../../geometry/projection.js\";import{equals as u}from\"../../geometry/support/spatialReferenceUtils.js\";import{computeEuclideanMeasurementSR as c}from\"./measurementUtils.js\";var a;function s(n){return p(n,a.Direct)}function f(n){return p(n,a.Horizontal)}function p(r,e){const{hasZ:i,spatialReference:l}=r,o=c(l);let u=0;const s=t(o);if(null==s)return null;const f=e===a.Direct?x:Z;for(const n of r.paths){if(n.length<2)continue;const t=n.length-1;for(let r=0;r<t;++r){const t=n[r];H[0]=t[0],H[1]=t[1],H[2]=i?t[2]:0;const e=n[r+1];V[0]=e[0],V[1]=e[1],V[2]=i?e[2]:0;const o=f(H,V,l);if(null==o)return null;u+=o.value}}return n(u,s)}function h(n,t){const{spatialReference:r}=n;return u(r,t.spatialReference)?(H[0]=n.x,H[1]=n.y,H[2]=n.hasZ?n.z:0,V[0]=t.x,V[1]=t.y,V[2]=t.hasZ?t.z:0,v(H,V,r)):null}function z(n,t){const{spatialReference:r}=n;return u(r,t.spatialReference)?(H[0]=n.x,H[1]=n.y,H[2]=n.hasZ?n.z:0,V[0]=t.x,V[1]=t.y,V[2]=t.hasZ?t.z:0,x(H,V,r)):null}function m(n,t){const{spatialReference:r}=n;return u(r,t.spatialReference)?(H[0]=n.x,H[1]=n.y,H[2]=n.hasZ?n.z:0,V[0]=t.x,V[1]=t.y,V[2]=t.hasZ?t.z:0,Z(H,V,r)):null}function y(n,t){const{spatialReference:r}=n;return u(r,t.spatialReference)?(H[0]=n.x,H[1]=n.y,H[2]=n.hasZ?n.z:0,V[0]=t.x,V[1]=t.y,V[2]=t.hasZ?t.z:0,j(H,V,r)):null}function R(n){return H[0]=n.x,H[1]=n.y,H[2]=n.hasZ?n.z:0,g(H,n.spatialReference)}function v(t,r,e){const i=D(t,r,e);return null!=i?{direct:n(i.direct,i.unit),horizontal:n(i.horizontal,i.unit),vertical:n(i.vertical,i.unit)}:null}function x(t,r,e){const i=D(t,r,e,a.Direct);return null!=i?n(i.direct,i.unit):null}function Z(t,r,e){const i=D(t,r,e,a.Horizontal);return null!=i?n(i.horizontal,i.unit):null}function d(t,r,e){const i=D(t,r,e,a.Vertical);return null!=i?n(Math.abs(i.verticalSigned),i.unit):null}function j(t,r,e){const i=D(t,r,e,a.Vertical);return null!=i?n(i.verticalSigned,i.unit):null}function g(t,e){const i=r(e);return null!=i?n(t[2],i):null}function D(n,r,l,u){const s=c(l),f=t(s);if(null==f)return null;const p=r[2]-n[2];if(u===a.Vertical)return{verticalSigned:p,unit:f};if(!o(n,l,U,s)||!o(r,l,S,s))return null;if(u===a.Direct){return{direct:e(S,U),unit:f}}if(i(b,n[0],n[1],r[2]),!o(b,l,b,s))return null;const h=e(b,S);if(u===a.Horizontal)return{horizontal:h,unit:f};return{direct:e(S,U),horizontal:h,vertical:Math.abs(p),unit:f}}!function(n){n[n.Direct=0]=\"Direct\",n[n.Horizontal=1]=\"Horizontal\",n[n.Vertical=2]=\"Vertical\"}(a||(a={}));const H=l(),V=l(),U=l(),S=l(),b=l();export{g as elevation,R as elevationOfPoint,x as euclideanDirectDistance,z as euclideanDirectDistanceBetweenPoints,v as euclideanDistance,h as euclideanDistanceBetweenPoints,Z as euclideanHorizontalDistance,m as euclideanHorizontalDistanceBetweenPoints,f as euclideanHorizontalLength,s as euclideanLength,d as verticalDistance,j as verticalSignedDistance,y as verticalSignedDistanceBetweenPoints};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{LengthDimensionMeasureType as e}from\"../../../../analysis/dimensionUtils.js\";import{deg2rad as n}from\"../../../../core/mathUtils.js\";import{toUnit as t}from\"../../../../core/quantityUtils.js\";import{preferredVerticalLengthUnit as r,preferredLengthUnit as i}from\"../../../../core/unitUtils.js\";import{d as o}from\"../../../../chunks/mat4.js\";import{c as a}from\"../../../../chunks/mat4f64.js\";import{c as s,A as d,w as c,F as l,e as u,z as p,m,f as S,n as f,p as g}from\"../../../../chunks/vec3.js\";import{c as v,Z as R}from\"../../../../chunks/vec3f64.js\";import{Axis as A}from\"../../../../geometry/support/Axis.js\";import{sv3d as P}from\"../../../../geometry/support/vectorStacks.js\";import{makeDehydratedPoint as y}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{clonePoint as E}from\"../../../../layers/graphics/hydratedFeatures.js\";import{EuclideanSegment as h}from\"../../interactive/visualElements/support/Segment.js\";import{euclideanDirectDistance as j,euclideanDirectDistanceBetweenPoints as x}from\"../../../support/euclideanLengthMeasurementUtils.js\";function T(n,o,a){if(null==n)return null;const s=n.dimensionSegment.startRenderSpace,d=n.dimensionSegment.endRenderSpace,c=j(s,d,n.spatialReference);if(null==c)return null;const l=o===e.Vertical?r(c.value,c.unit,a):i(c.value,c.unit,a);return t(c,l)}function w(e){const{elevationAlignedStartPoint:n,elevationAlignedEndPoint:t,dimension:{offset:r,measureType:i,orientation:o}}=e;return{elevationAlignedStartPoint:n,elevationAlignedEndPoint:t,offset:r,measureType:i,orientation:o}}function C({elevationAlignedStartPoint:n,elevationAlignedEndPoint:t,offset:r,measureType:i,orientation:o},a,d=null){if(null==n||null==t)return null;const c=b(null!=d?d.directSegment:new h,{elevationAlignedStartPoint:n,elevationAlignedEndPoint:t},a),l=null!=d?d.primaryOffsetAxis:v();I(l,{measureType:i,elevationAlignedStartPoint:n,elevationAlignedEndPoint:t,directSegment:c,orientation:o,renderCoordsHelper:a});const u=null!=d?d.dimensionSegment:new h;return B({elevationAlignedStartPoint:n,elevationAlignedEndPoint:t})&&i===e.Vertical?(s(u.startRenderSpace,c.startRenderSpace),s(u.endRenderSpace,c.endRenderSpace)):L(u,{offsetAxis:l,offset:r,relativeToSegment:c,renderCoordsHelper:a}),{directSegment:c,dimensionSegment:u,primaryOffsetAxis:l,spatialReference:a.spatialReference}}function H(e,n,t,r){return n===z.Start?(s(e.startRenderSpace,t.startRenderSpace),s(e.endRenderSpace,r.startRenderSpace)):(s(e.startRenderSpace,t.endRenderSpace),s(e.endRenderSpace,r.endRenderSpace)),e}var z;function k(e,n,t,r){d(e.startRenderSpace,n.startRenderSpace,t,r),d(e.endRenderSpace,n.endRenderSpace,t,r)}function U(n,t,r,i){switch(t){case e.Direct:return b(n,r,i);case e.Horizontal:case e.Vertical:{const{elevationAlignedStartPoint:o,elevationAlignedEndPoint:a,dimension:s,geometry:d}=r;let c;if(s.measureType===e.Direct){c=M(d,i)===o.z>a.z,t===e.Horizontal&&(c=!c)}else c=!V(d);const[l,u]=c?[o,a]:[a,o],p=E(u,D);return t===e.Horizontal?p.z=l.z:(p.x=l.x,p.y=l.y),i.toRenderCoords(l,n.startRenderSpace),i.toRenderCoords(p,n.endRenderSpace),n}}}function b(e,n,t){return t.toRenderCoords(n.elevationAlignedStartPoint,e.startRenderSpace),t.toRenderCoords(n.elevationAlignedEndPoint,e.endRenderSpace),e}function M(e,n){const t=e.directSegment.eval(.5,P.get()),r=n.worldUpAtPosition(t,P.get()),i=e.dimensionSegment.eval(.5,P.get()),o=c(P.get(),i,t);return!l(o,R)&&u(o,r)>0}function V(e){const{startRenderSpace:n,endRenderSpace:t}=e.dimensionSegment,{startRenderSpace:r,endRenderSpace:i}=e.directSegment;return p(r,n)<p(i,t)}!function(e){e[e.Start=0]=\"Start\",e[e.End=1]=\"End\"}(z||(z={}));const D=y(0,0,0,null);function F(e,n,t,r){const{directSegment:i}=t,o=I(P.get(),{measureType:n,directSegment:i,renderCoordsHelper:r}),a=L(O,{offsetAxis:o,offset:0,relativeToSegment:i,renderCoordsHelper:r}).eval(.5,P.get()),s=c(P.get(),e,a);return u(s,o)*r.unitInMeters}const O=new h;function I(t,r){const{measureType:i,elevationAlignedStartPoint:a,elevationAlignedEndPoint:d,directSegment:{startRenderSpace:p,endRenderSpace:g},directSegment:v,renderCoordsHelper:y}=r,E=v.eval(.5,P.get()),h=y.worldUpAtPosition(E,P.get()),j=y.worldBasisAtPosition(E,A.Y,P.get());switch(i){case e.Horizontal:s(t,h);break;case e.Vertical:u(p,h)<u(g,h)?c(t,g,p):c(t,p,g),S(t,t,h),S(t,t,h);break;case e.Direct:{const e=r.orientation??0;if(B({elevationAlignedStartPoint:a,elevationAlignedEndPoint:d}))o(q,-n(e),h),m(t,j,q);else{const r=c(P.get(),g,p),i=S(P.get(),r,h);S(i,i,r),o(q,n(e),r),m(t,i,q)}break}}return l(t,R)?s(t,j):f(t,t)}const q=a();function B({elevationAlignedStartPoint:e,elevationAlignedEndPoint:n}){return null!=e&&null!=n&&e.x===n.x&&e.y===n.y}function L(e,n){const{offsetAxis:t,offset:r,relativeToSegment:{startRenderSpace:i,endRenderSpace:o},relativeToSegment:a,renderCoordsHelper:s}=n,c=r/s.unitInMeters,[l,u]=Y(i,o,t,c);return d(e.startRenderSpace,a.startRenderSpace,t,l),d(e.endRenderSpace,a.endRenderSpace,t,u),e}function Y(e,n,t,r=0){const i=u(n,t),o=u(e,t),a=Math.abs(i-o)+r;return i>o?[a,r]:[r,a]}function Z(e,n,t){const r=n.directSegment.eval(.5,P.get());return t.worldUpAtPosition(r,e)}function G(e,n){const{startRenderSpace:t,endRenderSpace:r}=n.directSegment;return c(e,r,t)}function J(e,n,t={invert:!1}){const{startRenderSpace:r,endRenderSpace:i}=n.dimensionSegment;return t.invert?c(e,r,i):c(e,i,r)}function K(e,n){const t=e.directSegment.eval(.5,P.get());return n.headingAtPosition(t,e.primaryOffsetAxis)}function N(e,n){return g(J(Q,e))/n**2}const Q=v();function W(e){const{elevationAlignedStartPoint:n,elevationAlignedEndPoint:r}=e;if(null==n||null==r)return!1;const i=x(n,r);return null!=i&&t(i,\"meters\").value>X}const X=1e5;function $(e){return null!=e.geometry}export{X as GEODESIC_DISTANCE_THRESHOLD,z as OffsetSegmentLocation,B as arePointsVerticallyAligned,w as computationToGeometryDependencies,C as computeGeometryFromDimension,T as computeLength,I as computeOffsetAxis,F as computeOffsetForPoint,U as computeSegmentForMeasureType,H as computeSpanningSegment,J as dimensionStartToEnd,G as directStartToEnd,Z as directUp,K as headingFromGeometry,W as isGeodesicDimension,$ as isValidComputation,N as maxScreenLengthSquaredFromGeometry,k as offsetSegment};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{LengthDimensionMeasureType as e}from\"../../../../analysis/dimensionUtils.js\";import s from\"../../../../core/Accessor.js\";import o from\"../../../../core/Handles.js\";import r from\"../../../../core/Logger.js\";import{destroyMaybe as i}from\"../../../../core/maybe.js\";import{watch as n,syncAndInitial as a}from\"../../../../core/reactiveUtils.js\";import{convertUnit as m}from\"../../../../core/unitUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getDefaultUnitForView as d}from\"../../../../support/getDefaultUnitForView.js\";import{isGeodesicDimension as c,GEODESIC_DISTANCE_THRESHOLD as h,computeGeometryFromDimension as u,computeLength as y,computationToGeometryDependencies as f}from\"./lengthDimensionUtils.js\";let g=class extends s{constructor(t){super(t),this._handles=new o}initialize(){const{computations:t}=this.analysisViewData;for(const e of t)this._addComputation(e);this.addHandles(t.on(\"change\",(({added:t,removed:e})=>{for(const s of e)this._removeComputation(s);for(const s of t)this._addComputation(s)})))}destroy(){this._handles=i(this._handles)}get analysis(){return this.analysisViewData.analysis}get _defaultUnit(){return d(this.view)}_addComputation(t){this._handles.has(t)||this._handles.add(n((()=>f(t)),(s=>{const{measureType:o}=s;if(c(s)&&o!==e.Direct){const e=Math.round(m(h,\"meters\",\"kilometers\"));return r.getLogger(this).warnOnce(`A ${o} dimension in the analysis (id: '${this.analysis.id}') will not display, because only direct dimensions can measure lengths greater than ${e} km. Update the measureType of the affected dimension to \"direct\" to display it.`),void(t.geometry=null)}const i=u(s,this.view.renderCoordsHelper,t.geometry);t.geometry=i,t.result.length=y(i,o,this._defaultUnit)}),a),t)}_removeComputation(t){this._handles.remove(t)}};t([l({constructOnly:!0})],g.prototype,\"analysisViewData\",void 0),t([l({constructOnly:!0})],g.prototype,\"view\",void 0),t([l()],g.prototype,\"analysis\",null),t([l()],g.prototype,\"_defaultUnit\",null),g=t([p(\"esri.views.3d.analysis.Dimension.support.DimensionController\")],g);export{g as DimensionController};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport t from\"../../../../Color.js\";import{getAccentColor as s,getContrastColor as i}from\"../../../../core/analysisThemeUtils.js\";class o{constructor(){this.color=s(.5),this.radius=5}}class n{constructor(){this.color=new t([127,127,127,.5]),this.radius=5}}class r{constructor(){this.lineSizeFraction=.8}}class e{constructor(){this.color=s(.5),this.linePaddingPx=4,this.focusedLinePaddingPx=6,this.lengthFraction=.5,this.minLengthMeters=.1}}class c{constructor(){this.calloutOffsetPx=18,this.calloutWidth=2,this.discScale=.3,this.focusMultiplier=2,this.color=s(.5),this.contrastColor=i()}}class h{constructor(){this.lineSizeFraction=.25}}class a{constructor(){this.marginPx=20,this.minScreenLengthFontSizeFactor=5}}class l{constructor(){this.color=s(.5)}}class u{constructor(){this.pointManipulators=new o,this.offsetManipulator=new e,this.orientationManipulator=new c,this.markers=new r,this.labels=new a,this.offsetLine=new h,this.constraint=new l,this.constraintThresholdPx=10,this.initialOffsetPx=50,this.orientationSnapThresholdDegrees=5,this.disabledPointIndicator=new n,this.smallScreenLengthLineSizeFactor=2,this.pointerMoveTimeoutMs=2500}}let d=new u;function f(){d=new u}export{f as reloadSettings,d as settings};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import\"../../../../geometry.js\";import{lengthDimensionMeasureType as t,LengthDimensionMeasureType as n}from\"../../../../analysis/dimensionUtils.js\";import{cyclicalDegrees as r}from\"../../../../core/Cyclical.js\";import{rad2deg as o}from\"../../../../core/mathUtils.js\";import{pt2px as i}from\"../../../../core/screenUtils.js\";import{i as a,k as s}from\"../../../../chunks/mat4.js\";import{c}from\"../../../../chunks/mat4f64.js\";import{g as m,c as d,b as l,f as u,e as f,k as p,l as g,s as h,w as v}from\"../../../../chunks/vec3.js\";import{c as y,Z as S,f as j}from\"../../../../chunks/vec3f64.js\";import{fromPositionAndNormal as x,create as M,signedDistance as w,normal as H}from\"../../../../geometry/support/plane.js\";import{sv3d as P}from\"../../../../geometry/support/vectorStacks.js\";import{clonePoint as C}from\"../../../../layers/graphics/hydratedFeatures.js\";import{isValidComputation as T,computeGeometryFromDimension as b,computationToGeometryDependencies as k,headingFromGeometry as R,computeOffsetForPoint as U,computeSegmentForMeasureType as z,computeOffsetAxis as O,directUp as D,directStartToEnd as F,dimensionStartToEnd as E}from\"./lengthDimensionUtils.js\";import{settings as L}from\"./settings.js\";import{Manipulator3D as A}from\"../../interactive/Manipulator3D.js\";import{createSphereManipulator as G,worldScaledManipulatorSettings as B,createRotateManipulator as I,updateRotateManipulator as W,calculateInputRotationTransform as N,calculateTranslateRotateFromBases as V}from\"../../interactive/manipulatorUtils.js\";import{RenderObject as Z}from\"../../interactive/RenderObject.js\";import{screenToMap3D as q,screenToRenderPlane as J,hideManipulatorWhileDragging as K}from\"../../interactive/editingTools/dragEventPipeline3D.js\";import{EuclideanSegment as Q}from\"../../interactive/visualElements/support/Segment.js\";import{MARKER_SIZE_PER_LINE_WIDTH as X}from\"../../support/engineContent/marker.js\";import{createPolylineGeometry as Y}from\"../../webgl-engine/lib/GeometryUtil.js\";import{createManipulatorDragEventPipeline as $,resetProperties as _,EventPipeline as ee}from\"../../../interactive/dragEventPipeline.js\";import{ManipulatorStateCustomFlags as te,ManipulatorStateFlags as ne}from\"../../../interactive/interfaces.js\";import re from\"../../../../geometry/Point.js\";class oe{constructor(e){this.start=e.start,this.end=e.end,this.offset=e.offset,this.heading=e.heading,this.rotation=e.rotation,this.direct=e.direct,this.horizontal=e.horizontal,this.vertical=e.vertical}manipulatorName(e){return Object.keys(this).find((t=>this.hasOwnProperty(t)&&e===this[t]))}values(){return[this.start,this.end,this.offset,this.heading,this.rotation,this.direct,this.horizontal,this.vertical]}forEachMeasureTypeManipulator(e){for(const n of t)e(this.manipulatorForMeasureType(n),n)}manipulatorForMeasureType(e){switch(e){case n.Direct:return this.direct;case n.Horizontal:return this.horizontal;case n.Vertical:return this.vertical}}}function ie(t,n){const r=G(t,e.toUnitRGBA(L.pointManipulators.color),Fe);return r.available=!1,r.grabCursor=\"crosshair\",r.radius=L.pointManipulators.radius,r.metadata=n.metadata,r.collisionPriority=1,r}function ae(e,t){const n=[j(-.5,0,0),j(.5,0,0)],{lengthFraction:r}=L.offsetManipulator,o=Y(t.unfocusedMaterial,n.map((e=>m(y(),e,r)))),i=o.instantiate({material:t.focusedMaterial});return new A({view:e,renderObjects:[new Z(o,ne.Unfocused|ne.Selected|Fe),new Z(i,ne.Focused|Fe)],collisionType:{type:\"line\",paths:[n]},radius:De(t.lineSizePt)/2,metadata:t.metadata,available:!1,...B})}function se(t,{lineSizePt:n,material:r}){const{calloutOffsetPx:o,calloutWidth:a,discScale:s,focusMultiplier:c,color:m}=L.orientationManipulator;return{calloutLength:.25*X*L.markers.lineSizeFraction*i(n)+o,calloutColor:e.toUnitRGBA(m),calloutWidth:a,customStateMask:Fe,discScale:s,focusMultiplier:c,material:r,metadata:t}}function ce(e,t){return I(e,se(t.metadata,t))}function me(e,t){W(e,se(e.metadata,t))}function de(e,t){const n=[j(-.5,0,0),j(.5,0,0)],{lengthFraction:r}=L.offsetManipulator,o=Y(t.thinOffsetManipulatorMaterial,n),i=Y(t.unfocusedMaterial,n.map((e=>m(y(),e,r)))),a=i.instantiate({material:t.focusedMaterial});return new A({view:e,renderObjects:[new Z(i,ne.Unfocused|Fe),new Z(a,ne.Focused|Fe),new Z(o,Fe)],collisionType:{type:\"line\",paths:[n]},radius:De(t.lineSizePt)/2,available:!1,metadata:t.metadata,...B})}function le(e,{isStart:t,createSnappingPipelineStep:n,dimension:r,onUpdate:o,view:i}){const a=t?\"startPoint\":\"endPoint\",s=$(e,((e,t,s,c)=>{const m=K(e),{snappingStep:d,cancelSnapping:l}=n(c);s=s.next(m).next(_(r,[a,\"measureType\",\"orientation\"])).next(l),t.next(m).next(q(i)).next(...d).next((e=>{const t=C(e.mapEnd,new re);o(\"startPoint\"===a?{startPoint:t}:{endPoint:t})}))}));return[s]}function ue(e,{computation:t,view:n}){return[$(e,((e,r,o)=>{if(!T(t)||!e.selected)return;const{geometry:i,dimension:a}=t,s=K(e);r.next(s).next(Se(n,a,i.dimensionSegment,i.primaryOffsetAxis)),o.next(s).next(_(a,[\"offset\"]))}))]}function fe(e,{computation:t,view:n}){return[$(e,((e,r,o)=>{he({cancel:o,computation:t,settingHeading:!0,steps:r,view:n})}))]}function pe(e,{computation:t,view:n}){return[$(e,((e,r,o)=>{he({cancel:o,computation:t,settingHeading:!1,steps:r,view:n})})),e.events.on(\"immediate-click\",(e=>{ge(e,t,n)}))]}function ge(e,t,n){const{dimension:o,geometry:i}=t;if(90===o.orientation||270===o.orientation)return o.orientation=0,void e.stopPropagation();if(null==i)return;const{renderCoordsHelper:a}=n,s=b({...k(t),orientation:90},a),c=b({...k(t),orientation:270},a);if(null==s||null==c)return;const m=R(s,a),d=R(c,a),l=je(i,n),u=r.shortestSignedDiff(l,m),f=r.shortestSignedDiff(l,d);o.orientation=Math.abs(u)<Math.abs(f)?90:270,e.stopPropagation()}function he(e){const{cancel:t,computation:n,settingHeading:r,steps:i,view:a}=e;if(!T(n))return;const{renderCoordsHelper:s}=a,{dimension:c,geometry:m}=n,l=y(),u=be(y(),m,m.directSegment,s),f=ke(P.get(),{forHeading:r,geometry:m,renderCoordsHelper:s}),p=x(u,f,M()),g=r?c.orientation??R(m,a.renderCoordsHelper):c.orientation??0;i.next(J(a,p)).next((e=>{\"start\"===e.action&&d(l,e.renderStart);const t=H(p),n=N(l,e.renderEnd,u,t);let i=g-o(n);r||(i=ve(i)),c.orientation=i})),t.next(_(c,[\"orientation\"]))}function ve(e){const t=r.normalize(e)%90;return t<L.orientationSnapThresholdDegrees?e-t:90-t<L.orientationSnapThresholdDegrees?e+(90-t):e}function ye(e,{computation:t,manipulatorMeasureType:r,view:o}){let i=n.Direct,a=0,s=0;return[e.events.on(\"grab-changed\",(n=>{if(\"start\"!==n.action||!T(t))return;const{dimension:c,geometry:m}=t;i=c.measureType,a=c.offset,s=c.orientation;const l=d(P.get(),e.renderLocation);c.measureType=r,c.offset=U(l,r,m,o.renderCoordsHelper),c.orientation=0})),$(e,((e,n,c)=>{if(!T(t))return;const{geometry:m,dimension:d}=t,{renderCoordsHelper:l}=o,u=z(Ge,r,t,l),f=O(P.get(),{measureType:r,directSegment:m.directSegment,renderCoordsHelper:l}),p=K(e);n.next(p).next(Se(o,d,u,f)),c.next(p).next((e=>(d.measureType=i,d.offset=a,d.orientation=s,e)))}))]}function Se(e,t,n,r){const o=l(P.get(),n.endRenderSpace,n.startRenderSpace);u(o,o,r);const i=x(n.startRenderSpace,o,M()),a=x(n.startRenderSpace,r,M()),s=t.offset;let c,m=0;const d=new ee;return d.next(J(e,i)).next((n=>{\"start\"===n.action&&(m=w(a,n.renderStart));const r=(w(a,n.renderEnd)-m)*e.renderCoordsHelper.unitInMeters;t.offset=s+r,c=n})),e=>(d.execute(e),c)}function je(e,t){const{directSegment:n}=e,{renderCoordsHelper:r}=t,o=D(P.get(),e,r),i=F(P.get(),e),a=u(P.get(),i,o),{viewForward:s}=t.state.camera;f(a,s)>0&&m(a,a,-1);const c=n.eval(.5,P.get());return r.headingAtPosition(c,a)}function xe(e,t,n){const{dimensionSegment:r,primaryOffsetAxis:o}=t,i=E(Ee,t),c=p(i,S)?a(Ae):V(i,o,S,Ae),m=Math.max(g(i),L.offsetManipulator.minLengthMeters/n.unitInMeters);s(c,c,h(Ee,m,m,m)),e.modelTransform=c,e.renderLocation=r.eval(.5,Ee)}function Me(e,t,n){He(e,t,n,{forHeading:!0})}function we(e,t,n){He(e,t,n,{forHeading:!1})}function He(e,t,n,{forHeading:r}){const{dimension:o,geometry:i}=t,{primaryOffsetAxis:a}=i,s=m(Pe,a,o.offset>=0?1:-1),c=ke(Ce,{forHeading:r,geometry:i,renderCoordsHelper:n});u(c,c,s);const d=V(s,c,S,Ae);e.modelTransform=d,e.renderLocation=be(Ee,i,i.dimensionSegment,n)}const Pe=y(),Ce=y();function Te(e,t,n,r){const{geometry:o}=t,i=z(Ge,n,t,r),a=O(Ee,{measureType:n,directSegment:o.directSegment,renderCoordsHelper:r}),c=v(Le,i.endRenderSpace,i.startRenderSpace),m=V(c,a,S,Ae),d=g(c);s(m,m,h(Le,d,d,d)),e.modelTransform=m,e.renderLocation=i.eval(.5,Le)}function be(e,t,n,r){const{startRenderSpace:o,endRenderSpace:i}=n,a=Re(t,r)?o:i;return d(e,a)}function ke(e,{forHeading:t,geometry:n,renderCoordsHelper:r}){return t?D(e,n,r):E(e,n,{invert:!0})}function Re(e,t){const n=F(Ue,e),r=D(ze,e,t);return f(n,r)>0}const Ue=y(),ze=y();function Oe(e){return i(e)+L.offsetManipulator.linePaddingPx}function De(e){return i(e)+L.offsetManipulator.focusedLinePaddingPx}const Fe=te.Custom1,Ee=y(),Le=y(),Ae=c(),Ge=new Q;export{Fe as DidPointerMoveRecentlyFlag,oe as LengthDimensionManipulators,je as automaticHeadingFromCamera,de as createMeasureTypeManipulator,ae as createOffsetManipulator,ce as createOrientationManipulator,ie as createPointManipulator,De as focusedOffsetWidth,fe as headingManipulatorHandles,ye as measureTypeManipulatorHandles,ue as offsetManipulatorHandles,le as pointManipulatorHandles,pe as rotationManipulatorHandles,ve as snapOrientationToNearestRightAngle,Oe as unfocusedOffsetWidth,Me as updateHeadingManipulatorTransform,Te as updateMeasureTypeManipulatorTransform,xe as updateOffsetManipulatorTransform,me as updateOrientationManipulator,we as updateRotationManipulatorTransform};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction t(t){let r,e,i=[],u=!1;function f(...f){return u&&r===this&&n(f,i)||(e=t.apply(this,f),r=this,i=f,u=!0),e}return f}function n(t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==n[r])return!1;return!0}export{t as memoize};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../../../geometry.js\";import{LengthDimensionMeasureType as e}from\"../../../../analysis/dimensionUtils.js\";import\"../../../../core/has.js\";import{k as t,g as n,e as i,b as o,p as r}from\"../../../../chunks/vec3.js\";import{sv3d as a}from\"../../../../geometry/support/vectorStacks.js\";import{automaticHeadingFromCamera as s}from\"./lengthDimensionManipulatorUtils.js\";import{isGeodesicDimension as l,directUp as d,directStartToEnd as c}from\"./lengthDimensionUtils.js\";import{settings as m}from\"./settings.js\";import u from\"../../../../geometry/Point.js\";var P;function p(e,t){return{enabled:t.effectiveFeatureEnabled,elevationAlignedStartPoint:e.elevationAlignedStartPoint,elevationAlignedEndPoint:e.elevationAlignedEndPoint,geometry:e.geometry}}function g(e,s){if(l(e))return P.Direct;if(!e.enabled)return null;const{geometry:u}=e;if(null==u||t(u.directSegment.startRenderSpace,u.directSegment.endRenderSpace))return null;const{constraintThresholdPx:p}=m,{camera:g}=s.state,f=d(a.get(),u,s.renderCoordsHelper),v=c(a.get(),u),y=n(a.get(),f,i(v,f)),S=o(a.get(),v,y),A=r(S),R=r(y),{startRenderSpace:z,endRenderSpace:j}=u.directSegment,x=Math.max(g.computeRenderPixelSizeAt(z)*p,g.computeRenderPixelSizeAt(j)*p)**2;return A<x?P.Vertical:R<x?P.Horizontal:null}function f(e,t,{constraint:n,view:i}){const{unconstrainedGeometry:o}=e;if(null==o)return;const{renderCoordsHelper:r,spatialReference:a}=i,{startRenderSpace:s,endRenderSpace:l}=o.directSegment,d=r.fromRenderCoords(s,new u,a),c=r.fromRenderCoords(l,new u,a);let m;m=\"start\"===t?{startPoint:d}:{endPoint:c},v(e,m,{constraint:n,elevationAlignedStartPoint:e.elevationAlignedStartPoint,elevationAlignedEndPoint:e.elevationAlignedEndPoint,unconstrainedGeometry:o,view:i})}function v(t,n,i){const{constraint:o,elevationAlignedStartPoint:r,elevationAlignedEndPoint:a,unconstrainedGeometry:l,view:d}=i,{dimension:c,previousConstraint:m,preConstraintProperties:u}=t;if(null==r||null==a)return;const p=()=>{\"startPoint\"in n?c.startPoint=n.startPoint:\"endPoint\"in n&&(c.endPoint=n.endPoint)};if(null==o)p(),null!=m&&null!=u&&(c.measureType=u.measureType,c.orientation=u.orientation);else switch(c.measureType=e.Direct,o){case P.Horizontal:if(o!==m&&(c.orientation=0),\"startPoint\"in n){const e=n.startPoint;null!=e&&(e.z=a.z),c.startPoint=e}else if(\"endPoint\"in n){const e=n.endPoint;null!=e&&(e.z=r.z),c.endPoint=e}break;case P.Vertical:if(o!==m&&(c.orientation=s(l,d)),\"startPoint\"in n){const e=n.startPoint;null!=e&&(e.x=a.x,e.y=a.y),c.startPoint=e}else if(\"endPoint\"in n){const e=n.endPoint;null!=e&&(e.x=r.x,e.y=r.y),c.endPoint=e}break;case P.Direct:o!==m&&null!=u&&(c.orientation=u.orientation),p()}t.previousConstraint=o,t.unconstrainedGeometry=l}!function(e){e[e.Horizontal=0]=\"Horizontal\",e[e.Vertical=1]=\"Vertical\",e[e.Direct=2]=\"Direct\"}(P||(P={}));export{P as LengthDimensionConstraint,v as applyConstraint,g as computeConstraint,p as constraintDependencies,f as reapplyConstraint};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{c as e,b as t,k as r,o as s}from\"../../../../chunks/vec3.js\";import{c as i,f as n}from\"../../../../chunks/vec3f64.js\";import{g as a,c as o}from\"../../../../chunks/vec4.js\";import{f as l,c as h}from\"../../../../chunks/vec4f32.js\";import{create as d,fromRay as _,getStart as c,getEnd as p}from\"../../../../geometry/support/clipRay.js\";import{intersectClipRay as u}from\"../../../../geometry/support/frustum.js\";import{create as f,fromPoints as m,pointAt as y}from\"../../../../geometry/support/lineSegment.js\";import{create as g,fromPoints as b}from\"../../../../geometry/support/ray.js\";import{EngineVisualElement as D}from\"./EngineVisualElement.js\";import{LaserlineVisualElement as O}from\"./LaserlineVisualElement.js\";import{DRAPED_Z as w}from\"../../terrain/OverlayRenderer.js\";import{createPolylineGeometry as E}from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as R}from\"../../webgl-engine/lib/Material.js\";import{RenderGeometry as A}from\"../../webgl-engine/lib/RenderGeometry.js\";import{VertexAttribute as j}from\"../../webgl-engine/lib/VertexAttribute.js\";import{RibbonLineMaterial as C}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class G extends D{constructor(e){super(e),this._ray=g(),this._isWorldDown=!1,this._start=i(),this._end=n(1,0,0),this._width=1,this._color=l(1,0,1,1),this._polygonOffset=!1,this._writeDepthEnabled=!0,this._innerWidth=0,this._innerColor=l(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._stipplePreferContinuous=!0,this._falloff=0,this._extensionType=V.LINE,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=R.OccludeAndTransparent,this._fadedExtensions=T,this._laserline=new O({view:this.view}),this.applyProps(e)}destroy(){this._laserline.destroy(),super.destroy()}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:e=>this._destroyExternalResources(e),recreateGeometry:(e,t)=>this._recreateObject3DGeometry(e,t),cameraChanged:()=>this._updateGeometry()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:e=>this._destroyExternalResources(e),recreateGeometry:e=>this._recreateDrapedGeometry(e)}}updateVisibility(e){super.updateVisibility(e),this._laserline.visible=e}onAttachedChange(){this._laserline.attached=this._laserlineAttached}setStartEndFromWorldDownAtLocation(r){this._isWorldDown=!0,e(this._start,r),this.view.renderCoordsHelper.worldUpAtPosition(r,this._end),t(this._end,r,this._end),b(this._start,this._end,this._ray),this._updateGeometry()}get start(){return this._start}set start(t){this._isWorldDown=!1,r(this._start,t)||(e(this._start,t),b(this._start,this._end,this._ray),this._updateGeometry())}get end(){return this._end}set end(t){this._isWorldDown=!1,r(this._end,t)||(e(this._end,t),b(this._start,this._end,this._ray),this._updateGeometry())}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){a(e,this._color)||(o(this._color,e),this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){a(e,this._innerColor)||(o(this._innerColor,e),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=null!=e!=(null!=this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){null!=e&&null!=this._stippleOffColor&&a(e,this._stippleOffColor)||(this._stippleOffColor=null!=e?h(e):null,this._updateMaterial())}get stipplePreferContinuous(){return this._stipplePreferContinuous}set stipplePreferContinuous(e){e!==this._stipplePreferContinuous&&(this._stipplePreferContinuous=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get extensionType(){return this._extensionType}set extensionType(e){e!==this._extensionType&&(this._extensionType=e,this.recreateGeometry())}get _laserlineAttached(){return this._laserlineEnabled&&null!=this._laserlineStyle&&this.attached&&!this.isDraped}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,this._laserline.attached=this._laserlineAttached,null!=e&&(this._laserline.style=e)}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,this._laserline.attached=this._laserlineAttached)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get _normalizedRenderOccluded(){return this.isDraped&&this._renderOccluded===R.OccludeAndTransparentStencil?R.OccludeAndTransparent:this._renderOccluded}get fadedExtensions(){return this._fadedExtensions}set fadedExtensions(e){this._fadedExtensions=e??T,this.recreateGeometry()}_updateMaterial(){const{materialParameters:e}=this;this.object3dResources.resources?.material.setParameters(e),this.drapedResources.resources?.material.setParameters(e)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,hasPolygonOffset:this._polygonOffset,renderOccluded:this._normalizedRenderOccluded,writeDepth:this._writeDepthEnabled}}_createObject3DResources(e){const t=new C(this.materialParameters),r=new Array;return this._createObject3DGeometry(t,e,r),{material:t,geometries:r,forEach:e=>{e(t),r.forEach(e)}}}_destroyExternalResources(e){e.geometries=[],e.material.dispose()}_recreateObject3DGeometry(e,t){e.geometries.length=0,this._createObject3DGeometry(e.material,t,e.geometries)}_createObject3DGeometry(e,t,r){const s=this._createGeometry(e);r.push(s),t.addGeometry(s),this._updateVerticesObject3D(t)}_createDrapedResources(){const e=new C(this.materialParameters);return{material:e,geometries:[this._createDrapedGeometry(e)]}}_recreateDrapedGeometry(e){e.geometries=[this._createDrapedGeometry(e.material)]}_createDrapedGeometry(e){const t=this._createGeometry(e);return this._updateVerticesDraped(t),new A(t)}_createGeometry(e){const t=this.extensionType===V.FADED,r=t?[i(),i(),i(),i()]:[i(),i()];return E(e,r,null,t?[1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]:null)}_updateGeometry(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const e=this.object3dResources.object;e&&this._updateVerticesObject3D(e)}}_updateVerticesObject3D(e){const t=this._lineSegment;this._updateVertexAttributesObject3D(e,t),this._laserline.intersectsLine=t}_updateVerticesDraped(e){this._updateVertexAttributesDraped(e,this._lineSegment)}get _lineSegment(){return this._extensionType===V.FADED?this._updateLineSegmentFinite(S):this._updateLineSegmentInfinite(this._extensionType,S)}_updateLineSegmentFinite(e){return m(this._start,this._end,e)}_updateLineSegmentInfinite(e,t){const r=this.view.state.camera;switch(_(this._ray,x),e){case V.LINE:x.c0=-Number.MAX_VALUE;break;case V.RAY:case V.GROUND_RAY:{const e=this._ray.origin,t=this.view.elevationProvider.getElevation(e[0],e[1],e[2],this.view.renderCoordsHelper.spatialReference,\"ground\")??0,r=this.view.renderCoordsHelper.getAltitude(e);this._isWorldDown&&r<t&&s(x.ray.direction,x.ray.direction),this._extensionType===V.GROUND_RAY&&null!=t&&(x.c1=Math.abs(r-t));break}}if(!u(r.frustum,x))return this._updateLineSegmentFinite(t);const i=c(x,P),n=p(x,v);return m(i,n,t)}_updateVertexAttributesObject3D(e,t){const r=e.geometries[0].getMutableAttribute(j.POSITION)?.data;if(!r)return;let s=0;for(const i of this._lineVertices(t))r[s++]=i[0],r[s++]=i[1],r[s++]=i[2];e.geometryVertexAttrsUpdated(e.geometries[0])}_updateVertexAttributesDraped(e,t){const r=e.getMutableAttribute(j.POSITION)?.data;if(!r)return;let s=0;for(const i of this._lineVertices(t))r[s++]=i[0],r[s++]=i[1],r[s++]=w;e.invalidateBoundingInfo()}*_lineVertices(e){this.extensionType===V.FADED?(yield y(e,-this.fadedExtensions.start,P),yield y(e,0,P),yield y(e,1,P),yield y(e,1+this.fadedExtensions.end,P)):(yield y(e,0,P),yield y(e,1,P))}}const x=d(),P=i(),v=i(),S=f();var V;!function(e){e[e.LINE=0]=\"LINE\",e[e.RAY=1]=\"RAY\",e[e.GROUND_RAY=2]=\"GROUND_RAY\",e[e.FADED=3]=\"FADED\"}(V||(V={}));const M=1/3,T={start:M,end:M};export{G as ExtendedLineVisualElement,V as ExtensionType};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{watch as e}from\"../../../../core/reactiveUtils.js\";import{castScreenPointArray as t,createScreenPointArray as r}from\"../../../../core/screenUtils.js\";import{e as s,c as i,a as o,s as a,i as c}from\"../../../../chunks/vec2.js\";import{a as n}from\"../../../../chunks/vec2f64.js\";import{k as d,c as h,n as m,b as u,a as l}from\"../../../../chunks/vec3.js\";import{c as p,f as _}from\"../../../../chunks/vec3f64.js\";import{g as f,c as g}from\"../../../../chunks/vec4.js\";import{f as b}from\"../../../../chunks/vec4f32.js\";import{makeDehydratedPoint as y}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{EngineVisualElement as j}from\"./EngineVisualElement.js\";import{DRAPED_Z as D}from\"../../terrain/OverlayRenderer.js\";import{createPolylineGeometry as O}from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as G}from\"../../webgl-engine/lib/Material.js\";import{RenderGeometry as R}from\"../../webgl-engine/lib/RenderGeometry.js\";import{VertexAttribute as w}from\"../../webgl-engine/lib/VertexAttribute.js\";import{RibbonLineMaterial as v}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class x extends j{constructor(e){super(e),this._location=p(),this._direction=_(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=b(1,0,1,1),this._renderOccluded=G.OccludeAndTransparent,this.applyProps(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:e=>this._destroyObject3DResources(e),recreateGeometry:(e,t)=>this._recreateObject3DGeometry(e,t),cameraChanged:()=>this._updateGeometry()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:e=>this._destroyDrapedResources(e),recreateGeometry:e=>this._recreateDrapedGeometry(e)}}get location(){return this._location}set location(e){d(this._location,e)||(h(this._location,e),this._updateGeometry())}get direction(){return this._direction}set direction(e){d(this._direction,e)||(h(this._direction,e),this._updateGeometry())}setDirectionFromPoints(e,t){m(this._direction,u(this._direction,t,e)),this._updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this._updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this._updateGeometry())}get color(){return this._color}set color(e){f(e,this._color)||(g(this._color,e),this._updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}_createObject3DResources(e){const t=new v(this.materialParameters),r=new Array;return this._createObject3DGeometry(t,e,r),{material:t,geometries:r,forEach:e=>{e(t),r.forEach(e)}}}_destroyObject3DResources(e){e.geometries.length=0,e.material.dispose()}_recreateObject3DGeometry(e,t){e.geometries.length=0,this._createObject3DGeometry(e.material,t,e.geometries)}_createObject3DGeometry(e,t,r){const[s,i]=this._createGeometries(e);t.addGeometry(s),t.addGeometry(i),r.push(s),r.push(i),this._updateVerticesObject3D(t)}_createDrapedResources(){const t=new v(this.materialParameters),r=e((()=>this.view.state.contentPixelRatio),(()=>{this.drapedResources.recreateGeometry()}));return{material:t,geometries:this._createDrapedGeometry(t),pixelRatioHandle:r}}_destroyDrapedResources(e){e.pixelRatioHandle.remove(),e.geometries=[],e.material.dispose()}_recreateDrapedGeometry(e){e.geometries=this._createDrapedGeometry(e.material)}_createDrapedGeometry(e){const t=this._createGeometries(e);return this._updateVerticesDraped(t),t.map((e=>new R(e)))}_createGeometries(e){return[O(e,[p(),p()]),O(e,[p(),p()])]}_updateMaterial(){const{materialParameters:e}=this;this.object3dResources.resources?.material.setParameters(e),this.drapedResources.resources?.material.setParameters(e)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}_updateGeometry(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const e=this.object3dResources.object;e&&this._updateVerticesObject3D(e)}}_updateVerticesObject3D(e){const t=this.view.state.camera;t.projectToScreen(this.location,S),l(V,this.location,this.direction),t.projectToScreen(V,k),s(k,i(k,k,S)),this._updateVertexAttributesObject3D(t,e,0,S,k,1),this._updateVertexAttributesObject3D(t,e,1,S,k,-1)}_updateVertexAttributesObject3D(e,r,s,i,o,a){const c=r.geometries[s],n=c.getMutableAttribute(w.POSITION)?.data;if(!n)return;const{start:d,end:h}=this._computeStartEnd(o,i,a,this.offset,this.width,this.length);e.unprojectFromScreen(t(d),V),n[0]=V[0],n[1]=V[1],n[2]=V[2],e.unprojectFromScreen(t(h),V),n[3]=V[0],n[4]=V[1],n[5]=V[2],r.geometryVertexAttrsUpdated(c)}_updateVerticesDraped(e){const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:r}}}=this,{location:s,width:i,length:o,offset:a}=this,c=E;c.spatialReference=t.renderer.spatialReference,c.x=s[0],c.y=s[1];const n=t.overlayPixelSizeInMapUnits(c)*r,d=i*n,h=o*n,m=a*n;this._updateVertexAttributesDraped(e[0],d,h,m,-1),this._updateVertexAttributesDraped(e[1],d,h,m,1)}_updateVertexAttributesDraped(e,t,r,s,i){const o=e.getMutableAttribute(w.POSITION)?.data;if(!o)return;const{location:a,direction:c}=this,{start:n,end:d}=this._computeStartEnd(c,a,i,s,t,r);o[0]=n[0],o[1]=n[1],o[2]=D,o[3]=d[0],o[4]=d[1],o[5]=D,e.invalidateBoundingInfo()}_computeStartEnd(e,t,r,s,i,n){const d=o(P,a(P,e[1]*r,e[0]*-r),s+i/2),h=c(A,c(A,c(A,t,o(A,e,n/2)),d),d);return{start:h,end:c(M,h,o(M,e,-n))}}}const V=p(),P=n(),A=n(),M=n(),S=r(),k=r(),E=y(0,0,void 0,null);export{x as ParallelLineVisualElement};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import n from\"../../../Color.js\";import{JSONSupport as t}from\"../../../core/JSONSupport.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";let o=class extends t{constructor(){super(...arguments),this.enabled=!0}};e([i({type:Boolean})],o.prototype,\"enabled\",void 0),o=e([r(\"esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm\")],o);let l=class extends t{constructor(e){super(e),this.lineSnapper=new o,this.parallelLineSnapper=new o,this.rightAngleSnapper=new o,this.rightAngleTriangleSnapper=new o,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThreshold=.1,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new n([255,127,0]),this.orangeTransparent=new n([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};e([i({type:o,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,\"lineSnapper\",void 0),e([i({type:o,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,\"parallelLineSnapper\",void 0),e([i({type:o,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,\"rightAngleSnapper\",void 0),e([i({type:o,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,\"rightAngleTriangleSnapper\",void 0),e([i({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],l.prototype,\"shortLineThreshold\",void 0),e([i({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],l.prototype,\"distance\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,\"pointThreshold\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,\"intersectionParallelLineThreshold\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,\"parallelLineThreshold\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],l.prototype,\"verticalLineThreshold\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,\"touchSensitivityMultiplier\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,\"pointOnLineThreshold\",void 0),e([i({type:n,nonNullable:!0})],l.prototype,\"orange\",void 0),e([i({type:n,nonNullable:!0})],l.prototype,\"orangeTransparent\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,\"lineHintWidthReference\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,\"lineHintWidthTarget\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],l.prototype,\"lineHintFadedExtensions\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,\"parallelLineHintWidth\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],l.prototype,\"parallelLineHintLength\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],l.prototype,\"parallelLineHintOffset\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],l.prototype,\"rightAngleHintSize\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],l.prototype,\"rightAngleHintOutlineSize\",void 0),e([i({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],l.prototype,\"satisfiesConstraintScreenThreshold\",void 0),l=e([r(\"esri.views.interactive.snapping.Settings.Defaults\")],l);const p=new l;export{p as defaults};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{k as n}from\"../../../../chunks/vec3.js\";import{SnappingDomain as t}from\"../SnappingDomain.js\";import{SnappingHint as i}from\"./SnappingHint.js\";class o extends i{constructor(n,i,o=t.ALL){super(i,o),this.intersectionPoint=n}equals(t){return t instanceof o&&n(this.intersectionPoint,t.intersectionPoint)}}export{o as IntersectionSnappingHint};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import{k as t}from\"../../../../chunks/vec3.js\";import{SnappingDomain as n}from\"../SnappingDomain.js\";import{SnappingHint as i}from\"./SnappingHint.js\";class r extends i{constructor(t,i,r,s=n.ALL){super(r,s),this.lineStart=t,this.lineEnd=i}equals(n){return n instanceof r&&(t(this.lineStart,n.lineStart)&&t(this.lineEnd,n.lineEnd))}}export{r as ParallelSnappingHint};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import{k as e}from\"../../../../chunks/vec3.js\";import{SnappingDomain as t}from\"../SnappingDomain.js\";import{SnappingHint as r}from\"./SnappingHint.js\";class s extends r{constructor(e,r,s,i,o=t.ALL){super(i,o),this.previousVertex=e,this.centerVertex=r,this.nextVertex=s}equals(t){return t instanceof s&&(e(this.previousVertex,t.previousVertex)&&e(this.centerVertex,t.centerVertex)&&e(this.nextVertex,t.nextVertex))}}export{s as RightAngleSnappingHint};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{handlesGroup as i}from\"../../../core/handleUtils.js\";import{IntersectionSnappingHint as n}from\"./hints/IntersectionSnappingHint.js\";import{LineSnappingHint as t}from\"./hints/LineSnappingHint.js\";import{ParallelSnappingHint as s}from\"./hints/ParallelSnappingHint.js\";import{PointSnappingHint as o}from\"./hints/PointSnappingHint.js\";import{RightAngleSnappingHint as e}from\"./hints/RightAngleSnappingHint.js\";class r{draw(r,a){const p=this._getUniqueHints(r),h=this.sortUniqueHints(p),u=[];for(const i of h)i instanceof n&&u.push(this.visualizeIntersectionPoint(i,a)),i instanceof t&&u.push(this.visualizeLine(i,a)),i instanceof s&&u.push(this.visualizeParallelSign(i,a)),i instanceof e&&u.push(this.visualizeRightAngleQuad(i,a)),i instanceof o&&u.push(this.visualizePoint(i,a));return i(u)}sortUniqueHints(i){return i}_getUniqueHints(i){const n=[];for(const t of i){let i=!0;for(const s of n)if(t.equals(s)){i=!1;break}i&&n.push(t)}return n}}export{r as SnappingVisualizer};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import{getAccentColor as n}from\"../../../core/analysisThemeUtils.js\";import\"../../../core/has.js\";import{destroyHandle as i}from\"../../../core/handleUtils.js\";import{h as t}from\"../../../chunks/vec3.js\";import{c as r}from\"../../../chunks/vec3f64.js\";import{projectVectorToVector as o}from\"../../../geometry/projection.js\";import{onTheGroundElevationInfo as l,absoluteHeightElevationInfo as a}from\"../../../support/elevationInfoUtils.js\";import{ExtendedLineVisualElement as s,ExtensionType as p}from\"./visualElements/ExtendedLineVisualElement.js\";import{ParallelLineVisualElement as c}from\"./visualElements/ParallelLineVisualElement.js\";import{PointVisualElement as d}from\"./visualElements/PointVisualElement.js\";import{RightAngleQuadVisualElement as u}from\"./visualElements/RightAngleQuadVisualElement.js\";import{DrapedRenderGroup as m}from\"../layers/interfaces.js\";import{RenderOccludedFlag as g}from\"../webgl-engine/lib/Material.js\";import{defaults as f}from\"../../interactive/snapping/Settings.js\";import{SnappingDomain as v}from\"../../interactive/snapping/SnappingDomain.js\";import{snappingPointToDehydratedPoint as h,createSnappingPoint as E}from\"../../interactive/snapping/SnappingPoint.js\";import{LineSegmentHintType as S}from\"../../interactive/snapping/snappingUtils.js\";import{SnappingVisualizer as C}from\"../../interactive/snapping/SnappingVisualizer.js\";import{LineSnappingHint as j}from\"../../interactive/snapping/hints/LineSnappingHint.js\";import{vectorToRender as w}from\"../../interactive/support/viewUtils.js\";class O extends C{sortUniqueHints(e){return e.sort(((e,n)=>(n instanceof j?n.length:0)-(e instanceof j?e.length:0)))}visualizeIntersectionPoint(e,n){const{spatialReference:t,view:r}=n,o=R();return i(new d({view:r,primitive:\"circle\",geometry:h(e.intersectionPoint,t),elevationInfo:e.isDraped?l:a,size:20,outlineSize:2,color:o.intersectionPointColor,outlineColor:o.intersectionPointOutlineColor,pixelSnappingEnabled:!1}))}visualizePoint(e,n){const{view:t,spatialReference:r}=n,o=R(),l=A(e.point,e.domain,n);return i(new d({view:t,primitive:\"circle\",geometry:h(l,r),elevationInfo:H(e,n),size:20,outlineSize:2,color:o.pointColor,outlineColor:o.pointOutlineColor,pixelSnappingEnabled:!1}))}visualizeLine(e,n){const{view:t,spatialReference:r}=n,o=R(),l=A(e.lineStart,e.domain,n),a=A(e.lineEnd,e.domain,n);return i(this._createLineSegmentHint(e.type,l,a,r,H(e,n),t,o,e.isDraped,e.fadeLeft,e.fadeRight))}visualizeParallelSign(e,n){const{view:r,spatialReference:o}=n,l=R(),{isDraped:a}=e,s=H(e,n),p=A(e.lineStart,e.domain,n),d=A(e.lineEnd,e.domain,n),u=z(p,o,s,r,a),v=z(d,o,s,r,a),h=t(v,u,v,.5),E=new c({view:r,attached:!1,offset:f.parallelLineHintOffset,length:f.parallelLineHintLength,width:f.parallelLineHintWidth,color:l.parallelSignColor,location:h,renderOccluded:a?g.OccludeAndTransparent:g.Opaque,isDraped:a,renderGroup:m.SnappingHint});return E.setDirectionFromPoints(u,h),E.attached=!0,i(E)}visualizeRightAngleQuad(e,n){const{view:t,spatialReference:r}=n,o=R(),l=H(e,n),{isDraped:a}=e,s=A(e.previousVertex,e.domain,n),p=A(e.centerVertex,e.domain,n),c=A(e.nextVertex,e.domain,n),d=z(s,r,l,t,a),v=z(p,r,l,t,a),h=z(c,r,l,t,a);return i(new u({view:t,attached:!0,color:a?o.rightAngleColorDraped:o.rightAngleColor,renderOccluded:a?g.OccludeAndTransparent:g.Transparent,outlineRenderOccluded:a?g.OccludeAndTransparent:g.Opaque,outlineColor:o.rightAngleOutlineColor,outlineSize:f.rightAngleHintOutlineSize,size:f.rightAngleHintSize,isDraped:a,geometry:{previous:d,center:v,next:h},renderGroup:m.SnappingHint}))}_createLineSegmentHint(e,n,i,t,r,o,l,a=!1,c=!0,d=!0){const u=z(n,t,r,o,a),v=z(i,t,r,o,a),h=new s({view:o,extensionType:p.FADED,start:u,end:v,isDraped:a,color:l.lineColor,renderOccluded:a?g.OccludeAndTransparent:g.Opaque,renderGroup:m.SnappingHint});switch(e){case S.TARGET:h.width=f.lineHintWidthTarget,h.fadedExtensions={start:0,end:f.lineHintFadedExtensions};break;case S.REFERENCE_EXTENSION:h.width=f.lineHintWidthReference,h.fadedExtensions={start:0,end:0};break;case S.REFERENCE:h.width=f.lineHintWidthReference,h.fadedExtensions={start:c?f.lineHintFadedExtensions:0,end:d?f.lineHintFadedExtensions:0}}return h.attached=!0,h}}function R(i){const t=e.toUnitRGBA(n()),r=[0,0,0,0];return{intersectionPointColor:r,intersectionPointOutlineColor:t,pointColor:r,pointOutlineColor:t,lineColor:t,lineOutlineColor:void 0,parallelSignColor:t,rightAngleColor:t,rightAngleColorDraped:e.toUnitRGBA(n(.5)),rightAngleOutlineColor:t}}function A(e,n,i){const t=x(n,i);return null==t?e:E(e[0],e[1],t)}function H(e,n){return null!=x(e.domain,n)?n.selfSnappingZ.elevationInfo:e.isDraped?l:a}function x(e,{selfSnappingZ:n}){return e===v.SELF&&null!=n?n.value:null}function z(e,n,i,t,l,a=r()){if(l){const i=t.basemapTerrain.overlayManager.renderer.spatialReference;o(e,n,a,i)}else w(e,n,i,t,a);return a}export{O as SnappingVisualizer3D};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{newDoubleArray as t}from\"../../../../geometry/support/DoubleArray.js\";import{applyPerVertexElevationAlignment as e}from\"../../layers/graphics/elevationAlignmentUtils.js\";function o(o,n,r,s,i){const l=t(3*o.length),p=t(l.length);o.forEach(((t,e)=>{l[3*e]=t[0],l[3*e+1]=t[1],l[3*e+2]=t.length>2?t[2]:0}));const c=e(l,n,0,p,0,l,0,l.length/3,r,s,i),m=null!=c;return{numVertices:o.length,position:l,mapPositions:p,projectionSuccess:m,sampledElevation:c}}export{o as geometryToRenderInfo};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{s as e}from\"../../../../chunks/vec3.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{g as r,c as i}from\"../../../../chunks/vec4.js\";import{b as s}from\"../../../../chunks/vec4f64.js\";import{Object3DVisualElement as a}from\"./Object3DVisualElement.js\";import{ElevationContext as l}from\"../../layers/graphics/ElevationContext.js\";import{geometryToRenderInfo as n}from\"../../support/renderInfoUtils/point.js\";import{CullFaceOptions as o}from\"../../webgl-engine/lib/basicInterfaces.js\";import{createSphereGeometry as c}from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as h}from\"../../webgl-engine/lib/Material.js\";import{ShadedColorMaterial as u}from\"../../webgl-engine/materials/ShadedColorMaterial.js\";class _ extends a{constructor(e){super(e),this.view=null,this._renderOccluded=h.OccludeAndTransparent,this._vertices=null,this._spatialReference=null,this._color=s([1,127/255,0,1]),this._size=11,this._outlineColor=s([0,0,0,.5]),this._outlineSize=1,this._elevationInfo=null,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial(),this._updateOutlineMaterial())}get vertices(){return this._vertices}set vertices(e){this._vertices=e,this.recreateGeometry()}get spatialReference(){return this._spatialReference}set spatialReference(e){this._spatialReference=e,this.recreateGeometry()}get color(){return this._color}set color(e){r(e,this._color)||(i(this._color,e),this._updateMaterial())}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){r(e,this._outlineColor)||(i(this._outlineColor,e),this._updateOutlineMaterial())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateOutlineMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}get _vertexMaterialParameters(){return{color:this._color,transparent:this._color[3]<1,screenSizeScale:this.size,renderOccluded:this._renderOccluded}}get _vertexOutlineMaterialParameters(){return{color:this._outlineColor,transparent:this._outlineColor[3]<1,screenSizeScale:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded}}_updateMaterial(){this.attached&&this._vertexMaterial.setParameters(this._vertexMaterialParameters)}_updateOutlineMaterial(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)}_createRenderGeometries(){const t=this.vertices;if(null==t||0===t.length)return[];const r=.5,i=.5,s=n(t,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,l.fromElevationInfo(this.elevationInfo)),a=[],o=s.numVertices,c=s.position;for(let l=0;l<o;++l){const t=e(d,c[3*l],c[3*l+1],c[3*l+2]),s=m(this._vertexMaterial,r,t),n=m(this._vertexOutlineMaterial,i,t);a.push({vertexGeometry:s,vertexOutlineGeometry:n})}return a}createGeometries(e){const t=this._createRenderGeometries();for(const{vertexGeometry:r,vertexOutlineGeometry:i}of t)e.addGeometry(r),e.addGeometry(i)}createExternalResources(){this._vertexMaterial=new u({...this._vertexMaterialParameters,writeDepth:!0,cullFace:o.Back,screenSizeEnabled:!0}),this._vertexOutlineMaterial=new u({...this._vertexOutlineMaterialParameters,transparent:!0,writeDepth:!0,cullFace:o.Front,screenSizeEnabled:!0,shadingEnabled:!1})}destroyExternalResources(){this._vertexMaterial=null,this._vertexOutlineMaterial=null}forEachExternalMaterial(e){e(this._vertexMaterial),e(this._vertexOutlineMaterial)}}const d=t();function m(e,t,r){return c(e,t,16,16,{offset:r})}export{_ as VerticesVisualElement};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import o from\"../../../core/Accessor.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends o{constructor(r){super(r),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};r([t({constructOnly:!0})],e.prototype,\"layer\",void 0),r([t()],e.prototype,\"enabled\",void 0),r([t()],e.prototype,\"updating\",void 0),r([t()],e.prototype,\"availability\",void 0),e=r([s(\"esri.views.interactive.snapping.FeatureSnappingLayerSource\")],e);const p=e;export{p as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import o from\"../../../core/Collection.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./FeatureSnappingLayerSource.js\";import{defaults as a}from\"./Settings.js\";let p=class extends t{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new o,this.distance=a.distance,this.touchSensitivityMultiplier=a.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};e([r()],p.prototype,\"enabled\",void 0),e([r()],p.prototype,\"enabledToggled\",void 0),e([r()],p.prototype,\"selfEnabled\",void 0),e([r()],p.prototype,\"featureEnabled\",void 0),e([r({type:o.ofType(s)})],p.prototype,\"featureSources\",void 0),e([r()],p.prototype,\"distance\",void 0),e([r()],p.prototype,\"touchSensitivityMultiplier\",void 0),e([r({readOnly:!0})],p.prototype,\"effectiveEnabled\",null),e([r({readOnly:!0})],p.prototype,\"effectiveSelfEnabled\",null),e([r({readOnly:!0})],p.prototype,\"effectiveFeatureEnabled\",null),p=e([i(\"esri.views.interactive.snapping.SnappingOptions\")],p);const l=p;export{l as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Collection.js\";import{watch as t,initial as i}from\"../../../core/reactiveUtils.js\";import r from\"./FeatureSnappingLayerSource.js\";import{defaults as o}from\"./Settings.js\";import n from\"./SnappingOptions.js\";function a(a,s){const l=new n({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:s?.distance??o.distance,touchSensitivityMultiplier:s?.touchSensitivityMultiplier??o.touchSensitivityMultiplier});return{...t((()=>a.map?.allLayers?.toArray()??[]),(t=>{l.featureSources=new e(t.map((e=>new r({layer:e,enabled:!0}))))}),i),options:l}}export{a as makeAllLayerSnappingOptions};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{SnappingDomain as t}from\"../SnappingDomain.js\";import{LineSegmentHintType as e}from\"../snappingUtils.js\";import{SnappingCandidate as i}from\"./SnappingCandidate.js\";import{LineSnappingHint as r}from\"../hints/LineSnappingHint.js\";import{RightAngleSnappingHint as s}from\"../hints/RightAngleSnappingHint.js\";class o extends i{constructor({targetPoint:e,constraint:i,previousVertex:r,otherVertex:s,otherVertexType:o,objectId:n,isDraped:h}){super(e,i,h,t.SELF),this.previousVertex=r,this.otherVertex=s,this.otherVertexType=o,this.objectId=n}get hints(){const t=this.previousVertex,i=this.otherVertexType===n.CENTER?this.otherVertex:this.targetPoint,o=this.otherVertexType===n.CENTER?this.targetPoint:this.otherVertex;return[new r(e.TARGET,i,o,this.isDraped,this.domain),new r(e.REFERENCE,t,i,this.isDraped,this.domain),new s(this.previousVertex,i,o,this.isDraped,this.domain)]}}var n;!function(t){t[t.NEXT=0]=\"NEXT\",t[t.CENTER=1]=\"CENTER\"}(n||(n={}));export{n as OtherVertexType,o as RightAngleSnappingCandidate};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../core/HandleOwner.js\";import r from\"../../../core/Handles.js\";import{someMap as n}from\"../../../core/MapUtils.js\";import{eachAlwaysValues as s,throwIfAborted as o}from\"../../../core/promiseUtils.js\";import{sync as a,watch as i,syncAndInitial as u}from\"../../../core/reactiveUtils.js\";import{property as c}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{k as p}from\"../../../chunks/vec2.js\";import{d,c as h}from\"../../../chunks/vec3.js\";import{c as g}from\"../../../chunks/vec3f64.js\";import{g as S}from\"../../../chunks/common.js\";import{absoluteHeightElevationInfo as m}from\"../../../support/elevationInfoUtils.js\";import{VerticalHalfPlaneConstraint as y}from\"./SnappingConstraint.js\";import{SnappingDomain as f}from\"./SnappingDomain.js\";import{anyMapPointToSnappingPoint as w}from\"./SnappingPoint.js\";import{sortCandidatesInPlace as v,screenDistance as _}from\"./snappingUtils.js\";import{DrapedEdgeSnappingCandidate as j}from\"./candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as C}from\"./candidates/EdgeSnappingCandidate.js\";import{FeatureSnappingCandidate as F}from\"./candidates/FeatureSnappingCandidate.js\";import{RightAngleSnappingCandidate as x,OtherVertexType as b}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as L}from\"../support/viewUtils.js\";let M=class extends t{get updating(){return n(this.snappingSources,(({snappingSource:e})=>e.updating))||this.updatingHandles.updating}get snappingSources(){const e=this._get(\"snappingSources\")||new Map,t=new Map;if(null!=this.options&&null!=this.options.featureSources)for(const r of this.options.featureSources.items){const n=r.layer.uid,s=e.get(n);if(s){e.delete(n),t.set(n,s);continue}if(!r.layer.loaded){this.updatingHandles.addPromise(r.layer.load());continue}const o=this._createSourceInfo(r);null!=o&&t.set(n,o)}for(const[,r]of e)r.destroy();return t}constructor(e){super(e),this.options=null,this._domain=f.FEATURE,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){this.updatingHandles.add((()=>this.snappingSources),(()=>this.notifyChange(\"updating\")),a),null!=this.view&&this.handles.add([this.view.on(\"layerview-create\",(e=>this._updateLayerView(e.layer,e.layerView))),this.view.on(\"layerview-destroy\",(e=>this._updateLayerView(e.layer,null)))])}_updateLayerView(e,t){for(const[,r]of this.snappingSources)r.snappingSource.layerSource.layer===e&&(r.layerView=t)}destroy(){this._set(\"options\",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,t,r,n){if(!(t&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const a=[],i=this._computeScreenSizeDistanceParameters(e,r),u={distance:i,mode:this.view?.type??\"2d\",point:e,coordinateHelper:r.coordinateHelper,...this._types};for(const[,{snappingSource:s,layerView:o}]of this.snappingSources)!s.layerSource.enabled||null!=o&&o.suspended||a.push(s.fetchCandidates(u,n).then((e=>e.filter((e=>!this._candidateIsExcluded(s,e,r.excludeFeature))))));const c=(await s(a)).flat();return this._addRightAngleCandidates(c,e,i,r),o(n),v(e,c),c}_addRightAngleCandidates(e,t,r,n){const s=null!=n.vertexHandle?n.vertexHandle.rightEdge?.rightVertex?.pos:null!=n.editGeometryOperations&&\"polygon\"===n.editGeometryOperations.data.type?n.editGeometryOperations.data.components[0]?.getFirstVertex()?.pos:null,o=null!=n.vertexHandle?n.vertexHandle.leftEdge?.leftVertex?.pos:null!=n.editGeometryOperations?n.editGeometryOperations.data.components[0]?.getLastVertex()?.pos:null,{view:a}=this,i=w(s,a,n),u=w(o,a,n),c=e.length;for(let l=0;l<c;l++)this._addRightAngleCandidate(e[l],u,t,r,e),this._addRightAngleCandidate(e[l],i,t,r,e)}_addRightAngleCandidate(e,t,r,n,s){if(null==t||!H(e))return;const o=e.constraint.closestTo(t),a=(o[0]-r[0])/n.x,i=(o[1]-r[1])/n.y,{start:u,end:c}=e.constraint;if(a*a+i*i<=1){const r=new x({targetPoint:o,otherVertex:t,otherVertexType:b.NEXT,previousVertex:p(o,u)>p(o,c)?u:c,constraint:new y(t,o),objectId:e.objectId,isDraped:e.isDraped});s.push(r)}}_computeScreenSizeDistanceParameters(e,t){let r=null!=this.options?this.options.distance*(\"touch\"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:r,y:r,z:r,distance:r}:\"2d\"===this.view.type?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,r,n){const{spatialReference:s}=n;r.renderCoordsHelper.toRenderCoords(e,s,P);const o=r.state.camera.computeScreenPixelSizeAt(P),a=o*r.renderCoordsHelper.unitInMeters/r.mapCoordsHelper.unitInMeters,i=t*a,u=L(e,s,m,r),c=u?I(u,e,a,0,0,r,n):0,l=u?I(u,e,0,a,0,r,n):0,p=u?I(u,e,0,0,a,r,n):0;return{x:0===c?0:i/c,y:0===l?0:i/l,z:0===p?0:i/p,distance:o*t}}get _types(){return{returnEdge:!0,returnVertex:!0}}_candidateIsExcluded(e,t,r){if(null==r)return!1;const n=this._getCandidateObjectId(t);if(null==n)return!1;const s=e.layerSource.layer;return\"graphics\"===s.type?r.uid===n:r.sourceLayer===s&&(!(!r.attributes||!(\"objectIdField\"in s))&&r.attributes[s.objectIdField]===n)}_getCandidateObjectId(e){return e instanceof F?e.objectId:null}_createSourceInfo(e){const t=this._createFeatureSnappingSourceType(e);if(null==t)return null;if(\"loading\"in t)return this.updatingHandles.addPromise(t.loading.then((()=>{this.destroyed||this.notifyChange(\"snappingSources\")}))),null;const r=null!=this.view?this.view.allLayerViews.find((t=>t.layer===e.layer)):null;return new R(t.source,r)}_createFeatureSnappingSourceType(e){switch(e.layer.type){case\"feature\":case\"geojson\":case\"csv\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return this._createFeatureSnappingSourceFeatureLayer(e);case\"graphics\":return this._createFeatureSnappingSourceGraphicsLayer(e);case\"map-notes\":return this._createFeatureSnappingSourceMapNotesLayer(e);case\"scene\":case\"building-scene\":return this._createFeatureSnappingSourceSceneLayer(e)}return null}_createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(null==t||\"3d\"!==t.type)return null;const r=this._getSourceModule(\"scene\");return null!=r.module?{source:new r.module.SceneLayerSnappingSource({layerSource:e,view:t})}:{loading:r.loader}}_createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case\"feature-layer\":case\"oriented-imagery\":{const t=this._getSourceModule(\"featureService\");return null!=t.module?{source:new t.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}case\"memory\":case\"csv\":case\"geojson\":case\"wfs\":{if(\"mesh\"===e.layer.geometryType)return null;const t=this._getSourceModule(\"featureCollection\");return null!=t.module?{source:new t.module.FeatureCollectionSnappingSource({layerSource:e,view:this.view})}:{loading:t.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(e){const t=this._getSourceModule(\"graphics\");return null!=t.module?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_createFeatureSnappingSourceMapNotesLayer(e){const t=this._getSourceModule(\"notes\");return null!=t.module?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>null!=e.layer.sublayers?e.layer.sublayers.toArray():[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_getSourceModule(e){const t=this._sourceModules[e];if(null==t.loader){const r=this._loadSourceModule(e).then((e=>{t.module=e}));return t.loader=r,{module:t.module,loader:r}}return{module:t.module,loader:t.loader}}_loadSourceModule(e){const t=this.updatingHandles;switch(e){case\"featureService\":return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));case\"featureCollection\":return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));case\"graphics\":case\"notes\":return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));case\"scene\":return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"))}}};e([c({constructOnly:!0})],M.prototype,\"spatialReference\",void 0),e([c({constructOnly:!0})],M.prototype,\"view\",void 0),e([c()],M.prototype,\"options\",void 0),e([c({readOnly:!0})],M.prototype,\"updating\",null),e([c({readOnly:!0})],M.prototype,\"snappingSources\",null),M=e([l(\"esri.views.interactive.snapping.FeatureSnappingEngine\")],M);class R{constructor(e,t){this.snappingSource=e,this.layerView=t,this.handles=new r;const n=this.snappingSource.layerSource.layer;if(\"refresh\"in n){const t=n;this.handles.add(t.on(\"refresh\",(()=>e.refresh())))}this.handles.add([i((()=>e.updating),(t=>e.layerSource.updating=t),u),i((()=>e.availability),(t=>e.layerSource.availability=t),u)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}}function H(e){return(e instanceof C||e instanceof j)&&!V(e)}function V({constraint:{start:e,end:t}}){const r=d(e,t),n=p(e,t);return r<S()||n/r<G}function I(e,t,r,n,s,o,{spatialReference:a}){const i=h(E,t);i[0]+=r,i[1]+=n,i[2]+=s;const u=L(i,a,m,o);return u?_(u,e):1/0}const P=g(),E=g(),G=1e-4;export{M as FeatureSnappingEngine};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{k as e}from\"../../../chunks/vec2.js\";import{absoluteHeightElevationInfo as t}from\"../../../support/elevationInfoUtils.js\";import{defaults as s}from\"./Settings.js\";import{anyMapPointToSnappingPoint as r}from\"./SnappingPoint.js\";import{squaredScreenDistance as i}from\"./snappingUtils.js\";import{vectorToScreenPoint as o}from\"../support/viewUtils.js\";class h{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=s.shortLineThreshold*s.shortLineThreshold}snap(e,t){return null!=t.vertexHandle?\"vertex\"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold(r(e.leftVertex.pos,this.view,t),r(e.rightVertex.pos,this.view,t),t)}exceedsShortLineThreshold(e,s,{spatialReference:r}){return 0===this.squaredShortLineThreshold||i(o(s,r,t,this.view),o(e,r,t,this.view))>this.squaredShortLineThreshold}isVertical(t,r){return e(t,r)<s.verticalLineThreshold}squaredProximityThreshold(e){return\"touch\"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,s=e*t;return s*s}}export{h as SnappingAlgorithm};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{VerticalPlaneConstraint as t}from\"../SnappingConstraint.js\";import{SnappingDomain as n}from\"../SnappingDomain.js\";import{LineSegmentHintType as i}from\"../snappingUtils.js\";import{SnappingCandidate as e}from\"./SnappingCandidate.js\";import{LineSnappingHint as s}from\"../hints/LineSnappingHint.js\";class r extends e{constructor({lineStart:e,lineEnd:r,targetPoint:o,isDraped:a}){super(o,new t(e,r),a,n.SELF),this._referenceLineHint=new s(i.REFERENCE_EXTENSION,e,r,a,this.domain)}get hints(){return[this._referenceLineHint,new s(i.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}export{r as LineSnappingCandidate};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{absoluteHeightElevationInfo as e}from\"../../../support/elevationInfoUtils.js\";import{SnappingAlgorithm as t}from\"./SnappingAlgorithm.js\";import{anyMapPointToSnappingPoint as s,asSnappingPoint as i}from\"./SnappingPoint.js\";import{editEdgeToSnappingEdge as r,squaredScreenDistance as o}from\"./snappingUtils.js\";import{LineSnappingCandidate as n}from\"./candidates/LineSnappingCandidate.js\";import{vectorToScreenPoint as d}from\"../support/viewUtils.js\";import{projectPointToLineLike as p}from\"../../support/geometry3dUtils.js\";import{LineType as a}from\"../../support/geometry2dUtils.js\";class h extends t{snapNewVertex(t,s){const i=s.editGeometryOperations.data.components[0],o=i.edges.length,n=[];if(o<1)return n;const{spatialReference:p}=s,a=d(t,p,e,this.view),{view:h}=this,l=i.edges[o-1];let g=l;do{if(this.edgeExceedsShortLineThreshold(g,s)){const e=r(g,h,s);this._processCandidateProposal(e.left,e.right,t,a,s,n)}g=g.leftVertex.leftEdge}while(g&&g!==l);return n}snapExistingVertex(t,i){const o=[],n=i.vertexHandle,p=n.component;if(p.edges.length<2)return o;const{view:a}=this,{spatialReference:h}=i,l=d(t,h,e,a),g=n.leftEdge,f=n.rightEdge;g&&f&&this.edgeExceedsShortLineThreshold(g,i)&&this.edgeExceedsShortLineThreshold(f,i)&&this._processCandidateProposal(s(g.leftVertex.pos,a,i),s(f.rightVertex.pos,a,i),t,l,i,o);const m=p.edges[0];let c=m;do{if(c!==n.leftEdge&&c!==n.rightEdge&&this.edgeExceedsShortLineThreshold(c,i)){const e=r(c,a,i);this._processCandidateProposal(e.left,e.right,t,l,i,o)}c=c.rightVertex.rightEdge}while(c&&c!==m);return o}_processCandidateProposal(t,s,r,h,l,g){const{spatialReference:f,pointer:m}=l,c=i(p(r,{start:t,end:s,type:a.LINE}));o(h,d(c,f,e,this.view))<this.squaredProximityThreshold(m)&&g.push(new n({lineStart:t,lineEnd:s,targetPoint:c,isDraped:\"on-the-ground\"===l.elevationInfo?.mode}))}}export{h as LineSnapper};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{b as e,a as t,k as i}from\"../../../../chunks/vec3.js\";import{a as n}from\"../../../../chunks/vec3f64.js\";import{VerticalPlaneConstraint as r}from\"../SnappingConstraint.js\";import{SnappingDomain as s}from\"../SnappingDomain.js\";import{asSnappingPoint as a}from\"../SnappingPoint.js\";import{LineSegmentHintType as f}from\"../snappingUtils.js\";import{SnappingCandidate as o}from\"./SnappingCandidate.js\";import{LineSnappingHint as d}from\"../hints/LineSnappingHint.js\";import{ParallelSnappingHint as h}from\"../hints/ParallelSnappingHint.js\";class g extends o{constructor({referenceLine:i,lineStart:f,targetPoint:o,isDraped:d}){const h=n(f),{left:g,right:p}=i;e(h,t(h,h,p),g),super(o,new r(f,a(h)),d,s.SELF),this._referenceLines=[{edge:i,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new d(f.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new h(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map((e=>new d(f.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight)))]}addReferenceLine(e){const t={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((n=>{i(e.right,n.edge.left)&&(n.fadeLeft=!1,t.fadeRight=!1),i(e.right,n.edge.right)&&(n.fadeRight=!1,t.fadeRight=!1),i(e.left,n.edge.right)&&(n.fadeRight=!1,t.fadeLeft=!1),i(e.left,n.edge.left)&&(n.fadeLeft=!1,t.fadeLeft=!1)})),this._referenceLines.push(t)}}export{g as ParallelLineSnappingCandidate};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{k as e}from\"../../../chunks/vec2.js\";import{a as t}from\"../../../chunks/vec2f64.js\";import{f as r}from\"../../../chunks/vec3f64.js\";import{absoluteHeightElevationInfo as i}from\"../../../support/elevationInfoUtils.js\";import{defaults as s}from\"./Settings.js\";import{SnappingAlgorithm as o}from\"./SnappingAlgorithm.js\";import{anyMapPointToSnappingPoint as n,asSnappingPoint as l}from\"./SnappingPoint.js\";import{editEdgeToSnappingEdge as a,squaredScreenDistance as c}from\"./snappingUtils.js\";import{ParallelLineSnappingCandidate as h}from\"./candidates/ParallelLineSnappingCandidate.js\";import{vectorToScreenPoint as p}from\"../support/viewUtils.js\";import{projectPointToLine as d}from\"../../support/geometry2dUtils.js\";class f extends o{snapNewVertex(e,t){const r=t.editGeometryOperations.data.components[0],s=r.edges.length,o=r.vertices.length,l=[];if(s<2)return l;const{view:c}=this,h=p(e,t.spatialReference,i,c),d=n(r.vertices[o-1].pos,c,t),f=n(r.vertices[0].pos,c,t),g=r.edges[s-1];let m=g;do{if(this.edgeExceedsShortLineThreshold(m,t)){const r=a(m,c,t);this._checkEdgeForParallelLines(r,d,e,h,t,l),this._checkEdgeForParallelLines(r,f,e,h,t,l)}m=m.leftVertex.leftEdge}while(m&&m!==g);return l}snapExistingVertex(e,t){const r=[],s=t.vertexHandle,o=s.component;if(o.edges.length<3)return r;const{view:l}=this,c=p(e,t.spatialReference,i,l),h=s.leftEdge,d=s.rightEdge,f=o.vertices[0],g=n(f.pos,l,t),m=o.vertices.length,u=o.vertices[m-1],v=n(u.pos,l,t),E=o.edges[0];let L=E;do{if(L!==h&&L!==d&&this.edgeExceedsShortLineThreshold(L,t)){const i=a(L,l,t);h&&this._checkEdgeForParallelLines(i,n(h.leftVertex.pos,l,t),e,c,t,r),d&&this._checkEdgeForParallelLines(i,n(d.rightVertex.pos,l,t),e,c,t,r),s===f?this._checkEdgeForParallelLines(i,v,e,c,t,r):s===u&&this._checkEdgeForParallelLines(i,g,e,c,t,r)}L=L.rightVertex.rightEdge}while(L&&L!==E);return r}_checkEdgeForParallelLines(t,o,n,a,f,m){const u=t.left,v=t.right;if(d(g,o,u,v),e(g,o)<s.parallelLineThreshold)return;d(g,n,u,v,o);const{spatialReference:E,pointer:L}=f,x=l(r(g[0],g[1],n[2]));if(c(a,p(x,E,i,this.view))<this.squaredProximityThreshold(L)){if(this.isVertical(x,o)||this.isVertical(u,v))return;if(this._parallelToPreviousCandidate(t,m))return;m.push(new h({referenceLine:t,lineStart:o,targetPoint:x,isDraped:\"on-the-ground\"===f.elevationInfo?.mode}))}}_parallelToPreviousCandidate(t,r){const i=t.left,o=t.right;for(const n of r)if(d(g,o,n.constraint.start,n.constraint.end,i),e(g,o)<s.parallelLineThreshold)return n.addReferenceLine(t),!0;return!1}}const g=t();export{f as ParallelLineSnapper};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{c as e,g as t,x as i,y as s}from\"../../../chunks/vec2.js\";import{a as r}from\"../../../chunks/vec2f64.js\";import{s as n,A as o}from\"../../../chunks/vec3.js\";import{a,c as p}from\"../../../chunks/vec3f64.js\";import{absoluteHeightElevationInfo as h}from\"../../../support/elevationInfoUtils.js\";import{SnappingAlgorithm as c}from\"./SnappingAlgorithm.js\";import{VerticalHalfPlaneConstraint as d}from\"./SnappingConstraint.js\";import{anyMapPointToSnappingPoint as g,asSnappingPoint as f}from\"./SnappingPoint.js\";import{squaredScreenDistance as l}from\"./snappingUtils.js\";import{RightAngleSnappingCandidate as m,OtherVertexType as x}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as E}from\"../support/viewUtils.js\";class V extends c{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],s=i.vertices.length,r=[];if(s<2)return r;const{view:n}=this,o=E(e,t.spatialReference,h,n),a=i.vertices[s-1];if(this.edgeExceedsShortLineThreshold(a.leftEdge,t)){const i=g(a.pos,n,t),s=g(a.leftEdge.leftVertex.pos,n,t);this._checkForSnappingCandidate(r,s,i,e,o,t)}const p=i.vertices[0];if(this.edgeExceedsShortLineThreshold(p.rightEdge,t)){const i=g(p.pos,n,t),s=g(p.rightEdge.rightVertex.pos,n,t);this._checkForSnappingCandidate(r,s,i,e,o,t)}return r}snapExistingVertex(e,t){const i=[],s=t.vertexHandle;if(s.component.vertices.length<3)return i;const{view:r}=this,n=E(e,t.spatialReference,h,r),o=s.leftEdge,a=s.rightEdge;if(o&&o.leftVertex.leftEdge){const s=o.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(s,t)){const o=g(s.rightVertex.pos,r,t),a=g(s.leftVertex.pos,r,t);this._checkForSnappingCandidate(i,a,o,e,n,t)}}if(a&&a.rightVertex.rightEdge){const s=a.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(s,t)){const o=g(s.leftVertex.pos,r,t),a=g(s.rightVertex.pos,r,t);this._checkForSnappingCandidate(i,a,o,e,n,t)}}return i}_checkForSnappingCandidate(r,c,g,V,S,j){const{spatialReference:k,pointer:C}=j;e(v,g,c);const w=n(u,v[1],-v[0],0),T=t(w,e(v,V,g))/i(w),F=f(s(a(V),g,w,T));if(l(S,E(F,k,h,this.view))<this.squaredProximityThreshold(C)){if(this.isVertical(F,g)||this.isVertical(g,c))return;const e=o(p(),g,w,Math.sign(T));r.push(new m({targetPoint:F,constraint:new d(g,f(e)),previousVertex:c,otherVertex:g,otherVertexType:x.CENTER,isDraped:\"on-the-ground\"===j.elevationInfo?.mode}))}}}const v=r(),u=p();export{V as RightAngleSnapper};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{d as i}from\"../../../../chunks/vec2.js\";import{h as t}from\"../../../../chunks/vec3.js\";import{c as s}from\"../../../../chunks/vec3f64.js\";import{VerticalCylinderConstraint as n}from\"../SnappingConstraint.js\";import{SnappingDomain as p}from\"../SnappingDomain.js\";import{asSnappingPoint as o}from\"../SnappingPoint.js\";import{LineSegmentHintType as r}from\"../snappingUtils.js\";import{SnappingCandidate as a}from\"./SnappingCandidate.js\";import{LineSnappingHint as e}from\"../hints/LineSnappingHint.js\";import{RightAngleSnappingHint as m}from\"../hints/RightAngleSnappingHint.js\";class h extends a{constructor({targetPoint:r,point1:a,point2:e,isDraped:m}){super(r,new n(o(t(s(),a,e,.5)),.5*i(a,e)),m,p.SELF),this._p1=a,this._p2=e}get hints(){return[new e(r.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new e(r.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new m(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}export{h as RightAngleTriangleSnappingCandidate};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{l as e,d as t}from\"../../../chunks/vec2.js\";import{a as i}from\"../../../chunks/vec2f64.js\";import{c as s}from\"../../../chunks/vec3f64.js\";import{absoluteHeightElevationInfo as r}from\"../../../support/elevationInfoUtils.js\";import{SnappingAlgorithm as o}from\"./SnappingAlgorithm.js\";import{anyMapPointToSnappingPoint as n,asSnappingPoint as p}from\"./SnappingPoint.js\";import{squaredScreenDistance as a}from\"./snappingUtils.js\";import{RightAngleTriangleSnappingCandidate as d}from\"./candidates/RightAngleTriangleSnappingCandidate.js\";import{vectorToScreenPoint as c}from\"../support/viewUtils.js\";import{projectPointToCircle as m}from\"../../support/geometry2dUtils.js\";class l extends o{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],s=[],r=i.vertices.length;if(\"polygon\"!==t.editGeometryOperations.data.type||r<2)return s;const{view:o}=this,p=i.vertices[0],a=i.vertices[r-1],d=n(p.pos,o,t),c=n(a.pos,o,t);return this._processCandidateProposal(d,c,e,t,s),s}snapExistingVertex(e,t){const i=[],s=t.vertexHandle,r=s.component;if(r.edges.length<2)return i;if(\"polyline\"===t.editGeometryOperations.data.type&&(0===s.index||s.index===r.vertices.length-1))return i;const{view:o}=this,p=n(s.leftEdge.leftVertex.pos,o,t),a=n(s.rightEdge.rightVertex.pos,o,t);return this._processCandidateProposal(p,a,e,t,i),i}_processCandidateProposal(i,o,n,l,f){if(!this.exceedsShortLineThreshold(i,o,l))return;const g=e(h,i,o,.5),u=.5*t(i,o),v=s();m(v,n,g,u),v[2]=n[2];const x=p(v),{spatialReference:j,pointer:y}=l,w=c(n,j,r,this.view);if(a(w,c(x,j,r,this.view))<this.squaredProximityThreshold(y)){if(this.isVertical(i,x)||this.isVertical(x,o))return;f.push(new d({targetPoint:x,point1:i,point2:o,isDraped:\"on-the-ground\"===l.elevationInfo?.mode}))}}}const h=i();export{l as RightAngleTriangleSnapper};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../chunks/tslib.es6.js\";import o from\"../../../core/Accessor.js\";import t from\"../../../core/Collection.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LineSnapper as e}from\"./LineSnapper.js\";import{ParallelLineSnapper as p}from\"./ParallelLineSnapper.js\";import{RightAngleSnapper as n}from\"./RightAngleSnapper.js\";import{RightAngleTriangleSnapper as a}from\"./RightAngleTriangleSnapper.js\";import{SnappingDomain as c}from\"./SnappingDomain.js\";import{sortCandidatesInPlace as m}from\"./snappingUtils.js\";let h=class extends o{constructor(s){super(s),this.updating=!1,this._snappers=new t,this._domain=c.SELF}initialize(){this._snappers.push(new p(this.view,this.options),new e(this.view,this.options),new n(this.view,this.options),new a(this.view,this.options))}set options(s){this._set(\"options\",s);for(const o of this._snappers)o.options=s}async fetchCandidates(s,o,t){if(!(o&this._domain&&this.options.effectiveSelfEnabled))return[];const i=[];for(const r of this._snappers.items)for(const o of r.snap(s,t))i.push(o);return m(s,i),i}};s([i({readOnly:!0})],h.prototype,\"updating\",void 0),s([i({constructOnly:!0})],h.prototype,\"view\",void 0),s([i()],h.prototype,\"options\",null),h=s([r(\"esri.views.interactive.snapping.SelfSnappingEngine\")],h);export{h as SelfSnappingEngine};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{FeatureSnappingEngine as e}from\"./FeatureSnappingEngine.js\";import{SelfSnappingEngine as n}from\"./SelfSnappingEngine.js\";function i(i,p){return[new n({view:i,options:p}),new e({view:i,options:p,spatialReference:i.spatialReference})]}export{i as defaultSnappingEnginesFactory};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{IntersectionConstraint as t}from\"../SnappingConstraint.js\";import{SnappingDomain as i}from\"../SnappingDomain.js\";import{SnappingCandidate as n}from\"./SnappingCandidate.js\";import{IntersectionSnappingHint as s}from\"../hints/IntersectionSnappingHint.js\";class r extends n{constructor(n,s,r,o){super(n,new t(n,s.constraint,r.constraint),o,i.ALL),this.first=s,this.second=r}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new s(this.targetPoint,this.isDraped,this.domain)]}}export{r as IntersectionSnappingCandidate};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Evented.js\";import{HandleOwner as n}from\"../../../core/HandleOwner.js\";import{isAborted as i}from\"../../../core/promiseUtils.js\";import{watch as s,sync as r,syncAndInitial as a}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import{project as c,initializeProjection as d}from\"../../../geometry/projection.js\";import{absoluteHeightElevationInfo as h}from\"../../../support/elevationInfoUtils.js\";import{defaults as l}from\"./Settings.js\";import{SnappingDomain as u}from\"./SnappingDomain.js\";import{defaultSnappingEnginesFactory as f}from\"./snappingFactory.js\";import _ from\"./SnappingOptions.js\";import{pointToSnappingPoint as g,snappingPointToSnappingOutput as S}from\"./SnappingPoint.js\";import{sortCandidatesInPlace as m,squaredScreenDistance as v}from\"./snappingUtils.js\";import{IntersectionSnappingCandidate as y}from\"./candidates/IntersectionSnappingCandidate.js\";import{vectorToScreenPoint as C}from\"../support/viewUtils.js\";let P=class extends(t.EventedMixin(n)){constructor(e){super(e),this.options=new _,this.snappingEnginesFactory=f,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=T.MAIN}initialize(){this.handles.add([s((()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:n,distance:i}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:n,distance:i}}),(()=>{this.doneSnapping(),this.emit(\"changed\")}),r),s((()=>this.options),(e=>{for(const t of this._engines)t.options=e}),r),s((()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory})),(({viewReady:e,snappingEnginesFactory:t})=>this._recreateEngines(e,t)),a)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some((e=>e.updating))}_recreateEngines(e,t){if(this._destroyEngines(),!e)return;const{view:n,options:i}=this;this._engines=t(n,i)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,n=e*t;return n*n}get _squaredSatisfiesConstraintThreshold(){return l.satisfiesConstraintScreenThreshold*l.satisfiesConstraintScreenThreshold}async snap(e){return E(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:t,context:n}=e;this._removeVisualization();const i=this._currentMainCandidate;if(null==i)return t;const s=this._selectUpdateInput(e);if(null==s)return t;const{spatialReference:r}=n,a=c(s,r);if(null==a)return t;const{view:o}=this,{elevationInfo:p,visualizer:d}=n,h=[],l=g(a,o,n),u=i.constraint.closestTo(l);if(!this._arePointsWithinScreenThreshold(l,u,n))return this._resetSnappingState(),t;i.targetPoint=u,h.push(...i.hints);for(const c of this._currentOtherActiveCandidates)c.targetPoint=u,h.push(...c.hints);return null!=d&&this.handles.add(d.draw(h,{spatialReference:r,elevationInfo:I(n),view:o,selfSnappingZ:n.selfSnappingZ}),w),S(u,o,{z:t.z,m:t.m,spatialReference:t.spatialReference,elevationInfo:p})}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:t}){switch(this._currentSnappedType){case T.MAIN:return e;case T.SCENE:return t}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=T.MAIN}_removeVisualization(){this.handles.remove(w)}async _snapSinglePoint({point:e,context:t,signal:n}){const{view:i}=this,s=g(e,i,t),r=await this._fetchCandidates(s,u.ALL,t,n);return this._createSnapResult(s,T.MAIN,r,i,t,{z:e.z,m:e.m,spatialReference:e.spatialReference,elevationInfo:t.elevationInfo},n)}async _snapMultiPoint({point:e,scenePoint:t,context:n,signal:i}){const{view:s}=this,{coordinateHelper:r,spatialReference:a}=n;await d(t.spatialReference,a);const o=c(t,a),p=g(o,s,n),h=await this._fetchCandidates(p,u.FEATURE,n,i);if(h.length>0){const e=await this._fetchCandidates(p,u.SELF,n,i);return this._createSnapResult(p,T.SCENE,[...h,...e],s,n,{z:o.z,m:o.m,spatialReference:o.spatialReference,elevationInfo:n.elevationInfo},i)}const l=g(e,s,n),f=await this._fetchCandidates(l,u.SELF,n,i);return this._createSnapResult(l,T.MAIN,f,s,n,{z:r.hasZ()&&e.hasZ?e.z??0:void 0,m:r.hasM()&&e.hasM?e.m??0:void 0,spatialReference:e.spatialReference,elevationInfo:n.elevationInfo},i)}async _fetchCandidates(e,t,n,i){return(await Promise.all(this._engines.map((s=>s.fetchCandidates(e,t,n,i))))).flat()}_createSnapResult(e,t,n,s,r,a,o){return{get valid(){return!i(o)},apply:()=>{const{spatialReference:i}=r,{snappedPoint:o,hints:p}=this._processCandidates(e,t,n,r);return this._removeVisualization(),null!=r.visualizer&&this.handles.add(r.visualizer.draw(p,{spatialReference:i,elevationInfo:h,view:s,selfSnappingZ:r.selfSnappingZ}),w),S(o,s,a)}}}_processCandidates(e,t,n,i){if(n.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),m(e,n);const s=this._currentMainCandidate;if(null!=s){const r=this._findOldConstraintInNewCandidates(s,n);if(r>=0){if(!(n[r]instanceof y))return this._intersectWithOtherCandidates(r,n,e,t,i);if(this._arePointsWithinScreenThreshold(e,s.targetPoint,i))return this._updateSnappingCandidate(s,t,n,i)}}return this._intersectWithOtherCandidates(0,n,e,t,i)}_findOldConstraintInNewCandidates(e,t){return e instanceof y?this._findOldCandidateIndex(t,e.first)>=0&&this._findOldCandidateIndex(t,e.second)>=0?0:-1:this._findOldCandidateIndex(t,e)}_intersectWithOtherCandidates(e,t,n,i,s){const{coordinateHelper:r}=s,a=t[e],o=[];for(let p=0;p<t.length;++p){if(p===e)continue;const i=t[p];for(const e of a.constraint.intersect(i.constraint)){const t=e.closestTo(a.targetPoint);o.push([new y(t,a,i,i.isDraped),this._squaredScreenDistance(n,t,r)])}}return o.length>0&&(o.sort(((e,t)=>e[1]-t[1])),o[0][1]<this._squaredPointProximityThreshold(s.pointer))?this._updateSnappingCandidate(o[0][0],i,t,s):this._updateSnappingCandidate(a,i,t,s)}_updateSnappingCandidate(e,t,n,i){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;const s=this._currentMainCandidate.targetPoint,r=[];r.push(...e.hints);for(const a of n){if(e instanceof y){if(a.constraint.equals(e.first.constraint)||a.constraint.equals(e.second.constraint))continue}else if(a.constraint.equals(e.constraint))continue;const t=a.constraint.closestTo(s);this._squaredScreenDistance(t,s,i.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(a.targetPoint=s,this._currentOtherActiveCandidates.push(a),r.push(...a.hints))}return{snappedPoint:s,hints:r}}_squaredPointProximityThreshold(e){return\"touch\"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}_arePointsWithinScreenThreshold(e,t,n){return this._squaredScreenDistance(e,t,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(e,t,n){return v(this._toScreen(e,n),this._toScreen(t,n))}_toScreen(e,t){return C(e,t.spatialReference,h,this.view)}_findOldCandidateIndex(e,t){let n=-1;for(let i=0;i<e.length;++i)if(t.constraint.equals(e[i].constraint)){n=i;break}return n}get test(){return{visualizationsActive:this.handles.has(w),engines:this._engines}}};var T;e([o({constructOnly:!0})],P.prototype,\"view\",void 0),e([o()],P.prototype,\"options\",void 0),e([o({readOnly:!0})],P.prototype,\"updating\",null),e([o()],P.prototype,\"snappingEnginesFactory\",void 0),e([o()],P.prototype,\"_engines\",void 0),e([o()],P.prototype,\"_squaredMouseProximityTreshold\",null),e([o()],P.prototype,\"_squaredTouchProximityThreshold\",null),e([o()],P.prototype,\"_squaredSatisfiesConstraintThreshold\",null),P=e([p(\"esri.views.interactive.snapping.SnappingManager\")],P),function(e){e[e.MAIN=0]=\"MAIN\",e[e.SCENE=1]=\"SCENE\"}(T||(T={}));const w=\"visualization-handle\";function E(e){return null!=e.scenePoint}function I({coordinateHelper:e,elevationInfo:t}){return e.hasZ()?h:t}export{P as SnappingManager};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{makeHandle as e}from\"../../../core/handleUtils.js\";import{nextTick as n}from\"../../../core/nextTick.js\";import{makeAllLayerSnappingOptions as r}from\"./allLayerSnapping.js\";import{FeatureSnappingEngine as o}from\"./FeatureSnappingEngine.js\";import{SnappingManager as t}from\"./SnappingManager.js\";const i=new Map;function a(n){if(!i.has(n)){const e=r(n,{distance:10}),o=s(n,e.options);i.set(n,{referenceCount:0,snappingManager:o,remove:()=>{e.remove(),o.destroy()}})}const o=i.get(n);o.referenceCount++;const t=e((()=>p(n,o)));return{snappingManager:o.snappingManager,...t}}function p(e,r){r.referenceCount--,r.referenceCount>0||n((()=>{0===r.referenceCount&&(r.remove(),i.delete(e))}))}function s(e,n){return new t({view:e,options:n,snappingEnginesFactory:(n,r)=>[new o({view:e,spatialReference:e.spatialReference,options:r})]})}export{a as acquire};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nclass e{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}export{e as SnappingContext};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{abortMaybe as n,removeMaybe as e}from\"../../../core/maybe.js\";import{ignoreAbortErrors as t,debounce as o}from\"../../../core/promiseUtils.js\";import{watch as i}from\"../../../core/reactiveUtils.js\";import{pointEquals as r}from\"../../../layers/graphics/dehydratedFeatureComparison.js\";import{clonePoint as l}from\"../../../layers/graphics/hydratedFeatures.js\";import{absoluteHeightElevationInfo as a}from\"../../../support/elevationInfoUtils.js\";import{EventPipeline as s}from\"../dragEventPipeline.js\";import{SnappingContext as u}from\"./SnappingContext.js\";import{TaskPriority as c,ImmediateTask as p}from\"../../support/Scheduler.js\";function f({predicate:o=(()=>!0),snappingManager:r,snappingContext:l,updatingHandles:u,useZ:c=!0}){const p=new s;if(null==r)return{snappingStep:[y,p],cancelSnapping:y};let f,Z=null,j=null,z=null;const T=()=>{Z=n(Z),r.doneSnapping(),null!=j&&j.frameTask.remove(),j=null,f=e(f),z=null},k=d(r,c,p);let w=null,I=null,U=null;return{snappingStep:[n=>{if(!o(n))return n;const{action:e}=n;if(\"start\"===e){const{info:e}=n,t=m(r.view);if(j=g(l,n,t),j.context.selfSnappingZ=null,!c&&null!=e){const n=S(l.coordinateHelper,e.handle.component);null!=n&&(j.context.selfSnappingZ={value:n,elevationInfo:l.elevationInfo??a})}}if(null!=j){const{context:o,originalScenePos:l,originalPos:a}=j,{mapEnd:s,mapStart:p,scenePoints:d}=n,m=x(a,v(s,p)),g=v(p,a),S={...n,action:\"update\"},y=j.context,T=P(l,d),C=r.update({point:m,scenePoint:T,context:o});if(U=C,h(s,C,g,c),w=m,I=T,\"end\"!==e){const{frameTask:n}=j;null==Z&&(Z=new AbortController),z=e=>{u.addPromise(t(k({frameTask:n,event:S,context:y,point:m,scenePoint:T,delta:g,getLastState:()=>({point:w,scenePoint:I,updatePoint:e.forceUpdate?null:U})},Z.signal)))},z({forceUpdate:!1}),null==f&&(f=i((()=>r.options.effectiveEnabled),(()=>z?.({forceUpdate:!0}))))}}return\"end\"===e&&T(),n},p],cancelSnapping:n=>(T(),n)}}function d(n,e,t){return o((async({frameTask:o,point:i,scenePoint:l,context:a,event:s,delta:u,getLastState:c},p)=>{const f=await o.schedule((()=>n.snap({point:i,scenePoint:l,context:a,signal:p})),p);if(f.valid){let l=await o.schedule((()=>f.apply()),p);const d=c();null!=d.point&&i!==d.point&&(l=n.update({point:d.point,scenePoint:d.scenePoint,context:a})),null!=d.updatePoint&&r(l,d.updatePoint)||(h(s.mapEnd,l,u,e),t.execute(s))}}))}function m(n){return\"3d\"===n.type?n.resourceController.scheduler.registerTask(c.SNAPPING):p}function g(n,e,t){return{context:new u({editGeometryOperations:n.editGeometryOperations,elevationInfo:n.elevationInfo,pointer:n.pointer,vertexHandle:null!=e.info?e.info.handle:null,excludeFeature:n.excludeFeature,visualizer:n.visualizer}),originalPos:null!=e.snapOrigin?n.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:null!=e.scenePoints?e.scenePoints.sceneStart:null,frameTask:t}}function x(n,[e,t,o]){const i=l(n);return i.x+=e,i.y+=t,i.hasZ&&(i.z+=o),i}function P(n,e){return null==n||null==e?null:x(n,v(e.sceneEnd,e.sceneStart))}function v(n,e){const t=n.hasZ&&e.hasZ?n.z-e.z:0;return[n.x-e.x,n.y-e.y,t]}function h(n,e,[t,o,i],r){n.x=e.x+t,n.y=e.y+o,r&&n.hasZ&&e.hasZ&&(n.z=e.z+i)}function S(n,e){if(!n.hasZ())return null;const t=e.vertices;let o=null;for(const i of t){const e=n.getZ(i.pos);if(null!=o&&null!=e&&Math.abs(e-o)>1e-6)return null;null==o&&(o=e)}return o}function y(n){return n}export{f as createSnapDragEventPipelineStep};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Accessor.js\";import{abortMaybe as o,removeMaybe as r}from\"../../../core/maybe.js\";import{debounce as n}from\"../../../core/promiseUtils.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{TaskPriority as a,ImmediateTask as l}from\"../../support/Scheduler.js\";let p=class extends s{constructor(t){super(t),this.constrainResult=t=>t,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=n((async(t,s,o,r)=>{const n=this._frameTask;if(null==n)return;const e=await n.schedule((()=>s.snap({...t,context:o,signal:r})),r);e.valid&&await n.schedule((()=>{this.stagedPoint=e.apply(),t!==this._snapPoints&&null!=this._snapPoints&&(this.stagedPoint=s.update({...this._snapPoints,context:o}))}),r)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(t){this._stagedPoint=this.constrainResult(t)}initialize(){const t=\"3d\"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=t?t.registerTask(a.SNAPPING):l}destroy(){this._abortController=o(this._abortController),this._frameTask=r(this._frameTask)}update(t,s,o){this._snapPoints=t;const{point:r,scenePoint:n}=t,e=s.update({point:r,scenePoint:n,context:o});return this.stagedPoint=e,e}async snap(t,s,o){const{point:r,scenePoint:n}=t;return this.stagedPoint=s.update({point:r,scenePoint:n,context:o}),this._snapPoints=t,null==this._abortController&&(this._abortController=new AbortController),this._snap(t,s,o,this._abortController.signal)}async resnap(t,s){null!=this._snapPoints&&await this.snap(this._snapPoints,t,s)}abort(){this._abortController=o(this._abortController),this._snapPoints=null}};t([e({constructOnly:!0})],p.prototype,\"view\",void 0),t([e()],p.prototype,\"stagedPoint\",null),t([e()],p.prototype,\"constrainResult\",void 0),t([e()],p.prototype,\"_stagedPoint\",void 0),p=t([i(\"esri.views.interactive.snapping.SnappingOperation\")],p);export{p as SnappingOperation};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Color.js\";import\"../../../../geometry.js\";import{LengthDimensionMeasureType as i}from\"../../../../analysis/dimensionUtils.js\";import n from\"../../../../analysis/LengthDimension.js\";import{HandleOwner as a}from\"../../../../core/HandleOwner.js\";import o from\"../../../../core/Handles.js\";import{equals as s}from\"../../../../core/lang.js\";import{destroyMaybe as r,applySome as p}from\"../../../../core/maybe.js\";import{memoize as l}from\"../../../../core/memoize.js\";import{ignoreAbortErrors as u}from\"../../../../core/promiseUtils.js\";import{watch as d,sync as c,syncAndInitial as m,initial as h,when as g}from\"../../../../core/reactiveUtils.js\";import{property as f}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as _}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as M}from\"../../../../chunks/vec3f64.js\";import{clonePoint as y}from\"../../../../layers/graphics/hydratedFeatures.js\";import{reapplyConstraint as v,LengthDimensionConstraint as C,applyConstraint as S,computeConstraint as b,constraintDependencies as w}from\"./lengthDimensionConstraintUtils.js\";import{LengthDimensionManipulators as P,createPointManipulator as O,pointManipulatorHandles as D,createOffsetManipulator as j,offsetManipulatorHandles as H,createOrientationManipulator as T,headingManipulatorHandles as G,rotationManipulatorHandles as I,createMeasureTypeManipulator as z,measureTypeManipulatorHandles as x,updateOffsetManipulatorTransform as V,updateHeadingManipulatorTransform as U,updateRotationManipulatorTransform as R,updateMeasureTypeManipulatorTransform as A,unfocusedOffsetWidth as k,focusedOffsetWidth as E,updateOrientationManipulator as F}from\"./lengthDimensionManipulatorUtils.js\";import{isValidComputation as L,arePointsVerticallyAligned as q,computeGeometryFromDimension as B,computationToGeometryDependencies as N}from\"./lengthDimensionUtils.js\";import{settings as J}from\"./settings.js\";import{getRotateHeadingTexture as K}from\"../Slice/images/Factory.js\";import{SnappingVisualizer3D as Q}from\"../../interactive/SnappingVisualizer3D.js\";import{LineVisualElement as W}from\"../../interactive/visualElements/LineVisualElement.js\";import{VerticesVisualElement as X}from\"../../interactive/visualElements/VerticesVisualElement.js\";import{RenderOccludedFlag as Y}from\"../../webgl-engine/lib/Material.js\";import{ImageMaterial as Z}from\"../../webgl-engine/materials/ImageMaterial.js\";import{createStipplePatternSimple as $}from\"../../webgl-engine/materials/lineStippleUtils.js\";import{RibbonLineMaterial as tt}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{createCoordinateHelper as et}from\"../../../interactive/coordinateHelper.js\";import{EditGeometry as it}from\"../../../interactive/editGeometry/EditGeometry.js\";import{EditGeometryOperations as nt}from\"../../../interactive/editGeometry/EditGeometryOperations.js\";import{acquire as at}from\"../../../interactive/snapping/SceneSnappingManagerPool.js\";import{SnappingContext as ot}from\"../../../interactive/snapping/SnappingContext.js\";import{createSnapDragEventPipelineStep as st}from\"../../../interactive/snapping/SnappingDragPipelineStep.js\";import{SnappingOperation as rt}from\"../../../interactive/snapping/SnappingOperation.js\";import{setupSnappingToggleHandles as pt}from\"../../../interactive/snapping/snappingUtils.js\";import lt from\"../../../../geometry/Point.js\";let ut=class extends a{constructor(t){super(t),this._stagedDimension=null,this._computationManipulators=new Map,this._computationHandles=new o,this._getSnappingContext=l((t=>new ot({elevationInfo:{mode:\"absolute-height\",offset:0},pointer:t,editGeometryOperations:new nt(new it(\"point\",et(!0,!1,this.view.spatialReference))),visualizer:new Q})));const{view:i}=t;this._snappingManagerResult=at(i),this.addHandles(this._snappingManagerResult),this._unfocusedOffsetManipulatorMaterial=dt(),this._focusedOffsetManipulatorMaterial=dt(),this._thinOffsetManipulatorMaterial=dt(),this._thinOffsetManipulatorMaterial.setParameters({stipplePattern:$(2)}),this._constraintSnappingIndicator=new W({view:i,attached:!0,width:1,color:e.toUnitRGBA(J.constraint.color),renderOccluded:Y.OccludeAndTransparent,stipplePattern:$(5)});const n=e.toUnitRGBA(J.disabledPointIndicator.color);this._stagedStartIndicator=new X({view:i,attached:!1,elevationInfo:{mode:\"absolute-height\",offset:0},spatialReference:t.view.renderCoordsHelper.spatialReference,color:n,size:2*J.disabledPointIndicator.radius,outlineSize:0,renderOccluded:Y.OccludeAndTransparent})}initialize(){this._snappingOperation=new rt({view:this.view});const{color:t,contrastColor:e}=J.orientationManipulator,i=!this.view._stage?.renderView.renderingContext.driverTest.svgPremultipliesAlpha.result;this._orientationManipulatorTexture=K(this.view.toolViewManager.textures,{accentColor:t,contrastColor:e,preMultiplyAlpha:i}),this._orientationManipulatorMaterial=new Z({transparent:!0,writeDepth:!1,textureId:this._orientationManipulatorTexture.texture.id,renderOccluded:Y.Opaque});const{computations:n}=this.analysisViewData;for(const a of n)this._addComputation(a);this.addHandles([n.on(\"after-add\",(t=>this._addComputation(t.item))),n.on(\"after-remove\",(t=>this._removeComputation(t.item)))]),this.addHandles([d((()=>({stagedPoint:this._snappingOperation.stagedPoint,stagedComputation:this._stagedComputation})),(({stagedPoint:t,stagedComputation:e})=>{if(null==e||null==t)return;const i=y(t,new lt);this._applyPointUpdate(e,{endPoint:i})}),c),d((()=>({stagedDimension:this._stagedDimension,selectedComputation:this.analysisViewData.selectedComputation,firstGrabbedManipulator:this.firstGrabbedManipulator})),((t,e)=>{const{stagedDimension:i,selectedComputation:n,firstGrabbedManipulator:a}=t;if(i===e?.stagedDimension&&a===e?.firstGrabbedManipulator){for(const o of[n,e?.selectedComputation])if(null!=o){const e=this._computationManipulators.get(o);this._updateManipulators(o,e,t)}}else for(const[o,s]of this._computationManipulators)this._updateManipulators(o,s,t)}),m),d((()=>this.analysis.style.lineSize),(t=>{this._updateManipulatorStyle(t)}),h),d((()=>this.view.state.camera),(()=>{null!=this._stagedComputation&&this._updateStagedDimensionOffset(this._stagedComputation)})),d((()=>p(this._stagedComputation,(t=>{const e=t.elevationAlignedStartPoint,i=M();return null!=e&&this.view.renderCoordsHelper.toRenderCoords(e,i)?i:null}))),(t=>{null!=t?(this._stagedStartIndicator.vertices=[t],this._stagedStartIndicator.attached=!0):this._stagedStartIndicator.attached=!1}))]),this.addHandles(this._constraintHandles),this.addHandles(this._snappingIndicatorHandles),pt(this,(()=>{const t=this._activeComputation,e=this._stagedComputation;if(null==t||null!=e){const t=this.view.inputManager.latestPointerType??\"mouse\",e=this._getSnappingContext(t);this.updatingHandles.addPromise(u(this._snappingOperation.resnap(this._snappingManager,e)))}if(null!=t){const{start:e,end:i}=this._computationManipulators.get(t);if(e.grabbing||i.grabbing){const i=e.grabbing?\"start\":\"end\",n=this._computeConstraint(t);v(t,i,{constraint:n,view:this.view})}}}))}destroy(){this._snappingOperation=r(this._snappingOperation),this._computationHandles.destroy(),this._constraintSnappingIndicator.destroy(),this._stagedStartIndicator.destroy(),this._orientationManipulatorMaterial.dispose(),this._orientationManipulatorTexture.release()}get updating(){return this.updatingHandles.updating||this._snappingManager.updating}get firstGrabbedManipulator(){return this.parentTool.firstGrabbedManipulator}get hasGrabbedManipulators(){return this.parentTool.hasGrabbedManipulators}get snappingOptions(){return this._snappingManager.options}get _snappingManager(){return this._snappingManagerResult.snappingManager}get _activeComputation(){if(null!=this._stagedComputation)return this._stagedComputation;const{selectedComputation:t}=this.analysisViewData;return this.hasGrabbedManipulators&&null!=t?t:null}get _stagedComputation(){const t=this._stagedDimension,e=this.analysisViewData.computations.at(-1);return null==t||null==e||e.dimension!==t?null:e}get _constraintHandles(){return[g((()=>this.analysisViewData.selectedComputation),(t=>{t.previousConstraint=this._computeConstraint(t)}),{...m,equals:s}),d((()=>{const t=this._activeComputation;if(null==t)return null;const{measureType:e,orientation:i}=t.dimension;return{measureType:e,orientation:i,computation:t}}),((t,e)=>{if(null!=t&&null==e){const{measureType:e,orientation:n,computation:a}=t;switch(a.previousConstraint){case C.Horizontal:a.preConstraintProperties={measureType:i.Horizontal,orientation:0};break;case C.Vertical:a.preConstraintProperties={measureType:i.Vertical,orientation:0};break;case C.Direct:a.preConstraintProperties={measureType:i.Direct,orientation:n};break;default:a.preConstraintProperties={measureType:e,orientation:n}}}null==t&&null!=e&&(e.computation.preConstraintProperties=null)}),c)]}get _snappingIndicatorHandles(){const t=\"snapping-indicator-event-handles\";return[d((()=>({stagedComputation:this._stagedComputation,activeComputation:this._activeComputation})),(({stagedComputation:e,activeComputation:i})=>{const n=this._constraintSnappingIndicator;if(this.removeHandles(t),null!=i)if(i===e)n.attached=!0;else{const{start:e,end:a}=this._computationManipulators.get(i),o=()=>{n.attached=e.grabbing||a.grabbing};o(),this.addHandles([e.events.on(\"grab-changed\",o),a.events.on(\"grab-changed\",o)],t)}else n.attached=!1})),d((()=>{const t=this._activeComputation;return null!=t?{geometry:t.geometry,constraint:t.previousConstraint}:{}}),(({geometry:t,constraint:e})=>{const i=this._constraintSnappingIndicator;null!=t&&null!=e&&e!==C.Direct?(i.visible=!0,i.setGeometryFromSegment(t.directSegment)):i.visible=!1}))]}removeStaged(){return null!=this._stagedDimension&&(this.analysis.dimensions.remove(this._stagedDimension),this._stagedDimension=null,!0)}onDeactivate(){this.removeStaged(),this._resetSnappingState()}onClick(t){const{_stagedDimension:e}=this;if(null==e){const e=this._onUnstagedClick(t);return this.analysis.dimensions.add(e),null}return this._onStagedClick(t),e}onPointerMove({mapPoint:t,pointerType:e}){if(\"touch\"===e)return;const i=this._getSnappingContext(e);this.updatingHandles.addPromise(u(this._snappingOperation.snap({point:t},this._snappingManager,i)))}onManipulatorSelectionChanged(){if(null!=this.analysisViewData.selectedComputation){this._computationManipulators.get(this.analysisViewData.selectedComputation).offset.selected||(this.analysisViewData.selectedDimension=null)}}_onUnstagedClick({mapPoint:t,pointerType:e}){let a=t;if(\"mouse\"===e){const i=this._getSnappingContext(e);a=this._snappingManager.update({point:t,context:i})}const o=new n({startPoint:y(a,new lt),endPoint:null,measureType:i.Horizontal});return this._stagedDimension=o,this._resetSnappingState(),o}_onStagedClick({mapPoint:t,pointerType:e}){const i=this._stagedComputation;if(null==i)return;let n=t;if(\"mouse\"===e){const i=this._getSnappingContext(e);n=this._snappingManager.update({point:t,context:i})}const a=y(n,new lt);this._applyPointUpdate(i,{endPoint:a}),this._stagedDimension=null,this._resetSnappingState()}_resetSnappingState(){this._snappingManager.doneSnapping(),this._snappingOperation.abort(),this._snappingOperation.stagedPoint=null}_addComputation(t){if(this._computationManipulators.has(t))return;const e=this._setupPointManipulator(t,{isStart:!0}),n=this._setupPointManipulator(t,{isStart:!1}),a=this._setupOffsetManipulator(t),o=this._setupHeadingManipulator(t),s=this._setupRotationManipulator(t),r=this._setupMeasureTypeManipulator(t,i.Direct),p=this._setupMeasureTypeManipulator(t,i.Horizontal),l=this._setupMeasureTypeManipulator(t,i.Vertical),u=new P({start:e,end:n,offset:a,heading:o,rotation:s,direct:r,horizontal:p,vertical:l});this._setupComputationToManipulatorsSync(t,u),this._computationManipulators.set(t,u),this.manipulators.addMany(u.values())}_removeComputation(t){const e=this._computationManipulators.get(t);if(null!=e){this._computationHandles.remove(t),this._computationManipulators.delete(t);for(const t of e.values())this.manipulators.remove(t)}}_setupComputationToManipulatorsSync(t,e){this._computationHandles.add([d((()=>t.geometry),(()=>this._updateManipulators(t,e)),{...m,equals:s})],t)}_setupPointManipulator(t,e){const{view:i}=this,{dimension:n}=t,a=O(i,{metadata:n}),o=D(a,{isStart:e.isStart,createSnappingPipelineStep:t=>st({snappingContext:this._getSnappingContext(t),snappingManager:this._snappingManager,updatingHandles:this.updatingHandles}),dimension:n,onUpdate:e=>this._applyPointUpdate(t,e),view:i});return this._computationHandles.add(o,t),a}_setupOffsetManipulator(t){const{view:e}=this,i=j(e,{lineSizePt:this.analysis.style.lineSize,unfocusedMaterial:this._unfocusedOffsetManipulatorMaterial,focusedMaterial:this._focusedOffsetManipulatorMaterial,metadata:t.dimension}),n=H(i,{computation:t,view:e});return this._computationHandles.add(n,t),i}_setupHeadingManipulator(t){const{view:e}=this,i=T(e,{lineSizePt:this.analysis.style.lineSize,material:this._orientationManipulatorMaterial,metadata:t.dimension}),n=G(i,{computation:t,view:e});return this._computationHandles.add(n,t),i}_setupRotationManipulator(t){const{view:e}=this,i=T(e,{lineSizePt:this.analysis.style.lineSize,material:this._orientationManipulatorMaterial,metadata:t.dimension}),n=I(i,{computation:t,view:e});return this._computationHandles.add(n,t),i}_setupMeasureTypeManipulator(t,e){const{view:i}=this,n=z(i,{lineSizePt:this.analysis.style.lineSize,unfocusedMaterial:this._unfocusedOffsetManipulatorMaterial,focusedMaterial:this._focusedOffsetManipulatorMaterial,thinOffsetManipulatorMaterial:this._thinOffsetManipulatorMaterial,metadata:t.dimension}),a=x(n,{computation:t,manipulatorMeasureType:e,view:i});return this._computationHandles.add(a,t),n}_updateManipulators(t,e,n={stagedDimension:this._stagedDimension,selectedComputation:this.analysisViewData.selectedComputation,firstGrabbedManipulator:this.firstGrabbedManipulator}){const{stagedDimension:a,selectedComputation:o,firstGrabbedManipulator:s}=n,{start:r,end:p,offset:l,heading:u,rotation:d}=e,c=o===t,m=L(t),{dimension:h}=t;for(const i of e.values()){const t=m&&null==a&&(null==s||i===s);i===l?(i.available=t,i.selected=c):i.available=t&&c}if(!m)return;null!=this._computeConstraint(t)?e.forEachMeasureTypeManipulator((t=>t.available=!1)):e.manipulatorForMeasureType(h.measureType).available=!1;for(const _ of[u,d])h.measureType===i.Direct&&0!==h.offset||(_.available=!1);q(t)?d.available=!1:u.available=!1;const{geometry:g}=t;r.renderLocation=g.directSegment.startRenderSpace,p.renderLocation=g.directSegment.endRenderSpace;const{renderCoordsHelper:f}=this.view;V(l,g,f),u.available&&U(u,t,f),d.available&&R(d,t,f),e.forEachMeasureTypeManipulator(((e,i)=>{e.available&&A(e,t,i,f)}))}_updateManipulatorStyle(t){const e=k(t),i=E(t),n={lineSizePt:t,material:this._orientationManipulatorMaterial};for(const{offset:a,heading:o,rotation:s}of this._computationManipulators.values())a.radius=i/2,F(o,n),F(s,n);this._unfocusedOffsetManipulatorMaterial.setParameters({width:e}),this._focusedOffsetManipulatorMaterial.setParameters({width:i})}_applyPointUpdate(t,e){const{view:i}=this,n=N(t);\"startPoint\"in e&&(n.elevationAlignedStartPoint=e.startPoint),\"endPoint\"in e&&(n.elevationAlignedEndPoint=e.endPoint);const a=B(n,i.renderCoordsHelper);if(null==a)return;const o=this._computeConstraint({...n,geometry:a});S(t,e,{...n,constraint:o,unconstrainedGeometry:a,view:i}),t===this._stagedComputation&&this._updateStagedDimensionOffset(t)}_updateStagedDimensionOffset(t){if(null==t.geometry)return;t.geometry.directSegment.eval(.5,ct);const e=this.view.state.camera.computeRenderPixelSizeAt(ct);t.dimension.offset=J.initialOffsetPx*e}_computeConstraint(t){return b(w(t,this._snappingManager.options),this.view)}get testInfo(){const t=t=>this.analysisViewData.computations.find((e=>e.dimension===t));return{disableManipulatorPartialOcclusion:()=>{this._stagedStartIndicator.renderOccluded=Y.Occlude,this.manipulators.forEach((({manipulator:t})=>{for(const{geometry:e}of t.renderObjects)e.material.setParameters({renderOccluded:Y.Occlude})}))},getManipulatorsForDimension:e=>this._computationManipulators.get(t(e)),getComputationForDimension:e=>t(e),getConstraintForDimension:e=>{const i=t(e);return null!=i?this._computeConstraint(i):null},stagedDimension:this._stagedDimension,stagedStartIndicator:this._stagedStartIndicator,constraintSnappingIndicator:this._constraintSnappingIndicator,snappingManager:this._snappingManager}}};function dt(){const{color:t}=J.offsetManipulator;return new tt({color:e.toUnitRGBA(t),width:1,renderOccluded:Y.OccludeAndTransparent,writeDepth:!1,hasPolygonOffset:!0})}t([f({constructOnly:!0})],ut.prototype,\"analysis\",void 0),t([f({constructOnly:!0})],ut.prototype,\"analysisViewData\",void 0),t([f({constructOnly:!0})],ut.prototype,\"manipulators\",void 0),t([f({constructOnly:!0})],ut.prototype,\"parentTool\",void 0),t([f({constructOnly:!0,nonNullable:!0})],ut.prototype,\"view\",void 0),t([f({readOnly:!0})],ut.prototype,\"updating\",null),t([f()],ut.prototype,\"firstGrabbedManipulator\",null),t([f()],ut.prototype,\"hasGrabbedManipulators\",null),t([f()],ut.prototype,\"snappingOptions\",null),t([f()],ut.prototype,\"_stagedDimension\",void 0),t([f()],ut.prototype,\"_activeComputation\",null),t([f()],ut.prototype,\"_stagedComputation\",null),ut=t([_(\"esri.views.3d.analysis.Dimension.LengthDimensionSubTool\")],ut);const ct=M();export{ut as LengthDimensionSubTool};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{clock as t}from\"../../../../core/clock.js\";import{destroyHandle as i,makeHandle as o}from\"../../../../core/handleUtils.js\";import{removeMaybe as s}from\"../../../../core/maybe.js\";import{watch as n,syncAndInitial as r,when as a}from\"../../../../core/reactiveUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{sv3d as u}from\"../../../../geometry/support/vectorStacks.js\";import{DidPointerMoveRecentlyFlag as p}from\"./lengthDimensionManipulatorUtils.js\";import{LengthDimensionSubTool as m}from\"./LengthDimensionSubTool.js\";import{settings as h}from\"./settings.js\";import{newIntersector as d}from\"../../webgl-engine/lib/Intersector.js\";import{StoreResults as v}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import{AnalysisToolBase as _}from\"../../../interactive/AnalysisToolBase.js\";import{SKETCH_KEYS as T}from\"../../../interactive/keybindings.js\";import{createScreenPointArrayFromEvent as y}from\"../../../support/screenUtils.js\";var g;!function(e){e.Ready=\"ready\",e.Creating=\"creating\",e.Created=\"created\"}(g||(g={}));let S=class extends _{constructor(e){super(e),this.automaticManipulatorSelection=!1,this.removeIncompleteOnCancel=!1,this._pointerMoveTimerMs=h.pointerMoveTimeoutMs,this._prevPointerMoveTimeout=null}initialize(){this._intersector=d(this.view.state.viewingMode),this._intersector.options.store=v.MIN,this._lengthDimensionSubTool=new m({analysis:this.analysis,analysisViewData:this.analysisViewData,manipulators:this.manipulators,parentTool:this,view:this.view}),this.addHandles([i(this._lengthDimensionSubTool),o((()=>this._clearPointerMoveTimeout())),n((()=>this.state),(e=>{e===g.Created&&this.finishToolCreation()}),r),a((()=>this.firstGrabbedManipulator),(e=>{this.selectedDimension=e.metadata}),r),n((()=>this.selectedDimension),(()=>this._resetPointerMoveTimeout()),r)])}get state(){return this.analysis.dimensions.some((e=>\"length\"===e.type))?null!=this._activeSubTool?g.Creating:g.Created:g.Ready}get updating(){return this._lengthDimensionSubTool.updating}get cursor(){return this.active?\"crosshair\":null}get selectedDimension(){return this.analysisViewData.selectedDimension}set selectedDimension(e){this.analysisViewData.selectedDimension=e}onInputEvent(e){switch(e.type){case\"immediate-click\":this._clickHandler(e);break;case\"immediate-double-click\":this._doubleClickHandler(e);break;case\"pointer-move\":this._pointerMoveHandler(e);break;case\"key-down\":if(T.cancel===e.key){if(null!=this._activeSubTool&&this._activeSubTool.removeStaged())return void e.stopPropagation();this.active||(this.selectedDimension=null)}else T.delete.includes(e.key)&&this._deleteKeyHandler()}}onActivate(){this._activeSubTool=this._lengthDimensionSubTool}onDeactivate(){null!=this._activeSubTool&&(this._activeSubTool.onDeactivate(),this._activeSubTool=null)}onShow(){this._resetPointerMoveTimeout()}onManipulatorSelectionChanged(){this._lengthDimensionSubTool.onManipulatorSelectionChanged()}onHide(){this.selectedDimension=null}_clickHandler(e){if(this.hasFocusedManipulators)return void e.stopPropagation();if(null==this._activeSubTool)return;const t=this._intersectScreen(e);null!=t&&(this.selectedDimension=this._activeSubTool.onClick({mapPoint:t,pointerType:e.pointerType}),e.stopPropagation())}_doubleClickHandler(e){this.active&&(this.view.activeTool=null,e.stopPropagation())}_pointerMoveHandler(e){if(this._resetPointerMoveTimeout(),null==this._activeSubTool)return;if(this.hasFocusedManipulators)return;const t=this._intersectScreen(e);null!=t&&this._activeSubTool.onPointerMove({mapPoint:t,pointerType:e.pointerType})}_deleteKeyHandler(){null!=this._activeSubTool&&this._activeSubTool.removeStaged(),this._removeSelected()}_intersectScreen(e){const t=y(e);this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(t,this._intersector);const i=this._intersector.results.min,o=u.get();return i.getIntersectionPoint(o)?this.view.renderCoordsHelper.fromRenderCoords(o,this.view.spatialReference):null}_removeSelected(){null!=this.selectedDimension&&(this.analysis.dimensions.remove(this.selectedDimension),this.selectedDimension=null)}_clearPointerMoveTimeout(){this._prevPointerMoveTimeout=s(this._prevPointerMoveTimeout)}_resetPointerMoveTimeout(){this._clearPointerMoveTimeout(),this.manipulators.forEach((e=>{e.manipulator.state|=p})),this._prevPointerMoveTimeout=t.setTimeout((()=>{this.manipulators.forEach((e=>{e.manipulator.state&=~p}))}),this._pointerMoveTimerMs)}get testInfo(){return{...this._lengthDimensionSubTool.testInfo,setManipulatorAutoHideDelay:e=>{this._pointerMoveTimerMs=e,this._resetPointerMoveTimeout()}}}};e([l({constructOnly:!0})],S.prototype,\"view\",void 0),e([l({constructOnly:!0})],S.prototype,\"analysis\",void 0),e([l({readOnly:!0})],S.prototype,\"state\",null),e([l({readOnly:!0})],S.prototype,\"updating\",null),e([l({readOnly:!0})],S.prototype,\"cursor\",null),e([l({constructOnly:!0})],S.prototype,\"analysisViewData\",void 0),e([l()],S.prototype,\"selectedDimension\",null),e([l()],S.prototype,\"automaticManipulatorSelection\",void 0),e([l()],S.prototype,\"_activeSubTool\",void 0),e([l()],S.prototype,\"_lengthDimensionSubTool\",void 0),S=e([c(\"esri.views.3d.analysis.Dimension.DimensionTool\")],S);export{S as DimensionTool};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../../../chunks/mat4.js\";import{c as t}from\"../../../../chunks/mat4f64.js\";import{f as r,c as i}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as a}from\"./Object3DVisualElement.js\";import{lineStripsToParameters as s,createGeometry as l}from\"../../support/engineContent/line.js\";import{RenderOccludedFlag as m}from\"../../webgl-engine/lib/Material.js\";import{LineMarkerMaterial as n}from\"../../webgl-engine/materials/LineMarkerMaterial.js\";class h extends a{constructor(e,t){super(e),this._hasExternalMaterial=!1,this._renderOccluded=m.OccludeAndTransparent,this._width=1,this._color=r(1,0,1,1),this._placement=\"end\",this._markerPrimitive=\"arrow\",this._material=t,this._hasExternalMaterial=null!=t,this.applyProps(e)}setGeometryFromSegment(t,r){const i=t.endRenderSpace;this.transform=e(o,i),this._normal=r;const{points:a}=t.createRenderGeometry(i,this.view.renderCoordsHelper);this.geometry=[a]}get renderOccluded(){return null!=this._material?this._material.parameters.renderOccluded:this._renderOccluded}set renderOccluded(e){this._renderOccluded=e,null!=this._material&&this._material.setParameters({renderOccluded:e})}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get normal(){return this._normal}set normal(e){this._normal=e,this.recreateGeometry()}get width(){return null!=this._material?this._material.parameters.width:this._width}set width(e){this._width=e,null!=this._material&&this._material.setParameters({width:e})}get color(){return null!=this._material?this._material.parameters.color:this._color}set color(e){this._color=i(e),null!=this._material&&this._material.setParameters({color:this._color})}get placement(){return null!=this._material?this._material.parameters.placement:this._placement}set placement(e){this._placement=e,null!=this._material&&this._material.setParameters({placement:this._placement})}get markerPrimitive(){return this._material?.parameters.markerPrimitive??this._markerPrimitive}set markerPrimitive(e){this._markerPrimitive=e,null!=this._material&&this._material.setParameters({markerPrimitive:e})}createExternalResources(){this._hasExternalMaterial||(this._material=new n({width:this._width,color:this._color,placement:this._placement,renderOccluded:this._renderOccluded,markerPrimitive:this._markerPrimitive}))}destroyExternalResources(){this._hasExternalMaterial||(this._material=null)}createGeometries(e){for(const t of s(this.geometry,this.normal)){const r=l(this._material,t);e.addGeometry(r)}}forEachExternalMaterial(e){this._hasExternalMaterial||e(this._material)}}const o=t();export{h as MarkerVisualElement};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Handles.js\";import{equals as t}from\"../../../../core/lang.js\";import{destroyMaybe as s}from\"../../../../core/maybe.js\";import{formatDecimal as i}from\"../../../../core/quantityFormatUtils.js\";import{watch as n,initial as l}from\"../../../../core/reactiveUtils.js\";import{pt2px as a}from\"../../../../core/screenUtils.js\";import{c as m}from\"../../../../chunks/vec3f64.js\";import{computeSpanningSegment as o,OffsetSegmentLocation as r,maxScreenLengthSquaredFromGeometry as f,offsetSegment as d}from\"./lengthDimensionUtils.js\";import{settings as c}from\"./settings.js\";import{LabelVisualElement as h}from\"../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as u}from\"../../interactive/visualElements/LineVisualElement.js\";import{MarkerVisualElement as S}from\"../../interactive/visualElements/MarkerVisualElement.js\";import{EuclideanSegment as g}from\"../../interactive/visualElements/support/Segment.js\";class v{set visible(e){for(const t of this._visualElements.values())t.attached=e}constructor(s){this.destroyed=!1,this._handles=new e,this._messages=null,this._labelSegment=new g;const{analysis:i,computation:m,view:o,messages:r}=s;this.analysis=i,this.computation=m,this.view=o,this._messages=r;const f=s.visible,d={view:o,attached:f},{fontSize:c,textColor:v,textBackgroundColor:p}=i.style;this._visualElements=new y({marker:new S(d,s.markerMaterial),dimension:new u(d,s.dimensionLineMaterial),startOffset:new u(d,s.offsetLineMaterial),endOffset:new u(d,s.offsetLineMaterial),dimensionSmall:new u(d,s.smallDimensionLineMaterial),startOffsetSmall:new u(d,s.smallOffsetLineMaterial),endOffsetSmall:new u(d,s.smallOffsetLineMaterial),label:new h({view:o,attached:f,distance:0,geometry:{type:\"segment\",sampleLocation:\"center\",segment:this._labelSegment,callout:!1},fontSize:a(c),textColor:v.clone(),backgroundColor:p.clone()})}),this._handles.add([n((()=>m.geometry),(e=>{this.updateCameraDependentElements(o.state.camera,e,i.style),null!=m.geometry&&this._updateLines(m.geometry)}),{...l,equals:t}),n((()=>m.length),(e=>this._updateLabelContent(e)),l)])}destroy(){this.destroyed=!0,this._handles=s(this._handles);for(const e of this._visualElements.values())e.destroy()}get testInfo(){return{dimensionVisualElement:this._visualElements.dimension,label:this._visualElements.label}}_updateLines(e){const t=o(b,r.Start,e.directSegment,e.dimensionSegment),s=o(O,r.End,e.directSegment,e.dimensionSegment),i=this._visualElements;i.marker.setGeometryFromSegment(e.dimensionSegment,e.primaryOffsetAxis),i.dimension.setGeometryFromSegment(e.dimensionSegment),i.startOffset.setGeometryFromSegment(t),i.endOffset.setGeometryFromSegment(s),i.dimensionSmall.setGeometryFromSegment(e.dimensionSegment),i.startOffsetSmall.setGeometryFromSegment(t),i.endOffsetSmall.setGeometryFromSegment(s)}updateCameraDependentElements(e,t,s){const i=this._visualElements;if(null==t){for(const e of i.values())e.visible=!1;return}const n=e.computeScreenPixelSizeAt(t.dimensionSegment.eval(.5,_)),l=f(t,n),m=l<(a(s.lineSize)*c.smallScreenLengthLineSizeFactor)**2,o=!m;i.marker.visible=o,i.dimension.visible=o,i.startOffset.visible=o,i.endOffset.visible=o,i.dimensionSmall.visible=m,i.startOffsetSmall.visible=m,i.endOffsetSmall.visible=m;const r=a(s.fontSize)*c.labels.minScreenLengthFontSizeFactor,{label:h}=i;if(h.visible=l>=r**2,!h.visible)return;const{dimensionSegment:u,primaryOffsetAxis:S}=t,{offset:g}=this.computation.dimension,v=(Math.sign(g)>=0?1:-1)*p(s)*n;d(this._labelSegment,u,S,v),h.updateLabelPosition()}updateLabelStyle(e){const{label:t}=this._visualElements;t.fontSize=a(e.fontSize),t.textColor=e.textColor,t.backgroundColor=e.textBackgroundColor}updateUnitsMessages(e){this._messages=e;const{length:t}=this.computation;this._updateLabelContent(t)}_updateLabelContent(e){const{label:t}=this._visualElements;null!=e&&null!=this._messages?t.text=i(this._messages,e,e.unit):t.text=\"\"}}function p(e){return 1.5*a(e.fontSize)+c.labels.marginPx+a(e.lineSize/2)}const b=new g,O=new g,_=m();class y{constructor(e){this.marker=e.marker,this.dimension=e.dimension,this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.dimensionSmall=e.dimensionSmall,this.startOffsetSmall=e.startOffsetSmall,this.endOffsetSmall=e.endOffsetSmall,this.label=e.label}values(){return[this.marker,this.dimension,this.startOffset,this.endOffset,this.dimensionSmall,this.startOffsetSmall,this.endOffsetSmall,this.label]}}export{y as LengthDimensionVisualElements,v as LengthDimensionVisualization};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../Color.js\";import\"../../../../intl.js\";import s from\"../../../../core/Accessor.js\";import{makeHandle as t}from\"../../../../core/handleUtils.js\";import{watch as a,syncAndInitial as r,when as n,sync as o}from\"../../../../core/reactiveUtils.js\";import{pt2px as l}from\"../../../../core/screenUtils.js\";import{property as m}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{Z as c}from\"../../../../chunks/vec4f64.js\";import{LengthDimensionVisualization as h}from\"./LengthDimensionVisualization.js\";import{settings as p}from\"./settings.js\";import{RenderOccludedFlag as u}from\"../../webgl-engine/lib/Material.js\";import{LineMarkerMaterial as f}from\"../../webgl-engine/materials/LineMarkerMaterial.js\";import{createStipplePatternSimple as _}from\"../../webgl-engine/materials/lineStippleUtils.js\";import{RibbonLineMaterial as g}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{LineMarkerAnchor as M}from\"../../webgl-engine/shaders/LineMarkerTechniqueConfiguration.js\";import{onLocaleChange as y}from\"../../../../intl/locale.js\";import{fetchMessageBundle as w}from\"../../../../intl/messages.js\";let v=class extends s{get analysis(){return this.analysisViewData.analysis}get visible(){return this.analysisViewData.visible}constructor(e){super(e),this.loadingMessages=!1,this._messages=null,this._dimensionVisualizations=new Map,this._markerMaterial=new f({width:1,anchor:M.Tip,color:c,placement:\"begin-end\",worldSpace:!0,hideOnShortSegments:!0,hasTip:!0,renderOccluded:u.OccludeAndTransparent,markerPrimitive:\"triangle\"}),this._dimensionLineMaterial=new g({width:1,color:c,renderOccluded:u.OccludeAndTransparent,markerParameters:this._markerMaterial.parameters}),this._offsetLineMaterial=new g({width:1,color:c,renderOccluded:u.OccludeAndTransparent,stipplePattern:_(5),stippleScaleWithLineWidth:!0}),this._smallDimensionLineMaterial=new g({width:1,color:c,renderOccluded:u.OccludeAndTransparent}),this._smallOffsetLineMaterial=new g({width:1,color:c,renderOccluded:u.OccludeAndTransparent,stipplePattern:_(5),stippleScaleWithLineWidth:!0})}initialize(){for(const i of this._lineMaterials())this.view._stage.add(i),this.addHandles(t((()=>{this.view._stage?.remove(i),i.dispose()})));const{computations:e}=this.analysisViewData;for(const i of e)this._addComputation(i);this.addHandles([e.on(\"change\",(({added:e,removed:i})=>{for(const s of i)this._removeComputation(s);for(const s of e)this._addComputation(s)})),a((()=>i.toUnitRGBA(this.analysis.style.color)),(e=>{for(const i of this._lineMaterials())i.setParameters({color:e})}),r),a((()=>this.analysis.style.lineSize),(e=>{const i=l(e);this._markerMaterial.setParameters({width:i*p.markers.lineSizeFraction}),this._dimensionLineMaterial.setParameters({width:i,markerParameters:this._markerMaterial.parameters});const s=Math.max(i*p.offsetLine.lineSizeFraction,1);this._offsetLineMaterial.setParameters({width:s})}),r),a((()=>({camera:this.view.state.camera,style:L(this.analysis)})),(({camera:e,style:i})=>{for(const[s,t]of this._dimensionVisualizations)t.updateCameraDependentElements(e,s.geometry,i),t.updateLabelStyle(i)})),a((()=>this.visible),(e=>{for(const i of this._dimensionVisualizations.values())i.visible=e}))]),this.addHandles([y((()=>this._updateMessageBundle())),n((()=>!this.loadingMessages),(()=>{for(const e of this._dimensionVisualizations.values())e.updateUnitsMessages(this._messages)}),o)]),this._updateMessageBundle()}destroy(){this._dimensionVisualizations.forEach((e=>{e.destroy()})),this._dimensionVisualizations.clear()}get testInfo(){return{visualizations:Array.from(this._dimensionVisualizations.values()),disablePartialOcclusion:()=>{for(const e of this._lineMaterials())e.setParameters({renderOccluded:u.Occlude})}}}_addComputation(e){this._dimensionVisualizations.has(e)||this._dimensionVisualizations.set(e,new h({analysis:this.analysis,computation:e,view:this.view,visible:this.visible,markerMaterial:this._markerMaterial,dimensionLineMaterial:this._dimensionLineMaterial,offsetLineMaterial:this._offsetLineMaterial,smallDimensionLineMaterial:this._smallDimensionLineMaterial,smallOffsetLineMaterial:this._smallOffsetLineMaterial,messages:this._messages}))}_removeComputation(e){const i=this._dimensionVisualizations.get(e);null!=i&&(i.destroy(),this._dimensionVisualizations.delete(e))}_lineMaterials(){return[this._markerMaterial,this._dimensionLineMaterial,this._offsetLineMaterial,this._smallDimensionLineMaterial,this._smallOffsetLineMaterial]}async _updateMessageBundle(){this.loadingMessages=!0;try{this._messages=await w(\"esri/core/t9n/Units\")}finally{this.loadingMessages=!1}}};function L(e){const{fontSize:i,lineSize:s,textColor:t,textBackgroundColor:a}=e.style;return{fontSize:i,lineSize:s,textBackgroundColor:a.clone(),textColor:t.clone()}}e([m({constructOnly:!0})],v.prototype,\"analysisViewData\",void 0),e([m({constructOnly:!0,nonNullable:!0})],v.prototype,\"view\",void 0),e([m()],v.prototype,\"analysis\",null),e([m()],v.prototype,\"visible\",null),e([m()],v.prototype,\"loadingMessages\",void 0),v=e([d(\"esri.views.3d.analysis.Dimension.DimensionVisualization\")],v);export{v as DimensionVisualization};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import o from\"../../core/Accessor.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";let t=class extends o{constructor(s){super(s),this.dimension=null,this.length=null}};s([r({constructOnly:!0,nonNullable:!0})],t.prototype,\"dimension\",void 0),s([r()],t.prototype,\"length\",void 0),t=s([e(\"esri.views.3d.analysis.LengthDimensionResult\")],t);const c=t;export{c as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../core/Accessor.js\";import{watch as e,syncAndInitial as n}from\"../../../../core/reactiveUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../analysis/LengthDimensionResult.js\";let l=class extends o{constructor(t){super(t),this.geometry=null,this.unconstrainedGeometry=null,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null}normalizeCtorArgs(t){const{dimension:o,...e}=t;return{result:new s({dimension:o}),...e}}initialize(){this.addHandles([e((()=>this.dimension.startPoint),(t=>this.elevationAlignedStartPoint=this.projectAndAlignPoint(t)),n),e((()=>this.dimension.endPoint),(t=>this.elevationAlignedEndPoint=this.projectAndAlignPoint(t)),n)])}get dimension(){return this.result.dimension}get length(){return this.result.length}};t([i({constructOnly:!0,nonNullable:!0})],l.prototype,\"result\",void 0),t([i({constructOnly:!0,nonNullable:!0})],l.prototype,\"projectAndAlignPoint\",void 0),t([i()],l.prototype,\"dimension\",null),t([i()],l.prototype,\"length\",null),t([i()],l.prototype,\"geometry\",void 0),t([i()],l.prototype,\"unconstrainedGeometry\",void 0),t([i()],l.prototype,\"elevationAlignedStartPoint\",void 0),t([i()],l.prototype,\"elevationAlignedEndPoint\",void 0),t([i()],l.prototype,\"preConstraintProperties\",void 0),t([i()],l.prototype,\"previousConstraint\",void 0),l=t([r(\"esri.views.3d.analysis.LengthDimensionComputation\")],l);export{l as LengthDimensionComputation};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";const r=r=>{let i=class extends r{constructor(...o){super(...o),this.analysis=null,this.tool=null,this.selectedDimension=null,this.interactive=!1,this.visible=null}get results(){return new e}createLengthDimensions(o){throw new Error(\"Method not implemented.\")}};return o([t({constructOnly:!0})],i.prototype,\"view\",void 0),o([t({constructOnly:!0,nonNullable:!0})],i.prototype,\"analysis\",void 0),o([t()],i.prototype,\"tool\",void 0),o([t({readOnly:!0})],i.prototype,\"results\",null),o([t()],i.prototype,\"selectedDimension\",void 0),o([t()],i.prototype,\"interactive\",void 0),o([t()],i.prototype,\"visible\",void 0),i=o([s(\"esri.views.analysis.DimensionAnalysisView\")],i),i};export{r as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Accessor.js\";import o from\"../../../core/Collection.js\";import t from\"../../../core/Logger.js\";import{abortMaybe as e,destroyMaybe as n}from\"../../../core/maybe.js\";import{on as r}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{AnalysisView3D as m}from\"./AnalysisView3D.js\";import{DimensionController as p}from\"./Dimension/DimensionController.js\";import{DimensionTool as d}from\"./Dimension/DimensionTool.js\";import{DimensionVisualization as c}from\"./Dimension/DimensionVisualization.js\";import{LengthDimensionComputation as u}from\"./Dimension/LengthDimensionComputation.js\";import{applyProjectionAndElevationAlignment as h,logFailedGeometryProjectionError as y}from\"./support/projectionUtils.js\";import{connectAnalysisViewToTool as _,removeAnalysisViewTool as D,activateAnalysisViewTool as f}from\"../../analysis/analysisViewUtils.js\";import j from\"../../analysis/DimensionAnalysisView.js\";let v=class extends(j(m(s))){constructor(i){super(i),this.type=\"dimension-view-3d\",this.tool=null,this.computations=new o,this.selectedDimension=null,this._dimensionsToComputations=new Map,this._placementTask=null,this._projectAndAlignPoint=null}initialize(){this._projectAndAlignPoint=i=>{if(null==i)return null;const{spatialReference:s,elevationProvider:o}=this.view,e=h(i,s,o);return null==e&&y(this.analysis,i.spatialReference,t.getLogger(this)),e},this.addHandles([_(this,d),r((()=>this.analysis.dimensions),\"after-add\",(i=>this._onDimensionAdd(i.item)),{onListenerAdd:i=>{for(const s of i)this._onDimensionAdd(s)},onListenerRemove:()=>{this._onDimensionsClear()}}),r((()=>this.analysis.dimensions),\"after-remove\",(i=>this._onDimensionRemove(i.item)))]),this._analysisVisualization=new c({analysisViewData:this,view:this.view}),this._analysisController=new p({analysisViewData:this,view:this.view})}destroy(){this._placementTask=e(this._placementTask),this._analysisVisualization=n(this._analysisVisualization),D(this)}get updating(){return this._analysisVisualization?.loadingMessages??!1}get results(){return this.analysis.dimensions.map((i=>this._dimensionsToComputations.get(i).result))}get selectedComputation(){const{selectedDimension:i}=this;return null==i?null:this._dimensionsToComputations.get(i)}get testInfo(){return{visualization:this._analysisVisualization,controller:this._analysisController}}async createLengthDimensions(i){return this.selectedDimension=null,this._placementTask=e(this._placementTask),this._placementTask=f(this,i),this._placementTask.promise}_onDimensionAdd(i){const{computations:s,_dimensionsToComputations:o}=this;if(o.has(i))return;const t=new u({dimension:i,projectAndAlignPoint:this._projectAndAlignPoint});s.add(t),o.set(i,t)}_onDimensionRemove(i){const{computations:s,_dimensionsToComputations:o}=this,t=s.findIndex((s=>s.dimension===i)),e=s.at(t);e.dimension===this.selectedDimension&&(this.selectedDimension=null),s.removeAt(t),o.delete(i),n(e)}_onDimensionsClear(){this.computations.drain((i=>i.destroy())),this._dimensionsToComputations.clear()}};i([a({readOnly:!0})],v.prototype,\"type\",void 0),i([a()],v.prototype,\"tool\",void 0),i([a()],v.prototype,\"updating\",null),i([a({readOnly:!0})],v.prototype,\"results\",null),i([a({readOnly:!0})],v.prototype,\"computations\",void 0),i([a()],v.prototype,\"selectedDimension\",void 0),i([a()],v.prototype,\"selectedComputation\",null),i([a()],v.prototype,\"_analysisVisualization\",void 0),i([a()],v.prototype,\"_analysisController\",void 0),i([a()],v.prototype,\"_dimensionsToComputations\",void 0),i([a()],v.prototype,\"_placementTask\",void 0),v=i([l(\"esri.views.3d.analysis.DimensionAnalysisView3D\")],v);const g=v;export{g as default};\n"],
  "mappings": "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",
  "names": ["a", "z", "n", "t", "r", "H", "V", "x", "x", "t", "r", "e", "i", "D", "a", "D", "n", "r", "l", "u", "s", "i", "f", "p", "a", "U", "S", "o", "b", "h", "H", "V", "T", "n", "o", "a", "s", "d", "c", "x", "l", "t", "f", "w", "e", "r", "i", "C", "b", "I", "u", "B", "L", "H", "z", "k", "U", "M", "V", "p", "D", "P", "F", "O", "g", "v", "y", "E", "h", "j", "q", "Z", "G", "J", "N", "W", "X", "$", "g", "t", "e", "s", "l", "w", "o", "W", "j", "X", "i", "C", "T", "y", "a", "o", "i", "n", "h", "r", "e", "c", "u", "a", "l", "d", "e", "t", "n", "r", "T", "h", "d", "o", "i", "U", "a", "s", "c", "m", "p", "u", "R", "A", "l", "F", "x", "$", "C", "w", "f", "g", "D", "I", "Z", "G", "P", "J", "t", "r", "e", "i", "u", "f", "n", "P", "p", "e", "t", "g", "s", "W", "u", "d", "f", "Z", "v", "G", "y", "S", "A", "R", "z", "j", "x", "n", "i", "o", "r", "a", "l", "c", "m", "G", "t", "e", "d", "n", "r", "V", "o", "T", "c", "h", "a", "s", "S", "b", "y", "x", "j", "m", "i", "p", "P", "g", "v", "O", "l", "M", "x", "t", "e", "n", "r", "o", "a", "s", "i", "l", "S", "V", "k", "v", "c", "O", "d", "h", "E", "m", "P", "A", "M", "o", "l", "y", "a", "e", "h", "p", "o", "s", "n", "i", "t", "r", "s", "t", "i", "n", "s", "e", "r", "i", "o", "t", "r", "a", "p", "h", "u", "i", "o", "n", "s", "t", "O", "r", "e", "n", "t", "o", "R", "y", "p", "b", "l", "A", "H", "a", "s", "d", "u", "z", "v", "h", "E", "x", "c", "P", "i", "G", "V", "f", "o", "n", "r", "s", "i", "l", "t", "p", "e", "c", "u", "m", "_", "a", "e", "o", "t", "r", "i", "s", "c", "l", "d", "m", "n", "v", "e", "r", "y", "a", "p", "p", "e", "V", "y", "a", "l", "a", "s", "l", "p", "t", "V", "e", "o", "t", "e", "i", "r", "s", "n", "h", "c", "M", "n", "e", "t", "r", "s", "o", "a", "i", "u", "c", "l", "H", "A", "P", "b", "I", "p", "R", "y", "V", "G", "E", "g", "h", "e", "t", "p", "s", "r", "u", "b", "r", "t", "e", "o", "a", "I", "n", "c", "h", "t", "s", "i", "o", "n", "p", "a", "u", "b", "l", "g", "e", "d", "f", "m", "c", "r", "H", "v", "g", "t", "i", "f", "o", "d", "h", "p", "e", "I", "l", "n", "c", "r", "f", "h", "e", "t", "r", "s", "o", "l", "c", "u", "b", "d", "g", "m", "v", "E", "L", "i", "n", "a", "p", "x", "V", "h", "e", "t", "i", "s", "r", "n", "o", "u", "b", "a", "p", "c", "g", "S", "j", "k", "C", "v", "w", "T", "F", "l", "d", "A", "h", "t", "r", "a", "e", "m", "v", "l", "n", "c", "s", "l", "h", "e", "t", "i", "s", "r", "o", "p", "a", "d", "c", "n", "f", "g", "A", "u", "m", "v", "x", "j", "y", "w", "b", "h", "s", "V", "f", "l", "o", "t", "i", "r", "u", "y", "a", "i", "p", "h", "M", "r", "t", "n", "s", "o", "Z", "P", "n", "e", "l", "i", "T", "t", "p", "E", "s", "r", "a", "o", "d", "h", "c", "u", "I", "w", "f", "b", "y", "i", "a", "n", "e", "o", "s", "t", "p", "r", "P", "M", "e", "f", "o", "r", "l", "u", "c", "p", "U", "y", "Z", "j", "z", "T", "e", "k", "d", "w", "I", "n", "t", "m", "g", "S", "b", "a", "s", "x", "v", "P", "C", "h", "i", "F", "p", "t", "s", "o", "r", "n", "e", "F", "y", "a", "t", "e", "_", "p", "w", "O", "i", "a", "h", "u", "d", "o", "n", "c", "l", "x", "s", "f", "P", "r", "m", "$", "B", "g", "C", "v", "y", "g", "e", "S", "a", "d", "A", "t", "o", "l", "f", "c", "i", "y", "h", "a", "e", "t", "o", "r", "i", "q", "v", "y", "v", "e", "t", "s", "f", "i", "m", "o", "r", "d", "c", "p", "y", "h", "u", "g", "l", "H", "b", "z", "O", "n", "_", "N", "S", "k", "v", "e", "s", "l", "o", "h", "i", "u", "d", "L", "t", "f", "a", "y", "t", "s", "y", "a", "c", "l", "t", "o", "e", "c", "y", "a", "r", "i", "o", "V", "y", "a", "v", "r", "s", "i", "V", "o", "e", "t", "a", "S", "g", "l", "y"]
}
