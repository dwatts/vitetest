{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/TiledLayerView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{whenOnce as i}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{updatingProgress as l,updatingProgressValue as s}from\"../support/updatingProperties.js\";import{checkIfTileInfoSupportedForView as n}from\"../terrain/terrainUtils.js\";const o=o=>{let c=class extends o{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataScaleRange(){const e=this.tileInfo.lods;let t=e[0].scale,i=e[e.length-1].scale;if(\"tilemapCache\"in this.layer&&this.layer.tilemapCache){const{effectiveMinLOD:e,effectiveMaxLOD:r}=this.layer.tilemapCache;t=this.tileInfo.lodAt(e).scale,i=this.tileInfo.lodAt(r).scale}return{minScale:t,maxScale:i}}get dataLevelRange(){const{minScale:e,maxScale:t}=this.dataScaleRange;return this.levelRangeFromScaleRange(e,t)}get displayLevelRange(){const e=this.layer.minScale||this.dataScaleRange.minScale,t=this.layer.maxScale||this.dataScaleRange.maxScale,i=this.levelRangeFromScaleRange(e,t);return this.layer.maxScale&&i.maxLevel++,i}getTileUrl(e,t,i){return this.layer.getTileUrl(e,t,i)}_addTilingSchemeMatchPromise(){if(null==this.fullExtent)return this.addResolvingPromise(Promise.reject(new t(\"tilingscheme:extent-not-defined\",\"This layer doesn't define a fullExtent.\")));const e=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if(null!=e)return this.addResolvingPromise(Promise.reject(e));const r=i((()=>this.view?.basemapTerrain?.tilingSchemeLocked)).then((()=>{const e=this.view.basemapTerrain.tilingScheme,t=this._getTileInfoCompatibilityError(this.tileInfo,e);if(t)throw t}));this.addResolvingPromise(r)}_getTileInfoSupportError(e,i){const r=n(e,i,this.view.spatialReference,this.view.state.viewingMode);if(r){const e={layer:this.layer,error:r};let i;switch(r.name){case\"tilingscheme:spatial-reference-mismatch\":case\"tilingscheme:global-unsupported-spatial-reference\":case\"tilingscheme:local-unsupported-spatial-reference\":i=new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",e);break;default:i=new t(\"layerview:tiling-scheme-unsupported\",\"The tiling scheme of this layer is not supported by SceneView\",e)}return i}return null}_getTileInfoCompatibilityError(e,i){return null!=e&&i.compatibleWith(e)?null:new t(\"layerview:tiling-scheme-incompatible\",\"The tiling scheme of this layer is incompatible with the tiling scheme of the surface\")}levelRangeFromScaleRange(e,t){const i={minLevel:0,maxLevel:1/0},r=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!r)return i;const a=r.levels[0],l=e=>{const t=Math.log(a.scale/e)/Math.LN2;return.5-Math.abs(.5-t%1)<1e-9?Math.round(t):Math.ceil(t)};return null!=e&&e>0&&(i.minLevel=Math.max(0,l(e))),null!=t&&t>0&&(i.maxLevel=Math.max(0,l(t))),i}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return e([r({readOnly:!0})],c.prototype,\"imageFormatIsOpaque\",null),e([r({readOnly:!0})],c.prototype,\"updating\",void 0),e([r(l)],c.prototype,\"updatingProgress\",void 0),e([r(s)],c.prototype,\"updatingProgressValue\",void 0),e([r()],c.prototype,\"fullExtent\",null),e([r({readOnly:!0})],c.prototype,\"isOpaque\",null),e([r()],c.prototype,\"dataScaleRange\",null),e([r({readOnly:!0})],c.prototype,\"dataLevelRange\",null),e([r({readOnly:!0})],c.prototype,\"displayLevelRange\",null),e([r()],c.prototype,\"layer\",void 0),e([r()],c.prototype,\"tileInfo\",void 0),c=e([a(\"esri.views.3d.layers.TiledLayerView3D\")],c),c};export{o as TiledLayerView3D};\n"],
  "mappings": "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",
  "names": ["o", "e", "t", "i", "a"]
}
