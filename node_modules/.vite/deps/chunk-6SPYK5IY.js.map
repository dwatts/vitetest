{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js", "../../@arcgis/core/core/maybeUpdating.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Logger.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=t=>{let p=class extends t{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&e.getLogger(this).error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&e.getLogger(this).error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer||!this.i3slayer.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return e.getLogger(this).error(\"definitionExpression is using non standard function\"),null;const i=[],s=r.fieldNames;return n(s,this.i3slayer.fields,{missingFields:i}),i.length>0?(e.getLogger(this).error(`definitionExpression references unknown fields: ${i.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return e.getLogger(this).error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i()],p.prototype,\"i3slayer\",void 0),r([i({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{t as DefinitionExpressionSceneLayerView};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nconst n=\"updating\";function t(n){return\"updating\"===n?null:n}function u(n){return\"updating\"===n}export{u as isUpdating,t as unwrapUpdating,n as updating};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAIkgB,IAAM,IAAE,CAAAA,OAAG;AAAC,MAAI,IAAE,cAAcA,GAAC;AAAA,IAAC,cAAa;AAAC,YAAM,GAAG,SAAS,GAAE,KAAK,8BAA4B,GAAE,KAAK,iCAA+B,IAAG,KAAK,WAAS,OAAG;AAAC,aAAK,8BAA4B,KAAK,kCAAgC,EAAE,UAAU,IAAI,EAAE,MAAM,kDAAgD,CAAC,GAAE,KAAK,+BAA8B,KAAK,gCAA8B,KAAK,kCAAgC,EAAE,UAAU,IAAI,EAAE,MAAM,4BAA4B;AAAA,MAAC;AAAA,IAAC;AAAA,IAAC,IAAI,6BAA4B;AAAC,UAAG,CAAC,KAAK,YAAU,CAAC,KAAK,SAAS;AAAqB,eAAO;AAAK,UAAG;AAAC,cAAM,IAAE,EAAE,OAAO,KAAK,SAAS,sBAAqB,KAAK,SAAS,WAAW;AAAE,YAAG,CAAC,EAAE;AAAe,iBAAO,EAAE,UAAU,IAAI,EAAE,MAAM,qDAAqD,GAAE;AAAK,cAAM,IAAE,CAAC,GAAEC,KAAE,EAAE;AAAW,eAAO,GAAEA,IAAE,KAAK,SAAS,QAAO,EAAC,eAAc,EAAC,CAAC,GAAE,EAAE,SAAO,KAAG,EAAE,UAAU,IAAI,EAAE,MAAM,mDAAmD,EAAE,KAAK,IAAI,CAAC,EAAE,GAAE,SAAO,KAAK,8BAA4B,GAAE;AAAA,MAAE,SAAO,GAAE;AAAC,eAAO,EAAE,UAAU,IAAI,EAAE,MAAM,2CAAyC,CAAC,GAAE;AAAA,MAAI;AAAA,IAAC;AAAA,IAAC,IAAI,6BAA4B;AAAC,aAAO,KAAK,6BAA2B,KAAK,2BAA2B,aAAW,CAAC;AAAA,IAAC;AAAA,IAAC,gBAAgB,GAAEC,IAAE;AAAC,UAAG;AAAC,eAAO,EAAE,YAAYA,EAAC;AAAA,MAAC,SAAO,GAAE;AAAC,eAAO,KAAK,SAAS,CAAC,GAAE;AAAA,MAAE;AAAA,IAAC;AAAA,IAAC,gCAAgC,GAAE;AAAC,UAAG,CAAC,KAAK;AAA2B,eAAO;AAAE,YAAMA,KAAE,KAAK,SAAS,sBAAqB,IAAE,EAAE,MAAM;AAAE,aAAO,EAAE,QAAM,EAAE,QAAM,IAAIA,EAAC,UAAU,EAAE,KAAK,MAAI,EAAE,QAAMA,IAAE;AAAA,IAAC;AAAA,EAAC;AAAE,SAAO,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAE,EAAE,WAAU,8BAA6B,IAAI,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAE,EAAE,WAAU,8BAA6B,IAAI,GAAE,IAAE,EAAE,CAAC,EAAE,iEAAiE,CAAC,GAAE,CAAC,GAAE;AAAC;;;ACA9sE,IAAM,IAAE;AAAW,SAASC,GAAEC,IAAE;AAAC,SAAM,eAAaA,KAAE,OAAKA;AAAC;AAAC,SAAS,EAAEA,IAAE;AAAC,SAAM,eAAaA;AAAC;",
  "names": ["t", "s", "e", "t", "n"]
}
