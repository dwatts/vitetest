{
  "version": 3,
  "sources": ["../../@arcgis/core/geometry/support/coordinateSystem.js", "../../@arcgis/core/core/libs/gl-matrix-2/types/vec3.js", "../../@arcgis/core/views/3d/support/RenderCoordsHelper.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{c as t}from\"../../chunks/mat4.js\";import{s as e,e as n,c as o,n as r,f as u}from\"../../chunks/vec3.js\";import{c as i}from\"../../chunks/vec3f64.js\";import{getReferenceEllipsoid as s}from\"../ellipsoidUtils.js\";import a from\"../SpatialReference.js\";import{getSphericalPCPF as c}from\"../spatialReferenceEllipsoidUtils.js\";import{Axis as l}from\"./Axis.js\";import{f,b as p}from\"../../chunks/boundedPlane.js\";import{f as v,s as m}from\"../../chunks/sphere.js\";function h(t){const{value:e,operations:n}=t;return{operations:n,value:n.create(e)}}function j(t,e,n){return t.operations.setExtent(t.value,e,n.value),n}function d(t){return{operations:t,value:t.create()}}function A(t,e,n=d(t)){return n.operations=t,t.copy(e,n.value),n}function k(t){return A(m,v(0,0,0,s(t).radius))}const x=2**50;function R(){return A(p,f([0,0,0],[x,0,0],[0,x,0]))}function y(t,e){return z.operations=t,z.value=e,z}function P(t,e,n){return t.operations.axisAt(t.value,e,l.Z,n)}function S(t,e,n,o){return t.operations.axisAt(t.value,e,n,o)}function b(t,e,n){return t.operations.intersectRay(t.value,e,n)}function C(t,e){return t.operations.intersectRay(t.value,e,null)}function E(t,e,n){return t.operations.closestPoint(t.value,e,n)}function U(t,e,n){return t.operations.intersectRayClosestSilhouette(t.value,e,n)}function g(t,e,n){return t.operations.closestPointOnSilhouette(t.value,e,n)}function G(t,e){return t.operations.distanceToSilhouette(t.value,e)}function O(t,e){return t.operations.altitudeAt(t.value,e)}function T(t,e,n,o){return t.operations.setAltitudeAt(t.value,e,n,o)}function Z(n,o,r,u){return o!==u&&t(u,o),e(w,u[12],u[13],u[14]),T(n,w,r,w),u[12]=w[0],u[13]=w[1],u[14]=w[2],u}function q(t,e,n){return t.operations.elevate(t.value,e,n.value)}const w=i(),z={operations:null,value:null};function B(t,e,o,r,u){return u[0]=n(t,e),u[1]=n(t,o),u[2]=n(t,r),u}function D(t,e,n,i,s){o(n,t),o(H,e),r(H,H),u(i,H,n),u(s,i,n)}function F(t,e){return t?c(e):e.isGeographic?a.PlateCarree:e}const H=i();export{O as altitudeAt,S as axisAt,E as closestPoint,g as closestPointOnSilhouette,D as coordinateSystemFromOneAxisAndNormalVector,h as create,d as createFromOperations,k as createGlobal,R as createLocal,G as distanceToSilhouette,q as elevate,A as fromValues,b as intersectRay,U as intersectRayClosestSilhouette,C as intersectsRay,P as normalAt,F as renderSRFromViewSR,T as setAltitudeAt,Z as setAltitudeOfTransformation,j as setExtent,B as vectorCoordinates,y as wrap};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isFloat32Array as r,isFloat64Array as t}from\"../../../typedArrayUtil.js\";function n(t){return r(t)&&t.length>=3}function e(r){return(t(r)||Array.isArray(r))&&r.length>=3}function i(r){return n(r)||e(r)}export{i as isVec3,n as isVec3f32,e as isVec3f64};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{rad2deg as t}from\"../../../core/mathUtils.js\";import{getMetersPerUnitForSR as e,getMetersPerCartesianUnitForSR as s}from\"../../../core/unitUtils.js\";import{s as o}from\"../../../chunks/mat4.js\";import{c as i}from\"../../../chunks/vec3.js\";import{isVec3 as r}from\"../../../core/libs/gl-matrix-2/types/vec3.js\";import{projectPointToVector as n,projectVectorToVector as a,projectVectorToDehydratedPoint as m,projectVectorToPoint as c}from\"../../../geometry/projection.js\";import{Axis as l}from\"../../../geometry/support/Axis.js\";import{create as d,setExtent as p,altitudeAt as h,setAltitudeAt as u,setAltitudeOfTransformation as f,normalAt as y,axisAt as S,elevate as g,intersectRayClosestSilhouette as _,intersectRay as j,createGlobal as w,createLocal as A}from\"../../../geometry/support/coordinateSystem.js\";import{intersectRay as C}from\"../../../geometry/support/plane.js\";import{angleAroundAxis as R}from\"../../../geometry/support/vector.js\";import{sv3d as M}from\"../../../geometry/support/vectorStacks.js\";import{isDehydratedPoint as P}from\"../../../layers/graphics/dehydratedFeatureUtils.js\";import{ViewingMode as v}from\"../../ViewingMode.js\";class U{constructor(t,e,s,o){this.viewingMode=t,this.spatialReference=e,this.unitInMeters=s,this._coordinateSystem=o,this._tmpCoordinateSystem=d(o)}set extent(t){t&&p(this._coordinateSystem,t,this._coordinateSystem)}getAltitude(t){return h(this._coordinateSystem,t)}setAltitude(t,e,s=t){return u(this._coordinateSystem,s,e,t)}setAltitudeOfTransformation(t,e){f(this._coordinateSystem,e,t,e)}worldUpAtPosition(t,e){return y(this._coordinateSystem,t,e)}worldBasisAtPosition(t,e,s){return S(this._coordinateSystem,t,e,s)}basisMatrixAtPosition(t,e){const s=this.worldBasisAtPosition(t,l.X,M.get()),i=this.worldBasisAtPosition(t,l.Y,M.get()),r=this.worldBasisAtPosition(t,l.Z,M.get());return o(e,s[0],s[1],s[2],0,i[0],i[1],i[2],0,r[0],r[1],r[2],0,0,0,0,1),e}headingAtPosition(e,s){const o=this.worldUpAtPosition(e,M.get()),i=this.worldBasisAtPosition(e,l.Y,M.get()),r=R(s,i,o);return t(r)}intersectManifoldClosestSilhouette(t,e,s){return g(this._coordinateSystem,e,this._tmpCoordinateSystem),_(this._tmpCoordinateSystem,t,s),s}intersectManifold(t,e,s){g(this._coordinateSystem,e,this._tmpCoordinateSystem);const o=M.get();return j(this._tmpCoordinateSystem,t,o)?i(s,o):null}intersectInfiniteManifold(t,e,s){if(this.viewingMode===v.Global)return this.intersectManifold(t,e,s);g(this._coordinateSystem,e,this._tmpCoordinateSystem);const o=this._tmpCoordinateSystem.value,r=M.get();return C(o.plane,t,r)?i(s,r):null}toRenderCoords(t,e,s){return P(t)?n(t,e,this.spatialReference):a(t,e,s,this.spatialReference)}fromRenderCoords(t,e,s=null){return P(e)?(null!=s&&(e.spatialReference=s),m(t,this.spatialReference,e)):r(e)?a(t,this.spatialReference,e,s)?e:null:c(t,this.spatialReference,e)}static create(t,s){switch(t){case v.Local:return new U(v.Local,s,e(s),A());case v.Global:return new U(v.Global,s,1,w(s))}}static renderUnitScaleFactor(t,e){return s(t)/s(e)}}export{U as RenderCoordsHelper};\n"],
  "mappings": "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",
  "names": ["t", "e", "n", "A", "H", "P", "t", "e", "n", "o", "t", "e", "n", "t", "e", "n", "o", "r", "q", "t", "e", "o", "r", "n", "i", "s", "H", "f", "n", "t", "r", "i", "U", "t", "e", "s", "o", "P", "n", "c", "i", "r", "q"]
}
