{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/shaders/ShadowCastVisualizeTechniqueConfiguration.js", "../../@arcgis/core/chunks/ShadowCastVisualize.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../chunks/tslib.es6.js\";import{parameter as e,ShaderTechniqueConfiguration as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";var t;!function(o){o[o.Gradient=0]=\"Gradient\",o[o.Threshold=1]=\"Threshold\",o[o.COUNT=2]=\"COUNT\"}(t||(t={}));class r extends i{constructor(){super(...arguments),this.visualization=t.Gradient,this.bandsEnabled=!1}}o([e({count:t.COUNT})],r.prototype,\"visualization\",void 0),o([e()],r.prototype,\"bandsEnabled\",void 0);export{t as ShadowCastVisualization,r as ShadowCastVisualizeTechniqueConfiguration};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{d as e,f as s}from\"./vec4f64.js\";import{ScreenSpacePass as a}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadLinearDepth as r}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{CameraSpace as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";import{RgbaFloatEncoding as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float4PassUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{NoParameters as n,glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as c}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{a as h}from\"./ShadowCastAccumulate.glsl.js\";import{ShadowCastVisualization as u}from\"../views/3d/webgl-engine/shaders/ShadowCastVisualizeTechniqueConfiguration.js\";class p extends n{constructor(s){super(),this._data=s,this.sampleScale=0,this.opacityFromElevation=1,this.color=e(g),this.bandSize=.1,this.threshold=.5}get shadowCastMap(){return this._data.shadowCastTexture}}const g=s(.01,0,.25,1);function w(e){const s=new c,n=s.fragment;n.include(i),n.include(r),s.include(o),s.include(a);const{visualization:p,bandsEnabled:g}=e;n.constants.add(\"inverseSampleValue\",\"float\",h),n.uniforms.add(new m(\"shadowCastMap\",(e=>e.shadowCastMap)),new l(\"sampleScale\",(e=>e.sampleScale)),new l(\"opacityFromElevation\",(e=>e.opacityFromElevation)),new t(\"uColor\",(e=>e.color)));const w=p===u.Gradient,f=p===u.Threshold;return w&&g?n.uniforms.add(new l(\"bandSize\",(e=>e.bandSize))):f&&n.uniforms.add(new l(\"threshold\",(e=>e.threshold))),n.code.add(d`\n      void main(void) {\n        vec4 record = texture(shadowCastMap, uv);\n        float pixelSamples = record.r * inverseSampleValue;\n        if (pixelSamples < 1.0) {\n          discard;\n        }\n\n        float strength = pixelSamples * sampleScale;\n\n        ${f?d`\n            if (strength <= threshold) {\n              discard;\n            }`:\"\"}\n\n        ${w&&g?d`strength = ceil(strength / bandSize) * bandSize;`:\"\"}\n\n        fragColor = vec4(uColor.xyz, uColor.a * opacityFromElevation ${w?d`* strength`:\"\"});\n      }\n    `),s}const f=Object.freeze(Object.defineProperty({__proto__:null,ShadowCastVisualizePassParameters:p,build:w},Symbol.toStringTag,{value:\"Module\"}));export{p as S,f as a,w as b};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAI0K,IAAIA;AAAE,CAAC,SAASC,IAAE;AAAC,EAAAA,GAAEA,GAAE,WAAS,CAAC,IAAE,YAAWA,GAAEA,GAAE,YAAU,CAAC,IAAE,aAAYA,GAAEA,GAAE,QAAM,CAAC,IAAE;AAAO,EAAED,OAAIA,KAAE,CAAC,EAAE;AAAE,IAAME,KAAN,cAAgBF,GAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,gBAAcA,GAAE,UAAS,KAAK,eAAa;AAAA,EAAE;AAAC;AAAC,EAAE,CAACE,GAAE,EAAC,OAAMF,GAAE,MAAK,CAAC,CAAC,GAAEE,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAACA,GAAE,CAAC,GAAEA,GAAE,WAAU,gBAAe,MAAM;;;ACAyoB,IAAM,IAAN,cAAgB,EAAC;AAAA,EAAC,YAAYC,IAAE;AAAC,UAAM,GAAE,KAAK,QAAMA,IAAE,KAAK,cAAY,GAAE,KAAK,uBAAqB,GAAE,KAAK,QAAM,EAAE,CAAC,GAAE,KAAK,WAAS,KAAG,KAAK,YAAU;AAAA,EAAE;AAAA,EAAC,IAAI,gBAAe;AAAC,WAAO,KAAK,MAAM;AAAA,EAAiB;AAAC;AAAC,IAAM,IAAE,EAAE,MAAI,GAAE,MAAI,CAAC;AAAE,SAAS,EAAEC,IAAE;AAAC,QAAMD,KAAE,IAAI,KAAEE,KAAEF,GAAE;AAAS,EAAAE,GAAE,QAAQ,CAAC,GAAEA,GAAE,QAAQC,EAAC,GAAEH,GAAE,QAAQE,EAAC,GAAEF,GAAE,QAAQI,EAAC;AAAE,QAAK,EAAC,eAAcC,IAAE,cAAaC,GAAC,IAAEL;AAAE,EAAAC,GAAE,UAAU,IAAI,sBAAqB,SAAQ,CAAC,GAAEA,GAAE,SAAS,IAAI,IAAI,EAAE,iBAAiB,CAAAD,OAAGA,GAAE,aAAc,GAAE,IAAIG,GAAE,eAAe,CAAAH,OAAGA,GAAE,WAAY,GAAE,IAAIG,GAAE,wBAAwB,CAAAH,OAAGA,GAAE,oBAAqB,GAAE,IAAIA,GAAE,UAAU,CAAAA,OAAGA,GAAE,KAAM,CAAC;AAAE,QAAMM,KAAEF,OAAIG,GAAE,UAASC,KAAEJ,OAAIG,GAAE;AAAU,SAAOD,MAAGD,KAAEJ,GAAE,SAAS,IAAI,IAAIE,GAAE,YAAY,CAAAH,OAAGA,GAAE,QAAS,CAAC,IAAEQ,MAAGP,GAAE,SAAS,IAAI,IAAIE,GAAE,aAAa,CAAAH,OAAGA,GAAE,SAAU,CAAC,GAAEC,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAUl2DO,KAAE;AAAA;AAAA;AAAA,iBAGG,EAAE;AAAA;AAAA,UAEPF,MAAGD,KAAE,sDAAoD,EAAE;AAAA;AAAA,uEAEEC,KAAE,gBAAc,EAAE;AAAA;AAAA,KAEpF,GAAEP;AAAC;AAAC,IAAM,IAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,mCAAkC,GAAE,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["t", "o", "r", "s", "e", "n", "a", "o", "p", "g", "w", "t", "f"]
}
