{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/interactive/visualElements/VisualElementResources.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{watch as e,initial as s}from\"../../../../core/reactiveUtils.js\";import{ContentObjectType as r}from\"../../webgl-engine/lib/ContentObjectType.js\";import{Object3D as t}from\"../../webgl-engine/lib/Object3D.js\";import{Texture as o}from\"../../webgl-engine/lib/Texture.js\";import{UpdatePolicy as i}from\"../../webgl-engine/lib/UpdatePolicy.js\";import{WebGLLayer as c}from\"../../webgl-engine/lib/WebGLLayer.js\";class a{constructor(e){this._resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1}destroy(){this._destroyResources()}get object(){return null!=this._resources?this._resources.object:null}get resources(){return null!=this._resources?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncVisible())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}recreate(){this.attached&&this._createResources()}recreateGeometry(){if(!this._resourceFactory.recreateGeometry)return void this.recreate();const e=this._resourceFactory.view._stage;if(null==this._resources||!e)return;const s=this._resources.object;this._resources.external.forEach((s=>{s.type!==r.Mesh&&s.type!==r.Line&&s.type!==r.Point||e.remove(s)})),s.removeAllGeometries(),this._resourceFactory.recreateGeometry(this._resources.external,s,this._resources.layer),this._resources.external.forEach((s=>{s.type!==r.Mesh&&s.type!==r.Line&&s.type!==r.Point||e.add(s)}))}_createOrDestroyResources(){this._attached?this._resources||this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const r=this._resourceFactory,a=r.view,h=a._stage;if(!h)return;const u=new c(h,{pickable:!1,updatePolicy:i.SYNC}),l=new t({castShadow:!1}),n=r.createResources(l,u);n.forEach((e=>{h.add(e),e instanceof o&&h.loadImmediate(e)})),h.add(l),u.add(l);const _=r.cameraChanged,y=_?e((()=>a.state.camera),(e=>_(e)),s):null;this._resources={layer:u,object:l,external:n,cameraHandle:y},this._syncVisible()}_destroyResources(){if(null==this._resources)return;const e=this._resourceFactory.view._stage;e&&(e.remove(this._resources.object),this._resources.layer.destroy(),this._resources.external.forEach((s=>e.remove(s)))),this._resources.object.dispose(),this._resources.cameraHandle?.remove(),this._resourceFactory.destroyResources(this._resources.external),this._resources=null}_syncVisible(){null!=this._resources&&(this._resources.object.visible=this._visible)}}export{a as VisualElementResources};\n"],
  "mappings": "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",
  "names": ["e", "s", "a", "h", "l", "_a"]
}
