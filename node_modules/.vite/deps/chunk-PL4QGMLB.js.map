{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/graphics/elevationAlignPointsInFeatures.js", "../../@arcgis/core/views/3d/layers/graphics/queryForSymbologySnapping.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../../../geometry.js\";import{throwIfAborted as e}from\"../../../../core/promiseUtils.js\";import{makeDehydratedPoint as o}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{getGeometryEffectiveElevationInfo as t}from\"../../../../support/elevationInfoUtils.js\";import{evaluateElevationInfoAtPoint as r,SampleElevationInfo as n}from\"./elevationAlignmentUtils.js\";import{ElevationContext as s}from\"./ElevationContext.js\";import{extractExpressionInfo as i,createContext as a}from\"./featureExpressionInfoUtils.js\";import p from\"../../../../geometry/SpatialReference.js\";async function f(o,n,s,p,f){const{elevationProvider:d,renderCoordsHelper:j,spatialReference:u}=o,{elevationInfo:v}=n,y=i(v,!0),I=await a(y,u,f);e(f);const g=[],x=new Set,h=new Set;for(const{objectId:e,points:i}of p){const a=s(e);if(null==a){for(const e of i)g.push(e.z??0);x.add(e);continue}a.isDraped&&h.add(e);const p=a.graphic.geometry;c.setFromElevationInfo(t(p,v)),c.updateFeatureExpressionInfoContext(I,a.graphic,n),l.spatialReference=o.spatialReference;for(const{x:e,y:o,z:t}of i)l.x=e,l.y=o,l.z=t??0,r(l,d,c,j,m),g.push(m.z)}return{elevations:g,drapedObjectIds:h,failedObjectIds:x}}const c=new s,l=o(0,0,0,p.WGS84),m=new n;export{f as elevationAlignPointsInFeatures};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as n}from\"../../../../core/promiseUtils.js\";import{loadArcade as e}from\"../../../../support/arcadeOnDemand.js\";async function r(r,a,s){if(null==r||0===a.candidates.length)return t;const i=r.graphics3DGraphicsByObjectID??r.graphics3DGraphics,c=[],o=[],{renderer:d}=r,p=null!=d&&\"arcadeRequired\"in d&&d.arcadeRequired?e():null,l=async(n,{graphic:e,graphics3DSymbol:t})=>{const a=await p,i=await r.getRenderingInfoAsync(e,d,a,{signal:s});return null==i?[]:t.queryForSnapping(n,g,i,s)},{candidates:u,spatialReference:g}=a;for(let n=0;n<u.length;++n){const e=u[n],{objectId:r}=e,t=\"number\"==typeof r?i?.get(r):void 0;if(null==t)continue;const{graphics3DSymbol:a}=t;a.symbologySnappingSupported&&(c.push(l(e,t)),o.push(n))}if(0===c.length)return t;const h=await Promise.all(c);n(s);const f=[],m=[];for(let n=0;n<h.length;++n){const e=h[n],r=o[n];for(const n of e)f.push(n),m.push(r)}return{candidates:f,sourceCandidateIndices:m}}const t={candidates:[],sourceCandidateIndices:[]};export{r as queryForSymbologySnapping};\n"],
  "mappings": "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",
  "names": ["f", "o", "s", "d", "u", "i", "a", "e", "p", "c", "t", "r", "a", "s", "i", "c", "o", "d", "l", "t", "u", "f", "m", "n"]
}
