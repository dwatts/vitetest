{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js", "../../@arcgis/core/views/3d/terrain/Overlay.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{f as s}from\"../../../../chunks/vec3f64.js\";class t{constructor(s,t){this.vec3=s,this.id=t}}function c(c,r,n,o){return new t(s(c,r,n),o)}export{t as LocalOrigin,c as fromValues};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{create as e,offset as t,copy as r}from\"../../../geometry/support/aaBoundingRect.js\";import{RenderTargetType as s,OverlayIndex as i}from\"./interfaces.js\";import{ValidationState as a}from\"../webgl-engine/lib/basicInterfaces.js\";import{fromValues as o}from\"../webgl-engine/lib/LocalOriginFactory.js\";var n;!function(e){e[e.None=0]=\"None\",e[e.ColorAndWater=1]=\"ColorAndWater\",e[e.Highlight=2]=\"Highlight\",e[e.Occluded=3]=\"Occluded\",e[e.ObjectAndLayerIdColor=4]=\"ObjectAndLayerIdColor\"}(n||(n={}));const h=1.3;class g{get extent(){return this._extent}constructor(t,r){this.index=t,this.renderTargets=r,this._extent=e(),this.resolution=0,this.renderLocalOrigin=o(0,0,0,\"O\"),this.pixelRatio=1,this.mapUnitsPerPixel=1,this.canvasGeometries=new l,this.hasDrapedFeatureSource=!1,this.hasDrapedRasterSource=!1,this.hasTargetWithoutRasterImage=!1,this.index=t,this.validTargets=new Array(r.renderTargets.length).fill(!1)}getValidTexture(e){return this.validTargets[e]?this.renderTargets.getTarget(e).getTexture():null}get _needsColorWithoutRasterImage(){return this.hasDrapedRasterSource&&this.hasDrapedFeatureSource&&this.hasTargetWithoutRasterImage}getColorTexture(e){const t=e===n.ColorAndWater?this.renderTargets.getTarget(s.Color):e===n.Highlight?this.renderTargets.getTarget(s.Highlight):e===n.ObjectAndLayerIdColor?this.renderTargets.getTarget(s.ObjectAndLayerIdColor):this.renderTargets.getTarget(s.Occluded);return t?t.getTexture():null}getColorTextureNoRasterImage(){return this._needsColorWithoutRasterImage?this.getValidTexture(s.ColorNoRasterImage):this.hasDrapedFeatureSource?this.getValidTexture(s.Color):null}getNormalTexture(e){const t=e===n.ColorAndWater?this.renderTargets.getTarget(s.Water):null;return t?t.getTexture():null}draw(e,t){const r=this.computeRenderTargetValidityBitfield();for(const i of this.renderTargets.renderTargets)i.type!==s.ColorNoRasterImage||this._needsColorWithoutRasterImage?this.validTargets[i.type]=e.drawTarget(this,i,t):this.validTargets[i.type]=!1;return r^this.computeRenderTargetValidityBitfield()?a.CHANGED:a.UNCHANGED}computeRenderTargetValidityBitfield(){const e=this.validTargets;return+e[s.Color]|+e[s.ColorNoRasterImage]<<1|+e[s.Highlight]<<2|+e[s.Water]<<3|+e[s.Occluded]<<4}setupGeometryViewsCyclical(e){this.setupGeometryViewsDirect();const r=.001*e.range;if(this._extent[0]-r<=e.min){const r=this.canvasGeometries.extents[this.canvasGeometries.numViews++];t(this._extent,e.range,0,r)}if(this._extent[2]+r>=e.max){const r=this.canvasGeometries.extents[this.canvasGeometries.numViews++];t(this._extent,-e.range,0,r)}}setupGeometryViewsDirect(){this.canvasGeometries.numViews=1,r(this.canvasGeometries.extents[0],this._extent)}hasSomeSizedView(){for(let e=0;e<this.canvasGeometries.numViews;e++){const t=this.canvasGeometries.extents[e];if(t[0]!==t[2]&&t[1]!==t[3])return!0}return!1}applyViewport(e){e.setViewport(this.index===i.INNER?0:this.resolution,0,this.resolution,this.resolution)}}class l{constructor(){this.extents=[e(),e(),e()],this.numViews=0}}export{g as Overlay,n as OverlaySource,h as OverlayStretch};\n"],
  "mappings": "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",
  "names": ["t", "c", "r", "n", "e", "t", "r", "i"]
}
