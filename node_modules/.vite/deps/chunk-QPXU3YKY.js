import {
  j
} from "./chunk-43LWRDQS.js";
import {
  s3 as s
} from "./chunk-HMVAPW5X.js";

// node_modules/@arcgis/core/layers/support/I3SIndexInfo.js
async function r(r2, n, t, s2, a, i) {
  let l = null;
  if (null != t) {
    const o = `${r2}/nodepages/`, n2 = o + Math.floor(t.rootIndex / t.nodesPerPage);
    try {
      return { type: "page", rootPage: (await j(n2, { query: { f: "json", token: s2 }, responseType: "json", signal: i })).data, rootIndex: t.rootIndex, pageSize: t.nodesPerPage, lodMetric: t.lodSelectionMetricType, urlPrefix: o };
    } catch (c) {
      null != a && a.warn("#fetchIndexInfo()", "Failed to load root node page. Falling back to node documents.", n2, c), l = c;
    }
  }
  if (!n)
    return null;
  const d = `${r2}/nodes/`, p = d + (n && n.split("/").pop());
  try {
    return { type: "node", rootNode: (await j(p, { query: { f: "json", token: s2 }, responseType: "json", signal: i })).data, urlPrefix: d };
  } catch (c) {
    throw new s("sceneservice:root-node-missing", "Root node missing.", { pageError: l, nodeError: c, url: p });
  }
}

export {
  r
};
//# sourceMappingURL=chunk-QPXU3YKY.js.map
